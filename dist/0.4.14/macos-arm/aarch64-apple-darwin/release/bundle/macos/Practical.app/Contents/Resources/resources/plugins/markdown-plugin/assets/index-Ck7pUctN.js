(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerPolicy&&(a.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?a.credentials="include":l.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(l){if(l.ep)return;l.ep=!0;const a=t(l);fetch(l.href,a)}})();function ig(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var op={exports:{}},Za={};var YS;function MN(){if(YS)return Za;YS=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,l,a){var o=null;if(a!==void 0&&(o=""+a),l.key!==void 0&&(o=""+l.key),"key"in l){a={};for(var c in l)c!=="key"&&(a[c]=l[c])}else a=l;return l=a.ref,{$$typeof:n,type:i,key:o,ref:l!==void 0?l:null,props:a}}return Za.Fragment=e,Za.jsx=t,Za.jsxs=t,Za}var GS;function EN(){return GS||(GS=1,op.exports=MN()),op.exports}var ri=EN(),up={exports:{}},xe={};var QS;function NN(){if(QS)return xe;QS=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),b=Symbol.iterator;function S(A){return A===null||typeof A!="object"?null:(A=b&&A[b]||A["@@iterator"],typeof A=="function"?A:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,M={};function T(A,V,w){this.props=A,this.context=V,this.refs=M,this.updater=w||x}T.prototype.isReactComponent={},T.prototype.setState=function(A,V){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,V,"setState")},T.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function Q(){}Q.prototype=T.prototype;function L(A,V,w){this.props=A,this.context=V,this.refs=M,this.updater=w||x}var P=L.prototype=new Q;P.constructor=L,v(P,T.prototype),P.isPureReactComponent=!0;var ee=Array.isArray;function z(){}var Y={H:null,A:null,T:null,S:null},ne=Object.prototype.hasOwnProperty;function ue(A,V,w){var te=w.ref;return{$$typeof:n,type:A,key:V,ref:te!==void 0?te:null,props:w}}function H(A,V){return ue(A.type,V,A.props)}function re(A){return typeof A=="object"&&A!==null&&A.$$typeof===n}function ie(A){var V={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(w){return V[w]})}var Ie=/\/+/g;function Ve(A,V){return typeof A=="object"&&A!==null&&A.key!=null?ie(""+A.key):V.toString(36)}function ke(A){switch(A.status){case"fulfilled":return A.value;case"rejected":throw A.reason;default:switch(typeof A.status=="string"?A.then(z,z):(A.status="pending",A.then(function(V){A.status==="pending"&&(A.status="fulfilled",A.value=V)},function(V){A.status==="pending"&&(A.status="rejected",A.reason=V)})),A.status){case"fulfilled":return A.value;case"rejected":throw A.reason}}throw A}function q(A,V,w,te,me){var fe=typeof A;(fe==="undefined"||fe==="boolean")&&(A=null);var ze=!1;if(A===null)ze=!0;else switch(fe){case"bigint":case"string":case"number":ze=!0;break;case"object":switch(A.$$typeof){case n:case e:ze=!0;break;case p:return ze=A._init,q(ze(A._payload),V,w,te,me)}}if(ze)return me=me(A),ze=te===""?"."+Ve(A,0):te,ee(me)?(w="",ze!=null&&(w=ze.replace(Ie,"$&/")+"/"),q(me,V,w,"",function(zn){return zn})):me!=null&&(re(me)&&(me=H(me,w+(me.key==null||A&&A.key===me.key?"":(""+me.key).replace(Ie,"$&/")+"/")+ze)),V.push(me)),1;ze=0;var at=te===""?".":te+":";if(ee(A))for(var Ze=0;Ze<A.length;Ze++)te=A[Ze],fe=at+Ve(te,Ze),ze+=q(te,V,w,fe,me);else if(Ze=S(A),typeof Ze=="function")for(A=Ze.call(A),Ze=0;!(te=A.next()).done;)te=te.value,fe=at+Ve(te,Ze++),ze+=q(te,V,w,fe,me);else if(fe==="object"){if(typeof A.then=="function")return q(ke(A),V,w,te,me);throw V=String(A),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return ze}function J(A,V,w){if(A==null)return A;var te=[],me=0;return q(A,te,"","",function(fe){return V.call(w,fe,me++)}),te}function oe(A){if(A._status===-1){var V=A._result;V=V(),V.then(function(w){(A._status===0||A._status===-1)&&(A._status=1,A._result=w)},function(w){(A._status===0||A._status===-1)&&(A._status=2,A._result=w)}),A._status===-1&&(A._status=0,A._result=V)}if(A._status===1)return A._result.default;throw A._result}var Ee=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)},E={map:J,forEach:function(A,V,w){J(A,function(){V.apply(this,arguments)},w)},count:function(A){var V=0;return J(A,function(){V++}),V},toArray:function(A){return J(A,function(V){return V})||[]},only:function(A){if(!re(A))throw Error("React.Children.only expected to receive a single React element child.");return A}};return xe.Activity=g,xe.Children=E,xe.Component=T,xe.Fragment=t,xe.Profiler=l,xe.PureComponent=L,xe.StrictMode=i,xe.Suspense=f,xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Y,xe.__COMPILER_RUNTIME={__proto__:null,c:function(A){return Y.H.useMemoCache(A)}},xe.cache=function(A){return function(){return A.apply(null,arguments)}},xe.cacheSignal=function(){return null},xe.cloneElement=function(A,V,w){if(A==null)throw Error("The argument must be a React element, but you passed "+A+".");var te=v({},A.props),me=A.key;if(V!=null)for(fe in V.key!==void 0&&(me=""+V.key),V)!ne.call(V,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&V.ref===void 0||(te[fe]=V[fe]);var fe=arguments.length-2;if(fe===1)te.children=w;else if(1<fe){for(var ze=Array(fe),at=0;at<fe;at++)ze[at]=arguments[at+2];te.children=ze}return ue(A.type,me,te)},xe.createContext=function(A){return A={$$typeof:o,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null},A.Provider=A,A.Consumer={$$typeof:a,_context:A},A},xe.createElement=function(A,V,w){var te,me={},fe=null;if(V!=null)for(te in V.key!==void 0&&(fe=""+V.key),V)ne.call(V,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(me[te]=V[te]);var ze=arguments.length-2;if(ze===1)me.children=w;else if(1<ze){for(var at=Array(ze),Ze=0;Ze<ze;Ze++)at[Ze]=arguments[Ze+2];me.children=at}if(A&&A.defaultProps)for(te in ze=A.defaultProps,ze)me[te]===void 0&&(me[te]=ze[te]);return ue(A,fe,me)},xe.createRef=function(){return{current:null}},xe.forwardRef=function(A){return{$$typeof:c,render:A}},xe.isValidElement=re,xe.lazy=function(A){return{$$typeof:p,_payload:{_status:-1,_result:A},_init:oe}},xe.memo=function(A,V){return{$$typeof:d,type:A,compare:V===void 0?null:V}},xe.startTransition=function(A){var V=Y.T,w={};Y.T=w;try{var te=A(),me=Y.S;me!==null&&me(w,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(z,Ee)}catch(fe){Ee(fe)}finally{V!==null&&w.types!==null&&(V.types=w.types),Y.T=V}},xe.unstable_useCacheRefresh=function(){return Y.H.useCacheRefresh()},xe.use=function(A){return Y.H.use(A)},xe.useActionState=function(A,V,w){return Y.H.useActionState(A,V,w)},xe.useCallback=function(A,V){return Y.H.useCallback(A,V)},xe.useContext=function(A){return Y.H.useContext(A)},xe.useDebugValue=function(){},xe.useDeferredValue=function(A,V){return Y.H.useDeferredValue(A,V)},xe.useEffect=function(A,V){return Y.H.useEffect(A,V)},xe.useEffectEvent=function(A){return Y.H.useEffectEvent(A)},xe.useId=function(){return Y.H.useId()},xe.useImperativeHandle=function(A,V,w){return Y.H.useImperativeHandle(A,V,w)},xe.useInsertionEffect=function(A,V){return Y.H.useInsertionEffect(A,V)},xe.useLayoutEffect=function(A,V){return Y.H.useLayoutEffect(A,V)},xe.useMemo=function(A,V){return Y.H.useMemo(A,V)},xe.useOptimistic=function(A,V){return Y.H.useOptimistic(A,V)},xe.useReducer=function(A,V,w){return Y.H.useReducer(A,V,w)},xe.useRef=function(A){return Y.H.useRef(A)},xe.useState=function(A){return Y.H.useState(A)},xe.useSyncExternalStore=function(A,V,w){return Y.H.useSyncExternalStore(A,V,w)},xe.useTransition=function(){return Y.H.useTransition()},xe.version="19.2.0",xe}var XS;function rg(){return XS||(XS=1,up.exports=NN()),up.exports}var $t=rg();const AN=ig($t);var cp={exports:{}},$a={},fp={exports:{}},hp={};var JS;function ON(){return JS||(JS=1,(function(n){function e(q,J){var oe=q.length;q.push(J);e:for(;0<oe;){var Ee=oe-1>>>1,E=q[Ee];if(0<l(E,J))q[Ee]=J,q[oe]=E,oe=Ee;else break e}}function t(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var J=q[0],oe=q.pop();if(oe!==J){q[0]=oe;e:for(var Ee=0,E=q.length,A=E>>>1;Ee<A;){var V=2*(Ee+1)-1,w=q[V],te=V+1,me=q[te];if(0>l(w,oe))te<E&&0>l(me,w)?(q[Ee]=me,q[te]=oe,Ee=te):(q[Ee]=w,q[V]=oe,Ee=V);else if(te<E&&0>l(me,oe))q[Ee]=me,q[te]=oe,Ee=te;else break e}}return J}function l(q,J){var oe=q.sortIndex-J.sortIndex;return oe!==0?oe:q.id-J.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();n.unstable_now=function(){return o.now()-c}}var f=[],d=[],p=1,g=null,b=3,S=!1,x=!1,v=!1,M=!1,T=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function P(q){for(var J=t(d);J!==null;){if(J.callback===null)i(d);else if(J.startTime<=q)i(d),J.sortIndex=J.expirationTime,e(f,J);else break;J=t(d)}}function ee(q){if(v=!1,P(q),!x)if(t(f)!==null)x=!0,z||(z=!0,ie());else{var J=t(d);J!==null&&ke(ee,J.startTime-q)}}var z=!1,Y=-1,ne=5,ue=-1;function H(){return M?!0:!(n.unstable_now()-ue<ne)}function re(){if(M=!1,z){var q=n.unstable_now();ue=q;var J=!0;try{e:{x=!1,v&&(v=!1,Q(Y),Y=-1),S=!0;var oe=b;try{t:{for(P(q),g=t(f);g!==null&&!(g.expirationTime>q&&H());){var Ee=g.callback;if(typeof Ee=="function"){g.callback=null,b=g.priorityLevel;var E=Ee(g.expirationTime<=q);if(q=n.unstable_now(),typeof E=="function"){g.callback=E,P(q),J=!0;break t}g===t(f)&&i(f),P(q)}else i(f);g=t(f)}if(g!==null)J=!0;else{var A=t(d);A!==null&&ke(ee,A.startTime-q),J=!1}}break e}finally{g=null,b=oe,S=!1}J=void 0}}finally{J?ie():z=!1}}}var ie;if(typeof L=="function")ie=function(){L(re)};else if(typeof MessageChannel<"u"){var Ie=new MessageChannel,Ve=Ie.port2;Ie.port1.onmessage=re,ie=function(){Ve.postMessage(null)}}else ie=function(){T(re,0)};function ke(q,J){Y=T(function(){q(n.unstable_now())},J)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(q){q.callback=null},n.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ne=0<q?Math.floor(1e3/q):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(q){switch(b){case 1:case 2:case 3:var J=3;break;default:J=b}var oe=b;b=J;try{return q()}finally{b=oe}},n.unstable_requestPaint=function(){M=!0},n.unstable_runWithPriority=function(q,J){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var oe=b;b=q;try{return J()}finally{b=oe}},n.unstable_scheduleCallback=function(q,J,oe){var Ee=n.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?Ee+oe:Ee):oe=Ee,q){case 1:var E=-1;break;case 2:E=250;break;case 5:E=1073741823;break;case 4:E=1e4;break;default:E=5e3}return E=oe+E,q={id:p++,callback:J,priorityLevel:q,startTime:oe,expirationTime:E,sortIndex:-1},oe>Ee?(q.sortIndex=oe,e(d,q),t(f)===null&&q===t(d)&&(v?(Q(Y),Y=-1):v=!0,ke(ee,oe-Ee))):(q.sortIndex=E,e(f,q),x||S||(x=!0,z||(z=!0,ie()))),q},n.unstable_shouldYield=H,n.unstable_wrapCallback=function(q){var J=b;return function(){var oe=b;b=J;try{return q.apply(this,arguments)}finally{b=oe}}}})(hp)),hp}var ZS;function RN(){return ZS||(ZS=1,fp.exports=ON()),fp.exports}var dp={exports:{}},jt={};var $S;function DN(){if($S)return jt;$S=1;var n=rg();function e(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},l=Symbol.for("react.portal");function a(f,d,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:g==null?null:""+g,children:f,containerInfo:d,implementation:p}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return jt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,jt.createPortal=function(f,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return a(f,d,null,p)},jt.flushSync=function(f){var d=o.T,p=i.p;try{if(o.T=null,i.p=2,f)return f()}finally{o.T=d,i.p=p,i.d.f()}},jt.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,i.d.C(f,d))},jt.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},jt.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var p=d.as,g=c(p,d.crossOrigin),b=typeof d.integrity=="string"?d.integrity:void 0,S=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;p==="style"?i.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:g,integrity:b,fetchPriority:S}):p==="script"&&i.d.X(f,{crossOrigin:g,integrity:b,fetchPriority:S,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},jt.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var p=c(d.as,d.crossOrigin);i.d.M(f,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&i.d.M(f)},jt.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var p=d.as,g=c(p,d.crossOrigin);i.d.L(f,p,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},jt.preloadModule=function(f,d){if(typeof f=="string")if(d){var p=c(d.as,d.crossOrigin);i.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else i.d.m(f)},jt.requestFormReset=function(f){i.d.r(f)},jt.unstable_batchedUpdates=function(f,d){return f(d)},jt.useFormState=function(f,d,p){return o.H.useFormState(f,d,p)},jt.useFormStatus=function(){return o.H.useHostTransitionStatus()},jt.version="19.2.0",jt}var PS;function zN(){if(PS)return dp.exports;PS=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),dp.exports=DN(),dp.exports}var WS;function _N(){if(WS)return $a;WS=1;var n=RN(),e=rg(),t=zN();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)s+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function a(r){var s=r,u=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(u=s.return),r=s.return;while(r)}return s.tag===3?u:null}function o(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function c(r){if(r.tag===31){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function f(r){if(a(r)!==r)throw Error(i(188))}function d(r){var s=r.alternate;if(!s){if(s=a(r),s===null)throw Error(i(188));return s!==r?null:r}for(var u=r,h=s;;){var m=u.return;if(m===null)break;var y=m.alternate;if(y===null){if(h=m.return,h!==null){u=h;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===u)return f(m),r;if(y===h)return f(m),s;y=y.sibling}throw Error(i(188))}if(u.return!==h.return)u=m,h=y;else{for(var k=!1,C=m.child;C;){if(C===u){k=!0,u=m,h=y;break}if(C===h){k=!0,h=m,u=y;break}C=C.sibling}if(!k){for(C=y.child;C;){if(C===u){k=!0,u=y,h=m;break}if(C===h){k=!0,h=y,u=m;break}C=C.sibling}if(!k)throw Error(i(189))}}if(u.alternate!==h)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?r:s}function p(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=p(r),s!==null)return s;r=r.sibling}return null}var g=Object.assign,b=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),Q=Symbol.for("react.consumer"),L=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),ue=Symbol.for("react.activity"),H=Symbol.for("react.memo_cache_sentinel"),re=Symbol.iterator;function ie(r){return r===null||typeof r!="object"?null:(r=re&&r[re]||r["@@iterator"],typeof r=="function"?r:null)}var Ie=Symbol.for("react.client.reference");function Ve(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===Ie?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case v:return"Fragment";case T:return"Profiler";case M:return"StrictMode";case ee:return"Suspense";case z:return"SuspenseList";case ue:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case x:return"Portal";case L:return r.displayName||"Context";case Q:return(r._context.displayName||"Context")+".Consumer";case P:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Y:return s=r.displayName||null,s!==null?s:Ve(r.type)||"Memo";case ne:s=r._payload,r=r._init;try{return Ve(r(s))}catch{}}return null}var ke=Array.isArray,q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe={pending:!1,data:null,method:null,action:null},Ee=[],E=-1;function A(r){return{current:r}}function V(r){0>E||(r.current=Ee[E],Ee[E]=null,E--)}function w(r,s){E++,Ee[E]=r.current,r.current=s}var te=A(null),me=A(null),fe=A(null),ze=A(null);function at(r,s){switch(w(fe,s),w(me,r),w(te,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?pS(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=pS(s),r=mS(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}V(te),w(te,r)}function Ze(){V(te),V(me),V(fe)}function zn(r){r.memoizedState!==null&&w(ze,r);var s=te.current,u=mS(s,r.type);s!==u&&(w(me,r),w(te,u))}function vi(r){me.current===r&&(V(te),V(me)),ze.current===r&&(V(ze),Ga._currentValue=oe)}var ia,lu;function wi(r){if(ia===void 0)try{throw Error()}catch(u){var s=u.stack.trim().match(/\n( *(at )?)/);ia=s&&s[1]||"",lu=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ia+r+lu}var Fl=!1;function Kl(r,s){if(!r||Fl)return"";Fl=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(s){var G=function(){throw Error()};if(Object.defineProperty(G.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(G,[])}catch(I){var B=I}Reflect.construct(r,[],G)}else{try{G.call()}catch(I){B=I}r.call(G.prototype)}}else{try{throw Error()}catch(I){B=I}(G=r())&&typeof G.catch=="function"&&G.catch(function(){})}}catch(I){if(I&&B&&typeof I.stack=="string")return[I.stack,B.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=h.DetermineComponentFrameRoot(),k=y[0],C=y[1];if(k&&C){var N=k.split(`
`),_=C.split(`
`);for(m=h=0;h<N.length&&!N[h].includes("DetermineComponentFrameRoot");)h++;for(;m<_.length&&!_[m].includes("DetermineComponentFrameRoot");)m++;if(h===N.length||m===_.length)for(h=N.length-1,m=_.length-1;1<=h&&0<=m&&N[h]!==_[m];)m--;for(;1<=h&&0<=m;h--,m--)if(N[h]!==_[m]){if(h!==1||m!==1)do if(h--,m--,0>m||N[h]!==_[m]){var U=`
`+N[h].replace(" at new "," at ");return r.displayName&&U.includes("<anonymous>")&&(U=U.replace("<anonymous>",r.displayName)),U}while(1<=h&&0<=m);break}}}finally{Fl=!1,Error.prepareStackTrace=u}return(u=r?r.displayName||r.name:"")?wi(u):""}function su(r,s){switch(r.tag){case 26:case 27:case 5:return wi(r.type);case 16:return wi("Lazy");case 13:return r.child!==s&&s!==null?wi("Suspense Fallback"):wi("Suspense");case 19:return wi("SuspenseList");case 0:case 15:return Kl(r.type,!1);case 11:return Kl(r.type.render,!1);case 1:return Kl(r.type,!0);case 31:return wi("Activity");default:return""}}function au(r){try{var s="",u=null;do s+=su(r,u),u=r,r=r.return;while(r);return s}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var Yl=Object.prototype.hasOwnProperty,Gl=n.unstable_scheduleCallback,ra=n.unstable_cancelCallback,Qf=n.unstable_shouldYield,Xf=n.unstable_requestPaint,Xt=n.unstable_now,Jf=n.unstable_getCurrentPriorityLevel,j=n.unstable_ImmediatePriority,$=n.unstable_UserBlockingPriority,ye=n.unstable_NormalPriority,Ae=n.unstable_LowPriority,Ge=n.unstable_IdlePriority,Sn=n.log,Ti=n.unstable_setDisableYieldValue,Jt=null,Ct=null;function nn(r){if(typeof Sn=="function"&&Ti(r),Ct&&typeof Ct.setStrictMode=="function")try{Ct.setStrictMode(Jt,r)}catch{}}var et=Math.clz32?Math.clz32:hM,lr=Math.log,ei=Math.LN2;function hM(r){return r>>>=0,r===0?32:31-(lr(r)/ei|0)|0}var ou=256,uu=262144,cu=4194304;function Pr(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function fu(r,s,u){var h=r.pendingLanes;if(h===0)return 0;var m=0,y=r.suspendedLanes,k=r.pingedLanes;r=r.warmLanes;var C=h&134217727;return C!==0?(h=C&~y,h!==0?m=Pr(h):(k&=C,k!==0?m=Pr(k):u||(u=C&~r,u!==0&&(m=Pr(u))))):(C=h&~y,C!==0?m=Pr(C):k!==0?m=Pr(k):u||(u=h&~r,u!==0&&(m=Pr(u)))),m===0?0:s!==0&&s!==m&&(s&y)===0&&(y=m&-m,u=s&-s,y>=u||y===32&&(u&4194048)!==0)?s:m}function la(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function dM(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jy(){var r=cu;return cu<<=1,(cu&62914560)===0&&(cu=4194304),r}function Zf(r){for(var s=[],u=0;31>u;u++)s.push(r);return s}function sa(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function pM(r,s,u,h,m,y){var k=r.pendingLanes;r.pendingLanes=u,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=u,r.entangledLanes&=u,r.errorRecoveryDisabledLanes&=u,r.shellSuspendCounter=0;var C=r.entanglements,N=r.expirationTimes,_=r.hiddenUpdates;for(u=k&~u;0<u;){var U=31-et(u),G=1<<U;C[U]=0,N[U]=-1;var B=_[U];if(B!==null)for(_[U]=null,U=0;U<B.length;U++){var I=B[U];I!==null&&(I.lane&=-536870913)}u&=~G}h!==0&&Zy(r,h,0),y!==0&&m===0&&r.tag!==0&&(r.suspendedLanes|=y&~(k&~s))}function Zy(r,s,u){r.pendingLanes|=s,r.suspendedLanes&=~s;var h=31-et(s);r.entangledLanes|=s,r.entanglements[h]=r.entanglements[h]|1073741824|u&261930}function $y(r,s){var u=r.entangledLanes|=s;for(r=r.entanglements;u;){var h=31-et(u),m=1<<h;m&s|r[h]&s&&(r[h]|=s),u&=~m}}function Py(r,s){var u=s&-s;return u=(u&42)!==0?1:$f(u),(u&(r.suspendedLanes|s))!==0?0:u}function $f(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Pf(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Wy(){var r=J.p;return r!==0?r:(r=window.event,r===void 0?32:qS(r.type))}function e0(r,s){var u=J.p;try{return J.p=r,s()}finally{J.p=u}}var sr=Math.random().toString(36).slice(2),Rt="__reactFiber$"+sr,rn="__reactProps$"+sr,Ql="__reactContainer$"+sr,Wf="__reactEvents$"+sr,mM="__reactListeners$"+sr,gM="__reactHandles$"+sr,t0="__reactResources$"+sr,aa="__reactMarker$"+sr;function eh(r){delete r[Rt],delete r[rn],delete r[Wf],delete r[mM],delete r[gM]}function Xl(r){var s=r[Rt];if(s)return s;for(var u=r.parentNode;u;){if(s=u[Ql]||u[Rt]){if(u=s.alternate,s.child!==null||u!==null&&u.child!==null)for(r=CS(r);r!==null;){if(u=r[Rt])return u;r=CS(r)}return s}r=u,u=r.parentNode}return null}function Jl(r){if(r=r[Rt]||r[Ql]){var s=r.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return r}return null}function oa(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function Zl(r){var s=r[t0];return s||(s=r[t0]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Mt(r){r[aa]=!0}var n0=new Set,i0={};function Wr(r,s){$l(r,s),$l(r+"Capture",s)}function $l(r,s){for(i0[r]=s,r=0;r<s.length;r++)n0.add(s[r])}var yM=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),r0={},l0={};function bM(r){return Yl.call(l0,r)?!0:Yl.call(r0,r)?!1:yM.test(r)?l0[r]=!0:(r0[r]=!0,!1)}function hu(r,s,u){if(bM(s))if(u===null)r.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var h=s.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+u)}}function du(r,s,u){if(u===null)r.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+u)}}function Mi(r,s,u,h){if(h===null)r.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(u);return}r.setAttributeNS(s,u,""+h)}}function _n(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function s0(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function SM(r,s,u){var h=Object.getOwnPropertyDescriptor(r.constructor.prototype,s);if(!r.hasOwnProperty(s)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var m=h.get,y=h.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return m.call(this)},set:function(k){u=""+k,y.call(this,k)}}),Object.defineProperty(r,s,{enumerable:h.enumerable}),{getValue:function(){return u},setValue:function(k){u=""+k},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function th(r){if(!r._valueTracker){var s=s0(r)?"checked":"value";r._valueTracker=SM(r,s,""+r[s])}}function a0(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var u=s.getValue(),h="";return r&&(h=s0(r)?r.checked?"true":"false":r.value),r=h,r!==u?(s.setValue(r),!0):!1}function pu(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var kM=/[\n"\\]/g;function Bn(r){return r.replace(kM,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function nh(r,s,u,h,m,y,k,C){r.name="",k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?r.type=k:r.removeAttribute("type"),s!=null?k==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+_n(s)):r.value!==""+_n(s)&&(r.value=""+_n(s)):k!=="submit"&&k!=="reset"||r.removeAttribute("value"),s!=null?ih(r,k,_n(s)):u!=null?ih(r,k,_n(u)):h!=null&&r.removeAttribute("value"),m==null&&y!=null&&(r.defaultChecked=!!y),m!=null&&(r.checked=m&&typeof m!="function"&&typeof m!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?r.name=""+_n(C):r.removeAttribute("name")}function o0(r,s,u,h,m,y,k,C){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(r.type=y),s!=null||u!=null){if(!(y!=="submit"&&y!=="reset"||s!=null)){th(r);return}u=u!=null?""+_n(u):"",s=s!=null?""+_n(s):u,C||s===r.value||(r.value=s),r.defaultValue=s}h=h??m,h=typeof h!="function"&&typeof h!="symbol"&&!!h,r.checked=C?r.checked:!!h,r.defaultChecked=!!h,k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&(r.name=k),th(r)}function ih(r,s,u){s==="number"&&pu(r.ownerDocument)===r||r.defaultValue===""+u||(r.defaultValue=""+u)}function Pl(r,s,u,h){if(r=r.options,s){s={};for(var m=0;m<u.length;m++)s["$"+u[m]]=!0;for(u=0;u<r.length;u++)m=s.hasOwnProperty("$"+r[u].value),r[u].selected!==m&&(r[u].selected=m),m&&h&&(r[u].defaultSelected=!0)}else{for(u=""+_n(u),s=null,m=0;m<r.length;m++){if(r[m].value===u){r[m].selected=!0,h&&(r[m].defaultSelected=!0);return}s!==null||r[m].disabled||(s=r[m])}s!==null&&(s.selected=!0)}}function u0(r,s,u){if(s!=null&&(s=""+_n(s),s!==r.value&&(r.value=s),u==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=u!=null?""+_n(u):""}function c0(r,s,u,h){if(s==null){if(h!=null){if(u!=null)throw Error(i(92));if(ke(h)){if(1<h.length)throw Error(i(93));h=h[0]}u=h}u==null&&(u=""),s=u}u=_n(s),r.defaultValue=u,h=r.textContent,h===u&&h!==""&&h!==null&&(r.value=h),th(r)}function Wl(r,s){if(s){var u=r.firstChild;if(u&&u===r.lastChild&&u.nodeType===3){u.nodeValue=s;return}}r.textContent=s}var xM=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function f0(r,s,u){var h=s.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?h?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":h?r.setProperty(s,u):typeof u!="number"||u===0||xM.has(s)?s==="float"?r.cssFloat=u:r[s]=(""+u).trim():r[s]=u+"px"}function h0(r,s,u){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,u!=null){for(var h in u)!u.hasOwnProperty(h)||s!=null&&s.hasOwnProperty(h)||(h.indexOf("--")===0?r.setProperty(h,""):h==="float"?r.cssFloat="":r[h]="");for(var m in s)h=s[m],s.hasOwnProperty(m)&&u[m]!==h&&f0(r,m,h)}else for(var y in s)s.hasOwnProperty(y)&&f0(r,y,s[y])}function rh(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var CM=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vM=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function mu(r){return vM.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Ei(){}var lh=null;function sh(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var es=null,ts=null;function d0(r){var s=Jl(r);if(s&&(r=s.stateNode)){var u=r[rn]||null;e:switch(r=s.stateNode,s.type){case"input":if(nh(r,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),s=u.name,u.type==="radio"&&s!=null){for(u=r;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Bn(""+s)+'"][type="radio"]'),s=0;s<u.length;s++){var h=u[s];if(h!==r&&h.form===r.form){var m=h[rn]||null;if(!m)throw Error(i(90));nh(h,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(s=0;s<u.length;s++)h=u[s],h.form===r.form&&a0(h)}break e;case"textarea":u0(r,u.value,u.defaultValue);break e;case"select":s=u.value,s!=null&&Pl(r,!!u.multiple,s,!1)}}}var ah=!1;function p0(r,s,u){if(ah)return r(s,u);ah=!0;try{var h=r(s);return h}finally{if(ah=!1,(es!==null||ts!==null)&&(nc(),es&&(s=es,r=ts,ts=es=null,d0(s),r)))for(s=0;s<r.length;s++)d0(r[s])}}function ua(r,s){var u=r.stateNode;if(u===null)return null;var h=u[rn]||null;if(h===null)return null;u=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(u&&typeof u!="function")throw Error(i(231,s,typeof u));return u}var Ni=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oh=!1;if(Ni)try{var ca={};Object.defineProperty(ca,"passive",{get:function(){oh=!0}}),window.addEventListener("test",ca,ca),window.removeEventListener("test",ca,ca)}catch{oh=!1}var ar=null,uh=null,gu=null;function m0(){if(gu)return gu;var r,s=uh,u=s.length,h,m="value"in ar?ar.value:ar.textContent,y=m.length;for(r=0;r<u&&s[r]===m[r];r++);var k=u-r;for(h=1;h<=k&&s[u-h]===m[y-h];h++);return gu=m.slice(r,1<h?1-h:void 0)}function yu(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function bu(){return!0}function g0(){return!1}function ln(r){function s(u,h,m,y,k){this._reactName=u,this._targetInst=m,this.type=h,this.nativeEvent=y,this.target=k,this.currentTarget=null;for(var C in r)r.hasOwnProperty(C)&&(u=r[C],this[C]=u?u(y):y[C]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?bu:g0,this.isPropagationStopped=g0,this}return g(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=bu)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=bu)},persist:function(){},isPersistent:bu}),s}var el={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Su=ln(el),fa=g({},el,{view:0,detail:0}),wM=ln(fa),ch,fh,ha,ku=g({},fa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dh,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ha&&(ha&&r.type==="mousemove"?(ch=r.screenX-ha.screenX,fh=r.screenY-ha.screenY):fh=ch=0,ha=r),ch)},movementY:function(r){return"movementY"in r?r.movementY:fh}}),y0=ln(ku),TM=g({},ku,{dataTransfer:0}),MM=ln(TM),EM=g({},fa,{relatedTarget:0}),hh=ln(EM),NM=g({},el,{animationName:0,elapsedTime:0,pseudoElement:0}),AM=ln(NM),OM=g({},el,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),RM=ln(OM),DM=g({},el,{data:0}),b0=ln(DM),zM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_M={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},BM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function LM(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=BM[r])?!!s[r]:!1}function dh(){return LM}var IM=g({},fa,{key:function(r){if(r.key){var s=zM[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=yu(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?_M[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dh,charCode:function(r){return r.type==="keypress"?yu(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?yu(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),qM=ln(IM),HM=g({},ku,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),S0=ln(HM),UM=g({},fa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dh}),VM=ln(UM),jM=g({},el,{propertyName:0,elapsedTime:0,pseudoElement:0}),FM=ln(jM),KM=g({},ku,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),YM=ln(KM),GM=g({},el,{newState:0,oldState:0}),QM=ln(GM),XM=[9,13,27,32],ph=Ni&&"CompositionEvent"in window,da=null;Ni&&"documentMode"in document&&(da=document.documentMode);var JM=Ni&&"TextEvent"in window&&!da,k0=Ni&&(!ph||da&&8<da&&11>=da),x0=" ",C0=!1;function v0(r,s){switch(r){case"keyup":return XM.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function w0(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ns=!1;function ZM(r,s){switch(r){case"compositionend":return w0(s);case"keypress":return s.which!==32?null:(C0=!0,x0);case"textInput":return r=s.data,r===x0&&C0?null:r;default:return null}}function $M(r,s){if(ns)return r==="compositionend"||!ph&&v0(r,s)?(r=m0(),gu=uh=ar=null,ns=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return k0&&s.locale!=="ko"?null:s.data;default:return null}}var PM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function T0(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!PM[r.type]:s==="textarea"}function M0(r,s,u,h){es?ts?ts.push(h):ts=[h]:es=h,s=uc(s,"onChange"),0<s.length&&(u=new Su("onChange","change",null,u,h),r.push({event:u,listeners:s}))}var pa=null,ma=null;function WM(r){oS(r,0)}function xu(r){var s=oa(r);if(a0(s))return r}function E0(r,s){if(r==="change")return s}var N0=!1;if(Ni){var mh;if(Ni){var gh="oninput"in document;if(!gh){var A0=document.createElement("div");A0.setAttribute("oninput","return;"),gh=typeof A0.oninput=="function"}mh=gh}else mh=!1;N0=mh&&(!document.documentMode||9<document.documentMode)}function O0(){pa&&(pa.detachEvent("onpropertychange",R0),ma=pa=null)}function R0(r){if(r.propertyName==="value"&&xu(ma)){var s=[];M0(s,ma,r,sh(r)),p0(WM,s)}}function eE(r,s,u){r==="focusin"?(O0(),pa=s,ma=u,pa.attachEvent("onpropertychange",R0)):r==="focusout"&&O0()}function tE(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return xu(ma)}function nE(r,s){if(r==="click")return xu(s)}function iE(r,s){if(r==="input"||r==="change")return xu(s)}function rE(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var kn=typeof Object.is=="function"?Object.is:rE;function ga(r,s){if(kn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var u=Object.keys(r),h=Object.keys(s);if(u.length!==h.length)return!1;for(h=0;h<u.length;h++){var m=u[h];if(!Yl.call(s,m)||!kn(r[m],s[m]))return!1}return!0}function D0(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function z0(r,s){var u=D0(r);r=0;for(var h;u;){if(u.nodeType===3){if(h=r+u.textContent.length,r<=s&&h>=s)return{node:u,offset:s-r};r=h}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=D0(u)}}function _0(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?_0(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function B0(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=pu(r.document);s instanceof r.HTMLIFrameElement;){try{var u=typeof s.contentWindow.location.href=="string"}catch{u=!1}if(u)r=s.contentWindow;else break;s=pu(r.document)}return s}function yh(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var lE=Ni&&"documentMode"in document&&11>=document.documentMode,is=null,bh=null,ya=null,Sh=!1;function L0(r,s,u){var h=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Sh||is==null||is!==pu(h)||(h=is,"selectionStart"in h&&yh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),ya&&ga(ya,h)||(ya=h,h=uc(bh,"onSelect"),0<h.length&&(s=new Su("onSelect","select",null,s,u),r.push({event:s,listeners:h}),s.target=is)))}function tl(r,s){var u={};return u[r.toLowerCase()]=s.toLowerCase(),u["Webkit"+r]="webkit"+s,u["Moz"+r]="moz"+s,u}var rs={animationend:tl("Animation","AnimationEnd"),animationiteration:tl("Animation","AnimationIteration"),animationstart:tl("Animation","AnimationStart"),transitionrun:tl("Transition","TransitionRun"),transitionstart:tl("Transition","TransitionStart"),transitioncancel:tl("Transition","TransitionCancel"),transitionend:tl("Transition","TransitionEnd")},kh={},I0={};Ni&&(I0=document.createElement("div").style,"AnimationEvent"in window||(delete rs.animationend.animation,delete rs.animationiteration.animation,delete rs.animationstart.animation),"TransitionEvent"in window||delete rs.transitionend.transition);function nl(r){if(kh[r])return kh[r];if(!rs[r])return r;var s=rs[r],u;for(u in s)if(s.hasOwnProperty(u)&&u in I0)return kh[r]=s[u];return r}var q0=nl("animationend"),H0=nl("animationiteration"),U0=nl("animationstart"),sE=nl("transitionrun"),aE=nl("transitionstart"),oE=nl("transitioncancel"),V0=nl("transitionend"),j0=new Map,xh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");xh.push("scrollEnd");function ti(r,s){j0.set(r,s),Wr(s,[r])}var Cu=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Ln=[],ls=0,Ch=0;function vu(){for(var r=ls,s=Ch=ls=0;s<r;){var u=Ln[s];Ln[s++]=null;var h=Ln[s];Ln[s++]=null;var m=Ln[s];Ln[s++]=null;var y=Ln[s];if(Ln[s++]=null,h!==null&&m!==null){var k=h.pending;k===null?m.next=m:(m.next=k.next,k.next=m),h.pending=m}y!==0&&F0(u,m,y)}}function wu(r,s,u,h){Ln[ls++]=r,Ln[ls++]=s,Ln[ls++]=u,Ln[ls++]=h,Ch|=h,r.lanes|=h,r=r.alternate,r!==null&&(r.lanes|=h)}function vh(r,s,u,h){return wu(r,s,u,h),Tu(r)}function il(r,s){return wu(r,null,null,s),Tu(r)}function F0(r,s,u){r.lanes|=u;var h=r.alternate;h!==null&&(h.lanes|=u);for(var m=!1,y=r.return;y!==null;)y.childLanes|=u,h=y.alternate,h!==null&&(h.childLanes|=u),y.tag===22&&(r=y.stateNode,r===null||r._visibility&1||(m=!0)),r=y,y=y.return;return r.tag===3?(y=r.stateNode,m&&s!==null&&(m=31-et(u),r=y.hiddenUpdates,h=r[m],h===null?r[m]=[s]:h.push(s),s.lane=u|536870912),y):null}function Tu(r){if(50<Ha)throw Ha=0,Dd=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var ss={};function uE(r,s,u,h){this.tag=r,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(r,s,u,h){return new uE(r,s,u,h)}function wh(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Ai(r,s){var u=r.alternate;return u===null?(u=xn(r.tag,s,r.key,r.mode),u.elementType=r.elementType,u.type=r.type,u.stateNode=r.stateNode,u.alternate=r,r.alternate=u):(u.pendingProps=s,u.type=r.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=r.flags&65011712,u.childLanes=r.childLanes,u.lanes=r.lanes,u.child=r.child,u.memoizedProps=r.memoizedProps,u.memoizedState=r.memoizedState,u.updateQueue=r.updateQueue,s=r.dependencies,u.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},u.sibling=r.sibling,u.index=r.index,u.ref=r.ref,u.refCleanup=r.refCleanup,u}function K0(r,s){r.flags&=65011714;var u=r.alternate;return u===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=u.childLanes,r.lanes=u.lanes,r.child=u.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=u.memoizedProps,r.memoizedState=u.memoizedState,r.updateQueue=u.updateQueue,r.type=u.type,s=u.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function Mu(r,s,u,h,m,y){var k=0;if(h=r,typeof r=="function")wh(r)&&(k=1);else if(typeof r=="string")k=pN(r,u,te.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case ue:return r=xn(31,u,s,m),r.elementType=ue,r.lanes=y,r;case v:return rl(u.children,m,y,s);case M:k=8,m|=24;break;case T:return r=xn(12,u,s,m|2),r.elementType=T,r.lanes=y,r;case ee:return r=xn(13,u,s,m),r.elementType=ee,r.lanes=y,r;case z:return r=xn(19,u,s,m),r.elementType=z,r.lanes=y,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case L:k=10;break e;case Q:k=9;break e;case P:k=11;break e;case Y:k=14;break e;case ne:k=16,h=null;break e}k=29,u=Error(i(130,r===null?"null":typeof r,"")),h=null}return s=xn(k,u,s,m),s.elementType=r,s.type=h,s.lanes=y,s}function rl(r,s,u,h){return r=xn(7,r,h,s),r.lanes=u,r}function Th(r,s,u){return r=xn(6,r,null,s),r.lanes=u,r}function Y0(r){var s=xn(18,null,null,0);return s.stateNode=r,s}function Mh(r,s,u){return s=xn(4,r.children!==null?r.children:[],r.key,s),s.lanes=u,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var G0=new WeakMap;function In(r,s){if(typeof r=="object"&&r!==null){var u=G0.get(r);return u!==void 0?u:(s={value:r,source:s,stack:au(s)},G0.set(r,s),s)}return{value:r,source:s,stack:au(s)}}var as=[],us=0,Eu=null,ba=0,qn=[],Hn=0,or=null,ci=1,fi="";function Oi(r,s){as[us++]=ba,as[us++]=Eu,Eu=r,ba=s}function Q0(r,s,u){qn[Hn++]=ci,qn[Hn++]=fi,qn[Hn++]=or,or=r;var h=ci;r=fi;var m=32-et(h)-1;h&=~(1<<m),u+=1;var y=32-et(s)+m;if(30<y){var k=m-m%5;y=(h&(1<<k)-1).toString(32),h>>=k,m-=k,ci=1<<32-et(s)+m|u<<m|h,fi=y+r}else ci=1<<y|u<<m|h,fi=r}function Eh(r){r.return!==null&&(Oi(r,1),Q0(r,1,0))}function Nh(r){for(;r===Eu;)Eu=as[--us],as[us]=null,ba=as[--us],as[us]=null;for(;r===or;)or=qn[--Hn],qn[Hn]=null,fi=qn[--Hn],qn[Hn]=null,ci=qn[--Hn],qn[Hn]=null}function X0(r,s){qn[Hn++]=ci,qn[Hn++]=fi,qn[Hn++]=or,ci=s.id,fi=s.overflow,or=r}var Dt=null,it=null,qe=!1,ur=null,Un=!1,Ah=Error(i(519));function cr(r){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Sa(In(s,r)),Ah}function J0(r){var s=r.stateNode,u=r.type,h=r.memoizedProps;switch(s[Rt]=r,s[rn]=h,u){case"dialog":Re("cancel",s),Re("close",s);break;case"iframe":case"object":case"embed":Re("load",s);break;case"video":case"audio":for(u=0;u<Va.length;u++)Re(Va[u],s);break;case"source":Re("error",s);break;case"img":case"image":case"link":Re("error",s),Re("load",s);break;case"details":Re("toggle",s);break;case"input":Re("invalid",s),o0(s,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":Re("invalid",s);break;case"textarea":Re("invalid",s),c0(s,h.value,h.defaultValue,h.children)}u=h.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||s.textContent===""+u||h.suppressHydrationWarning===!0||hS(s.textContent,u)?(h.popover!=null&&(Re("beforetoggle",s),Re("toggle",s)),h.onScroll!=null&&Re("scroll",s),h.onScrollEnd!=null&&Re("scrollend",s),h.onClick!=null&&(s.onclick=Ei),s=!0):s=!1,s||cr(r,!0)}function Z0(r){for(Dt=r.return;Dt;)switch(Dt.tag){case 5:case 31:case 13:Un=!1;return;case 27:case 3:Un=!0;return;default:Dt=Dt.return}}function cs(r){if(r!==Dt)return!1;if(!qe)return Z0(r),qe=!0,!1;var s=r.tag,u;if((u=s!==3&&s!==27)&&((u=s===5)&&(u=r.type,u=!(u!=="form"&&u!=="button")||Qd(r.type,r.memoizedProps)),u=!u),u&&it&&cr(r),Z0(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));it=xS(r)}else if(s===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));it=xS(r)}else s===27?(s=it,wr(r.type)?(r=Pd,Pd=null,it=r):it=s):it=Dt?jn(r.stateNode.nextSibling):null;return!0}function ll(){it=Dt=null,qe=!1}function Oh(){var r=ur;return r!==null&&(un===null?un=r:un.push.apply(un,r),ur=null),r}function Sa(r){ur===null?ur=[r]:ur.push(r)}var Rh=A(null),sl=null,Ri=null;function fr(r,s,u){w(Rh,s._currentValue),s._currentValue=u}function Di(r){r._currentValue=Rh.current,V(Rh)}function Dh(r,s,u){for(;r!==null;){var h=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),r===u)break;r=r.return}}function zh(r,s,u,h){var m=r.child;for(m!==null&&(m.return=r);m!==null;){var y=m.dependencies;if(y!==null){var k=m.child;y=y.firstContext;e:for(;y!==null;){var C=y;y=m;for(var N=0;N<s.length;N++)if(C.context===s[N]){y.lanes|=u,C=y.alternate,C!==null&&(C.lanes|=u),Dh(y.return,u,r),h||(k=null);break e}y=C.next}}else if(m.tag===18){if(k=m.return,k===null)throw Error(i(341));k.lanes|=u,y=k.alternate,y!==null&&(y.lanes|=u),Dh(k,u,r),k=null}else k=m.child;if(k!==null)k.return=m;else for(k=m;k!==null;){if(k===r){k=null;break}if(m=k.sibling,m!==null){m.return=k.return,k=m;break}k=k.return}m=k}}function fs(r,s,u,h){r=null;for(var m=s,y=!1;m!==null;){if(!y){if((m.flags&524288)!==0)y=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var k=m.alternate;if(k===null)throw Error(i(387));if(k=k.memoizedProps,k!==null){var C=m.type;kn(m.pendingProps.value,k.value)||(r!==null?r.push(C):r=[C])}}else if(m===ze.current){if(k=m.alternate,k===null)throw Error(i(387));k.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(r!==null?r.push(Ga):r=[Ga])}m=m.return}r!==null&&zh(s,r,u,h),s.flags|=262144}function Nu(r){for(r=r.firstContext;r!==null;){if(!kn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function al(r){sl=r,Ri=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function zt(r){return $0(sl,r)}function Au(r,s){return sl===null&&al(r),$0(r,s)}function $0(r,s){var u=s._currentValue;if(s={context:s,memoizedValue:u,next:null},Ri===null){if(r===null)throw Error(i(308));Ri=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else Ri=Ri.next=s;return u}var cE=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(u,h){r.push(h)}};this.abort=function(){s.aborted=!0,r.forEach(function(u){return u()})}},fE=n.unstable_scheduleCallback,hE=n.unstable_NormalPriority,gt={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _h(){return{controller:new cE,data:new Map,refCount:0}}function ka(r){r.refCount--,r.refCount===0&&fE(hE,function(){r.controller.abort()})}var xa=null,Bh=0,hs=0,ds=null;function dE(r,s){if(xa===null){var u=xa=[];Bh=0,hs=qd(),ds={status:"pending",value:void 0,then:function(h){u.push(h)}}}return Bh++,s.then(P0,P0),s}function P0(){if(--Bh===0&&xa!==null){ds!==null&&(ds.status="fulfilled");var r=xa;xa=null,hs=0,ds=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function pE(r,s){var u=[],h={status:"pending",value:null,reason:null,then:function(m){u.push(m)}};return r.then(function(){h.status="fulfilled",h.value=s;for(var m=0;m<u.length;m++)(0,u[m])(s)},function(m){for(h.status="rejected",h.reason=m,m=0;m<u.length;m++)(0,u[m])(void 0)}),h}var W0=q.S;q.S=function(r,s){Lb=Xt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&dE(r,s),W0!==null&&W0(r,s)};var ol=A(null);function Lh(){var r=ol.current;return r!==null?r:tt.pooledCache}function Ou(r,s){s===null?w(ol,ol.current):w(ol,s.pool)}function e1(){var r=Lh();return r===null?null:{parent:gt._currentValue,pool:r}}var ps=Error(i(460)),Ih=Error(i(474)),Ru=Error(i(542)),Du={then:function(){}};function t1(r){return r=r.status,r==="fulfilled"||r==="rejected"}function n1(r,s,u){switch(u=r[u],u===void 0?r.push(s):u!==s&&(s.then(Ei,Ei),s=u),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,r1(r),r;default:if(typeof s.status=="string")s.then(Ei,Ei);else{if(r=tt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(h){if(s.status==="pending"){var m=s;m.status="fulfilled",m.value=h}},function(h){if(s.status==="pending"){var m=s;m.status="rejected",m.reason=h}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,r1(r),r}throw cl=s,ps}}function ul(r){try{var s=r._init;return s(r._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(cl=u,ps):u}}var cl=null;function i1(){if(cl===null)throw Error(i(459));var r=cl;return cl=null,r}function r1(r){if(r===ps||r===Ru)throw Error(i(483))}var ms=null,Ca=0;function zu(r){var s=Ca;return Ca+=1,ms===null&&(ms=[]),n1(ms,r,s)}function va(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function _u(r,s){throw s.$$typeof===b?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function l1(r){function s(R,O){if(r){var D=R.deletions;D===null?(R.deletions=[O],R.flags|=16):D.push(O)}}function u(R,O){if(!r)return null;for(;O!==null;)s(R,O),O=O.sibling;return null}function h(R){for(var O=new Map;R!==null;)R.key!==null?O.set(R.key,R):O.set(R.index,R),R=R.sibling;return O}function m(R,O){return R=Ai(R,O),R.index=0,R.sibling=null,R}function y(R,O,D){return R.index=D,r?(D=R.alternate,D!==null?(D=D.index,D<O?(R.flags|=67108866,O):D):(R.flags|=67108866,O)):(R.flags|=1048576,O)}function k(R){return r&&R.alternate===null&&(R.flags|=67108866),R}function C(R,O,D,F){return O===null||O.tag!==6?(O=Th(D,R.mode,F),O.return=R,O):(O=m(O,D),O.return=R,O)}function N(R,O,D,F){var he=D.type;return he===v?U(R,O,D.props.children,F,D.key):O!==null&&(O.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===ne&&ul(he)===O.type)?(O=m(O,D.props),va(O,D),O.return=R,O):(O=Mu(D.type,D.key,D.props,null,R.mode,F),va(O,D),O.return=R,O)}function _(R,O,D,F){return O===null||O.tag!==4||O.stateNode.containerInfo!==D.containerInfo||O.stateNode.implementation!==D.implementation?(O=Mh(D,R.mode,F),O.return=R,O):(O=m(O,D.children||[]),O.return=R,O)}function U(R,O,D,F,he){return O===null||O.tag!==7?(O=rl(D,R.mode,F,he),O.return=R,O):(O=m(O,D),O.return=R,O)}function G(R,O,D){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=Th(""+O,R.mode,D),O.return=R,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case S:return D=Mu(O.type,O.key,O.props,null,R.mode,D),va(D,O),D.return=R,D;case x:return O=Mh(O,R.mode,D),O.return=R,O;case ne:return O=ul(O),G(R,O,D)}if(ke(O)||ie(O))return O=rl(O,R.mode,D,null),O.return=R,O;if(typeof O.then=="function")return G(R,zu(O),D);if(O.$$typeof===L)return G(R,Au(R,O),D);_u(R,O)}return null}function B(R,O,D,F){var he=O!==null?O.key:null;if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return he!==null?null:C(R,O,""+D,F);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case S:return D.key===he?N(R,O,D,F):null;case x:return D.key===he?_(R,O,D,F):null;case ne:return D=ul(D),B(R,O,D,F)}if(ke(D)||ie(D))return he!==null?null:U(R,O,D,F,null);if(typeof D.then=="function")return B(R,O,zu(D),F);if(D.$$typeof===L)return B(R,O,Au(R,D),F);_u(R,D)}return null}function I(R,O,D,F,he){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return R=R.get(D)||null,C(O,R,""+F,he);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case S:return R=R.get(F.key===null?D:F.key)||null,N(O,R,F,he);case x:return R=R.get(F.key===null?D:F.key)||null,_(O,R,F,he);case ne:return F=ul(F),I(R,O,D,F,he)}if(ke(F)||ie(F))return R=R.get(D)||null,U(O,R,F,he,null);if(typeof F.then=="function")return I(R,O,D,zu(F),he);if(F.$$typeof===L)return I(R,O,D,Au(O,F),he);_u(O,F)}return null}function le(R,O,D,F){for(var he=null,je=null,ae=O,Me=O=0,Be=null;ae!==null&&Me<D.length;Me++){ae.index>Me?(Be=ae,ae=null):Be=ae.sibling;var Fe=B(R,ae,D[Me],F);if(Fe===null){ae===null&&(ae=Be);break}r&&ae&&Fe.alternate===null&&s(R,ae),O=y(Fe,O,Me),je===null?he=Fe:je.sibling=Fe,je=Fe,ae=Be}if(Me===D.length)return u(R,ae),qe&&Oi(R,Me),he;if(ae===null){for(;Me<D.length;Me++)ae=G(R,D[Me],F),ae!==null&&(O=y(ae,O,Me),je===null?he=ae:je.sibling=ae,je=ae);return qe&&Oi(R,Me),he}for(ae=h(ae);Me<D.length;Me++)Be=I(ae,R,Me,D[Me],F),Be!==null&&(r&&Be.alternate!==null&&ae.delete(Be.key===null?Me:Be.key),O=y(Be,O,Me),je===null?he=Be:je.sibling=Be,je=Be);return r&&ae.forEach(function(Ar){return s(R,Ar)}),qe&&Oi(R,Me),he}function pe(R,O,D,F){if(D==null)throw Error(i(151));for(var he=null,je=null,ae=O,Me=O=0,Be=null,Fe=D.next();ae!==null&&!Fe.done;Me++,Fe=D.next()){ae.index>Me?(Be=ae,ae=null):Be=ae.sibling;var Ar=B(R,ae,Fe.value,F);if(Ar===null){ae===null&&(ae=Be);break}r&&ae&&Ar.alternate===null&&s(R,ae),O=y(Ar,O,Me),je===null?he=Ar:je.sibling=Ar,je=Ar,ae=Be}if(Fe.done)return u(R,ae),qe&&Oi(R,Me),he;if(ae===null){for(;!Fe.done;Me++,Fe=D.next())Fe=G(R,Fe.value,F),Fe!==null&&(O=y(Fe,O,Me),je===null?he=Fe:je.sibling=Fe,je=Fe);return qe&&Oi(R,Me),he}for(ae=h(ae);!Fe.done;Me++,Fe=D.next())Fe=I(ae,R,Me,Fe.value,F),Fe!==null&&(r&&Fe.alternate!==null&&ae.delete(Fe.key===null?Me:Fe.key),O=y(Fe,O,Me),je===null?he=Fe:je.sibling=Fe,je=Fe);return r&&ae.forEach(function(TN){return s(R,TN)}),qe&&Oi(R,Me),he}function We(R,O,D,F){if(typeof D=="object"&&D!==null&&D.type===v&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case S:e:{for(var he=D.key;O!==null;){if(O.key===he){if(he=D.type,he===v){if(O.tag===7){u(R,O.sibling),F=m(O,D.props.children),F.return=R,R=F;break e}}else if(O.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===ne&&ul(he)===O.type){u(R,O.sibling),F=m(O,D.props),va(F,D),F.return=R,R=F;break e}u(R,O);break}else s(R,O);O=O.sibling}D.type===v?(F=rl(D.props.children,R.mode,F,D.key),F.return=R,R=F):(F=Mu(D.type,D.key,D.props,null,R.mode,F),va(F,D),F.return=R,R=F)}return k(R);case x:e:{for(he=D.key;O!==null;){if(O.key===he)if(O.tag===4&&O.stateNode.containerInfo===D.containerInfo&&O.stateNode.implementation===D.implementation){u(R,O.sibling),F=m(O,D.children||[]),F.return=R,R=F;break e}else{u(R,O);break}else s(R,O);O=O.sibling}F=Mh(D,R.mode,F),F.return=R,R=F}return k(R);case ne:return D=ul(D),We(R,O,D,F)}if(ke(D))return le(R,O,D,F);if(ie(D)){if(he=ie(D),typeof he!="function")throw Error(i(150));return D=he.call(D),pe(R,O,D,F)}if(typeof D.then=="function")return We(R,O,zu(D),F);if(D.$$typeof===L)return We(R,O,Au(R,D),F);_u(R,D)}return typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint"?(D=""+D,O!==null&&O.tag===6?(u(R,O.sibling),F=m(O,D),F.return=R,R=F):(u(R,O),F=Th(D,R.mode,F),F.return=R,R=F),k(R)):u(R,O)}return function(R,O,D,F){try{Ca=0;var he=We(R,O,D,F);return ms=null,he}catch(ae){if(ae===ps||ae===Ru)throw ae;var je=xn(29,ae,null,R.mode);return je.lanes=F,je.return=R,je}finally{}}}var fl=l1(!0),s1=l1(!1),hr=!1;function qh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Hh(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function dr(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function pr(r,s,u){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(Ke&2)!==0){var m=h.pending;return m===null?s.next=s:(s.next=m.next,m.next=s),h.pending=s,s=Tu(r),F0(r,null,u),s}return wu(r,h,s,u),Tu(r)}function wa(r,s,u){if(s=s.updateQueue,s!==null&&(s=s.shared,(u&4194048)!==0)){var h=s.lanes;h&=r.pendingLanes,u|=h,s.lanes=u,$y(r,u)}}function Uh(r,s){var u=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,u===h)){var m=null,y=null;if(u=u.firstBaseUpdate,u!==null){do{var k={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};y===null?m=y=k:y=y.next=k,u=u.next}while(u!==null);y===null?m=y=s:y=y.next=s}else m=y=s;u={baseState:h.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:h.shared,callbacks:h.callbacks},r.updateQueue=u;return}r=u.lastBaseUpdate,r===null?u.firstBaseUpdate=s:r.next=s,u.lastBaseUpdate=s}var Vh=!1;function Ta(){if(Vh){var r=ds;if(r!==null)throw r}}function Ma(r,s,u,h){Vh=!1;var m=r.updateQueue;hr=!1;var y=m.firstBaseUpdate,k=m.lastBaseUpdate,C=m.shared.pending;if(C!==null){m.shared.pending=null;var N=C,_=N.next;N.next=null,k===null?y=_:k.next=_,k=N;var U=r.alternate;U!==null&&(U=U.updateQueue,C=U.lastBaseUpdate,C!==k&&(C===null?U.firstBaseUpdate=_:C.next=_,U.lastBaseUpdate=N))}if(y!==null){var G=m.baseState;k=0,U=_=N=null,C=y;do{var B=C.lane&-536870913,I=B!==C.lane;if(I?(_e&B)===B:(h&B)===B){B!==0&&B===hs&&(Vh=!0),U!==null&&(U=U.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var le=r,pe=C;B=s;var We=u;switch(pe.tag){case 1:if(le=pe.payload,typeof le=="function"){G=le.call(We,G,B);break e}G=le;break e;case 3:le.flags=le.flags&-65537|128;case 0:if(le=pe.payload,B=typeof le=="function"?le.call(We,G,B):le,B==null)break e;G=g({},G,B);break e;case 2:hr=!0}}B=C.callback,B!==null&&(r.flags|=64,I&&(r.flags|=8192),I=m.callbacks,I===null?m.callbacks=[B]:I.push(B))}else I={lane:B,tag:C.tag,payload:C.payload,callback:C.callback,next:null},U===null?(_=U=I,N=G):U=U.next=I,k|=B;if(C=C.next,C===null){if(C=m.shared.pending,C===null)break;I=C,C=I.next,I.next=null,m.lastBaseUpdate=I,m.shared.pending=null}}while(!0);U===null&&(N=G),m.baseState=N,m.firstBaseUpdate=_,m.lastBaseUpdate=U,y===null&&(m.shared.lanes=0),Sr|=k,r.lanes=k,r.memoizedState=G}}function a1(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function o1(r,s){var u=r.callbacks;if(u!==null)for(r.callbacks=null,r=0;r<u.length;r++)a1(u[r],s)}var gs=A(null),Bu=A(0);function u1(r,s){r=Vi,w(Bu,r),w(gs,s),Vi=r|s.baseLanes}function jh(){w(Bu,Vi),w(gs,gs.current)}function Fh(){Vi=Bu.current,V(gs),V(Bu)}var Cn=A(null),Vn=null;function mr(r){var s=r.alternate;w(pt,pt.current&1),w(Cn,r),Vn===null&&(s===null||gs.current!==null||s.memoizedState!==null)&&(Vn=r)}function Kh(r){w(pt,pt.current),w(Cn,r),Vn===null&&(Vn=r)}function c1(r){r.tag===22?(w(pt,pt.current),w(Cn,r),Vn===null&&(Vn=r)):gr()}function gr(){w(pt,pt.current),w(Cn,Cn.current)}function vn(r){V(Cn),Vn===r&&(Vn=null),V(pt)}var pt=A(0);function Lu(r){for(var s=r;s!==null;){if(s.tag===13){var u=s.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||Zd(u)||$d(u)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var zi=0,ve=null,$e=null,yt=null,Iu=!1,ys=!1,hl=!1,qu=0,Ea=0,bs=null,mE=0;function ft(){throw Error(i(321))}function Yh(r,s){if(s===null)return!1;for(var u=0;u<s.length&&u<r.length;u++)if(!kn(r[u],s[u]))return!1;return!0}function Gh(r,s,u,h,m,y){return zi=y,ve=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,q.H=r===null||r.memoizedState===null?Q1:ad,hl=!1,y=u(h,m),hl=!1,ys&&(y=h1(s,u,h,m)),f1(r),y}function f1(r){q.H=Oa;var s=$e!==null&&$e.next!==null;if(zi=0,yt=$e=ve=null,Iu=!1,Ea=0,bs=null,s)throw Error(i(300));r===null||bt||(r=r.dependencies,r!==null&&Nu(r)&&(bt=!0))}function h1(r,s,u,h){ve=r;var m=0;do{if(ys&&(bs=null),Ea=0,ys=!1,25<=m)throw Error(i(301));if(m+=1,yt=$e=null,r.updateQueue!=null){var y=r.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}q.H=X1,y=s(u,h)}while(ys);return y}function gE(){var r=q.H,s=r.useState()[0];return s=typeof s.then=="function"?Na(s):s,r=r.useState()[0],($e!==null?$e.memoizedState:null)!==r&&(ve.flags|=1024),s}function Qh(){var r=qu!==0;return qu=0,r}function Xh(r,s,u){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~u}function Jh(r){if(Iu){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Iu=!1}zi=0,yt=$e=ve=null,ys=!1,Ea=qu=0,bs=null}function Zt(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?ve.memoizedState=yt=r:yt=yt.next=r,yt}function mt(){if($e===null){var r=ve.alternate;r=r!==null?r.memoizedState:null}else r=$e.next;var s=yt===null?ve.memoizedState:yt.next;if(s!==null)yt=s,$e=r;else{if(r===null)throw ve.alternate===null?Error(i(467)):Error(i(310));$e=r,r={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},yt===null?ve.memoizedState=yt=r:yt=yt.next=r}return yt}function Hu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Na(r){var s=Ea;return Ea+=1,bs===null&&(bs=[]),r=n1(bs,r,s),s=ve,(yt===null?s.memoizedState:yt.next)===null&&(s=s.alternate,q.H=s===null||s.memoizedState===null?Q1:ad),r}function Uu(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Na(r);if(r.$$typeof===L)return zt(r)}throw Error(i(438,String(r)))}function Zh(r){var s=null,u=ve.updateQueue;if(u!==null&&(s=u.memoCache),s==null){var h=ve.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(s={data:h.data.map(function(m){return m.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),u===null&&(u=Hu(),ve.updateQueue=u),u.memoCache=s,u=s.data[s.index],u===void 0)for(u=s.data[s.index]=Array(r),h=0;h<r;h++)u[h]=H;return s.index++,u}function _i(r,s){return typeof s=="function"?s(r):s}function Vu(r){var s=mt();return $h(s,$e,r)}function $h(r,s,u){var h=r.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=u;var m=r.baseQueue,y=h.pending;if(y!==null){if(m!==null){var k=m.next;m.next=y.next,y.next=k}s.baseQueue=m=y,h.pending=null}if(y=r.baseState,m===null)r.memoizedState=y;else{s=m.next;var C=k=null,N=null,_=s,U=!1;do{var G=_.lane&-536870913;if(G!==_.lane?(_e&G)===G:(zi&G)===G){var B=_.revertLane;if(B===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null}),G===hs&&(U=!0);else if((zi&B)===B){_=_.next,B===hs&&(U=!0);continue}else G={lane:0,revertLane:_.revertLane,gesture:null,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null},N===null?(C=N=G,k=y):N=N.next=G,ve.lanes|=B,Sr|=B;G=_.action,hl&&u(y,G),y=_.hasEagerState?_.eagerState:u(y,G)}else B={lane:G,revertLane:_.revertLane,gesture:_.gesture,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null},N===null?(C=N=B,k=y):N=N.next=B,ve.lanes|=G,Sr|=G;_=_.next}while(_!==null&&_!==s);if(N===null?k=y:N.next=C,!kn(y,r.memoizedState)&&(bt=!0,U&&(u=ds,u!==null)))throw u;r.memoizedState=y,r.baseState=k,r.baseQueue=N,h.lastRenderedState=y}return m===null&&(h.lanes=0),[r.memoizedState,h.dispatch]}function Ph(r){var s=mt(),u=s.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=r;var h=u.dispatch,m=u.pending,y=s.memoizedState;if(m!==null){u.pending=null;var k=m=m.next;do y=r(y,k.action),k=k.next;while(k!==m);kn(y,s.memoizedState)||(bt=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),u.lastRenderedState=y}return[y,h]}function d1(r,s,u){var h=ve,m=mt(),y=qe;if(y){if(u===void 0)throw Error(i(407));u=u()}else u=s();var k=!kn(($e||m).memoizedState,u);if(k&&(m.memoizedState=u,bt=!0),m=m.queue,td(g1.bind(null,h,m,r),[r]),m.getSnapshot!==s||k||yt!==null&&yt.memoizedState.tag&1){if(h.flags|=2048,Ss(9,{destroy:void 0},m1.bind(null,h,m,u,s),null),tt===null)throw Error(i(349));y||(zi&127)!==0||p1(h,s,u)}return u}function p1(r,s,u){r.flags|=16384,r={getSnapshot:s,value:u},s=ve.updateQueue,s===null?(s=Hu(),ve.updateQueue=s,s.stores=[r]):(u=s.stores,u===null?s.stores=[r]:u.push(r))}function m1(r,s,u,h){s.value=u,s.getSnapshot=h,y1(s)&&b1(r)}function g1(r,s,u){return u(function(){y1(s)&&b1(r)})}function y1(r){var s=r.getSnapshot;r=r.value;try{var u=s();return!kn(r,u)}catch{return!0}}function b1(r){var s=il(r,2);s!==null&&cn(s,r,2)}function Wh(r){var s=Zt();if(typeof r=="function"){var u=r;if(r=u(),hl){nn(!0);try{u()}finally{nn(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_i,lastRenderedState:r},s}function S1(r,s,u,h){return r.baseState=u,$h(r,$e,typeof h=="function"?h:_i)}function yE(r,s,u,h,m){if(Ku(r))throw Error(i(485));if(r=s.action,r!==null){var y={payload:m,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(k){y.listeners.push(k)}};q.T!==null?u(!0):y.isTransition=!1,h(y),u=s.pending,u===null?(y.next=s.pending=y,k1(s,y)):(y.next=u.next,s.pending=u.next=y)}}function k1(r,s){var u=s.action,h=s.payload,m=r.state;if(s.isTransition){var y=q.T,k={};q.T=k;try{var C=u(m,h),N=q.S;N!==null&&N(k,C),x1(r,s,C)}catch(_){ed(r,s,_)}finally{y!==null&&k.types!==null&&(y.types=k.types),q.T=y}}else try{y=u(m,h),x1(r,s,y)}catch(_){ed(r,s,_)}}function x1(r,s,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(h){C1(r,s,h)},function(h){return ed(r,s,h)}):C1(r,s,u)}function C1(r,s,u){s.status="fulfilled",s.value=u,v1(s),r.state=u,s=r.pending,s!==null&&(u=s.next,u===s?r.pending=null:(u=u.next,s.next=u,k1(r,u)))}function ed(r,s,u){var h=r.pending;if(r.pending=null,h!==null){h=h.next;do s.status="rejected",s.reason=u,v1(s),s=s.next;while(s!==h)}r.action=null}function v1(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function w1(r,s){return s}function T1(r,s){if(qe){var u=tt.formState;if(u!==null){e:{var h=ve;if(qe){if(it){t:{for(var m=it,y=Un;m.nodeType!==8;){if(!y){m=null;break t}if(m=jn(m.nextSibling),m===null){m=null;break t}}y=m.data,m=y==="F!"||y==="F"?m:null}if(m){it=jn(m.nextSibling),h=m.data==="F!";break e}}cr(h)}h=!1}h&&(s=u[0])}}return u=Zt(),u.memoizedState=u.baseState=s,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:w1,lastRenderedState:s},u.queue=h,u=K1.bind(null,ve,h),h.dispatch=u,h=Wh(!1),y=sd.bind(null,ve,!1,h.queue),h=Zt(),m={state:s,dispatch:null,action:r,pending:null},h.queue=m,u=yE.bind(null,ve,m,y,u),m.dispatch=u,h.memoizedState=r,[s,u,!1]}function M1(r){var s=mt();return E1(s,$e,r)}function E1(r,s,u){if(s=$h(r,s,w1)[0],r=Vu(_i)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var h=Na(s)}catch(k){throw k===ps?Ru:k}else h=s;s=mt();var m=s.queue,y=m.dispatch;return u!==s.memoizedState&&(ve.flags|=2048,Ss(9,{destroy:void 0},bE.bind(null,m,u),null)),[h,y,r]}function bE(r,s){r.action=s}function N1(r){var s=mt(),u=$e;if(u!==null)return E1(s,u,r);mt(),s=s.memoizedState,u=mt();var h=u.queue.dispatch;return u.memoizedState=r,[s,h,!1]}function Ss(r,s,u,h){return r={tag:r,create:u,deps:h,inst:s,next:null},s=ve.updateQueue,s===null&&(s=Hu(),ve.updateQueue=s),u=s.lastEffect,u===null?s.lastEffect=r.next=r:(h=u.next,u.next=r,r.next=h,s.lastEffect=r),r}function A1(){return mt().memoizedState}function ju(r,s,u,h){var m=Zt();ve.flags|=r,m.memoizedState=Ss(1|s,{destroy:void 0},u,h===void 0?null:h)}function Fu(r,s,u,h){var m=mt();h=h===void 0?null:h;var y=m.memoizedState.inst;$e!==null&&h!==null&&Yh(h,$e.memoizedState.deps)?m.memoizedState=Ss(s,y,u,h):(ve.flags|=r,m.memoizedState=Ss(1|s,y,u,h))}function O1(r,s){ju(8390656,8,r,s)}function td(r,s){Fu(2048,8,r,s)}function SE(r){ve.flags|=4;var s=ve.updateQueue;if(s===null)s=Hu(),ve.updateQueue=s,s.events=[r];else{var u=s.events;u===null?s.events=[r]:u.push(r)}}function R1(r){var s=mt().memoizedState;return SE({ref:s,nextImpl:r}),function(){if((Ke&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function D1(r,s){return Fu(4,2,r,s)}function z1(r,s){return Fu(4,4,r,s)}function _1(r,s){if(typeof s=="function"){r=r();var u=s(r);return function(){typeof u=="function"?u():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function B1(r,s,u){u=u!=null?u.concat([r]):null,Fu(4,4,_1.bind(null,s,r),u)}function nd(){}function L1(r,s){var u=mt();s=s===void 0?null:s;var h=u.memoizedState;return s!==null&&Yh(s,h[1])?h[0]:(u.memoizedState=[r,s],r)}function I1(r,s){var u=mt();s=s===void 0?null:s;var h=u.memoizedState;if(s!==null&&Yh(s,h[1]))return h[0];if(h=r(),hl){nn(!0);try{r()}finally{nn(!1)}}return u.memoizedState=[h,s],h}function id(r,s,u){return u===void 0||(zi&1073741824)!==0&&(_e&261930)===0?r.memoizedState=s:(r.memoizedState=u,r=qb(),ve.lanes|=r,Sr|=r,u)}function q1(r,s,u,h){return kn(u,s)?u:gs.current!==null?(r=id(r,u,h),kn(r,s)||(bt=!0),r):(zi&42)===0||(zi&1073741824)!==0&&(_e&261930)===0?(bt=!0,r.memoizedState=u):(r=qb(),ve.lanes|=r,Sr|=r,s)}function H1(r,s,u,h,m){var y=J.p;J.p=y!==0&&8>y?y:8;var k=q.T,C={};q.T=C,sd(r,!1,s,u);try{var N=m(),_=q.S;if(_!==null&&_(C,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var U=pE(N,h);Aa(r,s,U,Mn(r))}else Aa(r,s,h,Mn(r))}catch(G){Aa(r,s,{then:function(){},status:"rejected",reason:G},Mn())}finally{J.p=y,k!==null&&C.types!==null&&(k.types=C.types),q.T=k}}function kE(){}function rd(r,s,u,h){if(r.tag!==5)throw Error(i(476));var m=U1(r).queue;H1(r,m,s,oe,u===null?kE:function(){return V1(r),u(h)})}function U1(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:oe,baseState:oe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_i,lastRenderedState:oe},next:null};var u={};return s.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_i,lastRenderedState:u},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function V1(r){var s=U1(r);s.next===null&&(s=r.alternate.memoizedState),Aa(r,s.next.queue,{},Mn())}function ld(){return zt(Ga)}function j1(){return mt().memoizedState}function F1(){return mt().memoizedState}function xE(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var u=Mn();r=dr(u);var h=pr(s,r,u);h!==null&&(cn(h,s,u),wa(h,s,u)),s={cache:_h()},r.payload=s;return}s=s.return}}function CE(r,s,u){var h=Mn();u={lane:h,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Ku(r)?Y1(s,u):(u=vh(r,s,u,h),u!==null&&(cn(u,r,h),G1(u,s,h)))}function K1(r,s,u){var h=Mn();Aa(r,s,u,h)}function Aa(r,s,u,h){var m={lane:h,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Ku(r))Y1(s,m);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var k=s.lastRenderedState,C=y(k,u);if(m.hasEagerState=!0,m.eagerState=C,kn(C,k))return wu(r,s,m,0),tt===null&&vu(),!1}catch{}finally{}if(u=vh(r,s,m,h),u!==null)return cn(u,r,h),G1(u,s,h),!0}return!1}function sd(r,s,u,h){if(h={lane:2,revertLane:qd(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Ku(r)){if(s)throw Error(i(479))}else s=vh(r,u,h,2),s!==null&&cn(s,r,2)}function Ku(r){var s=r.alternate;return r===ve||s!==null&&s===ve}function Y1(r,s){ys=Iu=!0;var u=r.pending;u===null?s.next=s:(s.next=u.next,u.next=s),r.pending=s}function G1(r,s,u){if((u&4194048)!==0){var h=s.lanes;h&=r.pendingLanes,u|=h,s.lanes=u,$y(r,u)}}var Oa={readContext:zt,use:Uu,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useLayoutEffect:ft,useInsertionEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useSyncExternalStore:ft,useId:ft,useHostTransitionStatus:ft,useFormState:ft,useActionState:ft,useOptimistic:ft,useMemoCache:ft,useCacheRefresh:ft};Oa.useEffectEvent=ft;var Q1={readContext:zt,use:Uu,useCallback:function(r,s){return Zt().memoizedState=[r,s===void 0?null:s],r},useContext:zt,useEffect:O1,useImperativeHandle:function(r,s,u){u=u!=null?u.concat([r]):null,ju(4194308,4,_1.bind(null,s,r),u)},useLayoutEffect:function(r,s){return ju(4194308,4,r,s)},useInsertionEffect:function(r,s){ju(4,2,r,s)},useMemo:function(r,s){var u=Zt();s=s===void 0?null:s;var h=r();if(hl){nn(!0);try{r()}finally{nn(!1)}}return u.memoizedState=[h,s],h},useReducer:function(r,s,u){var h=Zt();if(u!==void 0){var m=u(s);if(hl){nn(!0);try{u(s)}finally{nn(!1)}}}else m=s;return h.memoizedState=h.baseState=m,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:m},h.queue=r,r=r.dispatch=CE.bind(null,ve,r),[h.memoizedState,r]},useRef:function(r){var s=Zt();return r={current:r},s.memoizedState=r},useState:function(r){r=Wh(r);var s=r.queue,u=K1.bind(null,ve,s);return s.dispatch=u,[r.memoizedState,u]},useDebugValue:nd,useDeferredValue:function(r,s){var u=Zt();return id(u,r,s)},useTransition:function(){var r=Wh(!1);return r=H1.bind(null,ve,r.queue,!0,!1),Zt().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,u){var h=ve,m=Zt();if(qe){if(u===void 0)throw Error(i(407));u=u()}else{if(u=s(),tt===null)throw Error(i(349));(_e&127)!==0||p1(h,s,u)}m.memoizedState=u;var y={value:u,getSnapshot:s};return m.queue=y,O1(g1.bind(null,h,y,r),[r]),h.flags|=2048,Ss(9,{destroy:void 0},m1.bind(null,h,y,u,s),null),u},useId:function(){var r=Zt(),s=tt.identifierPrefix;if(qe){var u=fi,h=ci;u=(h&~(1<<32-et(h)-1)).toString(32)+u,s="_"+s+"R_"+u,u=qu++,0<u&&(s+="H"+u.toString(32)),s+="_"}else u=mE++,s="_"+s+"r_"+u.toString(32)+"_";return r.memoizedState=s},useHostTransitionStatus:ld,useFormState:T1,useActionState:T1,useOptimistic:function(r){var s=Zt();s.memoizedState=s.baseState=r;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=u,s=sd.bind(null,ve,!0,u),u.dispatch=s,[r,s]},useMemoCache:Zh,useCacheRefresh:function(){return Zt().memoizedState=xE.bind(null,ve)},useEffectEvent:function(r){var s=Zt(),u={impl:r};return s.memoizedState=u,function(){if((Ke&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}},ad={readContext:zt,use:Uu,useCallback:L1,useContext:zt,useEffect:td,useImperativeHandle:B1,useInsertionEffect:D1,useLayoutEffect:z1,useMemo:I1,useReducer:Vu,useRef:A1,useState:function(){return Vu(_i)},useDebugValue:nd,useDeferredValue:function(r,s){var u=mt();return q1(u,$e.memoizedState,r,s)},useTransition:function(){var r=Vu(_i)[0],s=mt().memoizedState;return[typeof r=="boolean"?r:Na(r),s]},useSyncExternalStore:d1,useId:j1,useHostTransitionStatus:ld,useFormState:M1,useActionState:M1,useOptimistic:function(r,s){var u=mt();return S1(u,$e,r,s)},useMemoCache:Zh,useCacheRefresh:F1};ad.useEffectEvent=R1;var X1={readContext:zt,use:Uu,useCallback:L1,useContext:zt,useEffect:td,useImperativeHandle:B1,useInsertionEffect:D1,useLayoutEffect:z1,useMemo:I1,useReducer:Ph,useRef:A1,useState:function(){return Ph(_i)},useDebugValue:nd,useDeferredValue:function(r,s){var u=mt();return $e===null?id(u,r,s):q1(u,$e.memoizedState,r,s)},useTransition:function(){var r=Ph(_i)[0],s=mt().memoizedState;return[typeof r=="boolean"?r:Na(r),s]},useSyncExternalStore:d1,useId:j1,useHostTransitionStatus:ld,useFormState:N1,useActionState:N1,useOptimistic:function(r,s){var u=mt();return $e!==null?S1(u,$e,r,s):(u.baseState=r,[r,u.queue.dispatch])},useMemoCache:Zh,useCacheRefresh:F1};X1.useEffectEvent=R1;function od(r,s,u,h){s=r.memoizedState,u=u(h,s),u=u==null?s:g({},s,u),r.memoizedState=u,r.lanes===0&&(r.updateQueue.baseState=u)}var ud={enqueueSetState:function(r,s,u){r=r._reactInternals;var h=Mn(),m=dr(h);m.payload=s,u!=null&&(m.callback=u),s=pr(r,m,h),s!==null&&(cn(s,r,h),wa(s,r,h))},enqueueReplaceState:function(r,s,u){r=r._reactInternals;var h=Mn(),m=dr(h);m.tag=1,m.payload=s,u!=null&&(m.callback=u),s=pr(r,m,h),s!==null&&(cn(s,r,h),wa(s,r,h))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var u=Mn(),h=dr(u);h.tag=2,s!=null&&(h.callback=s),s=pr(r,h,u),s!==null&&(cn(s,r,u),wa(s,r,u))}};function J1(r,s,u,h,m,y,k){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,y,k):s.prototype&&s.prototype.isPureReactComponent?!ga(u,h)||!ga(m,y):!0}function Z1(r,s,u,h){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(u,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(u,h),s.state!==r&&ud.enqueueReplaceState(s,s.state,null)}function dl(r,s){var u=s;if("ref"in s){u={};for(var h in s)h!=="ref"&&(u[h]=s[h])}if(r=r.defaultProps){u===s&&(u=g({},u));for(var m in r)u[m]===void 0&&(u[m]=r[m])}return u}function $1(r){Cu(r)}function P1(r){console.error(r)}function W1(r){Cu(r)}function Yu(r,s){try{var u=r.onUncaughtError;u(s.value,{componentStack:s.stack})}catch(h){setTimeout(function(){throw h})}}function eb(r,s,u){try{var h=r.onCaughtError;h(u.value,{componentStack:u.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function cd(r,s,u){return u=dr(u),u.tag=3,u.payload={element:null},u.callback=function(){Yu(r,s)},u}function tb(r){return r=dr(r),r.tag=3,r}function nb(r,s,u,h){var m=u.type.getDerivedStateFromError;if(typeof m=="function"){var y=h.value;r.payload=function(){return m(y)},r.callback=function(){eb(s,u,h)}}var k=u.stateNode;k!==null&&typeof k.componentDidCatch=="function"&&(r.callback=function(){eb(s,u,h),typeof m!="function"&&(kr===null?kr=new Set([this]):kr.add(this));var C=h.stack;this.componentDidCatch(h.value,{componentStack:C!==null?C:""})})}function vE(r,s,u,h,m){if(u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(s=u.alternate,s!==null&&fs(s,u,m,!0),u=Cn.current,u!==null){switch(u.tag){case 31:case 13:return Vn===null?ic():u.alternate===null&&ht===0&&(ht=3),u.flags&=-257,u.flags|=65536,u.lanes=m,h===Du?u.flags|=16384:(s=u.updateQueue,s===null?u.updateQueue=new Set([h]):s.add(h),Bd(r,h,m)),!1;case 22:return u.flags|=65536,h===Du?u.flags|=16384:(s=u.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([h])},u.updateQueue=s):(u=s.retryQueue,u===null?s.retryQueue=new Set([h]):u.add(h)),Bd(r,h,m)),!1}throw Error(i(435,u.tag))}return Bd(r,h,m),ic(),!1}if(qe)return s=Cn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=m,h!==Ah&&(r=Error(i(422),{cause:h}),Sa(In(r,u)))):(h!==Ah&&(s=Error(i(423),{cause:h}),Sa(In(s,u))),r=r.current.alternate,r.flags|=65536,m&=-m,r.lanes|=m,h=In(h,u),m=cd(r.stateNode,h,m),Uh(r,m),ht!==4&&(ht=2)),!1;var y=Error(i(520),{cause:h});if(y=In(y,u),qa===null?qa=[y]:qa.push(y),ht!==4&&(ht=2),s===null)return!0;h=In(h,u),u=s;do{switch(u.tag){case 3:return u.flags|=65536,r=m&-m,u.lanes|=r,r=cd(u.stateNode,h,r),Uh(u,r),!1;case 1:if(s=u.type,y=u.stateNode,(u.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(kr===null||!kr.has(y))))return u.flags|=65536,m&=-m,u.lanes|=m,m=tb(m),nb(m,r,u,h),Uh(u,m),!1}u=u.return}while(u!==null);return!1}var fd=Error(i(461)),bt=!1;function _t(r,s,u,h){s.child=r===null?s1(s,null,u,h):fl(s,r.child,u,h)}function ib(r,s,u,h,m){u=u.render;var y=s.ref;if("ref"in h){var k={};for(var C in h)C!=="ref"&&(k[C]=h[C])}else k=h;return al(s),h=Gh(r,s,u,k,y,m),C=Qh(),r!==null&&!bt?(Xh(r,s,m),Bi(r,s,m)):(qe&&C&&Eh(s),s.flags|=1,_t(r,s,h,m),s.child)}function rb(r,s,u,h,m){if(r===null){var y=u.type;return typeof y=="function"&&!wh(y)&&y.defaultProps===void 0&&u.compare===null?(s.tag=15,s.type=y,lb(r,s,y,h,m)):(r=Mu(u.type,null,h,s,s.mode,m),r.ref=s.ref,r.return=s,s.child=r)}if(y=r.child,!Sd(r,m)){var k=y.memoizedProps;if(u=u.compare,u=u!==null?u:ga,u(k,h)&&r.ref===s.ref)return Bi(r,s,m)}return s.flags|=1,r=Ai(y,h),r.ref=s.ref,r.return=s,s.child=r}function lb(r,s,u,h,m){if(r!==null){var y=r.memoizedProps;if(ga(y,h)&&r.ref===s.ref)if(bt=!1,s.pendingProps=h=y,Sd(r,m))(r.flags&131072)!==0&&(bt=!0);else return s.lanes=r.lanes,Bi(r,s,m)}return hd(r,s,u,h,m)}function sb(r,s,u,h){var m=h.children,y=r!==null?r.memoizedState:null;if(r===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((s.flags&128)!==0){if(y=y!==null?y.baseLanes|u:u,r!==null){for(h=s.child=r.child,m=0;h!==null;)m=m|h.lanes|h.childLanes,h=h.sibling;h=m&~y}else h=0,s.child=null;return ab(r,s,y,u,h)}if((u&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&Ou(s,y!==null?y.cachePool:null),y!==null?u1(s,y):jh(),c1(s);else return h=s.lanes=536870912,ab(r,s,y!==null?y.baseLanes|u:u,u,h)}else y!==null?(Ou(s,y.cachePool),u1(s,y),gr(),s.memoizedState=null):(r!==null&&Ou(s,null),jh(),gr());return _t(r,s,m,u),s.child}function Ra(r,s){return r!==null&&r.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function ab(r,s,u,h,m){var y=Lh();return y=y===null?null:{parent:gt._currentValue,pool:y},s.memoizedState={baseLanes:u,cachePool:y},r!==null&&Ou(s,null),jh(),c1(s),r!==null&&fs(r,s,h,!0),s.childLanes=m,null}function Gu(r,s){return s=Xu({mode:s.mode,children:s.children},r.mode),s.ref=r.ref,r.child=s,s.return=r,s}function ob(r,s,u){return fl(s,r.child,null,u),r=Gu(s,s.pendingProps),r.flags|=2,vn(s),s.memoizedState=null,r}function wE(r,s,u){var h=s.pendingProps,m=(s.flags&128)!==0;if(s.flags&=-129,r===null){if(qe){if(h.mode==="hidden")return r=Gu(s,h),s.lanes=536870912,Ra(null,r);if(Kh(s),(r=it)?(r=kS(r,Un),r=r!==null&&r.data==="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:or!==null?{id:ci,overflow:fi}:null,retryLane:536870912,hydrationErrors:null},u=Y0(r),u.return=s,s.child=u,Dt=s,it=null)):r=null,r===null)throw cr(s);return s.lanes=536870912,null}return Gu(s,h)}var y=r.memoizedState;if(y!==null){var k=y.dehydrated;if(Kh(s),m)if(s.flags&256)s.flags&=-257,s=ob(r,s,u);else if(s.memoizedState!==null)s.child=r.child,s.flags|=128,s=null;else throw Error(i(558));else if(bt||fs(r,s,u,!1),m=(u&r.childLanes)!==0,bt||m){if(h=tt,h!==null&&(k=Py(h,u),k!==0&&k!==y.retryLane))throw y.retryLane=k,il(r,k),cn(h,r,k),fd;ic(),s=ob(r,s,u)}else r=y.treeContext,it=jn(k.nextSibling),Dt=s,qe=!0,ur=null,Un=!1,r!==null&&X0(s,r),s=Gu(s,h),s.flags|=4096;return s}return r=Ai(r.child,{mode:h.mode,children:h.children}),r.ref=s.ref,s.child=r,r.return=s,r}function Qu(r,s){var u=s.ref;if(u===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(r===null||r.ref!==u)&&(s.flags|=4194816)}}function hd(r,s,u,h,m){return al(s),u=Gh(r,s,u,h,void 0,m),h=Qh(),r!==null&&!bt?(Xh(r,s,m),Bi(r,s,m)):(qe&&h&&Eh(s),s.flags|=1,_t(r,s,u,m),s.child)}function ub(r,s,u,h,m,y){return al(s),s.updateQueue=null,u=h1(s,h,u,m),f1(r),h=Qh(),r!==null&&!bt?(Xh(r,s,y),Bi(r,s,y)):(qe&&h&&Eh(s),s.flags|=1,_t(r,s,u,y),s.child)}function cb(r,s,u,h,m){if(al(s),s.stateNode===null){var y=ss,k=u.contextType;typeof k=="object"&&k!==null&&(y=zt(k)),y=new u(h,y),s.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=ud,s.stateNode=y,y._reactInternals=s,y=s.stateNode,y.props=h,y.state=s.memoizedState,y.refs={},qh(s),k=u.contextType,y.context=typeof k=="object"&&k!==null?zt(k):ss,y.state=s.memoizedState,k=u.getDerivedStateFromProps,typeof k=="function"&&(od(s,u,k,h),y.state=s.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(k=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),k!==y.state&&ud.enqueueReplaceState(y,y.state,null),Ma(s,h,y,m),Ta(),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308),h=!0}else if(r===null){y=s.stateNode;var C=s.memoizedProps,N=dl(u,C);y.props=N;var _=y.context,U=u.contextType;k=ss,typeof U=="object"&&U!==null&&(k=zt(U));var G=u.getDerivedStateFromProps;U=typeof G=="function"||typeof y.getSnapshotBeforeUpdate=="function",C=s.pendingProps!==C,U||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(C||_!==k)&&Z1(s,y,h,k),hr=!1;var B=s.memoizedState;y.state=B,Ma(s,h,y,m),Ta(),_=s.memoizedState,C||B!==_||hr?(typeof G=="function"&&(od(s,u,G,h),_=s.memoizedState),(N=hr||J1(s,u,N,h,B,_,k))?(U||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(s.flags|=4194308)):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=_),y.props=h,y.state=_,y.context=k,h=N):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{y=s.stateNode,Hh(r,s),k=s.memoizedProps,U=dl(u,k),y.props=U,G=s.pendingProps,B=y.context,_=u.contextType,N=ss,typeof _=="object"&&_!==null&&(N=zt(_)),C=u.getDerivedStateFromProps,(_=typeof C=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(k!==G||B!==N)&&Z1(s,y,h,N),hr=!1,B=s.memoizedState,y.state=B,Ma(s,h,y,m),Ta();var I=s.memoizedState;k!==G||B!==I||hr||r!==null&&r.dependencies!==null&&Nu(r.dependencies)?(typeof C=="function"&&(od(s,u,C,h),I=s.memoizedState),(U=hr||J1(s,u,U,h,B,I,N)||r!==null&&r.dependencies!==null&&Nu(r.dependencies))?(_||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(h,I,N),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(h,I,N)),typeof y.componentDidUpdate=="function"&&(s.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof y.componentDidUpdate!="function"||k===r.memoizedProps&&B===r.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||k===r.memoizedProps&&B===r.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=I),y.props=h,y.state=I,y.context=N,h=U):(typeof y.componentDidUpdate!="function"||k===r.memoizedProps&&B===r.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||k===r.memoizedProps&&B===r.memoizedState||(s.flags|=1024),h=!1)}return y=h,Qu(r,s),h=(s.flags&128)!==0,y||h?(y=s.stateNode,u=h&&typeof u.getDerivedStateFromError!="function"?null:y.render(),s.flags|=1,r!==null&&h?(s.child=fl(s,r.child,null,m),s.child=fl(s,null,u,m)):_t(r,s,u,m),s.memoizedState=y.state,r=s.child):r=Bi(r,s,m),r}function fb(r,s,u,h){return ll(),s.flags|=256,_t(r,s,u,h),s.child}var dd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function pd(r){return{baseLanes:r,cachePool:e1()}}function md(r,s,u){return r=r!==null?r.childLanes&~u:0,s&&(r|=Tn),r}function hb(r,s,u){var h=s.pendingProps,m=!1,y=(s.flags&128)!==0,k;if((k=y)||(k=r!==null&&r.memoizedState===null?!1:(pt.current&2)!==0),k&&(m=!0,s.flags&=-129),k=(s.flags&32)!==0,s.flags&=-33,r===null){if(qe){if(m?mr(s):gr(),(r=it)?(r=kS(r,Un),r=r!==null&&r.data!=="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:or!==null?{id:ci,overflow:fi}:null,retryLane:536870912,hydrationErrors:null},u=Y0(r),u.return=s,s.child=u,Dt=s,it=null)):r=null,r===null)throw cr(s);return $d(r)?s.lanes=32:s.lanes=536870912,null}var C=h.children;return h=h.fallback,m?(gr(),m=s.mode,C=Xu({mode:"hidden",children:C},m),h=rl(h,m,u,null),C.return=s,h.return=s,C.sibling=h,s.child=C,h=s.child,h.memoizedState=pd(u),h.childLanes=md(r,k,u),s.memoizedState=dd,Ra(null,h)):(mr(s),gd(s,C))}var N=r.memoizedState;if(N!==null&&(C=N.dehydrated,C!==null)){if(y)s.flags&256?(mr(s),s.flags&=-257,s=yd(r,s,u)):s.memoizedState!==null?(gr(),s.child=r.child,s.flags|=128,s=null):(gr(),C=h.fallback,m=s.mode,h=Xu({mode:"visible",children:h.children},m),C=rl(C,m,u,null),C.flags|=2,h.return=s,C.return=s,h.sibling=C,s.child=h,fl(s,r.child,null,u),h=s.child,h.memoizedState=pd(u),h.childLanes=md(r,k,u),s.memoizedState=dd,s=Ra(null,h));else if(mr(s),$d(C)){if(k=C.nextSibling&&C.nextSibling.dataset,k)var _=k.dgst;k=_,h=Error(i(419)),h.stack="",h.digest=k,Sa({value:h,source:null,stack:null}),s=yd(r,s,u)}else if(bt||fs(r,s,u,!1),k=(u&r.childLanes)!==0,bt||k){if(k=tt,k!==null&&(h=Py(k,u),h!==0&&h!==N.retryLane))throw N.retryLane=h,il(r,h),cn(k,r,h),fd;Zd(C)||ic(),s=yd(r,s,u)}else Zd(C)?(s.flags|=192,s.child=r.child,s=null):(r=N.treeContext,it=jn(C.nextSibling),Dt=s,qe=!0,ur=null,Un=!1,r!==null&&X0(s,r),s=gd(s,h.children),s.flags|=4096);return s}return m?(gr(),C=h.fallback,m=s.mode,N=r.child,_=N.sibling,h=Ai(N,{mode:"hidden",children:h.children}),h.subtreeFlags=N.subtreeFlags&65011712,_!==null?C=Ai(_,C):(C=rl(C,m,u,null),C.flags|=2),C.return=s,h.return=s,h.sibling=C,s.child=h,Ra(null,h),h=s.child,C=r.child.memoizedState,C===null?C=pd(u):(m=C.cachePool,m!==null?(N=gt._currentValue,m=m.parent!==N?{parent:N,pool:N}:m):m=e1(),C={baseLanes:C.baseLanes|u,cachePool:m}),h.memoizedState=C,h.childLanes=md(r,k,u),s.memoizedState=dd,Ra(r.child,h)):(mr(s),u=r.child,r=u.sibling,u=Ai(u,{mode:"visible",children:h.children}),u.return=s,u.sibling=null,r!==null&&(k=s.deletions,k===null?(s.deletions=[r],s.flags|=16):k.push(r)),s.child=u,s.memoizedState=null,u)}function gd(r,s){return s=Xu({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function Xu(r,s){return r=xn(22,r,null,s),r.lanes=0,r}function yd(r,s,u){return fl(s,r.child,null,u),r=gd(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function db(r,s,u){r.lanes|=s;var h=r.alternate;h!==null&&(h.lanes|=s),Dh(r.return,s,u)}function bd(r,s,u,h,m,y){var k=r.memoizedState;k===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:u,tailMode:m,treeForkCount:y}:(k.isBackwards=s,k.rendering=null,k.renderingStartTime=0,k.last=h,k.tail=u,k.tailMode=m,k.treeForkCount=y)}function pb(r,s,u){var h=s.pendingProps,m=h.revealOrder,y=h.tail;h=h.children;var k=pt.current,C=(k&2)!==0;if(C?(k=k&1|2,s.flags|=128):k&=1,w(pt,k),_t(r,s,h,u),h=qe?ba:0,!C&&r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&db(r,u,s);else if(r.tag===19)db(r,u,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(m){case"forwards":for(u=s.child,m=null;u!==null;)r=u.alternate,r!==null&&Lu(r)===null&&(m=u),u=u.sibling;u=m,u===null?(m=s.child,s.child=null):(m=u.sibling,u.sibling=null),bd(s,!1,m,u,y,h);break;case"backwards":case"unstable_legacy-backwards":for(u=null,m=s.child,s.child=null;m!==null;){if(r=m.alternate,r!==null&&Lu(r)===null){s.child=m;break}r=m.sibling,m.sibling=u,u=m,m=r}bd(s,!0,u,null,y,h);break;case"together":bd(s,!1,null,null,void 0,h);break;default:s.memoizedState=null}return s.child}function Bi(r,s,u){if(r!==null&&(s.dependencies=r.dependencies),Sr|=s.lanes,(u&s.childLanes)===0)if(r!==null){if(fs(r,s,u,!1),(u&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,u=Ai(r,r.pendingProps),s.child=u,u.return=s;r.sibling!==null;)r=r.sibling,u=u.sibling=Ai(r,r.pendingProps),u.return=s;u.sibling=null}return s.child}function Sd(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&Nu(r)))}function TE(r,s,u){switch(s.tag){case 3:at(s,s.stateNode.containerInfo),fr(s,gt,r.memoizedState.cache),ll();break;case 27:case 5:zn(s);break;case 4:at(s,s.stateNode.containerInfo);break;case 10:fr(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Kh(s),null;break;case 13:var h=s.memoizedState;if(h!==null)return h.dehydrated!==null?(mr(s),s.flags|=128,null):(u&s.child.childLanes)!==0?hb(r,s,u):(mr(s),r=Bi(r,s,u),r!==null?r.sibling:null);mr(s);break;case 19:var m=(r.flags&128)!==0;if(h=(u&s.childLanes)!==0,h||(fs(r,s,u,!1),h=(u&s.childLanes)!==0),m){if(h)return pb(r,s,u);s.flags|=128}if(m=s.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),w(pt,pt.current),h)break;return null;case 22:return s.lanes=0,sb(r,s,u,s.pendingProps);case 24:fr(s,gt,r.memoizedState.cache)}return Bi(r,s,u)}function mb(r,s,u){if(r!==null)if(r.memoizedProps!==s.pendingProps)bt=!0;else{if(!Sd(r,u)&&(s.flags&128)===0)return bt=!1,TE(r,s,u);bt=(r.flags&131072)!==0}else bt=!1,qe&&(s.flags&1048576)!==0&&Q0(s,ba,s.index);switch(s.lanes=0,s.tag){case 16:e:{var h=s.pendingProps;if(r=ul(s.elementType),s.type=r,typeof r=="function")wh(r)?(h=dl(r,h),s.tag=1,s=cb(null,s,r,h,u)):(s.tag=0,s=hd(null,s,r,h,u));else{if(r!=null){var m=r.$$typeof;if(m===P){s.tag=11,s=ib(null,s,r,h,u);break e}else if(m===Y){s.tag=14,s=rb(null,s,r,h,u);break e}}throw s=Ve(r)||r,Error(i(306,s,""))}}return s;case 0:return hd(r,s,s.type,s.pendingProps,u);case 1:return h=s.type,m=dl(h,s.pendingProps),cb(r,s,h,m,u);case 3:e:{if(at(s,s.stateNode.containerInfo),r===null)throw Error(i(387));h=s.pendingProps;var y=s.memoizedState;m=y.element,Hh(r,s),Ma(s,h,null,u);var k=s.memoizedState;if(h=k.cache,fr(s,gt,h),h!==y.cache&&zh(s,[gt],u,!0),Ta(),h=k.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:k.cache},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){s=fb(r,s,h,u);break e}else if(h!==m){m=In(Error(i(424)),s),Sa(m),s=fb(r,s,h,u);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(it=jn(r.firstChild),Dt=s,qe=!0,ur=null,Un=!0,u=s1(s,null,h,u),s.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(ll(),h===m){s=Bi(r,s,u);break e}_t(r,s,h,u)}s=s.child}return s;case 26:return Qu(r,s),r===null?(u=MS(s.type,null,s.pendingProps,null))?s.memoizedState=u:qe||(u=s.type,r=s.pendingProps,h=cc(fe.current).createElement(u),h[Rt]=s,h[rn]=r,Bt(h,u,r),Mt(h),s.stateNode=h):s.memoizedState=MS(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return zn(s),r===null&&qe&&(h=s.stateNode=vS(s.type,s.pendingProps,fe.current),Dt=s,Un=!0,m=it,wr(s.type)?(Pd=m,it=jn(h.firstChild)):it=m),_t(r,s,s.pendingProps.children,u),Qu(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&qe&&((m=h=it)&&(h=tN(h,s.type,s.pendingProps,Un),h!==null?(s.stateNode=h,Dt=s,it=jn(h.firstChild),Un=!1,m=!0):m=!1),m||cr(s)),zn(s),m=s.type,y=s.pendingProps,k=r!==null?r.memoizedProps:null,h=y.children,Qd(m,y)?h=null:k!==null&&Qd(m,k)&&(s.flags|=32),s.memoizedState!==null&&(m=Gh(r,s,gE,null,null,u),Ga._currentValue=m),Qu(r,s),_t(r,s,h,u),s.child;case 6:return r===null&&qe&&((r=u=it)&&(u=nN(u,s.pendingProps,Un),u!==null?(s.stateNode=u,Dt=s,it=null,r=!0):r=!1),r||cr(s)),null;case 13:return hb(r,s,u);case 4:return at(s,s.stateNode.containerInfo),h=s.pendingProps,r===null?s.child=fl(s,null,h,u):_t(r,s,h,u),s.child;case 11:return ib(r,s,s.type,s.pendingProps,u);case 7:return _t(r,s,s.pendingProps,u),s.child;case 8:return _t(r,s,s.pendingProps.children,u),s.child;case 12:return _t(r,s,s.pendingProps.children,u),s.child;case 10:return h=s.pendingProps,fr(s,s.type,h.value),_t(r,s,h.children,u),s.child;case 9:return m=s.type._context,h=s.pendingProps.children,al(s),m=zt(m),h=h(m),s.flags|=1,_t(r,s,h,u),s.child;case 14:return rb(r,s,s.type,s.pendingProps,u);case 15:return lb(r,s,s.type,s.pendingProps,u);case 19:return pb(r,s,u);case 31:return wE(r,s,u);case 22:return sb(r,s,u,s.pendingProps);case 24:return al(s),h=zt(gt),r===null?(m=Lh(),m===null&&(m=tt,y=_h(),m.pooledCache=y,y.refCount++,y!==null&&(m.pooledCacheLanes|=u),m=y),s.memoizedState={parent:h,cache:m},qh(s),fr(s,gt,m)):((r.lanes&u)!==0&&(Hh(r,s),Ma(s,null,null,u),Ta()),m=r.memoizedState,y=s.memoizedState,m.parent!==h?(m={parent:h,cache:h},s.memoizedState=m,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=m),fr(s,gt,h)):(h=y.cache,fr(s,gt,h),h!==m.cache&&zh(s,[gt],u,!0))),_t(r,s,s.pendingProps.children,u),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Li(r){r.flags|=4}function kd(r,s,u,h,m){if((s=(r.mode&32)!==0)&&(s=!1),s){if(r.flags|=16777216,(m&335544128)===m)if(r.stateNode.complete)r.flags|=8192;else if(jb())r.flags|=8192;else throw cl=Du,Ih}else r.flags&=-16777217}function gb(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!RS(s))if(jb())r.flags|=8192;else throw cl=Du,Ih}function Ju(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?Jy():536870912,r.lanes|=s,vs|=s)}function Da(r,s){if(!qe)switch(r.tailMode){case"hidden":s=r.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?r.tail=null:u.sibling=null;break;case"collapsed":u=r.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function rt(r){var s=r.alternate!==null&&r.alternate.child===r.child,u=0,h=0;if(s)for(var m=r.child;m!==null;)u|=m.lanes|m.childLanes,h|=m.subtreeFlags&65011712,h|=m.flags&65011712,m.return=r,m=m.sibling;else for(m=r.child;m!==null;)u|=m.lanes|m.childLanes,h|=m.subtreeFlags,h|=m.flags,m.return=r,m=m.sibling;return r.subtreeFlags|=h,r.childLanes=u,s}function ME(r,s,u){var h=s.pendingProps;switch(Nh(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(s),null;case 1:return rt(s),null;case 3:return u=s.stateNode,h=null,r!==null&&(h=r.memoizedState.cache),s.memoizedState.cache!==h&&(s.flags|=2048),Di(gt),Ze(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(r===null||r.child===null)&&(cs(s)?Li(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Oh())),rt(s),null;case 26:var m=s.type,y=s.memoizedState;return r===null?(Li(s),y!==null?(rt(s),gb(s,y)):(rt(s),kd(s,m,null,h,u))):y?y!==r.memoizedState?(Li(s),rt(s),gb(s,y)):(rt(s),s.flags&=-16777217):(r=r.memoizedProps,r!==h&&Li(s),rt(s),kd(s,m,r,h,u)),null;case 27:if(vi(s),u=fe.current,m=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==h&&Li(s);else{if(!h){if(s.stateNode===null)throw Error(i(166));return rt(s),null}r=te.current,cs(s)?J0(s):(r=vS(m,h,u),s.stateNode=r,Li(s))}return rt(s),null;case 5:if(vi(s),m=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==h&&Li(s);else{if(!h){if(s.stateNode===null)throw Error(i(166));return rt(s),null}if(y=te.current,cs(s))J0(s);else{var k=cc(fe.current);switch(y){case 1:y=k.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:y=k.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":y=k.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":y=k.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":y=k.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof h.is=="string"?k.createElement("select",{is:h.is}):k.createElement("select"),h.multiple?y.multiple=!0:h.size&&(y.size=h.size);break;default:y=typeof h.is=="string"?k.createElement(m,{is:h.is}):k.createElement(m)}}y[Rt]=s,y[rn]=h;e:for(k=s.child;k!==null;){if(k.tag===5||k.tag===6)y.appendChild(k.stateNode);else if(k.tag!==4&&k.tag!==27&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===s)break e;for(;k.sibling===null;){if(k.return===null||k.return===s)break e;k=k.return}k.sibling.return=k.return,k=k.sibling}s.stateNode=y;e:switch(Bt(y,m,h),m){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&Li(s)}}return rt(s),kd(s,s.type,r===null?null:r.memoizedProps,s.pendingProps,u),null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==h&&Li(s);else{if(typeof h!="string"&&s.stateNode===null)throw Error(i(166));if(r=fe.current,cs(s)){if(r=s.stateNode,u=s.memoizedProps,h=null,m=Dt,m!==null)switch(m.tag){case 27:case 5:h=m.memoizedProps}r[Rt]=s,r=!!(r.nodeValue===u||h!==null&&h.suppressHydrationWarning===!0||hS(r.nodeValue,u)),r||cr(s,!0)}else r=cc(r).createTextNode(h),r[Rt]=s,s.stateNode=r}return rt(s),null;case 31:if(u=s.memoizedState,r===null||r.memoizedState!==null){if(h=cs(s),u!==null){if(r===null){if(!h)throw Error(i(318));if(r=s.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[Rt]=s}else ll(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;rt(s),r=!1}else u=Oh(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=u),r=!0;if(!r)return s.flags&256?(vn(s),s):(vn(s),null);if((s.flags&128)!==0)throw Error(i(558))}return rt(s),null;case 13:if(h=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(m=cs(s),h!==null&&h.dehydrated!==null){if(r===null){if(!m)throw Error(i(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(i(317));m[Rt]=s}else ll(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;rt(s),m=!1}else m=Oh(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=m),m=!0;if(!m)return s.flags&256?(vn(s),s):(vn(s),null)}return vn(s),(s.flags&128)!==0?(s.lanes=u,s):(u=h!==null,r=r!==null&&r.memoizedState!==null,u&&(h=s.child,m=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(m=h.alternate.memoizedState.cachePool.pool),y=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(y=h.memoizedState.cachePool.pool),y!==m&&(h.flags|=2048)),u!==r&&u&&(s.child.flags|=8192),Ju(s,s.updateQueue),rt(s),null);case 4:return Ze(),r===null&&jd(s.stateNode.containerInfo),rt(s),null;case 10:return Di(s.type),rt(s),null;case 19:if(V(pt),h=s.memoizedState,h===null)return rt(s),null;if(m=(s.flags&128)!==0,y=h.rendering,y===null)if(m)Da(h,!1);else{if(ht!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(y=Lu(r),y!==null){for(s.flags|=128,Da(h,!1),r=y.updateQueue,s.updateQueue=r,Ju(s,r),s.subtreeFlags=0,r=u,u=s.child;u!==null;)K0(u,r),u=u.sibling;return w(pt,pt.current&1|2),qe&&Oi(s,h.treeForkCount),s.child}r=r.sibling}h.tail!==null&&Xt()>ec&&(s.flags|=128,m=!0,Da(h,!1),s.lanes=4194304)}else{if(!m)if(r=Lu(y),r!==null){if(s.flags|=128,m=!0,r=r.updateQueue,s.updateQueue=r,Ju(s,r),Da(h,!0),h.tail===null&&h.tailMode==="hidden"&&!y.alternate&&!qe)return rt(s),null}else 2*Xt()-h.renderingStartTime>ec&&u!==536870912&&(s.flags|=128,m=!0,Da(h,!1),s.lanes=4194304);h.isBackwards?(y.sibling=s.child,s.child=y):(r=h.last,r!==null?r.sibling=y:s.child=y,h.last=y)}return h.tail!==null?(r=h.tail,h.rendering=r,h.tail=r.sibling,h.renderingStartTime=Xt(),r.sibling=null,u=pt.current,w(pt,m?u&1|2:u&1),qe&&Oi(s,h.treeForkCount),r):(rt(s),null);case 22:case 23:return vn(s),Fh(),h=s.memoizedState!==null,r!==null?r.memoizedState!==null!==h&&(s.flags|=8192):h&&(s.flags|=8192),h?(u&536870912)!==0&&(s.flags&128)===0&&(rt(s),s.subtreeFlags&6&&(s.flags|=8192)):rt(s),u=s.updateQueue,u!==null&&Ju(s,u.retryQueue),u=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),h=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),h!==u&&(s.flags|=2048),r!==null&&V(ol),null;case 24:return u=null,r!==null&&(u=r.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Di(gt),rt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function EE(r,s){switch(Nh(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Di(gt),Ze(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return vi(s),null;case 31:if(s.memoizedState!==null){if(vn(s),s.alternate===null)throw Error(i(340));ll()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 13:if(vn(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));ll()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return V(pt),null;case 4:return Ze(),null;case 10:return Di(s.type),null;case 22:case 23:return vn(s),Fh(),r!==null&&V(ol),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return Di(gt),null;case 25:return null;default:return null}}function yb(r,s){switch(Nh(s),s.tag){case 3:Di(gt),Ze();break;case 26:case 27:case 5:vi(s);break;case 4:Ze();break;case 31:s.memoizedState!==null&&vn(s);break;case 13:vn(s);break;case 19:V(pt);break;case 10:Di(s.type);break;case 22:case 23:vn(s),Fh(),r!==null&&V(ol);break;case 24:Di(gt)}}function za(r,s){try{var u=s.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var m=h.next;u=m;do{if((u.tag&r)===r){h=void 0;var y=u.create,k=u.inst;h=y(),k.destroy=h}u=u.next}while(u!==m)}}catch(C){Je(s,s.return,C)}}function yr(r,s,u){try{var h=s.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var y=m.next;h=y;do{if((h.tag&r)===r){var k=h.inst,C=k.destroy;if(C!==void 0){k.destroy=void 0,m=s;var N=u,_=C;try{_()}catch(U){Je(m,N,U)}}}h=h.next}while(h!==y)}}catch(U){Je(s,s.return,U)}}function bb(r){var s=r.updateQueue;if(s!==null){var u=r.stateNode;try{o1(s,u)}catch(h){Je(r,r.return,h)}}}function Sb(r,s,u){u.props=dl(r.type,r.memoizedProps),u.state=r.memoizedState;try{u.componentWillUnmount()}catch(h){Je(r,s,h)}}function _a(r,s){try{var u=r.ref;if(u!==null){switch(r.tag){case 26:case 27:case 5:var h=r.stateNode;break;case 30:h=r.stateNode;break;default:h=r.stateNode}typeof u=="function"?r.refCleanup=u(h):u.current=h}}catch(m){Je(r,s,m)}}function hi(r,s){var u=r.ref,h=r.refCleanup;if(u!==null)if(typeof h=="function")try{h()}catch(m){Je(r,s,m)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(m){Je(r,s,m)}else u.current=null}function kb(r){var s=r.type,u=r.memoizedProps,h=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":u.autoFocus&&h.focus();break e;case"img":u.src?h.src=u.src:u.srcSet&&(h.srcset=u.srcSet)}}catch(m){Je(r,r.return,m)}}function xd(r,s,u){try{var h=r.stateNode;JE(h,r.type,u,s),h[rn]=s}catch(m){Je(r,r.return,m)}}function xb(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&wr(r.type)||r.tag===4}function Cd(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||xb(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&wr(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function vd(r,s,u){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(r,s):(s=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,s.appendChild(r),u=u._reactRootContainer,u!=null||s.onclick!==null||(s.onclick=Ei));else if(h!==4&&(h===27&&wr(r.type)&&(u=r.stateNode,s=null),r=r.child,r!==null))for(vd(r,s,u),r=r.sibling;r!==null;)vd(r,s,u),r=r.sibling}function Zu(r,s,u){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?u.insertBefore(r,s):u.appendChild(r);else if(h!==4&&(h===27&&wr(r.type)&&(u=r.stateNode),r=r.child,r!==null))for(Zu(r,s,u),r=r.sibling;r!==null;)Zu(r,s,u),r=r.sibling}function Cb(r){var s=r.stateNode,u=r.memoizedProps;try{for(var h=r.type,m=s.attributes;m.length;)s.removeAttributeNode(m[0]);Bt(s,h,u),s[Rt]=r,s[rn]=u}catch(y){Je(r,r.return,y)}}var Ii=!1,St=!1,wd=!1,vb=typeof WeakSet=="function"?WeakSet:Set,Et=null;function NE(r,s){if(r=r.containerInfo,Yd=yc,r=B0(r),yh(r)){if("selectionStart"in r)var u={start:r.selectionStart,end:r.selectionEnd};else e:{u=(u=r.ownerDocument)&&u.defaultView||window;var h=u.getSelection&&u.getSelection();if(h&&h.rangeCount!==0){u=h.anchorNode;var m=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{u.nodeType,y.nodeType}catch{u=null;break e}var k=0,C=-1,N=-1,_=0,U=0,G=r,B=null;t:for(;;){for(var I;G!==u||m!==0&&G.nodeType!==3||(C=k+m),G!==y||h!==0&&G.nodeType!==3||(N=k+h),G.nodeType===3&&(k+=G.nodeValue.length),(I=G.firstChild)!==null;)B=G,G=I;for(;;){if(G===r)break t;if(B===u&&++_===m&&(C=k),B===y&&++U===h&&(N=k),(I=G.nextSibling)!==null)break;G=B,B=G.parentNode}G=I}u=C===-1||N===-1?null:{start:C,end:N}}else u=null}u=u||{start:0,end:0}}else u=null;for(Gd={focusedElem:r,selectionRange:u},yc=!1,Et=s;Et!==null;)if(s=Et,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,Et=r;else for(;Et!==null;){switch(s=Et,y=s.alternate,r=s.flags,s.tag){case 0:if((r&4)!==0&&(r=s.updateQueue,r=r!==null?r.events:null,r!==null))for(u=0;u<r.length;u++)m=r[u],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&y!==null){r=void 0,u=s,m=y.memoizedProps,y=y.memoizedState,h=u.stateNode;try{var le=dl(u.type,m);r=h.getSnapshotBeforeUpdate(le,y),h.__reactInternalSnapshotBeforeUpdate=r}catch(pe){Je(u,u.return,pe)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,u=r.nodeType,u===9)Jd(r);else if(u===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Jd(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,Et=r;break}Et=s.return}}function wb(r,s,u){var h=u.flags;switch(u.tag){case 0:case 11:case 15:Hi(r,u),h&4&&za(5,u);break;case 1:if(Hi(r,u),h&4)if(r=u.stateNode,s===null)try{r.componentDidMount()}catch(k){Je(u,u.return,k)}else{var m=dl(u.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(m,s,r.__reactInternalSnapshotBeforeUpdate)}catch(k){Je(u,u.return,k)}}h&64&&bb(u),h&512&&_a(u,u.return);break;case 3:if(Hi(r,u),h&64&&(r=u.updateQueue,r!==null)){if(s=null,u.child!==null)switch(u.child.tag){case 27:case 5:s=u.child.stateNode;break;case 1:s=u.child.stateNode}try{o1(r,s)}catch(k){Je(u,u.return,k)}}break;case 27:s===null&&h&4&&Cb(u);case 26:case 5:Hi(r,u),s===null&&h&4&&kb(u),h&512&&_a(u,u.return);break;case 12:Hi(r,u);break;case 31:Hi(r,u),h&4&&Eb(r,u);break;case 13:Hi(r,u),h&4&&Nb(r,u),h&64&&(r=u.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(u=IE.bind(null,u),iN(r,u))));break;case 22:if(h=u.memoizedState!==null||Ii,!h){s=s!==null&&s.memoizedState!==null||St,m=Ii;var y=St;Ii=h,(St=s)&&!y?Ui(r,u,(u.subtreeFlags&8772)!==0):Hi(r,u),Ii=m,St=y}break;case 30:break;default:Hi(r,u)}}function Tb(r){var s=r.alternate;s!==null&&(r.alternate=null,Tb(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&eh(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var ot=null,sn=!1;function qi(r,s,u){for(u=u.child;u!==null;)Mb(r,s,u),u=u.sibling}function Mb(r,s,u){if(Ct&&typeof Ct.onCommitFiberUnmount=="function")try{Ct.onCommitFiberUnmount(Jt,u)}catch{}switch(u.tag){case 26:St||hi(u,s),qi(r,s,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:St||hi(u,s);var h=ot,m=sn;wr(u.type)&&(ot=u.stateNode,sn=!1),qi(r,s,u),Fa(u.stateNode),ot=h,sn=m;break;case 5:St||hi(u,s);case 6:if(h=ot,m=sn,ot=null,qi(r,s,u),ot=h,sn=m,ot!==null)if(sn)try{(ot.nodeType===9?ot.body:ot.nodeName==="HTML"?ot.ownerDocument.body:ot).removeChild(u.stateNode)}catch(y){Je(u,s,y)}else try{ot.removeChild(u.stateNode)}catch(y){Je(u,s,y)}break;case 18:ot!==null&&(sn?(r=ot,bS(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,u.stateNode),Rs(r)):bS(ot,u.stateNode));break;case 4:h=ot,m=sn,ot=u.stateNode.containerInfo,sn=!0,qi(r,s,u),ot=h,sn=m;break;case 0:case 11:case 14:case 15:yr(2,u,s),St||yr(4,u,s),qi(r,s,u);break;case 1:St||(hi(u,s),h=u.stateNode,typeof h.componentWillUnmount=="function"&&Sb(u,s,h)),qi(r,s,u);break;case 21:qi(r,s,u);break;case 22:St=(h=St)||u.memoizedState!==null,qi(r,s,u),St=h;break;default:qi(r,s,u)}}function Eb(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Rs(r)}catch(u){Je(s,s.return,u)}}}function Nb(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Rs(r)}catch(u){Je(s,s.return,u)}}function AE(r){switch(r.tag){case 31:case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new vb),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new vb),s;default:throw Error(i(435,r.tag))}}function $u(r,s){var u=AE(r);s.forEach(function(h){if(!u.has(h)){u.add(h);var m=qE.bind(null,r,h);h.then(m,m)}})}function an(r,s){var u=s.deletions;if(u!==null)for(var h=0;h<u.length;h++){var m=u[h],y=r,k=s,C=k;e:for(;C!==null;){switch(C.tag){case 27:if(wr(C.type)){ot=C.stateNode,sn=!1;break e}break;case 5:ot=C.stateNode,sn=!1;break e;case 3:case 4:ot=C.stateNode.containerInfo,sn=!0;break e}C=C.return}if(ot===null)throw Error(i(160));Mb(y,k,m),ot=null,sn=!1,y=m.alternate,y!==null&&(y.return=null),m.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Ab(s,r),s=s.sibling}var ni=null;function Ab(r,s){var u=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:an(s,r),on(r),h&4&&(yr(3,r,r.return),za(3,r),yr(5,r,r.return));break;case 1:an(s,r),on(r),h&512&&(St||u===null||hi(u,u.return)),h&64&&Ii&&(r=r.updateQueue,r!==null&&(h=r.callbacks,h!==null&&(u=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=u===null?h:u.concat(h))));break;case 26:var m=ni;if(an(s,r),on(r),h&512&&(St||u===null||hi(u,u.return)),h&4){var y=u!==null?u.memoizedState:null;if(h=r.memoizedState,u===null)if(h===null)if(r.stateNode===null){e:{h=r.type,u=r.memoizedProps,m=m.ownerDocument||m;t:switch(h){case"title":y=m.getElementsByTagName("title")[0],(!y||y[aa]||y[Rt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=m.createElement(h),m.head.insertBefore(y,m.querySelector("head > title"))),Bt(y,h,u),y[Rt]=r,Mt(y),h=y;break e;case"link":var k=AS("link","href",m).get(h+(u.href||""));if(k){for(var C=0;C<k.length;C++)if(y=k[C],y.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&y.getAttribute("rel")===(u.rel==null?null:u.rel)&&y.getAttribute("title")===(u.title==null?null:u.title)&&y.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){k.splice(C,1);break t}}y=m.createElement(h),Bt(y,h,u),m.head.appendChild(y);break;case"meta":if(k=AS("meta","content",m).get(h+(u.content||""))){for(C=0;C<k.length;C++)if(y=k[C],y.getAttribute("content")===(u.content==null?null:""+u.content)&&y.getAttribute("name")===(u.name==null?null:u.name)&&y.getAttribute("property")===(u.property==null?null:u.property)&&y.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&y.getAttribute("charset")===(u.charSet==null?null:u.charSet)){k.splice(C,1);break t}}y=m.createElement(h),Bt(y,h,u),m.head.appendChild(y);break;default:throw Error(i(468,h))}y[Rt]=r,Mt(y),h=y}r.stateNode=h}else OS(m,r.type,r.stateNode);else r.stateNode=NS(m,h,r.memoizedProps);else y!==h?(y===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):y.count--,h===null?OS(m,r.type,r.stateNode):NS(m,h,r.memoizedProps)):h===null&&r.stateNode!==null&&xd(r,r.memoizedProps,u.memoizedProps)}break;case 27:an(s,r),on(r),h&512&&(St||u===null||hi(u,u.return)),u!==null&&h&4&&xd(r,r.memoizedProps,u.memoizedProps);break;case 5:if(an(s,r),on(r),h&512&&(St||u===null||hi(u,u.return)),r.flags&32){m=r.stateNode;try{Wl(m,"")}catch(le){Je(r,r.return,le)}}h&4&&r.stateNode!=null&&(m=r.memoizedProps,xd(r,m,u!==null?u.memoizedProps:m)),h&1024&&(wd=!0);break;case 6:if(an(s,r),on(r),h&4){if(r.stateNode===null)throw Error(i(162));h=r.memoizedProps,u=r.stateNode;try{u.nodeValue=h}catch(le){Je(r,r.return,le)}}break;case 3:if(dc=null,m=ni,ni=fc(s.containerInfo),an(s,r),ni=m,on(r),h&4&&u!==null&&u.memoizedState.isDehydrated)try{Rs(s.containerInfo)}catch(le){Je(r,r.return,le)}wd&&(wd=!1,Ob(r));break;case 4:h=ni,ni=fc(r.stateNode.containerInfo),an(s,r),on(r),ni=h;break;case 12:an(s,r),on(r);break;case 31:an(s,r),on(r),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,$u(r,h)));break;case 13:an(s,r),on(r),r.child.flags&8192&&r.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Wu=Xt()),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,$u(r,h)));break;case 22:m=r.memoizedState!==null;var N=u!==null&&u.memoizedState!==null,_=Ii,U=St;if(Ii=_||m,St=U||N,an(s,r),St=U,Ii=_,on(r),h&8192)e:for(s=r.stateNode,s._visibility=m?s._visibility&-2:s._visibility|1,m&&(u===null||N||Ii||St||pl(r)),u=null,s=r;;){if(s.tag===5||s.tag===26){if(u===null){N=u=s;try{if(y=N.stateNode,m)k=y.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none";else{C=N.stateNode;var G=N.memoizedProps.style,B=G!=null&&G.hasOwnProperty("display")?G.display:null;C.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(le){Je(N,N.return,le)}}}else if(s.tag===6){if(u===null){N=s;try{N.stateNode.nodeValue=m?"":N.memoizedProps}catch(le){Je(N,N.return,le)}}}else if(s.tag===18){if(u===null){N=s;try{var I=N.stateNode;m?SS(I,!0):SS(N.stateNode,!1)}catch(le){Je(N,N.return,le)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;u===s&&(u=null),s=s.return}u===s&&(u=null),s.sibling.return=s.return,s=s.sibling}h&4&&(h=r.updateQueue,h!==null&&(u=h.retryQueue,u!==null&&(h.retryQueue=null,$u(r,u))));break;case 19:an(s,r),on(r),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,$u(r,h)));break;case 30:break;case 21:break;default:an(s,r),on(r)}}function on(r){var s=r.flags;if(s&2){try{for(var u,h=r.return;h!==null;){if(xb(h)){u=h;break}h=h.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var m=u.stateNode,y=Cd(r);Zu(r,y,m);break;case 5:var k=u.stateNode;u.flags&32&&(Wl(k,""),u.flags&=-33);var C=Cd(r);Zu(r,C,k);break;case 3:case 4:var N=u.stateNode.containerInfo,_=Cd(r);vd(r,_,N);break;default:throw Error(i(161))}}catch(U){Je(r,r.return,U)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function Ob(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;Ob(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function Hi(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)wb(r,s.alternate,s),s=s.sibling}function pl(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:yr(4,s,s.return),pl(s);break;case 1:hi(s,s.return);var u=s.stateNode;typeof u.componentWillUnmount=="function"&&Sb(s,s.return,u),pl(s);break;case 27:Fa(s.stateNode);case 26:case 5:hi(s,s.return),pl(s);break;case 22:s.memoizedState===null&&pl(s);break;case 30:pl(s);break;default:pl(s)}r=r.sibling}}function Ui(r,s,u){for(u=u&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var h=s.alternate,m=r,y=s,k=y.flags;switch(y.tag){case 0:case 11:case 15:Ui(m,y,u),za(4,y);break;case 1:if(Ui(m,y,u),h=y,m=h.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(_){Je(h,h.return,_)}if(h=y,m=h.updateQueue,m!==null){var C=h.stateNode;try{var N=m.shared.hiddenCallbacks;if(N!==null)for(m.shared.hiddenCallbacks=null,m=0;m<N.length;m++)a1(N[m],C)}catch(_){Je(h,h.return,_)}}u&&k&64&&bb(y),_a(y,y.return);break;case 27:Cb(y);case 26:case 5:Ui(m,y,u),u&&h===null&&k&4&&kb(y),_a(y,y.return);break;case 12:Ui(m,y,u);break;case 31:Ui(m,y,u),u&&k&4&&Eb(m,y);break;case 13:Ui(m,y,u),u&&k&4&&Nb(m,y);break;case 22:y.memoizedState===null&&Ui(m,y,u),_a(y,y.return);break;case 30:break;default:Ui(m,y,u)}s=s.sibling}}function Td(r,s){var u=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==u&&(r!=null&&r.refCount++,u!=null&&ka(u))}function Md(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&ka(r))}function ii(r,s,u,h){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Rb(r,s,u,h),s=s.sibling}function Rb(r,s,u,h){var m=s.flags;switch(s.tag){case 0:case 11:case 15:ii(r,s,u,h),m&2048&&za(9,s);break;case 1:ii(r,s,u,h);break;case 3:ii(r,s,u,h),m&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&ka(r)));break;case 12:if(m&2048){ii(r,s,u,h),r=s.stateNode;try{var y=s.memoizedProps,k=y.id,C=y.onPostCommit;typeof C=="function"&&C(k,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(N){Je(s,s.return,N)}}else ii(r,s,u,h);break;case 31:ii(r,s,u,h);break;case 13:ii(r,s,u,h);break;case 23:break;case 22:y=s.stateNode,k=s.alternate,s.memoizedState!==null?y._visibility&2?ii(r,s,u,h):Ba(r,s):y._visibility&2?ii(r,s,u,h):(y._visibility|=2,ks(r,s,u,h,(s.subtreeFlags&10256)!==0||!1)),m&2048&&Td(k,s);break;case 24:ii(r,s,u,h),m&2048&&Md(s.alternate,s);break;default:ii(r,s,u,h)}}function ks(r,s,u,h,m){for(m=m&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var y=r,k=s,C=u,N=h,_=k.flags;switch(k.tag){case 0:case 11:case 15:ks(y,k,C,N,m),za(8,k);break;case 23:break;case 22:var U=k.stateNode;k.memoizedState!==null?U._visibility&2?ks(y,k,C,N,m):Ba(y,k):(U._visibility|=2,ks(y,k,C,N,m)),m&&_&2048&&Td(k.alternate,k);break;case 24:ks(y,k,C,N,m),m&&_&2048&&Md(k.alternate,k);break;default:ks(y,k,C,N,m)}s=s.sibling}}function Ba(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var u=r,h=s,m=h.flags;switch(h.tag){case 22:Ba(u,h),m&2048&&Td(h.alternate,h);break;case 24:Ba(u,h),m&2048&&Md(h.alternate,h);break;default:Ba(u,h)}s=s.sibling}}var La=8192;function xs(r,s,u){if(r.subtreeFlags&La)for(r=r.child;r!==null;)Db(r,s,u),r=r.sibling}function Db(r,s,u){switch(r.tag){case 26:xs(r,s,u),r.flags&La&&r.memoizedState!==null&&mN(u,ni,r.memoizedState,r.memoizedProps);break;case 5:xs(r,s,u);break;case 3:case 4:var h=ni;ni=fc(r.stateNode.containerInfo),xs(r,s,u),ni=h;break;case 22:r.memoizedState===null&&(h=r.alternate,h!==null&&h.memoizedState!==null?(h=La,La=16777216,xs(r,s,u),La=h):xs(r,s,u));break;default:xs(r,s,u)}}function zb(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function Ia(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var u=0;u<s.length;u++){var h=s[u];Et=h,Bb(h,r)}zb(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)_b(r),r=r.sibling}function _b(r){switch(r.tag){case 0:case 11:case 15:Ia(r),r.flags&2048&&yr(9,r,r.return);break;case 3:Ia(r);break;case 12:Ia(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,Pu(r)):Ia(r);break;default:Ia(r)}}function Pu(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var u=0;u<s.length;u++){var h=s[u];Et=h,Bb(h,r)}zb(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:yr(8,s,s.return),Pu(s);break;case 22:u=s.stateNode,u._visibility&2&&(u._visibility&=-3,Pu(s));break;default:Pu(s)}r=r.sibling}}function Bb(r,s){for(;Et!==null;){var u=Et;switch(u.tag){case 0:case 11:case 15:yr(8,u,s);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var h=u.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:ka(u.memoizedState.cache)}if(h=u.child,h!==null)h.return=u,Et=h;else e:for(u=r;Et!==null;){h=Et;var m=h.sibling,y=h.return;if(Tb(h),h===u){Et=null;break e}if(m!==null){m.return=y,Et=m;break e}Et=y}}}var OE={getCacheForType:function(r){var s=zt(gt),u=s.data.get(r);return u===void 0&&(u=r(),s.data.set(r,u)),u},cacheSignal:function(){return zt(gt).controller.signal}},RE=typeof WeakMap=="function"?WeakMap:Map,Ke=0,tt=null,Oe=null,_e=0,Xe=0,wn=null,br=!1,Cs=!1,Ed=!1,Vi=0,ht=0,Sr=0,ml=0,Nd=0,Tn=0,vs=0,qa=null,un=null,Ad=!1,Wu=0,Lb=0,ec=1/0,tc=null,kr=null,vt=0,xr=null,ws=null,ji=0,Od=0,Rd=null,Ib=null,Ha=0,Dd=null;function Mn(){return(Ke&2)!==0&&_e!==0?_e&-_e:q.T!==null?qd():Wy()}function qb(){if(Tn===0)if((_e&536870912)===0||qe){var r=uu;uu<<=1,(uu&3932160)===0&&(uu=262144),Tn=r}else Tn=536870912;return r=Cn.current,r!==null&&(r.flags|=32),Tn}function cn(r,s,u){(r===tt&&(Xe===2||Xe===9)||r.cancelPendingCommit!==null)&&(Ts(r,0),Cr(r,_e,Tn,!1)),sa(r,u),((Ke&2)===0||r!==tt)&&(r===tt&&((Ke&2)===0&&(ml|=u),ht===4&&Cr(r,_e,Tn,!1)),di(r))}function Hb(r,s,u){if((Ke&6)!==0)throw Error(i(327));var h=!u&&(s&127)===0&&(s&r.expiredLanes)===0||la(r,s),m=h?_E(r,s):_d(r,s,!0),y=h;do{if(m===0){Cs&&!h&&Cr(r,s,0,!1);break}else{if(u=r.current.alternate,y&&!DE(u)){m=_d(r,s,!1),y=!1;continue}if(m===2){if(y=s,r.errorRecoveryDisabledLanes&y)var k=0;else k=r.pendingLanes&-536870913,k=k!==0?k:k&536870912?536870912:0;if(k!==0){s=k;e:{var C=r;m=qa;var N=C.current.memoizedState.isDehydrated;if(N&&(Ts(C,k).flags|=256),k=_d(C,k,!1),k!==2){if(Ed&&!N){C.errorRecoveryDisabledLanes|=y,ml|=y,m=4;break e}y=un,un=m,y!==null&&(un===null?un=y:un.push.apply(un,y))}m=k}if(y=!1,m!==2)continue}}if(m===1){Ts(r,0),Cr(r,s,0,!0);break}e:{switch(h=r,y=m,y){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Cr(h,s,Tn,!br);break e;case 2:un=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(m=Wu+300-Xt(),10<m)){if(Cr(h,s,Tn,!br),fu(h,0,!0)!==0)break e;ji=s,h.timeoutHandle=gS(Ub.bind(null,h,u,un,tc,Ad,s,Tn,ml,vs,br,y,"Throttled",-0,0),m);break e}Ub(h,u,un,tc,Ad,s,Tn,ml,vs,br,y,null,-0,0)}}break}while(!0);di(r)}function Ub(r,s,u,h,m,y,k,C,N,_,U,G,B,I){if(r.timeoutHandle=-1,G=s.subtreeFlags,G&8192||(G&16785408)===16785408){G={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ei},Db(s,y,G);var le=(y&62914560)===y?Wu-Xt():(y&4194048)===y?Lb-Xt():0;if(le=gN(G,le),le!==null){ji=y,r.cancelPendingCommit=le(Xb.bind(null,r,s,y,u,h,m,k,C,N,U,G,null,B,I)),Cr(r,y,k,!_);return}}Xb(r,s,y,u,h,m,k,C,N)}function DE(r){for(var s=r;;){var u=s.tag;if((u===0||u===11||u===15)&&s.flags&16384&&(u=s.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var h=0;h<u.length;h++){var m=u[h],y=m.getSnapshot;m=m.value;try{if(!kn(y(),m))return!1}catch{return!1}}if(u=s.child,s.subtreeFlags&16384&&u!==null)u.return=s,s=u;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Cr(r,s,u,h){s&=~Nd,s&=~ml,r.suspendedLanes|=s,r.pingedLanes&=~s,h&&(r.warmLanes|=s),h=r.expirationTimes;for(var m=s;0<m;){var y=31-et(m),k=1<<y;h[y]=-1,m&=~k}u!==0&&Zy(r,u,s)}function nc(){return(Ke&6)===0?(Ua(0),!1):!0}function zd(){if(Oe!==null){if(Xe===0)var r=Oe.return;else r=Oe,Ri=sl=null,Jh(r),ms=null,Ca=0,r=Oe;for(;r!==null;)yb(r.alternate,r),r=r.return;Oe=null}}function Ts(r,s){var u=r.timeoutHandle;u!==-1&&(r.timeoutHandle=-1,PE(u)),u=r.cancelPendingCommit,u!==null&&(r.cancelPendingCommit=null,u()),ji=0,zd(),tt=r,Oe=u=Ai(r.current,null),_e=s,Xe=0,wn=null,br=!1,Cs=la(r,s),Ed=!1,vs=Tn=Nd=ml=Sr=ht=0,un=qa=null,Ad=!1,(s&8)!==0&&(s|=s&32);var h=r.entangledLanes;if(h!==0)for(r=r.entanglements,h&=s;0<h;){var m=31-et(h),y=1<<m;s|=r[m],h&=~y}return Vi=s,vu(),u}function Vb(r,s){ve=null,q.H=Oa,s===ps||s===Ru?(s=i1(),Xe=3):s===Ih?(s=i1(),Xe=4):Xe=s===fd?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,wn=s,Oe===null&&(ht=1,Yu(r,In(s,r.current)))}function jb(){var r=Cn.current;return r===null?!0:(_e&4194048)===_e?Vn===null:(_e&62914560)===_e||(_e&536870912)!==0?r===Vn:!1}function Fb(){var r=q.H;return q.H=Oa,r===null?Oa:r}function Kb(){var r=q.A;return q.A=OE,r}function ic(){ht=4,br||(_e&4194048)!==_e&&Cn.current!==null||(Cs=!0),(Sr&134217727)===0&&(ml&134217727)===0||tt===null||Cr(tt,_e,Tn,!1)}function _d(r,s,u){var h=Ke;Ke|=2;var m=Fb(),y=Kb();(tt!==r||_e!==s)&&(tc=null,Ts(r,s)),s=!1;var k=ht;e:do try{if(Xe!==0&&Oe!==null){var C=Oe,N=wn;switch(Xe){case 8:zd(),k=6;break e;case 3:case 2:case 9:case 6:Cn.current===null&&(s=!0);var _=Xe;if(Xe=0,wn=null,Ms(r,C,N,_),u&&Cs){k=0;break e}break;default:_=Xe,Xe=0,wn=null,Ms(r,C,N,_)}}zE(),k=ht;break}catch(U){Vb(r,U)}while(!0);return s&&r.shellSuspendCounter++,Ri=sl=null,Ke=h,q.H=m,q.A=y,Oe===null&&(tt=null,_e=0,vu()),k}function zE(){for(;Oe!==null;)Yb(Oe)}function _E(r,s){var u=Ke;Ke|=2;var h=Fb(),m=Kb();tt!==r||_e!==s?(tc=null,ec=Xt()+500,Ts(r,s)):Cs=la(r,s);e:do try{if(Xe!==0&&Oe!==null){s=Oe;var y=wn;t:switch(Xe){case 1:Xe=0,wn=null,Ms(r,s,y,1);break;case 2:case 9:if(t1(y)){Xe=0,wn=null,Gb(s);break}s=function(){Xe!==2&&Xe!==9||tt!==r||(Xe=7),di(r)},y.then(s,s);break e;case 3:Xe=7;break e;case 4:Xe=5;break e;case 7:t1(y)?(Xe=0,wn=null,Gb(s)):(Xe=0,wn=null,Ms(r,s,y,7));break;case 5:var k=null;switch(Oe.tag){case 26:k=Oe.memoizedState;case 5:case 27:var C=Oe;if(k?RS(k):C.stateNode.complete){Xe=0,wn=null;var N=C.sibling;if(N!==null)Oe=N;else{var _=C.return;_!==null?(Oe=_,rc(_)):Oe=null}break t}}Xe=0,wn=null,Ms(r,s,y,5);break;case 6:Xe=0,wn=null,Ms(r,s,y,6);break;case 8:zd(),ht=6;break e;default:throw Error(i(462))}}BE();break}catch(U){Vb(r,U)}while(!0);return Ri=sl=null,q.H=h,q.A=m,Ke=u,Oe!==null?0:(tt=null,_e=0,vu(),ht)}function BE(){for(;Oe!==null&&!Qf();)Yb(Oe)}function Yb(r){var s=mb(r.alternate,r,Vi);r.memoizedProps=r.pendingProps,s===null?rc(r):Oe=s}function Gb(r){var s=r,u=s.alternate;switch(s.tag){case 15:case 0:s=ub(u,s,s.pendingProps,s.type,void 0,_e);break;case 11:s=ub(u,s,s.pendingProps,s.type.render,s.ref,_e);break;case 5:Jh(s);default:yb(u,s),s=Oe=K0(s,Vi),s=mb(u,s,Vi)}r.memoizedProps=r.pendingProps,s===null?rc(r):Oe=s}function Ms(r,s,u,h){Ri=sl=null,Jh(s),ms=null,Ca=0;var m=s.return;try{if(vE(r,m,s,u,_e)){ht=1,Yu(r,In(u,r.current)),Oe=null;return}}catch(y){if(m!==null)throw Oe=m,y;ht=1,Yu(r,In(u,r.current)),Oe=null;return}s.flags&32768?(qe||h===1?r=!0:Cs||(_e&536870912)!==0?r=!1:(br=r=!0,(h===2||h===9||h===3||h===6)&&(h=Cn.current,h!==null&&h.tag===13&&(h.flags|=16384))),Qb(s,r)):rc(s)}function rc(r){var s=r;do{if((s.flags&32768)!==0){Qb(s,br);return}r=s.return;var u=ME(s.alternate,s,Vi);if(u!==null){Oe=u;return}if(s=s.sibling,s!==null){Oe=s;return}Oe=s=r}while(s!==null);ht===0&&(ht=5)}function Qb(r,s){do{var u=EE(r.alternate,r);if(u!==null){u.flags&=32767,Oe=u;return}if(u=r.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!s&&(r=r.sibling,r!==null)){Oe=r;return}Oe=r=u}while(r!==null);ht=6,Oe=null}function Xb(r,s,u,h,m,y,k,C,N){r.cancelPendingCommit=null;do lc();while(vt!==0);if((Ke&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(y=s.lanes|s.childLanes,y|=Ch,pM(r,u,y,k,C,N),r===tt&&(Oe=tt=null,_e=0),ws=s,xr=r,ji=u,Od=y,Rd=m,Ib=h,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,HE(ye,function(){return Wb(),null})):(r.callbackNode=null,r.callbackPriority=0),h=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||h){h=q.T,q.T=null,m=J.p,J.p=2,k=Ke,Ke|=4;try{NE(r,s,u)}finally{Ke=k,J.p=m,q.T=h}}vt=1,Jb(),Zb(),$b()}}function Jb(){if(vt===1){vt=0;var r=xr,s=ws,u=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||u){u=q.T,q.T=null;var h=J.p;J.p=2;var m=Ke;Ke|=4;try{Ab(s,r);var y=Gd,k=B0(r.containerInfo),C=y.focusedElem,N=y.selectionRange;if(k!==C&&C&&C.ownerDocument&&_0(C.ownerDocument.documentElement,C)){if(N!==null&&yh(C)){var _=N.start,U=N.end;if(U===void 0&&(U=_),"selectionStart"in C)C.selectionStart=_,C.selectionEnd=Math.min(U,C.value.length);else{var G=C.ownerDocument||document,B=G&&G.defaultView||window;if(B.getSelection){var I=B.getSelection(),le=C.textContent.length,pe=Math.min(N.start,le),We=N.end===void 0?pe:Math.min(N.end,le);!I.extend&&pe>We&&(k=We,We=pe,pe=k);var R=z0(C,pe),O=z0(C,We);if(R&&O&&(I.rangeCount!==1||I.anchorNode!==R.node||I.anchorOffset!==R.offset||I.focusNode!==O.node||I.focusOffset!==O.offset)){var D=G.createRange();D.setStart(R.node,R.offset),I.removeAllRanges(),pe>We?(I.addRange(D),I.extend(O.node,O.offset)):(D.setEnd(O.node,O.offset),I.addRange(D))}}}}for(G=[],I=C;I=I.parentNode;)I.nodeType===1&&G.push({element:I,left:I.scrollLeft,top:I.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<G.length;C++){var F=G[C];F.element.scrollLeft=F.left,F.element.scrollTop=F.top}}yc=!!Yd,Gd=Yd=null}finally{Ke=m,J.p=h,q.T=u}}r.current=s,vt=2}}function Zb(){if(vt===2){vt=0;var r=xr,s=ws,u=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||u){u=q.T,q.T=null;var h=J.p;J.p=2;var m=Ke;Ke|=4;try{wb(r,s.alternate,s)}finally{Ke=m,J.p=h,q.T=u}}vt=3}}function $b(){if(vt===4||vt===3){vt=0,Xf();var r=xr,s=ws,u=ji,h=Ib;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?vt=5:(vt=0,ws=xr=null,Pb(r,r.pendingLanes));var m=r.pendingLanes;if(m===0&&(kr=null),Pf(u),s=s.stateNode,Ct&&typeof Ct.onCommitFiberRoot=="function")try{Ct.onCommitFiberRoot(Jt,s,void 0,(s.current.flags&128)===128)}catch{}if(h!==null){s=q.T,m=J.p,J.p=2,q.T=null;try{for(var y=r.onRecoverableError,k=0;k<h.length;k++){var C=h[k];y(C.value,{componentStack:C.stack})}}finally{q.T=s,J.p=m}}(ji&3)!==0&&lc(),di(r),m=r.pendingLanes,(u&261930)!==0&&(m&42)!==0?r===Dd?Ha++:(Ha=0,Dd=r):Ha=0,Ua(0)}}function Pb(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,ka(s)))}function lc(){return Jb(),Zb(),$b(),Wb()}function Wb(){if(vt!==5)return!1;var r=xr,s=Od;Od=0;var u=Pf(ji),h=q.T,m=J.p;try{J.p=32>u?32:u,q.T=null,u=Rd,Rd=null;var y=xr,k=ji;if(vt=0,ws=xr=null,ji=0,(Ke&6)!==0)throw Error(i(331));var C=Ke;if(Ke|=4,_b(y.current),Rb(y,y.current,k,u),Ke=C,Ua(0,!1),Ct&&typeof Ct.onPostCommitFiberRoot=="function")try{Ct.onPostCommitFiberRoot(Jt,y)}catch{}return!0}finally{J.p=m,q.T=h,Pb(r,s)}}function eS(r,s,u){s=In(u,s),s=cd(r.stateNode,s,2),r=pr(r,s,2),r!==null&&(sa(r,2),di(r))}function Je(r,s,u){if(r.tag===3)eS(r,r,u);else for(;s!==null;){if(s.tag===3){eS(s,r,u);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(kr===null||!kr.has(h))){r=In(u,r),u=tb(2),h=pr(s,u,2),h!==null&&(nb(u,h,s,r),sa(h,2),di(h));break}}s=s.return}}function Bd(r,s,u){var h=r.pingCache;if(h===null){h=r.pingCache=new RE;var m=new Set;h.set(s,m)}else m=h.get(s),m===void 0&&(m=new Set,h.set(s,m));m.has(u)||(Ed=!0,m.add(u),r=LE.bind(null,r,s,u),s.then(r,r))}function LE(r,s,u){var h=r.pingCache;h!==null&&h.delete(s),r.pingedLanes|=r.suspendedLanes&u,r.warmLanes&=~u,tt===r&&(_e&u)===u&&(ht===4||ht===3&&(_e&62914560)===_e&&300>Xt()-Wu?(Ke&2)===0&&Ts(r,0):Nd|=u,vs===_e&&(vs=0)),di(r)}function tS(r,s){s===0&&(s=Jy()),r=il(r,s),r!==null&&(sa(r,s),di(r))}function IE(r){var s=r.memoizedState,u=0;s!==null&&(u=s.retryLane),tS(r,u)}function qE(r,s){var u=0;switch(r.tag){case 31:case 13:var h=r.stateNode,m=r.memoizedState;m!==null&&(u=m.retryLane);break;case 19:h=r.stateNode;break;case 22:h=r.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(s),tS(r,u)}function HE(r,s){return Gl(r,s)}var sc=null,Es=null,Ld=!1,ac=!1,Id=!1,vr=0;function di(r){r!==Es&&r.next===null&&(Es===null?sc=Es=r:Es=Es.next=r),ac=!0,Ld||(Ld=!0,VE())}function Ua(r,s){if(!Id&&ac){Id=!0;do for(var u=!1,h=sc;h!==null;){if(r!==0){var m=h.pendingLanes;if(m===0)var y=0;else{var k=h.suspendedLanes,C=h.pingedLanes;y=(1<<31-et(42|r)+1)-1,y&=m&~(k&~C),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(u=!0,lS(h,y))}else y=_e,y=fu(h,h===tt?y:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(y&3)===0||la(h,y)||(u=!0,lS(h,y));h=h.next}while(u);Id=!1}}function UE(){nS()}function nS(){ac=Ld=!1;var r=0;vr!==0&&$E()&&(r=vr);for(var s=Xt(),u=null,h=sc;h!==null;){var m=h.next,y=iS(h,s);y===0?(h.next=null,u===null?sc=m:u.next=m,m===null&&(Es=u)):(u=h,(r!==0||(y&3)!==0)&&(ac=!0)),h=m}vt!==0&&vt!==5||Ua(r),vr!==0&&(vr=0)}function iS(r,s){for(var u=r.suspendedLanes,h=r.pingedLanes,m=r.expirationTimes,y=r.pendingLanes&-62914561;0<y;){var k=31-et(y),C=1<<k,N=m[k];N===-1?((C&u)===0||(C&h)!==0)&&(m[k]=dM(C,s)):N<=s&&(r.expiredLanes|=C),y&=~C}if(s=tt,u=_e,u=fu(r,r===s?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),h=r.callbackNode,u===0||r===s&&(Xe===2||Xe===9)||r.cancelPendingCommit!==null)return h!==null&&h!==null&&ra(h),r.callbackNode=null,r.callbackPriority=0;if((u&3)===0||la(r,u)){if(s=u&-u,s===r.callbackPriority)return s;switch(h!==null&&ra(h),Pf(u)){case 2:case 8:u=$;break;case 32:u=ye;break;case 268435456:u=Ge;break;default:u=ye}return h=rS.bind(null,r),u=Gl(u,h),r.callbackPriority=s,r.callbackNode=u,s}return h!==null&&h!==null&&ra(h),r.callbackPriority=2,r.callbackNode=null,2}function rS(r,s){if(vt!==0&&vt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var u=r.callbackNode;if(lc()&&r.callbackNode!==u)return null;var h=_e;return h=fu(r,r===tt?h:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),h===0?null:(Hb(r,h,s),iS(r,Xt()),r.callbackNode!=null&&r.callbackNode===u?rS.bind(null,r):null)}function lS(r,s){if(lc())return null;Hb(r,s,!0)}function VE(){WE(function(){(Ke&6)!==0?Gl(j,UE):nS()})}function qd(){if(vr===0){var r=hs;r===0&&(r=ou,ou<<=1,(ou&261888)===0&&(ou=256)),vr=r}return vr}function sS(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:mu(""+r)}function aS(r,s){var u=s.ownerDocument.createElement("input");return u.name=s.name,u.value=s.value,r.id&&u.setAttribute("form",r.id),s.parentNode.insertBefore(u,s),r=new FormData(r),u.parentNode.removeChild(u),r}function jE(r,s,u,h,m){if(s==="submit"&&u&&u.stateNode===m){var y=sS((m[rn]||null).action),k=h.submitter;k&&(s=(s=k[rn]||null)?sS(s.formAction):k.getAttribute("formAction"),s!==null&&(y=s,k=null));var C=new Su("action","action",null,h,m);r.push({event:C,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(vr!==0){var N=k?aS(m,k):new FormData(m);rd(u,{pending:!0,data:N,method:m.method,action:y},null,N)}}else typeof y=="function"&&(C.preventDefault(),N=k?aS(m,k):new FormData(m),rd(u,{pending:!0,data:N,method:m.method,action:y},y,N))},currentTarget:m}]})}}for(var Hd=0;Hd<xh.length;Hd++){var Ud=xh[Hd],FE=Ud.toLowerCase(),KE=Ud[0].toUpperCase()+Ud.slice(1);ti(FE,"on"+KE)}ti(q0,"onAnimationEnd"),ti(H0,"onAnimationIteration"),ti(U0,"onAnimationStart"),ti("dblclick","onDoubleClick"),ti("focusin","onFocus"),ti("focusout","onBlur"),ti(sE,"onTransitionRun"),ti(aE,"onTransitionStart"),ti(oE,"onTransitionCancel"),ti(V0,"onTransitionEnd"),$l("onMouseEnter",["mouseout","mouseover"]),$l("onMouseLeave",["mouseout","mouseover"]),$l("onPointerEnter",["pointerout","pointerover"]),$l("onPointerLeave",["pointerout","pointerover"]),Wr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Wr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Wr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Wr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Wr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Wr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Va="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Va));function oS(r,s){s=(s&4)!==0;for(var u=0;u<r.length;u++){var h=r[u],m=h.event;h=h.listeners;e:{var y=void 0;if(s)for(var k=h.length-1;0<=k;k--){var C=h[k],N=C.instance,_=C.currentTarget;if(C=C.listener,N!==y&&m.isPropagationStopped())break e;y=C,m.currentTarget=_;try{y(m)}catch(U){Cu(U)}m.currentTarget=null,y=N}else for(k=0;k<h.length;k++){if(C=h[k],N=C.instance,_=C.currentTarget,C=C.listener,N!==y&&m.isPropagationStopped())break e;y=C,m.currentTarget=_;try{y(m)}catch(U){Cu(U)}m.currentTarget=null,y=N}}}}function Re(r,s){var u=s[Wf];u===void 0&&(u=s[Wf]=new Set);var h=r+"__bubble";u.has(h)||(uS(s,r,2,!1),u.add(h))}function Vd(r,s,u){var h=0;s&&(h|=4),uS(u,r,h,s)}var oc="_reactListening"+Math.random().toString(36).slice(2);function jd(r){if(!r[oc]){r[oc]=!0,n0.forEach(function(u){u!=="selectionchange"&&(YE.has(u)||Vd(u,!1,r),Vd(u,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[oc]||(s[oc]=!0,Vd("selectionchange",!1,s))}}function uS(r,s,u,h){switch(qS(s)){case 2:var m=SN;break;case 8:m=kN;break;default:m=ip}u=m.bind(null,s,u,r),m=void 0,!oh||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(m=!0),h?m!==void 0?r.addEventListener(s,u,{capture:!0,passive:m}):r.addEventListener(s,u,!0):m!==void 0?r.addEventListener(s,u,{passive:m}):r.addEventListener(s,u,!1)}function Fd(r,s,u,h,m){var y=h;if((s&1)===0&&(s&2)===0&&h!==null)e:for(;;){if(h===null)return;var k=h.tag;if(k===3||k===4){var C=h.stateNode.containerInfo;if(C===m)break;if(k===4)for(k=h.return;k!==null;){var N=k.tag;if((N===3||N===4)&&k.stateNode.containerInfo===m)return;k=k.return}for(;C!==null;){if(k=Xl(C),k===null)return;if(N=k.tag,N===5||N===6||N===26||N===27){h=y=k;continue e}C=C.parentNode}}h=h.return}p0(function(){var _=y,U=sh(u),G=[];e:{var B=j0.get(r);if(B!==void 0){var I=Su,le=r;switch(r){case"keypress":if(yu(u)===0)break e;case"keydown":case"keyup":I=qM;break;case"focusin":le="focus",I=hh;break;case"focusout":le="blur",I=hh;break;case"beforeblur":case"afterblur":I=hh;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=y0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=MM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=VM;break;case q0:case H0:case U0:I=AM;break;case V0:I=FM;break;case"scroll":case"scrollend":I=wM;break;case"wheel":I=YM;break;case"copy":case"cut":case"paste":I=RM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=S0;break;case"toggle":case"beforetoggle":I=QM}var pe=(s&4)!==0,We=!pe&&(r==="scroll"||r==="scrollend"),R=pe?B!==null?B+"Capture":null:B;pe=[];for(var O=_,D;O!==null;){var F=O;if(D=F.stateNode,F=F.tag,F!==5&&F!==26&&F!==27||D===null||R===null||(F=ua(O,R),F!=null&&pe.push(ja(O,F,D))),We)break;O=O.return}0<pe.length&&(B=new I(B,le,null,u,U),G.push({event:B,listeners:pe}))}}if((s&7)===0){e:{if(B=r==="mouseover"||r==="pointerover",I=r==="mouseout"||r==="pointerout",B&&u!==lh&&(le=u.relatedTarget||u.fromElement)&&(Xl(le)||le[Ql]))break e;if((I||B)&&(B=U.window===U?U:(B=U.ownerDocument)?B.defaultView||B.parentWindow:window,I?(le=u.relatedTarget||u.toElement,I=_,le=le?Xl(le):null,le!==null&&(We=a(le),pe=le.tag,le!==We||pe!==5&&pe!==27&&pe!==6)&&(le=null)):(I=null,le=_),I!==le)){if(pe=y0,F="onMouseLeave",R="onMouseEnter",O="mouse",(r==="pointerout"||r==="pointerover")&&(pe=S0,F="onPointerLeave",R="onPointerEnter",O="pointer"),We=I==null?B:oa(I),D=le==null?B:oa(le),B=new pe(F,O+"leave",I,u,U),B.target=We,B.relatedTarget=D,F=null,Xl(U)===_&&(pe=new pe(R,O+"enter",le,u,U),pe.target=D,pe.relatedTarget=We,F=pe),We=F,I&&le)t:{for(pe=GE,R=I,O=le,D=0,F=R;F;F=pe(F))D++;F=0;for(var he=O;he;he=pe(he))F++;for(;0<D-F;)R=pe(R),D--;for(;0<F-D;)O=pe(O),F--;for(;D--;){if(R===O||O!==null&&R===O.alternate){pe=R;break t}R=pe(R),O=pe(O)}pe=null}else pe=null;I!==null&&cS(G,B,I,pe,!1),le!==null&&We!==null&&cS(G,We,le,pe,!0)}}e:{if(B=_?oa(_):window,I=B.nodeName&&B.nodeName.toLowerCase(),I==="select"||I==="input"&&B.type==="file")var je=E0;else if(T0(B))if(N0)je=iE;else{je=tE;var ae=eE}else I=B.nodeName,!I||I.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?_&&rh(_.elementType)&&(je=E0):je=nE;if(je&&(je=je(r,_))){M0(G,je,u,U);break e}ae&&ae(r,B,_),r==="focusout"&&_&&B.type==="number"&&_.memoizedProps.value!=null&&ih(B,"number",B.value)}switch(ae=_?oa(_):window,r){case"focusin":(T0(ae)||ae.contentEditable==="true")&&(is=ae,bh=_,ya=null);break;case"focusout":ya=bh=is=null;break;case"mousedown":Sh=!0;break;case"contextmenu":case"mouseup":case"dragend":Sh=!1,L0(G,u,U);break;case"selectionchange":if(lE)break;case"keydown":case"keyup":L0(G,u,U)}var Me;if(ph)e:{switch(r){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else ns?v0(r,u)&&(Be="onCompositionEnd"):r==="keydown"&&u.keyCode===229&&(Be="onCompositionStart");Be&&(k0&&u.locale!=="ko"&&(ns||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&ns&&(Me=m0()):(ar=U,uh="value"in ar?ar.value:ar.textContent,ns=!0)),ae=uc(_,Be),0<ae.length&&(Be=new b0(Be,r,null,u,U),G.push({event:Be,listeners:ae}),Me?Be.data=Me:(Me=w0(u),Me!==null&&(Be.data=Me)))),(Me=JM?ZM(r,u):$M(r,u))&&(Be=uc(_,"onBeforeInput"),0<Be.length&&(ae=new b0("onBeforeInput","beforeinput",null,u,U),G.push({event:ae,listeners:Be}),ae.data=Me)),jE(G,r,_,u,U)}oS(G,s)})}function ja(r,s,u){return{instance:r,listener:s,currentTarget:u}}function uc(r,s){for(var u=s+"Capture",h=[];r!==null;){var m=r,y=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||y===null||(m=ua(r,u),m!=null&&h.unshift(ja(r,m,y)),m=ua(r,s),m!=null&&h.push(ja(r,m,y))),r.tag===3)return h;r=r.return}return[]}function GE(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function cS(r,s,u,h,m){for(var y=s._reactName,k=[];u!==null&&u!==h;){var C=u,N=C.alternate,_=C.stateNode;if(C=C.tag,N!==null&&N===h)break;C!==5&&C!==26&&C!==27||_===null||(N=_,m?(_=ua(u,y),_!=null&&k.unshift(ja(u,_,N))):m||(_=ua(u,y),_!=null&&k.push(ja(u,_,N)))),u=u.return}k.length!==0&&r.push({event:s,listeners:k})}var QE=/\r\n?/g,XE=/\u0000|\uFFFD/g;function fS(r){return(typeof r=="string"?r:""+r).replace(QE,`
`).replace(XE,"")}function hS(r,s){return s=fS(s),fS(r)===s}function Pe(r,s,u,h,m,y){switch(u){case"children":typeof h=="string"?s==="body"||s==="textarea"&&h===""||Wl(r,h):(typeof h=="number"||typeof h=="bigint")&&s!=="body"&&Wl(r,""+h);break;case"className":du(r,"class",h);break;case"tabIndex":du(r,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":du(r,u,h);break;case"style":h0(r,h,y);break;case"data":if(s!=="object"){du(r,"data",h);break}case"src":case"href":if(h===""&&(s!=="a"||u!=="href")){r.removeAttribute(u);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){r.removeAttribute(u);break}h=mu(""+h),r.setAttribute(u,h);break;case"action":case"formAction":if(typeof h=="function"){r.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(u==="formAction"?(s!=="input"&&Pe(r,s,"name",m.name,m,null),Pe(r,s,"formEncType",m.formEncType,m,null),Pe(r,s,"formMethod",m.formMethod,m,null),Pe(r,s,"formTarget",m.formTarget,m,null)):(Pe(r,s,"encType",m.encType,m,null),Pe(r,s,"method",m.method,m,null),Pe(r,s,"target",m.target,m,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){r.removeAttribute(u);break}h=mu(""+h),r.setAttribute(u,h);break;case"onClick":h!=null&&(r.onclick=Ei);break;case"onScroll":h!=null&&Re("scroll",r);break;case"onScrollEnd":h!=null&&Re("scrollend",r);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(u=h.__html,u!=null){if(m.children!=null)throw Error(i(60));r.innerHTML=u}}break;case"multiple":r.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":r.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){r.removeAttribute("xlink:href");break}u=mu(""+h),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(u,""+h):r.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(u,""):r.removeAttribute(u);break;case"capture":case"download":h===!0?r.setAttribute(u,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(u,h):r.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?r.setAttribute(u,h):r.removeAttribute(u);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?r.removeAttribute(u):r.setAttribute(u,h);break;case"popover":Re("beforetoggle",r),Re("toggle",r),hu(r,"popover",h);break;case"xlinkActuate":Mi(r,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Mi(r,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Mi(r,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Mi(r,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Mi(r,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Mi(r,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Mi(r,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Mi(r,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Mi(r,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":hu(r,"is",h);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=CM.get(u)||u,hu(r,u,h))}}function Kd(r,s,u,h,m,y){switch(u){case"style":h0(r,h,y);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(u=h.__html,u!=null){if(m.children!=null)throw Error(i(60));r.innerHTML=u}}break;case"children":typeof h=="string"?Wl(r,h):(typeof h=="number"||typeof h=="bigint")&&Wl(r,""+h);break;case"onScroll":h!=null&&Re("scroll",r);break;case"onScrollEnd":h!=null&&Re("scrollend",r);break;case"onClick":h!=null&&(r.onclick=Ei);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!i0.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(m=u.endsWith("Capture"),s=u.slice(2,m?u.length-7:void 0),y=r[rn]||null,y=y!=null?y[u]:null,typeof y=="function"&&r.removeEventListener(s,y,m),typeof h=="function")){typeof y!="function"&&y!==null&&(u in r?r[u]=null:r.hasAttribute(u)&&r.removeAttribute(u)),r.addEventListener(s,h,m);break e}u in r?r[u]=h:h===!0?r.setAttribute(u,""):hu(r,u,h)}}}function Bt(r,s,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Re("error",r),Re("load",r);var h=!1,m=!1,y;for(y in u)if(u.hasOwnProperty(y)){var k=u[y];if(k!=null)switch(y){case"src":h=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Pe(r,s,y,k,u,null)}}m&&Pe(r,s,"srcSet",u.srcSet,u,null),h&&Pe(r,s,"src",u.src,u,null);return;case"input":Re("invalid",r);var C=y=k=m=null,N=null,_=null;for(h in u)if(u.hasOwnProperty(h)){var U=u[h];if(U!=null)switch(h){case"name":m=U;break;case"type":k=U;break;case"checked":N=U;break;case"defaultChecked":_=U;break;case"value":y=U;break;case"defaultValue":C=U;break;case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(i(137,s));break;default:Pe(r,s,h,U,u,null)}}o0(r,y,C,N,_,k,m,!1);return;case"select":Re("invalid",r),h=k=y=null;for(m in u)if(u.hasOwnProperty(m)&&(C=u[m],C!=null))switch(m){case"value":y=C;break;case"defaultValue":k=C;break;case"multiple":h=C;default:Pe(r,s,m,C,u,null)}s=y,u=k,r.multiple=!!h,s!=null?Pl(r,!!h,s,!1):u!=null&&Pl(r,!!h,u,!0);return;case"textarea":Re("invalid",r),y=m=h=null;for(k in u)if(u.hasOwnProperty(k)&&(C=u[k],C!=null))switch(k){case"value":h=C;break;case"defaultValue":m=C;break;case"children":y=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(i(91));break;default:Pe(r,s,k,C,u,null)}c0(r,h,m,y);return;case"option":for(N in u)if(u.hasOwnProperty(N)&&(h=u[N],h!=null))switch(N){case"selected":r.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Pe(r,s,N,h,u,null)}return;case"dialog":Re("beforetoggle",r),Re("toggle",r),Re("cancel",r),Re("close",r);break;case"iframe":case"object":Re("load",r);break;case"video":case"audio":for(h=0;h<Va.length;h++)Re(Va[h],r);break;case"image":Re("error",r),Re("load",r);break;case"details":Re("toggle",r);break;case"embed":case"source":case"link":Re("error",r),Re("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(_ in u)if(u.hasOwnProperty(_)&&(h=u[_],h!=null))switch(_){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Pe(r,s,_,h,u,null)}return;default:if(rh(s)){for(U in u)u.hasOwnProperty(U)&&(h=u[U],h!==void 0&&Kd(r,s,U,h,u,void 0));return}}for(C in u)u.hasOwnProperty(C)&&(h=u[C],h!=null&&Pe(r,s,C,h,u,null))}function JE(r,s,u,h){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,y=null,k=null,C=null,N=null,_=null,U=null;for(I in u){var G=u[I];if(u.hasOwnProperty(I)&&G!=null)switch(I){case"checked":break;case"value":break;case"defaultValue":N=G;default:h.hasOwnProperty(I)||Pe(r,s,I,null,h,G)}}for(var B in h){var I=h[B];if(G=u[B],h.hasOwnProperty(B)&&(I!=null||G!=null))switch(B){case"type":y=I;break;case"name":m=I;break;case"checked":_=I;break;case"defaultChecked":U=I;break;case"value":k=I;break;case"defaultValue":C=I;break;case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(i(137,s));break;default:I!==G&&Pe(r,s,B,I,h,G)}}nh(r,k,C,N,_,U,y,m);return;case"select":I=k=C=B=null;for(y in u)if(N=u[y],u.hasOwnProperty(y)&&N!=null)switch(y){case"value":break;case"multiple":I=N;default:h.hasOwnProperty(y)||Pe(r,s,y,null,h,N)}for(m in h)if(y=h[m],N=u[m],h.hasOwnProperty(m)&&(y!=null||N!=null))switch(m){case"value":B=y;break;case"defaultValue":C=y;break;case"multiple":k=y;default:y!==N&&Pe(r,s,m,y,h,N)}s=C,u=k,h=I,B!=null?Pl(r,!!u,B,!1):!!h!=!!u&&(s!=null?Pl(r,!!u,s,!0):Pl(r,!!u,u?[]:"",!1));return;case"textarea":I=B=null;for(C in u)if(m=u[C],u.hasOwnProperty(C)&&m!=null&&!h.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Pe(r,s,C,null,h,m)}for(k in h)if(m=h[k],y=u[k],h.hasOwnProperty(k)&&(m!=null||y!=null))switch(k){case"value":B=m;break;case"defaultValue":I=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(i(91));break;default:m!==y&&Pe(r,s,k,m,h,y)}u0(r,B,I);return;case"option":for(var le in u)if(B=u[le],u.hasOwnProperty(le)&&B!=null&&!h.hasOwnProperty(le))switch(le){case"selected":r.selected=!1;break;default:Pe(r,s,le,null,h,B)}for(N in h)if(B=h[N],I=u[N],h.hasOwnProperty(N)&&B!==I&&(B!=null||I!=null))switch(N){case"selected":r.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:Pe(r,s,N,B,h,I)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pe in u)B=u[pe],u.hasOwnProperty(pe)&&B!=null&&!h.hasOwnProperty(pe)&&Pe(r,s,pe,null,h,B);for(_ in h)if(B=h[_],I=u[_],h.hasOwnProperty(_)&&B!==I&&(B!=null||I!=null))switch(_){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(i(137,s));break;default:Pe(r,s,_,B,h,I)}return;default:if(rh(s)){for(var We in u)B=u[We],u.hasOwnProperty(We)&&B!==void 0&&!h.hasOwnProperty(We)&&Kd(r,s,We,void 0,h,B);for(U in h)B=h[U],I=u[U],!h.hasOwnProperty(U)||B===I||B===void 0&&I===void 0||Kd(r,s,U,B,h,I);return}}for(var R in u)B=u[R],u.hasOwnProperty(R)&&B!=null&&!h.hasOwnProperty(R)&&Pe(r,s,R,null,h,B);for(G in h)B=h[G],I=u[G],!h.hasOwnProperty(G)||B===I||B==null&&I==null||Pe(r,s,G,B,h,I)}function dS(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ZE(){if(typeof performance.getEntriesByType=="function"){for(var r=0,s=0,u=performance.getEntriesByType("resource"),h=0;h<u.length;h++){var m=u[h],y=m.transferSize,k=m.initiatorType,C=m.duration;if(y&&C&&dS(k)){for(k=0,C=m.responseEnd,h+=1;h<u.length;h++){var N=u[h],_=N.startTime;if(_>C)break;var U=N.transferSize,G=N.initiatorType;U&&dS(G)&&(N=N.responseEnd,k+=U*(N<C?1:(C-_)/(N-_)))}if(--h,s+=8*(y+k)/(m.duration/1e3),r++,10<r)break}}if(0<r)return s/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Yd=null,Gd=null;function cc(r){return r.nodeType===9?r:r.ownerDocument}function pS(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function mS(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function Qd(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Xd=null;function $E(){var r=window.event;return r&&r.type==="popstate"?r===Xd?!1:(Xd=r,!0):(Xd=null,!1)}var gS=typeof setTimeout=="function"?setTimeout:void 0,PE=typeof clearTimeout=="function"?clearTimeout:void 0,yS=typeof Promise=="function"?Promise:void 0,WE=typeof queueMicrotask=="function"?queueMicrotask:typeof yS<"u"?function(r){return yS.resolve(null).then(r).catch(eN)}:gS;function eN(r){setTimeout(function(){throw r})}function wr(r){return r==="head"}function bS(r,s){var u=s,h=0;do{var m=u.nextSibling;if(r.removeChild(u),m&&m.nodeType===8)if(u=m.data,u==="/$"||u==="/&"){if(h===0){r.removeChild(m),Rs(s);return}h--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")h++;else if(u==="html")Fa(r.ownerDocument.documentElement);else if(u==="head"){u=r.ownerDocument.head,Fa(u);for(var y=u.firstChild;y;){var k=y.nextSibling,C=y.nodeName;y[aa]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&y.rel.toLowerCase()==="stylesheet"||u.removeChild(y),y=k}}else u==="body"&&Fa(r.ownerDocument.body);u=m}while(u);Rs(s)}function SS(r,s){var u=r;r=0;do{var h=u.nextSibling;if(u.nodeType===1?s?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(s?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),h&&h.nodeType===8)if(u=h.data,u==="/$"){if(r===0)break;r--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||r++;u=h}while(u)}function Jd(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var u=s;switch(s=s.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Jd(u),eh(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}r.removeChild(u)}}function tN(r,s,u,h){for(;r.nodeType===1;){var m=u;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!h&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(h){if(!r[aa])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(y=r.getAttribute("rel"),y==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(y!==m.rel||r.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||r.getAttribute("title")!==(m.title==null?null:m.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(y=r.getAttribute("src"),(y!==(m.src==null?null:m.src)||r.getAttribute("type")!==(m.type==null?null:m.type)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&y&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var y=m.name==null?null:""+m.name;if(m.type==="hidden"&&r.getAttribute("name")===y)return r}else return r;if(r=jn(r.nextSibling),r===null)break}return null}function nN(r,s,u){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!u||(r=jn(r.nextSibling),r===null))return null;return r}function kS(r,s){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!s||(r=jn(r.nextSibling),r===null))return null;return r}function Zd(r){return r.data==="$?"||r.data==="$~"}function $d(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function iN(r,s){var u=r.ownerDocument;if(r.data==="$~")r._reactRetry=s;else if(r.data!=="$?"||u.readyState!=="loading")s();else{var h=function(){s(),u.removeEventListener("DOMContentLoaded",h)};u.addEventListener("DOMContentLoaded",h),r._reactRetry=h}}function jn(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return r}var Pd=null;function xS(r){r=r.nextSibling;for(var s=0;r;){if(r.nodeType===8){var u=r.data;if(u==="/$"||u==="/&"){if(s===0)return jn(r.nextSibling);s--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||s++}r=r.nextSibling}return null}function CS(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var u=r.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(s===0)return r;s--}else u!=="/$"&&u!=="/&"||s++}r=r.previousSibling}return null}function vS(r,s,u){switch(s=cc(u),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Fa(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);eh(r)}var Fn=new Map,wS=new Set;function fc(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Fi=J.d;J.d={f:rN,r:lN,D:sN,C:aN,L:oN,m:uN,X:fN,S:cN,M:hN};function rN(){var r=Fi.f(),s=nc();return r||s}function lN(r){var s=Jl(r);s!==null&&s.tag===5&&s.type==="form"?V1(s):Fi.r(r)}var Ns=typeof document>"u"?null:document;function TS(r,s,u){var h=Ns;if(h&&typeof s=="string"&&s){var m=Bn(s);m='link[rel="'+r+'"][href="'+m+'"]',typeof u=="string"&&(m+='[crossorigin="'+u+'"]'),wS.has(m)||(wS.add(m),r={rel:r,crossOrigin:u,href:s},h.querySelector(m)===null&&(s=h.createElement("link"),Bt(s,"link",r),Mt(s),h.head.appendChild(s)))}}function sN(r){Fi.D(r),TS("dns-prefetch",r,null)}function aN(r,s){Fi.C(r,s),TS("preconnect",r,s)}function oN(r,s,u){Fi.L(r,s,u);var h=Ns;if(h&&r&&s){var m='link[rel="preload"][as="'+Bn(s)+'"]';s==="image"&&u&&u.imageSrcSet?(m+='[imagesrcset="'+Bn(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(m+='[imagesizes="'+Bn(u.imageSizes)+'"]')):m+='[href="'+Bn(r)+'"]';var y=m;switch(s){case"style":y=As(r);break;case"script":y=Os(r)}Fn.has(y)||(r=g({rel:"preload",href:s==="image"&&u&&u.imageSrcSet?void 0:r,as:s},u),Fn.set(y,r),h.querySelector(m)!==null||s==="style"&&h.querySelector(Ka(y))||s==="script"&&h.querySelector(Ya(y))||(s=h.createElement("link"),Bt(s,"link",r),Mt(s),h.head.appendChild(s)))}}function uN(r,s){Fi.m(r,s);var u=Ns;if(u&&r){var h=s&&typeof s.as=="string"?s.as:"script",m='link[rel="modulepreload"][as="'+Bn(h)+'"][href="'+Bn(r)+'"]',y=m;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Os(r)}if(!Fn.has(y)&&(r=g({rel:"modulepreload",href:r},s),Fn.set(y,r),u.querySelector(m)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Ya(y)))return}h=u.createElement("link"),Bt(h,"link",r),Mt(h),u.head.appendChild(h)}}}function cN(r,s,u){Fi.S(r,s,u);var h=Ns;if(h&&r){var m=Zl(h).hoistableStyles,y=As(r);s=s||"default";var k=m.get(y);if(!k){var C={loading:0,preload:null};if(k=h.querySelector(Ka(y)))C.loading=5;else{r=g({rel:"stylesheet",href:r,"data-precedence":s},u),(u=Fn.get(y))&&Wd(r,u);var N=k=h.createElement("link");Mt(N),Bt(N,"link",r),N._p=new Promise(function(_,U){N.onload=_,N.onerror=U}),N.addEventListener("load",function(){C.loading|=1}),N.addEventListener("error",function(){C.loading|=2}),C.loading|=4,hc(k,s,h)}k={type:"stylesheet",instance:k,count:1,state:C},m.set(y,k)}}}function fN(r,s){Fi.X(r,s);var u=Ns;if(u&&r){var h=Zl(u).hoistableScripts,m=Os(r),y=h.get(m);y||(y=u.querySelector(Ya(m)),y||(r=g({src:r,async:!0},s),(s=Fn.get(m))&&ep(r,s),y=u.createElement("script"),Mt(y),Bt(y,"link",r),u.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(m,y))}}function hN(r,s){Fi.M(r,s);var u=Ns;if(u&&r){var h=Zl(u).hoistableScripts,m=Os(r),y=h.get(m);y||(y=u.querySelector(Ya(m)),y||(r=g({src:r,async:!0,type:"module"},s),(s=Fn.get(m))&&ep(r,s),y=u.createElement("script"),Mt(y),Bt(y,"link",r),u.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(m,y))}}function MS(r,s,u,h){var m=(m=fe.current)?fc(m):null;if(!m)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(s=As(u.href),u=Zl(m).hoistableStyles,h=u.get(s),h||(h={type:"style",instance:null,count:0,state:null},u.set(s,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){r=As(u.href);var y=Zl(m).hoistableStyles,k=y.get(r);if(k||(m=m.ownerDocument||m,k={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(r,k),(y=m.querySelector(Ka(r)))&&!y._p&&(k.instance=y,k.state.loading=5),Fn.has(r)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},Fn.set(r,u),y||dN(m,r,u,k.state))),s&&h===null)throw Error(i(528,""));return k}if(s&&h!==null)throw Error(i(529,""));return null;case"script":return s=u.async,u=u.src,typeof u=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Os(u),u=Zl(m).hoistableScripts,h=u.get(s),h||(h={type:"script",instance:null,count:0,state:null},u.set(s,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function As(r){return'href="'+Bn(r)+'"'}function Ka(r){return'link[rel="stylesheet"]['+r+"]"}function ES(r){return g({},r,{"data-precedence":r.precedence,precedence:null})}function dN(r,s,u,h){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?h.loading=1:(s=r.createElement("link"),h.preload=s,s.addEventListener("load",function(){return h.loading|=1}),s.addEventListener("error",function(){return h.loading|=2}),Bt(s,"link",u),Mt(s),r.head.appendChild(s))}function Os(r){return'[src="'+Bn(r)+'"]'}function Ya(r){return"script[async]"+r}function NS(r,s,u){if(s.count++,s.instance===null)switch(s.type){case"style":var h=r.querySelector('style[data-href~="'+Bn(u.href)+'"]');if(h)return s.instance=h,Mt(h),h;var m=g({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return h=(r.ownerDocument||r).createElement("style"),Mt(h),Bt(h,"style",m),hc(h,u.precedence,r),s.instance=h;case"stylesheet":m=As(u.href);var y=r.querySelector(Ka(m));if(y)return s.state.loading|=4,s.instance=y,Mt(y),y;h=ES(u),(m=Fn.get(m))&&Wd(h,m),y=(r.ownerDocument||r).createElement("link"),Mt(y);var k=y;return k._p=new Promise(function(C,N){k.onload=C,k.onerror=N}),Bt(y,"link",h),s.state.loading|=4,hc(y,u.precedence,r),s.instance=y;case"script":return y=Os(u.src),(m=r.querySelector(Ya(y)))?(s.instance=m,Mt(m),m):(h=u,(m=Fn.get(y))&&(h=g({},u),ep(h,m)),r=r.ownerDocument||r,m=r.createElement("script"),Mt(m),Bt(m,"link",h),r.head.appendChild(m),s.instance=m);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(h=s.instance,s.state.loading|=4,hc(h,u.precedence,r));return s.instance}function hc(r,s,u){for(var h=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=h.length?h[h.length-1]:null,y=m,k=0;k<h.length;k++){var C=h[k];if(C.dataset.precedence===s)y=C;else if(y!==m)break}y?y.parentNode.insertBefore(r,y.nextSibling):(s=u.nodeType===9?u.head:u,s.insertBefore(r,s.firstChild))}function Wd(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function ep(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var dc=null;function AS(r,s,u){if(dc===null){var h=new Map,m=dc=new Map;m.set(u,h)}else m=dc,h=m.get(u),h||(h=new Map,m.set(u,h));if(h.has(r))return h;for(h.set(r,null),u=u.getElementsByTagName(r),m=0;m<u.length;m++){var y=u[m];if(!(y[aa]||y[Rt]||r==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var k=y.getAttribute(s)||"";k=r+k;var C=h.get(k);C?C.push(y):h.set(k,[y])}}return h}function OS(r,s,u){r=r.ownerDocument||r,r.head.insertBefore(u,s==="title"?r.querySelector("head > title"):null)}function pN(r,s,u){if(u===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function RS(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function mN(r,s,u,h){if(u.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var m=As(h.href),y=s.querySelector(Ka(m));if(y){s=y._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(r.count++,r=pc.bind(r),s.then(r,r)),u.state.loading|=4,u.instance=y,Mt(y);return}y=s.ownerDocument||s,h=ES(h),(m=Fn.get(m))&&Wd(h,m),y=y.createElement("link"),Mt(y);var k=y;k._p=new Promise(function(C,N){k.onload=C,k.onerror=N}),Bt(y,"link",h),u.instance=y}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(u,s),(s=u.state.preload)&&(u.state.loading&3)===0&&(r.count++,u=pc.bind(r),s.addEventListener("load",u),s.addEventListener("error",u))}}var tp=0;function gN(r,s){return r.stylesheets&&r.count===0&&gc(r,r.stylesheets),0<r.count||0<r.imgCount?function(u){var h=setTimeout(function(){if(r.stylesheets&&gc(r,r.stylesheets),r.unsuspend){var y=r.unsuspend;r.unsuspend=null,y()}},6e4+s);0<r.imgBytes&&tp===0&&(tp=62500*ZE());var m=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&gc(r,r.stylesheets),r.unsuspend)){var y=r.unsuspend;r.unsuspend=null,y()}},(r.imgBytes>tp?50:800)+s);return r.unsuspend=u,function(){r.unsuspend=null,clearTimeout(h),clearTimeout(m)}}:null}function pc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)gc(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var mc=null;function gc(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,mc=new Map,s.forEach(yN,r),mc=null,pc.call(r))}function yN(r,s){if(!(s.state.loading&4)){var u=mc.get(r);if(u)var h=u.get(null);else{u=new Map,mc.set(r,u);for(var m=r.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<m.length;y++){var k=m[y];(k.nodeName==="LINK"||k.getAttribute("media")!=="not all")&&(u.set(k.dataset.precedence,k),h=k)}h&&u.set(null,h)}m=s.instance,k=m.getAttribute("data-precedence"),y=u.get(k)||h,y===h&&u.set(null,m),u.set(k,m),this.count++,h=pc.bind(this),m.addEventListener("load",h),m.addEventListener("error",h),y?y.parentNode.insertBefore(m,y.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(m,r.firstChild)),s.state.loading|=4}}var Ga={$$typeof:L,Provider:null,Consumer:null,_currentValue:oe,_currentValue2:oe,_threadCount:0};function bN(r,s,u,h,m,y,k,C,N){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Zf(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zf(0),this.hiddenUpdates=Zf(null),this.identifierPrefix=h,this.onUncaughtError=m,this.onCaughtError=y,this.onRecoverableError=k,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function DS(r,s,u,h,m,y,k,C,N,_,U,G){return r=new bN(r,s,u,k,N,_,U,G,C),s=1,y===!0&&(s|=24),y=xn(3,null,null,s),r.current=y,y.stateNode=r,s=_h(),s.refCount++,r.pooledCache=s,s.refCount++,y.memoizedState={element:h,isDehydrated:u,cache:s},qh(y),r}function zS(r){return r?(r=ss,r):ss}function _S(r,s,u,h,m,y){m=zS(m),h.context===null?h.context=m:h.pendingContext=m,h=dr(s),h.payload={element:u},y=y===void 0?null:y,y!==null&&(h.callback=y),u=pr(r,h,s),u!==null&&(cn(u,r,s),wa(u,r,s))}function BS(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var u=r.retryLane;r.retryLane=u!==0&&u<s?u:s}}function np(r,s){BS(r,s),(r=r.alternate)&&BS(r,s)}function LS(r){if(r.tag===13||r.tag===31){var s=il(r,67108864);s!==null&&cn(s,r,67108864),np(r,67108864)}}function IS(r){if(r.tag===13||r.tag===31){var s=Mn();s=$f(s);var u=il(r,s);u!==null&&cn(u,r,s),np(r,s)}}var yc=!0;function SN(r,s,u,h){var m=q.T;q.T=null;var y=J.p;try{J.p=2,ip(r,s,u,h)}finally{J.p=y,q.T=m}}function kN(r,s,u,h){var m=q.T;q.T=null;var y=J.p;try{J.p=8,ip(r,s,u,h)}finally{J.p=y,q.T=m}}function ip(r,s,u,h){if(yc){var m=rp(h);if(m===null)Fd(r,s,h,bc,u),HS(r,h);else if(CN(m,r,s,u,h))h.stopPropagation();else if(HS(r,h),s&4&&-1<xN.indexOf(r)){for(;m!==null;){var y=Jl(m);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var k=Pr(y.pendingLanes);if(k!==0){var C=y;for(C.pendingLanes|=2,C.entangledLanes|=2;k;){var N=1<<31-et(k);C.entanglements[1]|=N,k&=~N}di(y),(Ke&6)===0&&(ec=Xt()+500,Ua(0))}}break;case 31:case 13:C=il(y,2),C!==null&&cn(C,y,2),nc(),np(y,2)}if(y=rp(h),y===null&&Fd(r,s,h,bc,u),y===m)break;m=y}m!==null&&h.stopPropagation()}else Fd(r,s,h,null,u)}}function rp(r){return r=sh(r),lp(r)}var bc=null;function lp(r){if(bc=null,r=Xl(r),r!==null){var s=a(r);if(s===null)r=null;else{var u=s.tag;if(u===13){if(r=o(s),r!==null)return r;r=null}else if(u===31){if(r=c(s),r!==null)return r;r=null}else if(u===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return bc=r,null}function qS(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Jf()){case j:return 2;case $:return 8;case ye:case Ae:return 32;case Ge:return 268435456;default:return 32}default:return 32}}var sp=!1,Tr=null,Mr=null,Er=null,Qa=new Map,Xa=new Map,Nr=[],xN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function HS(r,s){switch(r){case"focusin":case"focusout":Tr=null;break;case"dragenter":case"dragleave":Mr=null;break;case"mouseover":case"mouseout":Er=null;break;case"pointerover":case"pointerout":Qa.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xa.delete(s.pointerId)}}function Ja(r,s,u,h,m,y){return r===null||r.nativeEvent!==y?(r={blockedOn:s,domEventName:u,eventSystemFlags:h,nativeEvent:y,targetContainers:[m]},s!==null&&(s=Jl(s),s!==null&&LS(s)),r):(r.eventSystemFlags|=h,s=r.targetContainers,m!==null&&s.indexOf(m)===-1&&s.push(m),r)}function CN(r,s,u,h,m){switch(s){case"focusin":return Tr=Ja(Tr,r,s,u,h,m),!0;case"dragenter":return Mr=Ja(Mr,r,s,u,h,m),!0;case"mouseover":return Er=Ja(Er,r,s,u,h,m),!0;case"pointerover":var y=m.pointerId;return Qa.set(y,Ja(Qa.get(y)||null,r,s,u,h,m)),!0;case"gotpointercapture":return y=m.pointerId,Xa.set(y,Ja(Xa.get(y)||null,r,s,u,h,m)),!0}return!1}function US(r){var s=Xl(r.target);if(s!==null){var u=a(s);if(u!==null){if(s=u.tag,s===13){if(s=o(u),s!==null){r.blockedOn=s,e0(r.priority,function(){IS(u)});return}}else if(s===31){if(s=c(u),s!==null){r.blockedOn=s,e0(r.priority,function(){IS(u)});return}}else if(s===3&&u.stateNode.current.memoizedState.isDehydrated){r.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Sc(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var u=rp(r.nativeEvent);if(u===null){u=r.nativeEvent;var h=new u.constructor(u.type,u);lh=h,u.target.dispatchEvent(h),lh=null}else return s=Jl(u),s!==null&&LS(s),r.blockedOn=u,!1;s.shift()}return!0}function VS(r,s,u){Sc(r)&&u.delete(s)}function vN(){sp=!1,Tr!==null&&Sc(Tr)&&(Tr=null),Mr!==null&&Sc(Mr)&&(Mr=null),Er!==null&&Sc(Er)&&(Er=null),Qa.forEach(VS),Xa.forEach(VS)}function kc(r,s){r.blockedOn===s&&(r.blockedOn=null,sp||(sp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,vN)))}var xc=null;function jS(r){xc!==r&&(xc=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){xc===r&&(xc=null);for(var s=0;s<r.length;s+=3){var u=r[s],h=r[s+1],m=r[s+2];if(typeof h!="function"){if(lp(h||u)===null)continue;break}var y=Jl(u);y!==null&&(r.splice(s,3),s-=3,rd(y,{pending:!0,data:m,method:u.method,action:h},h,m))}}))}function Rs(r){function s(N){return kc(N,r)}Tr!==null&&kc(Tr,r),Mr!==null&&kc(Mr,r),Er!==null&&kc(Er,r),Qa.forEach(s),Xa.forEach(s);for(var u=0;u<Nr.length;u++){var h=Nr[u];h.blockedOn===r&&(h.blockedOn=null)}for(;0<Nr.length&&(u=Nr[0],u.blockedOn===null);)US(u),u.blockedOn===null&&Nr.shift();if(u=(r.ownerDocument||r).$$reactFormReplay,u!=null)for(h=0;h<u.length;h+=3){var m=u[h],y=u[h+1],k=m[rn]||null;if(typeof y=="function")k||jS(u);else if(k){var C=null;if(y&&y.hasAttribute("formAction")){if(m=y,k=y[rn]||null)C=k.formAction;else if(lp(m)!==null)continue}else C=k.action;typeof C=="function"?u[h+1]=C:(u.splice(h,3),h-=3),jS(u)}}}function FS(){function r(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(k){return m=k})},focusReset:"manual",scroll:"manual"})}function s(){m!==null&&(m(),m=null),h||setTimeout(u,20)}function u(){if(!h&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,m=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(u,100),function(){h=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),m!==null&&(m(),m=null)}}}function ap(r){this._internalRoot=r}Cc.prototype.render=ap.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var u=s.current,h=Mn();_S(u,h,r,s,null,null)},Cc.prototype.unmount=ap.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;_S(r.current,2,null,r,null,null),nc(),s[Ql]=null}};function Cc(r){this._internalRoot=r}Cc.prototype.unstable_scheduleHydration=function(r){if(r){var s=Wy();r={blockedOn:null,target:r,priority:s};for(var u=0;u<Nr.length&&s!==0&&s<Nr[u].priority;u++);Nr.splice(u,0,r),u===0&&US(r)}};var KS=e.version;if(KS!=="19.2.0")throw Error(i(527,KS,"19.2.0"));J.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=d(s),r=r!==null?p(r):null,r=r===null?null:r.stateNode,r};var wN={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vc.isDisabled&&vc.supportsFiber)try{Jt=vc.inject(wN),Ct=vc}catch{}}return $a.createRoot=function(r,s){if(!l(r))throw Error(i(299));var u=!1,h="",m=$1,y=P1,k=W1;return s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onUncaughtError!==void 0&&(m=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(k=s.onRecoverableError)),s=DS(r,1,!1,null,null,u,h,null,m,y,k,FS),r[Ql]=s.current,jd(r),new ap(s)},$a.hydrateRoot=function(r,s,u){if(!l(r))throw Error(i(299));var h=!1,m="",y=$1,k=P1,C=W1,N=null;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(m=u.identifierPrefix),u.onUncaughtError!==void 0&&(y=u.onUncaughtError),u.onCaughtError!==void 0&&(k=u.onCaughtError),u.onRecoverableError!==void 0&&(C=u.onRecoverableError),u.formState!==void 0&&(N=u.formState)),s=DS(r,1,!0,s,u??null,h,m,N,y,k,C,FS),s.context=zS(null),u=s.current,h=Mn(),h=$f(h),m=dr(h),m.callback=null,pr(u,m,h),u=h,s.current.lanes=u,sa(s,u),di(s),r[Ql]=s.current,jd(r),new Cc(s)},$a.version="19.2.0",$a}var ek;function BN(){if(ek)return cp.exports;ek=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),cp.exports=_N(),cp.exports}var LN=BN();const IN=ig(LN);var mn=(n=>(n.docTypeError="docTypeError",n.contextNotFound="contextNotFound",n.timerNotFound="timerNotFound",n.ctxCallOutOfScope="ctxCallOutOfScope",n.createNodeInParserFail="createNodeInParserFail",n.stackOverFlow="stackOverFlow",n.parserMatchError="parserMatchError",n.serializerMatchError="serializerMatchError",n.getAtomFromSchemaFail="getAtomFromSchemaFail",n.expectDomTypeError="expectDomTypeError",n.callCommandBeforeEditorView="callCommandBeforeEditorView",n.missingRootElement="missingRootElement",n.missingNodeInSchema="missingNodeInSchema",n.missingMarkInSchema="missingMarkInSchema",n.ctxNotBind="ctxNotBind",n.missingYjsDoc="missingYjsDoc",n))(mn||{});class Rn extends Error{constructor(e,t){super(t),this.name="MilkdownError",this.code=e}}const qN=(n,e)=>typeof e=="function"?"[Function]":e,Ef=n=>JSON.stringify(n,qN);function HN(n){return new Rn(mn.docTypeError,`Doc type error, unsupported type: ${Ef(n)}`)}function UN(n){return new Rn(mn.contextNotFound,`Context "${n}" not found, do you forget to inject it?`)}function VN(n){return new Rn(mn.timerNotFound,`Timer "${n}" not found, do you forget to record it?`)}function Nf(){return new Rn(mn.ctxCallOutOfScope,"Should not call a context out of the plugin.")}function jN(n,e,t){const l=`Cannot create node for ${"name"in n?n.name:n}`,a=p=>{if(p==null)return"null";if(Array.isArray(p))return`[${p.map(a).join(", ")}]`;if(typeof p=="object")return"toJSON"in p&&typeof p.toJSON=="function"?JSON.stringify(p.toJSON()):"spec"in p?JSON.stringify(p.spec):JSON.stringify(p);if(typeof p=="string"||typeof p=="number"||typeof p=="boolean")return JSON.stringify(p);if(typeof p=="function")return`[Function: ${p.name||"anonymous"}]`;try{return String(p)}catch{return"[Unserializable]"}},o=["[Description]",l],c=["[Attributes]",e],f=["[Content]",(t??[]).map(p=>p?typeof p=="object"&&"type"in p?`${p}`:a(p):"null")],d=[o,c,f].reduce((p,[g,b])=>{const S=`${g}: ${a(b)}.`;return p.concat(S)},[]);return new Rn(mn.createNodeInParserFail,d.join(`
`))}function pC(){return new Rn(mn.stackOverFlow,"Stack over flow, cannot pop on an empty stack.")}function FN(n){return new Rn(mn.parserMatchError,`Cannot match target parser for node: ${Ef(n)}.`)}function KN(n){return new Rn(mn.serializerMatchError,`Cannot match target serializer for node: ${Ef(n)}.`)}function YN(n,e){return new Rn(mn.getAtomFromSchemaFail,`Cannot get ${n}: ${e} from schema.`)}function ki(n){return new Rn(mn.expectDomTypeError,`Expect to be a dom, but get: ${Ef(n)}.`)}function pp(){return new Rn(mn.callCommandBeforeEditorView,"You're trying to call a command before editor view initialized, make sure to get commandManager from ctx after editor view has been initialized")}function GN(n){return new Rn(mn.missingNodeInSchema,`Missing node in schema, milkdown cannot find "${n}" in schema.`)}function QN(n){return new Rn(mn.missingMarkInSchema,`Missing mark in schema, milkdown cannot find "${n}" in schema.`)}class mC{constructor(){this.sliceMap=new Map,this.get=e=>{const t=typeof e=="string"?[...this.sliceMap.values()].find(i=>i.type.name===e):this.sliceMap.get(e.id);if(!t){const i=typeof e=="string"?e:e.name;throw UN(i)}return t},this.remove=e=>{const t=typeof e=="string"?[...this.sliceMap.values()].find(i=>i.type.name===e):this.sliceMap.get(e.id);t&&this.sliceMap.delete(t.type.id)},this.has=e=>typeof e=="string"?[...this.sliceMap.values()].some(t=>t.type.name===e):this.sliceMap.has(e.id)}}let XN=class{constructor(e,t,i){this.#t=[],this.#i=()=>{this.#t.forEach(l=>l(this.#e))},this.set=l=>{this.#e=l,this.#i()},this.get=()=>this.#e,this.update=l=>{this.#e=l(this.#e),this.#i()},this.type=i,this.#e=t,e.set(i.id,this)}#t;#e;#i;on(e){return this.#t.push(e),()=>{this.#t=this.#t.filter(t=>t!==e)}}once(e){const t=this.on(i=>{e(i),t()});return t}off(e){this.#t=this.#t.filter(t=>t!==e)}offAll(){this.#t=[]}};class JN{constructor(e,t){this.id=Symbol(`Context-${t}`),this.name=t,this._defaultValue=e,this._typeInfo=()=>{throw Nf()}}create(e,t=this._defaultValue){return new XN(e,t,this)}}const Le=(n,e)=>new JN(n,e);class ZN{constructor(e,t,i){this.#n=new Set,this.#s=new Set,this.#l=new Map,this.#r=new Map,this.read=()=>({metadata:this.#t,injectedSlices:[...this.#n].map(l=>({name:typeof l=="string"?l:l.name,value:this.#a(l)})),consumedSlices:[...this.#s].map(l=>({name:typeof l=="string"?l:l.name,value:this.#a(l)})),recordedTimers:[...this.#l].map(([l,{duration:a}])=>({name:l.name,duration:a,status:this.#o(l)})),waitTimers:[...this.#r].map(([l,{duration:a}])=>({name:l.name,duration:a,status:this.#o(l)}))}),this.onRecord=l=>{this.#l.set(l,{start:Date.now(),duration:0})},this.onClear=l=>{this.#l.delete(l)},this.onDone=l=>{const a=this.#l.get(l);a&&(a.duration=Date.now()-a.start)},this.onWait=(l,a)=>{const o=Date.now();a.finally(()=>{this.#r.set(l,{duration:Date.now()-o})}).catch(console.error)},this.onInject=l=>{this.#n.add(l)},this.onRemove=l=>{this.#n.delete(l)},this.onUse=l=>{this.#s.add(l)},this.#a=l=>this.#e.get(l).get(),this.#o=l=>this.#i.get(l).status,this.#e=e,this.#i=t,this.#t=i}#t;#e;#i;#n;#s;#l;#r;#a;#o}class lg{constructor(e,t,i){this.produce=l=>l&&Object.keys(l).length?new lg(this.#t,this.#e,{...l}):this,this.inject=(l,a)=>{const o=l.create(this.#t.sliceMap);return a!=null&&o.set(a),this.#n?.onInject(l),this},this.remove=l=>(this.#t.remove(l),this.#n?.onRemove(l),this),this.record=l=>(l.create(this.#e.store),this.#n?.onRecord(l),this),this.clearTimer=l=>(this.#e.remove(l),this.#n?.onClear(l),this),this.isInjected=l=>this.#t.has(l),this.isRecorded=l=>this.#e.has(l),this.use=l=>(this.#n?.onUse(l),this.#t.get(l)),this.get=l=>this.use(l).get(),this.set=(l,a)=>this.use(l).set(a),this.update=(l,a)=>this.use(l).update(a),this.timer=l=>this.#e.get(l),this.done=l=>{this.timer(l).done(),this.#n?.onDone(l)},this.wait=l=>{const a=this.timer(l).start();return this.#n?.onWait(l,a),a},this.waitTimers=async l=>{await Promise.all(this.get(l).map(a=>this.wait(a)))},this.#t=e,this.#e=t,this.#i=i,i&&(this.#n=new ZN(e,t,i))}#t;#e;#i;#n;get meta(){return this.#i}get inspector(){return this.#n}}class $N{constructor(){this.store=new Map,this.get=e=>{const t=this.store.get(e.id);if(!t)throw VN(e.name);return t},this.remove=e=>{this.store.delete(e.id)},this.has=e=>this.store.has(e.id)}}class PN{constructor(e,t){this.#t=null,this.#e=null,this.#n="pending",this.start=()=>(this.#t??=new Promise((i,l)=>{this.#e=a=>{a instanceof CustomEvent&&a.detail.id===this.#i&&(this.#n="resolved",this.#s(),a.stopImmediatePropagation(),i())},this.#l(()=>{this.#n==="pending"&&(this.#n="rejected"),this.#s(),l(new Error(`Timing ${this.type.name} timeout.`))}),this.#n="pending",addEventListener(this.type.name,this.#e)}),this.#t),this.done=()=>{const i=new CustomEvent(this.type.name,{detail:{id:this.#i}});dispatchEvent(i)},this.#s=()=>{this.#e&&removeEventListener(this.type.name,this.#e)},this.#l=i=>{setTimeout(()=>{i()},this.type.timeout)},this.#i=Symbol(t.name),this.type=t,e.set(t.id,this)}#t;#e;#i;#n;get status(){return this.#n}#s;#l}class WN{constructor(e,t=3e3){this.create=i=>new PN(i,this),this.id=Symbol(`Timer-${e}`),this.name=e,this.timeout=t}}const xi=(n,e=3e3)=>new WN(n,e);function It(n){this.content=n}It.prototype={constructor:It,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var i=t&&t!=n?this.remove(t):this,l=i.find(n),a=i.content.slice();return l==-1?a.push(t||n,e):(a[l+1]=e,t&&(a[l]=t)),new It(a)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new It(t)},addToStart:function(n,e){return new It([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new It(t)},addBefore:function(n,e,t){var i=this.remove(e),l=i.content.slice(),a=i.find(n);return l.splice(a==-1?l.length:a,0,e,t),new It(l)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=It.from(n),n.size?new It(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=It.from(n),n.size?new It(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=It.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};It.from=function(n){if(n instanceof It)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new It(e)};function gC(n,e,t){for(let i=0;;i++){if(i==n.childCount||i==e.childCount)return n.childCount==e.childCount?null:t;let l=n.child(i),a=e.child(i);if(l==a){t+=l.nodeSize;continue}if(!l.sameMarkup(a))return t;if(l.isText&&l.text!=a.text){for(let o=0;l.text[o]==a.text[o];o++)t++;return t}if(l.content.size||a.content.size){let o=gC(l.content,a.content,t+1);if(o!=null)return o}t+=l.nodeSize}}function yC(n,e,t,i){for(let l=n.childCount,a=e.childCount;;){if(l==0||a==0)return l==a?null:{a:t,b:i};let o=n.child(--l),c=e.child(--a),f=o.nodeSize;if(o==c){t-=f,i-=f;continue}if(!o.sameMarkup(c))return{a:t,b:i};if(o.isText&&o.text!=c.text){let d=0,p=Math.min(o.text.length,c.text.length);for(;d<p&&o.text[o.text.length-d-1]==c.text[c.text.length-d-1];)d++,t--,i--;return{a:t,b:i}}if(o.content.size||c.content.size){let d=yC(o.content,c.content,t-1,i-1);if(d)return d}t-=f,i-=f}}class X{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let i=0;i<e.length;i++)this.size+=e[i].nodeSize}nodesBetween(e,t,i,l=0,a){for(let o=0,c=0;c<t;o++){let f=this.content[o],d=c+f.nodeSize;if(d>e&&i(f,l+c,a||null,o)!==!1&&f.content.size){let p=c+1;f.nodesBetween(Math.max(0,e-p),Math.min(f.content.size,t-p),i,l+p)}c=d}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,i,l){let a="",o=!0;return this.nodesBetween(e,t,(c,f)=>{let d=c.isText?c.text.slice(Math.max(e,f)-f,t-f):c.isLeaf?l?typeof l=="function"?l(c):l:c.type.spec.leafText?c.type.spec.leafText(c):"":"";c.isBlock&&(c.isLeaf&&d||c.isTextblock)&&i&&(o?o=!1:a+=i),a+=d},0),a}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,i=e.firstChild,l=this.content.slice(),a=0;for(t.isText&&t.sameMarkup(i)&&(l[l.length-1]=t.withText(t.text+i.text),a=1);a<e.content.length;a++)l.push(e.content[a]);return new X(l,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let i=[],l=0;if(t>e)for(let a=0,o=0;o<t;a++){let c=this.content[a],f=o+c.nodeSize;f>e&&((o<e||f>t)&&(c.isText?c=c.cut(Math.max(0,e-o),Math.min(c.text.length,t-o)):c=c.cut(Math.max(0,e-o-1),Math.min(c.content.size,t-o-1))),i.push(c),l+=c.nodeSize),o=f}return new X(i,l)}cutByIndex(e,t){return e==t?X.empty:e==0&&t==this.content.length?this:new X(this.content.slice(e,t))}replaceChild(e,t){let i=this.content[e];if(i==t)return this;let l=this.content.slice(),a=this.size+t.nodeSize-i.nodeSize;return l[e]=t,new X(l,a)}addToStart(e){return new X([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new X(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,i=0;t<this.content.length;t++){let l=this.content[t];e(l,i,t),i+=l.nodeSize}}findDiffStart(e,t=0){return gC(this,e,t)}findDiffEnd(e,t=this.size,i=e.size){return yC(this,e,t,i)}findIndex(e){if(e==0)return wc(0,e);if(e==this.size)return wc(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let t=0,i=0;;t++){let l=this.child(t),a=i+l.nodeSize;if(a>=e)return a==e?wc(t+1,a):wc(t,i);i=a}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return X.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new X(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return X.empty;let t,i=0;for(let l=0;l<e.length;l++){let a=e[l];i+=a.nodeSize,l&&a.isText&&e[l-1].sameMarkup(a)?(t||(t=e.slice(0,l)),t[t.length-1]=a.withText(t[t.length-1].text+a.text)):t&&t.push(a)}return new X(t||e,i)}static from(e){if(!e)return X.empty;if(e instanceof X)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new X([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}X.empty=new X([],0);const mp={index:0,offset:0};function wc(n,e){return mp.index=n,mp.offset=e,mp}function Wc(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let i=0;i<n.length;i++)if(!Wc(n[i],e[i]))return!1}else{for(let i in n)if(!(i in e)||!Wc(n[i],e[i]))return!1;for(let i in e)if(!(i in n))return!1}return!0}class He{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,i=!1;for(let l=0;l<e.length;l++){let a=e[l];if(this.eq(a))return e;if(this.type.excludes(a.type))t||(t=e.slice(0,l));else{if(a.type.excludes(this.type))return e;!i&&a.type.rank>this.type.rank&&(t||(t=e.slice(0,l)),t.push(this),i=!0),t&&t.push(a)}}return t||(t=e.slice()),i||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Wc(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let i=e.marks[t.type];if(!i)throw new RangeError(`There is no mark type ${t.type} in this schema`);let l=i.create(t.attrs);return i.checkAttrs(l.attrs),l}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++)if(!e[i].eq(t[i]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return He.none;if(e instanceof He)return[e];let t=e.slice();return t.sort((i,l)=>i.type.rank-l.type.rank),t}}He.none=[];class ef extends Error{}class W{constructor(e,t,i){this.content=e,this.openStart=t,this.openEnd=i}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let i=SC(this.content,e+this.openStart,t);return i&&new W(i,this.openStart,this.openEnd)}removeBetween(e,t){return new W(bC(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return W.empty;let i=t.openStart||0,l=t.openEnd||0;if(typeof i!="number"||typeof l!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new W(X.fromJSON(e,t.content),i,l)}static maxOpen(e,t=!0){let i=0,l=0;for(let a=e.firstChild;a&&!a.isLeaf&&(t||!a.type.spec.isolating);a=a.firstChild)i++;for(let a=e.lastChild;a&&!a.isLeaf&&(t||!a.type.spec.isolating);a=a.lastChild)l++;return new W(e,i,l)}}W.empty=new W(X.empty,0,0);function bC(n,e,t){let{index:i,offset:l}=n.findIndex(e),a=n.maybeChild(i),{index:o,offset:c}=n.findIndex(t);if(l==e||a.isText){if(c!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(i!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(i,a.copy(bC(a.content,e-l-1,t-l-1)))}function SC(n,e,t,i){let{index:l,offset:a}=n.findIndex(e),o=n.maybeChild(l);if(a==e||o.isText)return i&&!i.canReplace(l,l,t)?null:n.cut(0,e).append(t).append(n.cut(e));let c=SC(o.content,e-a-1,t,o);return c&&n.replaceChild(l,o.copy(c))}function eA(n,e,t){if(t.openStart>n.depth)throw new ef("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new ef("Inconsistent open depths");return kC(n,e,t,0)}function kC(n,e,t,i){let l=n.index(i),a=n.node(i);if(l==e.index(i)&&i<n.depth-t.openStart){let o=kC(n,e,t,i+1);return a.copy(a.content.replaceChild(l,o))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==i&&e.depth==i){let o=n.parent,c=o.content;return vl(o,c.cut(0,n.parentOffset).append(t.content).append(c.cut(e.parentOffset)))}else{let{start:o,end:c}=tA(t,n);return vl(a,CC(n,o,c,e,i))}else return vl(a,tf(n,e,i))}function xC(n,e){if(!e.type.compatibleContent(n.type))throw new ef("Cannot join "+e.type.name+" onto "+n.type.name)}function cm(n,e,t){let i=n.node(t);return xC(i,e.node(t)),i}function Cl(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function ho(n,e,t,i){let l=(e||n).node(t),a=0,o=e?e.index(t):l.childCount;n&&(a=n.index(t),n.depth>t?a++:n.textOffset&&(Cl(n.nodeAfter,i),a++));for(let c=a;c<o;c++)Cl(l.child(c),i);e&&e.depth==t&&e.textOffset&&Cl(e.nodeBefore,i)}function vl(n,e){return n.type.checkContent(e),n.copy(e)}function CC(n,e,t,i,l){let a=n.depth>l&&cm(n,e,l+1),o=i.depth>l&&cm(t,i,l+1),c=[];return ho(null,n,l,c),a&&o&&e.index(l)==t.index(l)?(xC(a,o),Cl(vl(a,CC(n,e,t,i,l+1)),c)):(a&&Cl(vl(a,tf(n,e,l+1)),c),ho(e,t,l,c),o&&Cl(vl(o,tf(t,i,l+1)),c)),ho(i,null,l,c),new X(c)}function tf(n,e,t){let i=[];if(ho(null,n,t,i),n.depth>t){let l=cm(n,e,t+1);Cl(vl(l,tf(n,e,t+1)),i)}return ho(e,null,t,i),new X(i)}function tA(n,e){let t=e.depth-n.openStart,l=e.node(t).copy(n.content);for(let a=t-1;a>=0;a--)l=e.node(a).copy(X.from(l));return{start:l.resolveNoCache(n.openStart+t),end:l.resolveNoCache(l.content.size-n.openEnd-t)}}class Oo{constructor(e,t,i){this.pos=e,this.path=t,this.parentOffset=i,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let i=this.pos-this.path[this.path.length-1],l=e.child(t);return i?e.child(t).cut(i):l}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let i=this.path[t*3],l=t==0?0:this.path[t*3-1]+1;for(let a=0;a<e;a++)l+=i.child(a).nodeSize;return l}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return He.none;if(this.textOffset)return e.child(t).marks;let i=e.maybeChild(t-1),l=e.maybeChild(t);if(!i){let c=i;i=l,l=c}let a=i.marks;for(var o=0;o<a.length;o++)a[o].type.spec.inclusive===!1&&(!l||!a[o].isInSet(l.marks))&&(a=a[o--].removeFromSet(a));return a}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let i=t.marks,l=e.parent.maybeChild(e.index());for(var a=0;a<i.length;a++)i[a].type.spec.inclusive===!1&&(!l||!i[a].isInSet(l.marks))&&(i=i[a--].removeFromSet(i));return i}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let i=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);i>=0;i--)if(e.pos<=this.end(i)&&(!t||t(this.node(i))))return new vC(this,e,i);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let i=[],l=0,a=t;for(let o=e;;){let{index:c,offset:f}=o.content.findIndex(a),d=a-f;if(i.push(o,c,l+f),!d||(o=o.child(c),o.isText))break;a=d-1,l+=f+1}return new Oo(t,i,a)}static resolveCached(e,t){let i=tk.get(e);if(i)for(let a=0;a<i.elts.length;a++){let o=i.elts[a];if(o.pos==t)return o}else tk.set(e,i=new nA);let l=i.elts[i.i]=Oo.resolve(e,t);return i.i=(i.i+1)%iA,l}}class nA{constructor(){this.elts=[],this.i=0}}const iA=12,tk=new WeakMap;class vC{constructor(e,t,i){this.$from=e,this.$to=t,this.depth=i}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const rA=Object.create(null);class Xn{constructor(e,t,i,l=He.none){this.type=e,this.attrs=t,this.marks=l,this.content=i||X.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,i,l=0){this.content.nodesBetween(e,t,i,l,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,i,l){return this.content.textBetween(e,t,i,l)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,i){return this.type==e&&Wc(this.attrs,t||e.defaultAttrs||rA)&&He.sameSet(this.marks,i||He.none)}copy(e=null){return e==this.content?this:new Xn(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Xn(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,i=!1){if(e==t)return W.empty;let l=this.resolve(e),a=this.resolve(t),o=i?0:l.sharedDepth(t),c=l.start(o),d=l.node(o).content.cut(l.pos-c,a.pos-c);return new W(d,l.depth-o,a.depth-o)}replace(e,t,i){return eA(this.resolve(e),this.resolve(t),i)}nodeAt(e){for(let t=this;;){let{index:i,offset:l}=t.content.findIndex(e);if(t=t.maybeChild(i),!t)return null;if(l==e||t.isText)return t;e-=l+1}}childAfter(e){let{index:t,offset:i}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:i}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:i}=this.content.findIndex(e);if(i<e)return{node:this.content.child(t),index:t,offset:i};let l=this.content.child(t-1);return{node:l,index:t-1,offset:i-l.nodeSize}}resolve(e){return Oo.resolveCached(this,e)}resolveNoCache(e){return Oo.resolve(this,e)}rangeHasMark(e,t,i){let l=!1;return t>e&&this.nodesBetween(e,t,a=>(i.isInSet(a.marks)&&(l=!0),!l)),l}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),wC(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,i=X.empty,l=0,a=i.childCount){let o=this.contentMatchAt(e).matchFragment(i,l,a),c=o&&o.matchFragment(this.content,t);if(!c||!c.validEnd)return!1;for(let f=l;f<a;f++)if(!this.type.allowsMarks(i.child(f).marks))return!1;return!0}canReplaceWith(e,t,i,l){if(l&&!this.type.allowsMarks(l))return!1;let a=this.contentMatchAt(e).matchType(i),o=a&&a.matchFragment(this.content,t);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=He.none;for(let t=0;t<this.marks.length;t++){let i=this.marks[t];i.type.checkAttrs(i.attrs),e=i.addToSet(e)}if(!He.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let i;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");i=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,i)}let l=X.fromJSON(e,t.content),a=e.nodeType(t.type).create(t.attrs,l,i);return a.type.checkAttrs(a.attrs),a}}Xn.prototype.text=void 0;class nf extends Xn{constructor(e,t,i,l){if(super(e,t,null,l),!i)throw new RangeError("Empty text nodes are not allowed");this.text=i}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):wC(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new nf(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new nf(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function wC(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class Ol{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let i=new lA(e,t);if(i.next==null)return Ol.empty;let l=TC(i);i.next&&i.err("Unexpected trailing text");let a=hA(fA(l));return dA(a,i),a}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,i=e.childCount){let l=this;for(let a=t;l&&a<i;a++)l=l.matchType(e.child(a).type);return l}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let i=0;i<e.next.length;i++)if(this.next[t].type==e.next[i].type)return!0;return!1}fillBefore(e,t=!1,i=0){let l=[this];function a(o,c){let f=o.matchFragment(e,i);if(f&&(!t||f.validEnd))return X.from(c.map(d=>d.createAndFill()));for(let d=0;d<o.next.length;d++){let{type:p,next:g}=o.next[d];if(!(p.isText||p.hasRequiredAttrs())&&l.indexOf(g)==-1){l.push(g);let b=a(g,c.concat(p));if(b)return b}}return null}return a(this,[])}findWrapping(e){for(let i=0;i<this.wrapCache.length;i+=2)if(this.wrapCache[i]==e)return this.wrapCache[i+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),i=[{match:this,type:null,via:null}];for(;i.length;){let l=i.shift(),a=l.match;if(a.matchType(e)){let o=[];for(let c=l;c.type;c=c.via)o.push(c.type);return o.reverse()}for(let o=0;o<a.next.length;o++){let{type:c,next:f}=a.next[o];!c.isLeaf&&!c.hasRequiredAttrs()&&!(c.name in t)&&(!l.type||f.validEnd)&&(i.push({match:c.contentMatch,type:c,via:l}),t[c.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(i){e.push(i);for(let l=0;l<i.next.length;l++)e.indexOf(i.next[l].next)==-1&&t(i.next[l].next)}return t(this),e.map((i,l)=>{let a=l+(i.validEnd?"*":" ")+" ";for(let o=0;o<i.next.length;o++)a+=(o?", ":"")+i.next[o].type.name+"->"+e.indexOf(i.next[o].next);return a}).join(`
`)}}Ol.empty=new Ol(!0);class lA{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function TC(n){let e=[];do e.push(sA(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function sA(n){let e=[];do e.push(aA(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function aA(n){let e=cA(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=oA(n,e);else break;return e}function nk(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function oA(n,e){let t=nk(n),i=t;return n.eat(",")&&(n.next!="}"?i=nk(n):i=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:i,expr:e}}function uA(n,e){let t=n.nodeTypes,i=t[e];if(i)return[i];let l=[];for(let a in t){let o=t[a];o.isInGroup(e)&&l.push(o)}return l.length==0&&n.err("No node type or group '"+e+"' found"),l}function cA(n){if(n.eat("(")){let e=TC(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=uA(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function fA(n){let e=[[]];return l(a(n,0),t()),e;function t(){return e.push([])-1}function i(o,c,f){let d={term:f,to:c};return e[o].push(d),d}function l(o,c){o.forEach(f=>f.to=c)}function a(o,c){if(o.type=="choice")return o.exprs.reduce((f,d)=>f.concat(a(d,c)),[]);if(o.type=="seq")for(let f=0;;f++){let d=a(o.exprs[f],c);if(f==o.exprs.length-1)return d;l(d,c=t())}else if(o.type=="star"){let f=t();return i(c,f),l(a(o.expr,f),f),[i(f)]}else if(o.type=="plus"){let f=t();return l(a(o.expr,c),f),l(a(o.expr,f),f),[i(f)]}else{if(o.type=="opt")return[i(c)].concat(a(o.expr,c));if(o.type=="range"){let f=c;for(let d=0;d<o.min;d++){let p=t();l(a(o.expr,f),p),f=p}if(o.max==-1)l(a(o.expr,f),f);else for(let d=o.min;d<o.max;d++){let p=t();i(f,p),l(a(o.expr,f),p),f=p}return[i(f)]}else{if(o.type=="name")return[i(c,void 0,o.value)];throw new Error("Unknown expr type")}}}}function MC(n,e){return e-n}function ik(n,e){let t=[];return i(e),t.sort(MC);function i(l){let a=n[l];if(a.length==1&&!a[0].term)return i(a[0].to);t.push(l);for(let o=0;o<a.length;o++){let{term:c,to:f}=a[o];!c&&t.indexOf(f)==-1&&i(f)}}}function hA(n){let e=Object.create(null);return t(ik(n,0));function t(i){let l=[];i.forEach(o=>{n[o].forEach(({term:c,to:f})=>{if(!c)return;let d;for(let p=0;p<l.length;p++)l[p][0]==c&&(d=l[p][1]);ik(n,f).forEach(p=>{d||l.push([c,d=[]]),d.indexOf(p)==-1&&d.push(p)})})});let a=e[i.join(",")]=new Ol(i.indexOf(n.length-1)>-1);for(let o=0;o<l.length;o++){let c=l[o][1].sort(MC);a.next.push({type:l[o][0],next:e[c.join(",")]||t(c)})}return a}}function dA(n,e){for(let t=0,i=[n];t<i.length;t++){let l=i[t],a=!l.validEnd,o=[];for(let c=0;c<l.next.length;c++){let{type:f,next:d}=l.next[c];o.push(f.name),a&&!(f.isText||f.hasRequiredAttrs())&&(a=!1),i.indexOf(d)==-1&&i.push(d)}a&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function EC(n){let e=Object.create(null);for(let t in n){let i=n[t];if(!i.hasDefault)return null;e[t]=i.default}return e}function NC(n,e){let t=Object.create(null);for(let i in n){let l=e&&e[i];if(l===void 0){let a=n[i];if(a.hasDefault)l=a.default;else throw new RangeError("No value supplied for attribute "+i)}t[i]=l}return t}function AC(n,e,t,i){for(let l in e)if(!(l in n))throw new RangeError(`Unsupported attribute ${l} for ${t} of type ${l}`);for(let l in n){let a=n[l];a.validate&&a.validate(e[l])}}function OC(n,e){let t=Object.create(null);if(e)for(let i in e)t[i]=new mA(n,i,e[i]);return t}let rk=class RC{constructor(e,t,i){this.name=e,this.schema=t,this.spec=i,this.markSet=null,this.groups=i.group?i.group.split(" "):[],this.attrs=OC(e,i.attrs),this.defaultAttrs=EC(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(i.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Ol.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:NC(this.attrs,e)}create(e=null,t,i){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Xn(this,this.computeAttrs(e),X.from(t),He.setFrom(i))}createChecked(e=null,t,i){return t=X.from(t),this.checkContent(t),new Xn(this,this.computeAttrs(e),t,He.setFrom(i))}createAndFill(e=null,t,i){if(e=this.computeAttrs(e),t=X.from(t),t.size){let o=this.contentMatch.fillBefore(t);if(!o)return null;t=o.append(t)}let l=this.contentMatch.matchFragment(t),a=l&&l.fillBefore(X.empty,!0);return a?new Xn(this,e,t.append(a),He.setFrom(i)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let i=0;i<e.childCount;i++)if(!this.allowsMarks(e.child(i).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){AC(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let i=0;i<e.length;i++)this.allowsMarkType(e[i].type)?t&&t.push(e[i]):t||(t=e.slice(0,i));return t?t.length?t:He.none:e}static compile(e,t){let i=Object.create(null);e.forEach((a,o)=>i[a]=new RC(a,t,o));let l=t.spec.topNode||"doc";if(!i[l])throw new RangeError("Schema is missing its top node type ('"+l+"')");if(!i.text)throw new RangeError("Every schema needs a 'text' type");for(let a in i.text.attrs)throw new RangeError("The text node type should not have attributes");return i}};function pA(n,e,t){let i=t.split("|");return l=>{let a=l===null?"null":typeof l;if(i.indexOf(a)<0)throw new RangeError(`Expected value of type ${i} for attribute ${e} on type ${n}, got ${a}`)}}class mA{constructor(e,t,i){this.hasDefault=Object.prototype.hasOwnProperty.call(i,"default"),this.default=i.default,this.validate=typeof i.validate=="string"?pA(e,t,i.validate):i.validate}get isRequired(){return!this.hasDefault}}class Af{constructor(e,t,i,l){this.name=e,this.rank=t,this.schema=i,this.spec=l,this.attrs=OC(e,l.attrs),this.excluded=null;let a=EC(this.attrs);this.instance=a?new He(this,a):null}create(e=null){return!e&&this.instance?this.instance:new He(this,NC(this.attrs,e))}static compile(e,t){let i=Object.create(null),l=0;return e.forEach((a,o)=>i[a]=new Af(a,l++,t,o)),i}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){AC(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class gA{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let l in e)t[l]=e[l];t.nodes=It.from(e.nodes),t.marks=It.from(e.marks||{}),this.nodes=rk.compile(this.spec.nodes,this),this.marks=Af.compile(this.spec.marks,this);let i=Object.create(null);for(let l in this.nodes){if(l in this.marks)throw new RangeError(l+" can not be both a node and a mark");let a=this.nodes[l],o=a.spec.content||"",c=a.spec.marks;if(a.contentMatch=i[o]||(i[o]=Ol.parse(o,this.nodes)),a.inlineContent=a.contentMatch.inlineContent,a.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!a.isInline||!a.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=a}a.markSet=c=="_"?null:c?lk(this,c.split(" ")):c==""||!a.inlineContent?[]:null}for(let l in this.marks){let a=this.marks[l],o=a.spec.excludes;a.excluded=o==null?[a]:o==""?[]:lk(this,o.split(" "))}this.nodeFromJSON=l=>Xn.fromJSON(this,l),this.markFromJSON=l=>He.fromJSON(this,l),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,i,l){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof rk){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,i,l)}text(e,t){let i=this.nodes.text;return new nf(i,i.defaultAttrs,e,He.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function lk(n,e){let t=[];for(let i=0;i<e.length;i++){let l=e[i],a=n.marks[l],o=a;if(a)t.push(a);else for(let c in n.marks){let f=n.marks[c];(l=="_"||f.spec.group&&f.spec.group.split(" ").indexOf(l)>-1)&&t.push(o=f)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[i]+"'")}return t}function yA(n){return n.tag!=null}function bA(n){return n.style!=null}class Rl{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let i=this.matchedStyles=[];t.forEach(l=>{if(yA(l))this.tags.push(l);else if(bA(l)){let a=/[^=]*/.exec(l.style)[0];i.indexOf(a)<0&&i.push(a),this.styles.push(l)}}),this.normalizeLists=!this.tags.some(l=>{if(!/^(ul|ol)\b/.test(l.tag)||!l.node)return!1;let a=e.nodes[l.node];return a.contentMatch.matchType(a)})}parse(e,t={}){let i=new ak(this,t,!1);return i.addAll(e,He.none,t.from,t.to),i.finish()}parseSlice(e,t={}){let i=new ak(this,t,!0);return i.addAll(e,He.none,t.from,t.to),W.maxOpen(i.finish())}matchTag(e,t,i){for(let l=i?this.tags.indexOf(i)+1:0;l<this.tags.length;l++){let a=this.tags[l];if(xA(e,a.tag)&&(a.namespace===void 0||e.namespaceURI==a.namespace)&&(!a.context||t.matchesContext(a.context))){if(a.getAttrs){let o=a.getAttrs(e);if(o===!1)continue;a.attrs=o||void 0}return a}}}matchStyle(e,t,i,l){for(let a=l?this.styles.indexOf(l)+1:0;a<this.styles.length;a++){let o=this.styles[a],c=o.style;if(!(c.indexOf(e)!=0||o.context&&!i.matchesContext(o.context)||c.length>e.length&&(c.charCodeAt(e.length)!=61||c.slice(e.length+1)!=t))){if(o.getAttrs){let f=o.getAttrs(t);if(f===!1)continue;o.attrs=f||void 0}return o}}}static schemaRules(e){let t=[];function i(l){let a=l.priority==null?50:l.priority,o=0;for(;o<t.length;o++){let c=t[o];if((c.priority==null?50:c.priority)<a)break}t.splice(o,0,l)}for(let l in e.marks){let a=e.marks[l].spec.parseDOM;a&&a.forEach(o=>{i(o=ok(o)),o.mark||o.ignore||o.clearMark||(o.mark=l)})}for(let l in e.nodes){let a=e.nodes[l].spec.parseDOM;a&&a.forEach(o=>{i(o=ok(o)),o.node||o.ignore||o.mark||(o.node=l)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Rl(e,Rl.schemaRules(e)))}}const DC={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},SA={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},zC={ol:!0,ul:!0},Ro=1,fm=2,po=4;function sk(n,e,t){return e!=null?(e?Ro:0)|(e==="full"?fm:0):n&&n.whitespace=="pre"?Ro|fm:t&~po}class Tc{constructor(e,t,i,l,a,o){this.type=e,this.attrs=t,this.marks=i,this.solid=l,this.options=o,this.content=[],this.activeMarks=He.none,this.match=a||(o&po?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(X.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let i=this.type.contentMatch,l;return(l=i.findWrapping(e.type))?(this.match=i,l):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Ro)){let i=this.content[this.content.length-1],l;if(i&&i.isText&&(l=/[ \t\r\n\u000c]+$/.exec(i.text))){let a=i;i.text.length==l[0].length?this.content.pop():this.content[this.content.length-1]=a.withText(a.text.slice(0,a.text.length-l[0].length))}}let t=X.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(X.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!DC.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class ak{constructor(e,t,i){this.parser=e,this.options=t,this.isOpen=i,this.open=0,this.localPreserveWS=!1;let l=t.topNode,a,o=sk(null,t.preserveWhitespace,0)|(i?po:0);l?a=new Tc(l.type,l.attrs,He.none,!0,t.topMatch||l.type.contentMatch,o):i?a=new Tc(null,null,He.none,!0,null,o):a=new Tc(e.schema.topNodeType,null,He.none,!0,null,o),this.nodes=[a],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let i=e.nodeValue,l=this.top,a=l.options&fm?"full":this.localPreserveWS||(l.options&Ro)>0,{schema:o}=this.parser;if(a==="full"||l.inlineContext(e)||/[^ \t\r\n\u000c]/.test(i)){if(a)if(a==="full")i=i.replace(/\r\n?/g,`
`);else if(o.linebreakReplacement&&/[\r\n]/.test(i)&&this.top.findWrapping(o.linebreakReplacement.create())){let c=i.split(/\r?\n|\r/);for(let f=0;f<c.length;f++)f&&this.insertNode(o.linebreakReplacement.create(),t,!0),c[f]&&this.insertNode(o.text(c[f]),t,!/\S/.test(c[f]));i=""}else i=i.replace(/\r?\n|\r/g," ");else if(i=i.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(i)&&this.open==this.nodes.length-1){let c=l.content[l.content.length-1],f=e.previousSibling;(!c||f&&f.nodeName=="BR"||c.isText&&/[ \t\r\n\u000c]$/.test(c.text))&&(i=i.slice(1))}i&&this.insertNode(o.text(i),t,!/\S/.test(i)),this.findInText(e)}else this.findInside(e)}addElement(e,t,i){let l=this.localPreserveWS,a=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),c;zC.hasOwnProperty(o)&&this.parser.normalizeLists&&kA(e);let f=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(c=this.parser.matchTag(e,this,i));e:if(f?f.ignore:SA.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,t);else if(!f||f.skip||f.closeParent){f&&f.closeParent?this.open=Math.max(0,this.open-1):f&&f.skip.nodeType&&(e=f.skip);let d,p=this.needsBlock;if(DC.hasOwnProperty(o))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),d=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let g=f&&f.skip?t:this.readStyles(e,t);g&&this.addAll(e,g),d&&this.sync(a),this.needsBlock=p}else{let d=this.readStyles(e,t);d&&this.addElementByRule(e,f,d,f.consuming===!1?c:void 0)}this.localPreserveWS=l}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let i=e.style;if(i&&i.length)for(let l=0;l<this.parser.matchedStyles.length;l++){let a=this.parser.matchedStyles[l],o=i.getPropertyValue(a);if(o)for(let c=void 0;;){let f=this.parser.matchStyle(a,o,this,c);if(!f)break;if(f.ignore)return null;if(f.clearMark?t=t.filter(d=>!f.clearMark(d)):t=t.concat(this.parser.schema.marks[f.mark].create(f.attrs)),f.consuming===!1)c=f;else break}}return t}addElementByRule(e,t,i,l){let a,o;if(t.node)if(o=this.parser.schema.nodes[t.node],o.isLeaf)this.insertNode(o.create(t.attrs),i,e.nodeName=="BR")||this.leafFallback(e,i);else{let f=this.enter(o,t.attrs||null,i,t.preserveWhitespace);f&&(a=!0,i=f)}else{let f=this.parser.schema.marks[t.mark];i=i.concat(f.create(t.attrs))}let c=this.top;if(o&&o.isLeaf)this.findInside(e);else if(l)this.addElement(e,i,l);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(f=>this.insertNode(f,i,!1));else{let f=e;typeof t.contentElement=="string"?f=e.querySelector(t.contentElement):typeof t.contentElement=="function"?f=t.contentElement(e):t.contentElement&&(f=t.contentElement),this.findAround(e,f,!0),this.addAll(f,i),this.findAround(e,f,!1)}a&&this.sync(c)&&this.open--}addAll(e,t,i,l){let a=i||0;for(let o=i?e.childNodes[i]:e.firstChild,c=l==null?null:e.childNodes[l];o!=c;o=o.nextSibling,++a)this.findAtPoint(e,a),this.addDOM(o,t);this.findAtPoint(e,a)}findPlace(e,t,i){let l,a;for(let o=this.open,c=0;o>=0;o--){let f=this.nodes[o],d=f.findWrapping(e);if(d&&(!l||l.length>d.length+c)&&(l=d,a=f,!d.length))break;if(f.solid){if(i)break;c+=2}}if(!l)return null;this.sync(a);for(let o=0;o<l.length;o++)t=this.enterInner(l[o],null,t,!1);return t}insertNode(e,t,i){if(e.isInline&&this.needsBlock&&!this.top.type){let a=this.textblockFromContext();a&&(t=this.enterInner(a,null,t))}let l=this.findPlace(e,t,i);if(l){this.closeExtra();let a=this.top;a.match&&(a.match=a.match.matchType(e.type));let o=He.none;for(let c of l.concat(e.marks))(a.type?a.type.allowsMarkType(c.type):uk(c.type,e.type))&&(o=c.addToSet(o));return a.content.push(e.mark(o)),!0}return!1}enter(e,t,i,l){let a=this.findPlace(e.create(t),i,!1);return a&&(a=this.enterInner(e,t,i,!0,l)),a}enterInner(e,t,i,l=!1,a){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let c=sk(e,a,o.options);o.options&po&&o.content.length==0&&(c|=po);let f=He.none;return i=i.filter(d=>(o.type?o.type.allowsMarkType(d.type):uk(d.type,e))?(f=d.addToSet(f),!1):!0),this.nodes.push(new Tc(e,t,f,l,null,c)),this.open++,i}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=Ro)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let i=this.nodes[t].content;for(let l=i.length-1;l>=0;l--)e+=i[l].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let i=0;i<this.find.length;i++)this.find[i].node==e&&this.find[i].offset==t&&(this.find[i].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,i){if(e!=t&&this.find)for(let l=0;l<this.find.length;l++)this.find[l].pos==null&&e.nodeType==1&&e.contains(this.find[l].node)&&t.compareDocumentPosition(this.find[l].node)&(i?2:4)&&(this.find[l].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),i=this.options.context,l=!this.isOpen&&(!i||i.parent.type==this.nodes[0].type),a=-(i?i.depth+1:0)+(l?0:1),o=(c,f)=>{for(;c>=0;c--){let d=t[c];if(d==""){if(c==t.length-1||c==0)continue;for(;f>=a;f--)if(o(c-1,f))return!0;return!1}else{let p=f>0||f==0&&l?this.nodes[f].type:i&&f>=a?i.node(f-a).type:null;if(!p||p.name!=d&&!p.isInGroup(d))return!1;f--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(i&&i.isTextblock&&i.defaultAttrs)return i}for(let t in this.parser.schema.nodes){let i=this.parser.schema.nodes[t];if(i.isTextblock&&i.defaultAttrs)return i}}}function kA(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let i=e.nodeType==1?e.nodeName.toLowerCase():null;i&&zC.hasOwnProperty(i)&&t?(t.appendChild(e),e=t):i=="li"?t=e:i&&(t=null)}}function xA(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function ok(n){let e={};for(let t in n)e[t]=n[t];return e}function uk(n,e){let t=e.schema.nodes;for(let i in t){let l=t[i];if(!l.allowsMarkType(n))continue;let a=[],o=c=>{a.push(c);for(let f=0;f<c.edgeCount;f++){let{type:d,next:p}=c.edge(f);if(d==e||a.indexOf(p)<0&&o(p))return!0}};if(o(l.contentMatch))return!0}}class Il{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},i){i||(i=gp(t).createDocumentFragment());let l=i,a=[];return e.forEach(o=>{if(a.length||o.marks.length){let c=0,f=0;for(;c<a.length&&f<o.marks.length;){let d=o.marks[f];if(!this.marks[d.type.name]){f++;continue}if(!d.eq(a[c][0])||d.type.spec.spanning===!1)break;c++,f++}for(;c<a.length;)l=a.pop()[1];for(;f<o.marks.length;){let d=o.marks[f++],p=this.serializeMark(d,o.isInline,t);p&&(a.push([d,l]),l.appendChild(p.dom),l=p.contentDOM||p.dom)}}l.appendChild(this.serializeNodeInner(o,t))}),i}serializeNodeInner(e,t){let{dom:i,contentDOM:l}=Dc(gp(t),this.nodes[e.type.name](e),null,e.attrs);if(l){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,l)}return i}serializeNode(e,t={}){let i=this.serializeNodeInner(e,t);for(let l=e.marks.length-1;l>=0;l--){let a=this.serializeMark(e.marks[l],e.isInline,t);a&&((a.contentDOM||a.dom).appendChild(i),i=a.dom)}return i}serializeMark(e,t,i={}){let l=this.marks[e.type.name];return l&&Dc(gp(i),l(e,t),null,e.attrs)}static renderSpec(e,t,i=null,l){return Dc(e,t,i,l)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Il(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=ck(e.nodes);return t.text||(t.text=i=>i.text),t}static marksFromSchema(e){return ck(e.marks)}}function ck(n){let e={};for(let t in n){let i=n[t].spec.toDOM;i&&(e[t]=i)}return e}function gp(n){return n.document||window.document}const fk=new WeakMap;function CA(n){let e=fk.get(n);return e===void 0&&fk.set(n,e=vA(n)),e}function vA(n){let e=null;function t(i){if(i&&typeof i=="object")if(Array.isArray(i))if(typeof i[0]=="string")e||(e=[]),e.push(i);else for(let l=0;l<i.length;l++)t(i[l]);else for(let l in i)t(i[l])}return t(n),e}function Dc(n,e,t,i){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let l=e[0],a;if(typeof l!="string")throw new RangeError("Invalid array passed to renderSpec");if(i&&(a=CA(i))&&a.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=l.indexOf(" ");o>0&&(t=l.slice(0,o),l=l.slice(o+1));let c,f=t?n.createElementNS(t,l):n.createElement(l),d=e[1],p=1;if(d&&typeof d=="object"&&d.nodeType==null&&!Array.isArray(d)){p=2;for(let g in d)if(d[g]!=null){let b=g.indexOf(" ");b>0?f.setAttributeNS(g.slice(0,b),g.slice(b+1),d[g]):g=="style"&&f.style?f.style.cssText=d[g]:f.setAttribute(g,d[g])}}for(let g=p;g<e.length;g++){let b=e[g];if(b===0){if(g<e.length-1||g>p)throw new RangeError("Content hole must be the only child of its parent node");return{dom:f,contentDOM:f}}else{let{dom:S,contentDOM:x}=Dc(n,b,t,i);if(f.appendChild(S),x){if(c)throw new RangeError("Multiple content holes");c=x}}}return{dom:f,contentDOM:c}}const wA={};function sg(n,e){const t=wA,i=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,l=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return _C(n,i,l)}function _C(n,e,t){if(TA(n)){if("value"in n)return n.type==="html"&&!t?"":n.value;if(e&&"alt"in n&&n.alt)return n.alt;if("children"in n)return hk(n.children,e,t)}return Array.isArray(n)?hk(n,e,t):""}function hk(n,e,t){const i=[];let l=-1;for(;++l<n.length;)i[l]=_C(n[l],e,t);return i.join("")}function TA(n){return!!(n&&typeof n=="object")}const dk=document.createElement("i");function ag(n){const e="&"+n+";";dk.innerHTML=e;const t=dk.textContent;return t.charCodeAt(t.length-1)===59&&n!=="semi"||t===e?!1:t}function An(n,e,t,i){const l=n.length;let a=0,o;if(e<0?e=-e>l?0:l+e:e=e>l?l:e,t=t>0?t:0,i.length<1e4)o=Array.from(i),o.unshift(e,t),n.splice(...o);else for(t&&n.splice(e,t);a<i.length;)o=i.slice(a,a+1e4),o.unshift(e,0),n.splice(...o),a+=1e4,e+=1e4}function Gn(n,e){return n.length>0?(An(n,n.length,0,e),n):e}const pk={}.hasOwnProperty;function BC(n){const e={};let t=-1;for(;++t<n.length;)MA(e,n[t]);return e}function MA(n,e){let t;for(t in e){const l=(pk.call(n,t)?n[t]:void 0)||(n[t]={}),a=e[t];let o;if(a)for(o in a){pk.call(l,o)||(l[o]=[]);const c=a[o];EA(l[o],Array.isArray(c)?c:c?[c]:[])}}}function EA(n,e){let t=-1;const i=[];for(;++t<e.length;)(e[t].add==="after"?n:i).push(e[t]);An(n,0,0,i)}function LC(n,e){const t=Number.parseInt(n,e);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"":String.fromCodePoint(t)}function si(n){return n.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Pt=Jr(/[A-Za-z]/),hn=Jr(/[\dA-Za-z]/),NA=Jr(/[#-'*+\--9=?A-Z^-~]/);function rf(n){return n!==null&&(n<32||n===127)}const hm=Jr(/\d/),AA=Jr(/[\dA-Fa-f]/),OA=Jr(/[!-/:-@[-`{-~]/);function de(n){return n!==null&&n<-2}function nt(n){return n!==null&&(n<0||n===32)}function De(n){return n===-2||n===-1||n===32}const Of=Jr(new RegExp("\\p{P}|\\p{S}","u")),Dl=Jr(/\s/);function Jr(n){return e;function e(t){return t!==null&&t>-1&&n.test(String.fromCharCode(t))}}function Ue(n,e,t,i){const l=i?i-1:Number.POSITIVE_INFINITY;let a=0;return o;function o(f){return De(f)?(n.enter(t),c(f)):e(f)}function c(f){return De(f)&&a++<l?(n.consume(f),c):(n.exit(t),e(f))}}const RA={tokenize:DA};function DA(n){const e=n.attempt(this.parser.constructs.contentInitial,i,l);let t;return e;function i(c){if(c===null){n.consume(c);return}return n.enter("lineEnding"),n.consume(c),n.exit("lineEnding"),Ue(n,e,"linePrefix")}function l(c){return n.enter("paragraph"),a(c)}function a(c){const f=n.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=f),t=f,o(c)}function o(c){if(c===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(c);return}return de(c)?(n.consume(c),n.exit("chunkText"),a):(n.consume(c),o)}}const zA={tokenize:_A},mk={tokenize:BA};function _A(n){const e=this,t=[];let i=0,l,a,o;return c;function c(L){if(i<t.length){const P=t[i];return e.containerState=P[1],n.attempt(P[0].continuation,f,d)(L)}return d(L)}function f(L){if(i++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,l&&Q();const P=e.events.length;let ee=P,z;for(;ee--;)if(e.events[ee][0]==="exit"&&e.events[ee][1].type==="chunkFlow"){z=e.events[ee][1].end;break}T(i);let Y=P;for(;Y<e.events.length;)e.events[Y][1].end={...z},Y++;return An(e.events,ee+1,0,e.events.slice(P)),e.events.length=Y,d(L)}return c(L)}function d(L){if(i===t.length){if(!l)return b(L);if(l.currentConstruct&&l.currentConstruct.concrete)return x(L);e.interrupt=!!(l.currentConstruct&&!l._gfmTableDynamicInterruptHack)}return e.containerState={},n.check(mk,p,g)(L)}function p(L){return l&&Q(),T(i),b(L)}function g(L){return e.parser.lazy[e.now().line]=i!==t.length,o=e.now().offset,x(L)}function b(L){return e.containerState={},n.attempt(mk,S,x)(L)}function S(L){return i++,t.push([e.currentConstruct,e.containerState]),b(L)}function x(L){if(L===null){l&&Q(),T(0),n.consume(L);return}return l=l||e.parser.flow(e.now()),n.enter("chunkFlow",{_tokenizer:l,contentType:"flow",previous:a}),v(L)}function v(L){if(L===null){M(n.exit("chunkFlow"),!0),T(0),n.consume(L);return}return de(L)?(n.consume(L),M(n.exit("chunkFlow")),i=0,e.interrupt=void 0,c):(n.consume(L),v)}function M(L,P){const ee=e.sliceStream(L);if(P&&ee.push(null),L.previous=a,a&&(a.next=L),a=L,l.defineSkip(L.start),l.write(ee),e.parser.lazy[L.start.line]){let z=l.events.length;for(;z--;)if(l.events[z][1].start.offset<o&&(!l.events[z][1].end||l.events[z][1].end.offset>o))return;const Y=e.events.length;let ne=Y,ue,H;for(;ne--;)if(e.events[ne][0]==="exit"&&e.events[ne][1].type==="chunkFlow"){if(ue){H=e.events[ne][1].end;break}ue=!0}for(T(i),z=Y;z<e.events.length;)e.events[z][1].end={...H},z++;An(e.events,ne+1,0,e.events.slice(Y)),e.events.length=z}}function T(L){let P=t.length;for(;P-- >L;){const ee=t[P];e.containerState=ee[1],ee[0].exit.call(e,n)}t.length=L}function Q(){l.write([null]),a=void 0,l=void 0,e.containerState._closeFlow=void 0}}function BA(n,e,t){return Ue(n,n.attempt(this.parser.constructs.document,e,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Ks(n){if(n===null||nt(n)||Dl(n))return 1;if(Of(n))return 2}function Rf(n,e,t){const i=[];let l=-1;for(;++l<n.length;){const a=n[l].resolveAll;a&&!i.includes(a)&&(e=a(e,t),i.push(a))}return e}const dm={name:"attention",resolveAll:LA,tokenize:IA};function LA(n,e){let t=-1,i,l,a,o,c,f,d,p;for(;++t<n.length;)if(n[t][0]==="enter"&&n[t][1].type==="attentionSequence"&&n[t][1]._close){for(i=t;i--;)if(n[i][0]==="exit"&&n[i][1].type==="attentionSequence"&&n[i][1]._open&&e.sliceSerialize(n[i][1]).charCodeAt(0)===e.sliceSerialize(n[t][1]).charCodeAt(0)){if((n[i][1]._close||n[t][1]._open)&&(n[t][1].end.offset-n[t][1].start.offset)%3&&!((n[i][1].end.offset-n[i][1].start.offset+n[t][1].end.offset-n[t][1].start.offset)%3))continue;f=n[i][1].end.offset-n[i][1].start.offset>1&&n[t][1].end.offset-n[t][1].start.offset>1?2:1;const g={...n[i][1].end},b={...n[t][1].start};gk(g,-f),gk(b,f),o={type:f>1?"strongSequence":"emphasisSequence",start:g,end:{...n[i][1].end}},c={type:f>1?"strongSequence":"emphasisSequence",start:{...n[t][1].start},end:b},a={type:f>1?"strongText":"emphasisText",start:{...n[i][1].end},end:{...n[t][1].start}},l={type:f>1?"strong":"emphasis",start:{...o.start},end:{...c.end}},n[i][1].end={...o.start},n[t][1].start={...c.end},d=[],n[i][1].end.offset-n[i][1].start.offset&&(d=Gn(d,[["enter",n[i][1],e],["exit",n[i][1],e]])),d=Gn(d,[["enter",l,e],["enter",o,e],["exit",o,e],["enter",a,e]]),d=Gn(d,Rf(e.parser.constructs.insideSpan.null,n.slice(i+1,t),e)),d=Gn(d,[["exit",a,e],["enter",c,e],["exit",c,e],["exit",l,e]]),n[t][1].end.offset-n[t][1].start.offset?(p=2,d=Gn(d,[["enter",n[t][1],e],["exit",n[t][1],e]])):p=0,An(n,i-1,t-i+3,d),t=i+d.length-p-2;break}}for(t=-1;++t<n.length;)n[t][1].type==="attentionSequence"&&(n[t][1].type="data");return n}function IA(n,e){const t=this.parser.constructs.attentionMarkers.null,i=this.previous,l=Ks(i);let a;return o;function o(f){return a=f,n.enter("attentionSequence"),c(f)}function c(f){if(f===a)return n.consume(f),c;const d=n.exit("attentionSequence"),p=Ks(f),g=!p||p===2&&l||t.includes(f),b=!l||l===2&&p||t.includes(i);return d._open=!!(a===42?g:g&&(l||!b)),d._close=!!(a===42?b:b&&(p||!g)),e(f)}}function gk(n,e){n.column+=e,n.offset+=e,n._bufferIndex+=e}const qA={name:"autolink",tokenize:HA};function HA(n,e,t){let i=0;return l;function l(S){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(S),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),a}function a(S){return Pt(S)?(n.consume(S),o):S===64?t(S):d(S)}function o(S){return S===43||S===45||S===46||hn(S)?(i=1,c(S)):d(S)}function c(S){return S===58?(n.consume(S),i=0,f):(S===43||S===45||S===46||hn(S))&&i++<32?(n.consume(S),c):(i=0,d(S))}function f(S){return S===62?(n.exit("autolinkProtocol"),n.enter("autolinkMarker"),n.consume(S),n.exit("autolinkMarker"),n.exit("autolink"),e):S===null||S===32||S===60||rf(S)?t(S):(n.consume(S),f)}function d(S){return S===64?(n.consume(S),p):NA(S)?(n.consume(S),d):t(S)}function p(S){return hn(S)?g(S):t(S)}function g(S){return S===46?(n.consume(S),i=0,p):S===62?(n.exit("autolinkProtocol").type="autolinkEmail",n.enter("autolinkMarker"),n.consume(S),n.exit("autolinkMarker"),n.exit("autolink"),e):b(S)}function b(S){if((S===45||hn(S))&&i++<63){const x=S===45?b:g;return n.consume(S),x}return t(S)}}const Vo={partial:!0,tokenize:UA};function UA(n,e,t){return i;function i(a){return De(a)?Ue(n,l,"linePrefix")(a):l(a)}function l(a){return a===null||de(a)?e(a):t(a)}}const IC={continuation:{tokenize:jA},exit:FA,name:"blockQuote",tokenize:VA};function VA(n,e,t){const i=this;return l;function l(o){if(o===62){const c=i.containerState;return c.open||(n.enter("blockQuote",{_container:!0}),c.open=!0),n.enter("blockQuotePrefix"),n.enter("blockQuoteMarker"),n.consume(o),n.exit("blockQuoteMarker"),a}return t(o)}function a(o){return De(o)?(n.enter("blockQuotePrefixWhitespace"),n.consume(o),n.exit("blockQuotePrefixWhitespace"),n.exit("blockQuotePrefix"),e):(n.exit("blockQuotePrefix"),e(o))}}function jA(n,e,t){const i=this;return l;function l(o){return De(o)?Ue(n,a,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):a(o)}function a(o){return n.attempt(IC,e,t)(o)}}function FA(n){n.exit("blockQuote")}const qC={name:"characterEscape",tokenize:KA};function KA(n,e,t){return i;function i(a){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(a),n.exit("escapeMarker"),l}function l(a){return OA(a)?(n.enter("characterEscapeValue"),n.consume(a),n.exit("characterEscapeValue"),n.exit("characterEscape"),e):t(a)}}const HC={name:"characterReference",tokenize:YA};function YA(n,e,t){const i=this;let l=0,a,o;return c;function c(g){return n.enter("characterReference"),n.enter("characterReferenceMarker"),n.consume(g),n.exit("characterReferenceMarker"),f}function f(g){return g===35?(n.enter("characterReferenceMarkerNumeric"),n.consume(g),n.exit("characterReferenceMarkerNumeric"),d):(n.enter("characterReferenceValue"),a=31,o=hn,p(g))}function d(g){return g===88||g===120?(n.enter("characterReferenceMarkerHexadecimal"),n.consume(g),n.exit("characterReferenceMarkerHexadecimal"),n.enter("characterReferenceValue"),a=6,o=AA,p):(n.enter("characterReferenceValue"),a=7,o=hm,p(g))}function p(g){if(g===59&&l){const b=n.exit("characterReferenceValue");return o===hn&&!ag(i.sliceSerialize(b))?t(g):(n.enter("characterReferenceMarker"),n.consume(g),n.exit("characterReferenceMarker"),n.exit("characterReference"),e)}return o(g)&&l++<a?(n.consume(g),p):t(g)}}const yk={partial:!0,tokenize:QA},bk={concrete:!0,name:"codeFenced",tokenize:GA};function GA(n,e,t){const i=this,l={partial:!0,tokenize:ee};let a=0,o=0,c;return f;function f(z){return d(z)}function d(z){const Y=i.events[i.events.length-1];return a=Y&&Y[1].type==="linePrefix"?Y[2].sliceSerialize(Y[1],!0).length:0,c=z,n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),p(z)}function p(z){return z===c?(o++,n.consume(z),p):o<3?t(z):(n.exit("codeFencedFenceSequence"),De(z)?Ue(n,g,"whitespace")(z):g(z))}function g(z){return z===null||de(z)?(n.exit("codeFencedFence"),i.interrupt?e(z):n.check(yk,v,P)(z)):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),b(z))}function b(z){return z===null||de(z)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),g(z)):De(z)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),Ue(n,S,"whitespace")(z)):z===96&&z===c?t(z):(n.consume(z),b)}function S(z){return z===null||de(z)?g(z):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),x(z))}function x(z){return z===null||de(z)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),g(z)):z===96&&z===c?t(z):(n.consume(z),x)}function v(z){return n.attempt(l,P,M)(z)}function M(z){return n.enter("lineEnding"),n.consume(z),n.exit("lineEnding"),T}function T(z){return a>0&&De(z)?Ue(n,Q,"linePrefix",a+1)(z):Q(z)}function Q(z){return z===null||de(z)?n.check(yk,v,P)(z):(n.enter("codeFlowValue"),L(z))}function L(z){return z===null||de(z)?(n.exit("codeFlowValue"),Q(z)):(n.consume(z),L)}function P(z){return n.exit("codeFenced"),e(z)}function ee(z,Y,ne){let ue=0;return H;function H(ke){return z.enter("lineEnding"),z.consume(ke),z.exit("lineEnding"),re}function re(ke){return z.enter("codeFencedFence"),De(ke)?Ue(z,ie,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(ke):ie(ke)}function ie(ke){return ke===c?(z.enter("codeFencedFenceSequence"),Ie(ke)):ne(ke)}function Ie(ke){return ke===c?(ue++,z.consume(ke),Ie):ue>=o?(z.exit("codeFencedFenceSequence"),De(ke)?Ue(z,Ve,"whitespace")(ke):Ve(ke)):ne(ke)}function Ve(ke){return ke===null||de(ke)?(z.exit("codeFencedFence"),Y(ke)):ne(ke)}}}function QA(n,e,t){const i=this;return l;function l(o){return o===null?t(o):(n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),a)}function a(o){return i.parser.lazy[i.now().line]?t(o):e(o)}}const yp={name:"codeIndented",tokenize:JA},XA={partial:!0,tokenize:ZA};function JA(n,e,t){const i=this;return l;function l(d){return n.enter("codeIndented"),Ue(n,a,"linePrefix",5)(d)}function a(d){const p=i.events[i.events.length-1];return p&&p[1].type==="linePrefix"&&p[2].sliceSerialize(p[1],!0).length>=4?o(d):t(d)}function o(d){return d===null?f(d):de(d)?n.attempt(XA,o,f)(d):(n.enter("codeFlowValue"),c(d))}function c(d){return d===null||de(d)?(n.exit("codeFlowValue"),o(d)):(n.consume(d),c)}function f(d){return n.exit("codeIndented"),e(d)}}function ZA(n,e,t){const i=this;return l;function l(o){return i.parser.lazy[i.now().line]?t(o):de(o)?(n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),l):Ue(n,a,"linePrefix",5)(o)}function a(o){const c=i.events[i.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?e(o):de(o)?l(o):t(o)}}const $A={name:"codeText",previous:WA,resolve:PA,tokenize:eO};function PA(n){let e=n.length-4,t=3,i,l;if((n[t][1].type==="lineEnding"||n[t][1].type==="space")&&(n[e][1].type==="lineEnding"||n[e][1].type==="space")){for(i=t;++i<e;)if(n[i][1].type==="codeTextData"){n[t][1].type="codeTextPadding",n[e][1].type="codeTextPadding",t+=2,e-=2;break}}for(i=t-1,e++;++i<=e;)l===void 0?i!==e&&n[i][1].type!=="lineEnding"&&(l=i):(i===e||n[i][1].type==="lineEnding")&&(n[l][1].type="codeTextData",i!==l+2&&(n[l][1].end=n[i-1][1].end,n.splice(l+2,i-l-2),e-=i-l-2,i=l+2),l=void 0);return n}function WA(n){return n!==96||this.events[this.events.length-1][1].type==="characterEscape"}function eO(n,e,t){let i=0,l,a;return o;function o(g){return n.enter("codeText"),n.enter("codeTextSequence"),c(g)}function c(g){return g===96?(n.consume(g),i++,c):(n.exit("codeTextSequence"),f(g))}function f(g){return g===null?t(g):g===32?(n.enter("space"),n.consume(g),n.exit("space"),f):g===96?(a=n.enter("codeTextSequence"),l=0,p(g)):de(g)?(n.enter("lineEnding"),n.consume(g),n.exit("lineEnding"),f):(n.enter("codeTextData"),d(g))}function d(g){return g===null||g===32||g===96||de(g)?(n.exit("codeTextData"),f(g)):(n.consume(g),d)}function p(g){return g===96?(n.consume(g),l++,p):l===i?(n.exit("codeTextSequence"),n.exit("codeText"),e(g)):(a.type="codeTextData",d(g))}}class tO{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const i=t??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(e,i):e>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(e,t,i){const l=t||0;this.setCursor(Math.trunc(e));const a=this.right.splice(this.right.length-l,Number.POSITIVE_INFINITY);return i&&Pa(this.left,i),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Pa(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Pa(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);Pa(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Pa(this.left,t.reverse())}}}function Pa(n,e){let t=0;if(e.length<1e4)n.push(...e);else for(;t<e.length;)n.push(...e.slice(t,t+1e4)),t+=1e4}function UC(n){const e={};let t=-1,i,l,a,o,c,f,d;const p=new tO(n);for(;++t<p.length;){for(;t in e;)t=e[t];if(i=p.get(t),t&&i[1].type==="chunkFlow"&&p.get(t-1)[1].type==="listItemPrefix"&&(f=i[1]._tokenizer.events,a=0,a<f.length&&f[a][1].type==="lineEndingBlank"&&(a+=2),a<f.length&&f[a][1].type==="content"))for(;++a<f.length&&f[a][1].type!=="content";)f[a][1].type==="chunkText"&&(f[a][1]._isInFirstContentOfListItem=!0,a++);if(i[0]==="enter")i[1].contentType&&(Object.assign(e,nO(p,t)),t=e[t],d=!0);else if(i[1]._container){for(a=t,l=void 0;a--;)if(o=p.get(a),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(l&&(p.get(l)[1].type="lineEndingBlank"),o[1].type="lineEnding",l=a);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;l&&(i[1].end={...p.get(l)[1].start},c=p.slice(l,t),c.unshift(i),p.splice(l,t-l+1,c))}}return An(n,0,Number.POSITIVE_INFINITY,p.slice(0)),!d}function nO(n,e){const t=n.get(e)[1],i=n.get(e)[2];let l=e-1;const a=[];let o=t._tokenizer;o||(o=i.parser[t.contentType](t.start),t._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const c=o.events,f=[],d={};let p,g,b=-1,S=t,x=0,v=0;const M=[v];for(;S;){for(;n.get(++l)[1]!==S;);a.push(l),S._tokenizer||(p=i.sliceStream(S),S.next||p.push(null),g&&o.defineSkip(S.start),S._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(p),S._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),g=S,S=S.next}for(S=t;++b<c.length;)c[b][0]==="exit"&&c[b-1][0]==="enter"&&c[b][1].type===c[b-1][1].type&&c[b][1].start.line!==c[b][1].end.line&&(v=b+1,M.push(v),S._tokenizer=void 0,S.previous=void 0,S=S.next);for(o.events=[],S?(S._tokenizer=void 0,S.previous=void 0):M.pop(),b=M.length;b--;){const T=c.slice(M[b],M[b+1]),Q=a.pop();f.push([Q,Q+T.length-1]),n.splice(Q,2,T)}for(f.reverse(),b=-1;++b<f.length;)d[x+f[b][0]]=x+f[b][1],x+=f[b][1]-f[b][0]-1;return d}const iO={resolve:lO,tokenize:sO},rO={partial:!0,tokenize:aO};function lO(n){return UC(n),n}function sO(n,e){let t;return i;function i(c){return n.enter("content"),t=n.enter("chunkContent",{contentType:"content"}),l(c)}function l(c){return c===null?a(c):de(c)?n.check(rO,o,a)(c):(n.consume(c),l)}function a(c){return n.exit("chunkContent"),n.exit("content"),e(c)}function o(c){return n.consume(c),n.exit("chunkContent"),t.next=n.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,l}}function aO(n,e,t){const i=this;return l;function l(o){return n.exit("chunkContent"),n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),Ue(n,a,"linePrefix")}function a(o){if(o===null||de(o))return t(o);const c=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?e(o):n.interrupt(i.parser.constructs.flow,t,e)(o)}}function VC(n,e,t,i,l,a,o,c,f){const d=f||Number.POSITIVE_INFINITY;let p=0;return g;function g(T){return T===60?(n.enter(i),n.enter(l),n.enter(a),n.consume(T),n.exit(a),b):T===null||T===32||T===41||rf(T)?t(T):(n.enter(i),n.enter(o),n.enter(c),n.enter("chunkString",{contentType:"string"}),v(T))}function b(T){return T===62?(n.enter(a),n.consume(T),n.exit(a),n.exit(l),n.exit(i),e):(n.enter(c),n.enter("chunkString",{contentType:"string"}),S(T))}function S(T){return T===62?(n.exit("chunkString"),n.exit(c),b(T)):T===null||T===60||de(T)?t(T):(n.consume(T),T===92?x:S)}function x(T){return T===60||T===62||T===92?(n.consume(T),S):S(T)}function v(T){return!p&&(T===null||T===41||nt(T))?(n.exit("chunkString"),n.exit(c),n.exit(o),n.exit(i),e(T)):p<d&&T===40?(n.consume(T),p++,v):T===41?(n.consume(T),p--,v):T===null||T===32||T===40||rf(T)?t(T):(n.consume(T),T===92?M:v)}function M(T){return T===40||T===41||T===92?(n.consume(T),v):v(T)}}function jC(n,e,t,i,l,a){const o=this;let c=0,f;return d;function d(S){return n.enter(i),n.enter(l),n.consume(S),n.exit(l),n.enter(a),p}function p(S){return c>999||S===null||S===91||S===93&&!f||S===94&&!c&&"_hiddenFootnoteSupport"in o.parser.constructs?t(S):S===93?(n.exit(a),n.enter(l),n.consume(S),n.exit(l),n.exit(i),e):de(S)?(n.enter("lineEnding"),n.consume(S),n.exit("lineEnding"),p):(n.enter("chunkString",{contentType:"string"}),g(S))}function g(S){return S===null||S===91||S===93||de(S)||c++>999?(n.exit("chunkString"),p(S)):(n.consume(S),f||(f=!De(S)),S===92?b:g)}function b(S){return S===91||S===92||S===93?(n.consume(S),c++,g):g(S)}}function FC(n,e,t,i,l,a){let o;return c;function c(b){return b===34||b===39||b===40?(n.enter(i),n.enter(l),n.consume(b),n.exit(l),o=b===40?41:b,f):t(b)}function f(b){return b===o?(n.enter(l),n.consume(b),n.exit(l),n.exit(i),e):(n.enter(a),d(b))}function d(b){return b===o?(n.exit(a),f(o)):b===null?t(b):de(b)?(n.enter("lineEnding"),n.consume(b),n.exit("lineEnding"),Ue(n,d,"linePrefix")):(n.enter("chunkString",{contentType:"string"}),p(b))}function p(b){return b===o||b===null||de(b)?(n.exit("chunkString"),d(b)):(n.consume(b),b===92?g:p)}function g(b){return b===o||b===92?(n.consume(b),p):p(b)}}function mo(n,e){let t;return i;function i(l){return de(l)?(n.enter("lineEnding"),n.consume(l),n.exit("lineEnding"),t=!0,i):De(l)?Ue(n,i,t?"linePrefix":"lineSuffix")(l):e(l)}}const oO={name:"definition",tokenize:cO},uO={partial:!0,tokenize:fO};function cO(n,e,t){const i=this;let l;return a;function a(S){return n.enter("definition"),o(S)}function o(S){return jC.call(i,n,c,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(S)}function c(S){return l=si(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),S===58?(n.enter("definitionMarker"),n.consume(S),n.exit("definitionMarker"),f):t(S)}function f(S){return nt(S)?mo(n,d)(S):d(S)}function d(S){return VC(n,p,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(S)}function p(S){return n.attempt(uO,g,g)(S)}function g(S){return De(S)?Ue(n,b,"whitespace")(S):b(S)}function b(S){return S===null||de(S)?(n.exit("definition"),i.parser.defined.push(l),e(S)):t(S)}}function fO(n,e,t){return i;function i(c){return nt(c)?mo(n,l)(c):t(c)}function l(c){return FC(n,a,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(c)}function a(c){return De(c)?Ue(n,o,"whitespace")(c):o(c)}function o(c){return c===null||de(c)?e(c):t(c)}}const hO={name:"hardBreakEscape",tokenize:dO};function dO(n,e,t){return i;function i(a){return n.enter("hardBreakEscape"),n.consume(a),l}function l(a){return de(a)?(n.exit("hardBreakEscape"),e(a)):t(a)}}const pO={name:"headingAtx",resolve:mO,tokenize:gO};function mO(n,e){let t=n.length-2,i=3,l,a;return n[i][1].type==="whitespace"&&(i+=2),t-2>i&&n[t][1].type==="whitespace"&&(t-=2),n[t][1].type==="atxHeadingSequence"&&(i===t-1||t-4>i&&n[t-2][1].type==="whitespace")&&(t-=i+1===t?2:4),t>i&&(l={type:"atxHeadingText",start:n[i][1].start,end:n[t][1].end},a={type:"chunkText",start:n[i][1].start,end:n[t][1].end,contentType:"text"},An(n,i,t-i+1,[["enter",l,e],["enter",a,e],["exit",a,e],["exit",l,e]])),n}function gO(n,e,t){let i=0;return l;function l(p){return n.enter("atxHeading"),a(p)}function a(p){return n.enter("atxHeadingSequence"),o(p)}function o(p){return p===35&&i++<6?(n.consume(p),o):p===null||nt(p)?(n.exit("atxHeadingSequence"),c(p)):t(p)}function c(p){return p===35?(n.enter("atxHeadingSequence"),f(p)):p===null||de(p)?(n.exit("atxHeading"),e(p)):De(p)?Ue(n,c,"whitespace")(p):(n.enter("atxHeadingText"),d(p))}function f(p){return p===35?(n.consume(p),f):(n.exit("atxHeadingSequence"),c(p))}function d(p){return p===null||p===35||nt(p)?(n.exit("atxHeadingText"),c(p)):(n.consume(p),d)}}const yO=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Sk=["pre","script","style","textarea"],bO={concrete:!0,name:"htmlFlow",resolveTo:xO,tokenize:CO},SO={partial:!0,tokenize:wO},kO={partial:!0,tokenize:vO};function xO(n){let e=n.length;for(;e--&&!(n[e][0]==="enter"&&n[e][1].type==="htmlFlow"););return e>1&&n[e-2][1].type==="linePrefix"&&(n[e][1].start=n[e-2][1].start,n[e+1][1].start=n[e-2][1].start,n.splice(e-2,2)),n}function CO(n,e,t){const i=this;let l,a,o,c,f;return d;function d(w){return p(w)}function p(w){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(w),g}function g(w){return w===33?(n.consume(w),b):w===47?(n.consume(w),a=!0,v):w===63?(n.consume(w),l=3,i.interrupt?e:E):Pt(w)?(n.consume(w),o=String.fromCharCode(w),M):t(w)}function b(w){return w===45?(n.consume(w),l=2,S):w===91?(n.consume(w),l=5,c=0,x):Pt(w)?(n.consume(w),l=4,i.interrupt?e:E):t(w)}function S(w){return w===45?(n.consume(w),i.interrupt?e:E):t(w)}function x(w){const te="CDATA[";return w===te.charCodeAt(c++)?(n.consume(w),c===te.length?i.interrupt?e:ie:x):t(w)}function v(w){return Pt(w)?(n.consume(w),o=String.fromCharCode(w),M):t(w)}function M(w){if(w===null||w===47||w===62||nt(w)){const te=w===47,me=o.toLowerCase();return!te&&!a&&Sk.includes(me)?(l=1,i.interrupt?e(w):ie(w)):yO.includes(o.toLowerCase())?(l=6,te?(n.consume(w),T):i.interrupt?e(w):ie(w)):(l=7,i.interrupt&&!i.parser.lazy[i.now().line]?t(w):a?Q(w):L(w))}return w===45||hn(w)?(n.consume(w),o+=String.fromCharCode(w),M):t(w)}function T(w){return w===62?(n.consume(w),i.interrupt?e:ie):t(w)}function Q(w){return De(w)?(n.consume(w),Q):H(w)}function L(w){return w===47?(n.consume(w),H):w===58||w===95||Pt(w)?(n.consume(w),P):De(w)?(n.consume(w),L):H(w)}function P(w){return w===45||w===46||w===58||w===95||hn(w)?(n.consume(w),P):ee(w)}function ee(w){return w===61?(n.consume(w),z):De(w)?(n.consume(w),ee):L(w)}function z(w){return w===null||w===60||w===61||w===62||w===96?t(w):w===34||w===39?(n.consume(w),f=w,Y):De(w)?(n.consume(w),z):ne(w)}function Y(w){return w===f?(n.consume(w),f=null,ue):w===null||de(w)?t(w):(n.consume(w),Y)}function ne(w){return w===null||w===34||w===39||w===47||w===60||w===61||w===62||w===96||nt(w)?ee(w):(n.consume(w),ne)}function ue(w){return w===47||w===62||De(w)?L(w):t(w)}function H(w){return w===62?(n.consume(w),re):t(w)}function re(w){return w===null||de(w)?ie(w):De(w)?(n.consume(w),re):t(w)}function ie(w){return w===45&&l===2?(n.consume(w),q):w===60&&l===1?(n.consume(w),J):w===62&&l===4?(n.consume(w),A):w===63&&l===3?(n.consume(w),E):w===93&&l===5?(n.consume(w),Ee):de(w)&&(l===6||l===7)?(n.exit("htmlFlowData"),n.check(SO,V,Ie)(w)):w===null||de(w)?(n.exit("htmlFlowData"),Ie(w)):(n.consume(w),ie)}function Ie(w){return n.check(kO,Ve,V)(w)}function Ve(w){return n.enter("lineEnding"),n.consume(w),n.exit("lineEnding"),ke}function ke(w){return w===null||de(w)?Ie(w):(n.enter("htmlFlowData"),ie(w))}function q(w){return w===45?(n.consume(w),E):ie(w)}function J(w){return w===47?(n.consume(w),o="",oe):ie(w)}function oe(w){if(w===62){const te=o.toLowerCase();return Sk.includes(te)?(n.consume(w),A):ie(w)}return Pt(w)&&o.length<8?(n.consume(w),o+=String.fromCharCode(w),oe):ie(w)}function Ee(w){return w===93?(n.consume(w),E):ie(w)}function E(w){return w===62?(n.consume(w),A):w===45&&l===2?(n.consume(w),E):ie(w)}function A(w){return w===null||de(w)?(n.exit("htmlFlowData"),V(w)):(n.consume(w),A)}function V(w){return n.exit("htmlFlow"),e(w)}}function vO(n,e,t){const i=this;return l;function l(o){return de(o)?(n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),a):t(o)}function a(o){return i.parser.lazy[i.now().line]?t(o):e(o)}}function wO(n,e,t){return i;function i(l){return n.enter("lineEnding"),n.consume(l),n.exit("lineEnding"),n.attempt(Vo,e,t)}}const TO={name:"htmlText",tokenize:MO};function MO(n,e,t){const i=this;let l,a,o;return c;function c(E){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(E),f}function f(E){return E===33?(n.consume(E),d):E===47?(n.consume(E),ee):E===63?(n.consume(E),L):Pt(E)?(n.consume(E),ne):t(E)}function d(E){return E===45?(n.consume(E),p):E===91?(n.consume(E),a=0,x):Pt(E)?(n.consume(E),Q):t(E)}function p(E){return E===45?(n.consume(E),S):t(E)}function g(E){return E===null?t(E):E===45?(n.consume(E),b):de(E)?(o=g,J(E)):(n.consume(E),g)}function b(E){return E===45?(n.consume(E),S):g(E)}function S(E){return E===62?q(E):E===45?b(E):g(E)}function x(E){const A="CDATA[";return E===A.charCodeAt(a++)?(n.consume(E),a===A.length?v:x):t(E)}function v(E){return E===null?t(E):E===93?(n.consume(E),M):de(E)?(o=v,J(E)):(n.consume(E),v)}function M(E){return E===93?(n.consume(E),T):v(E)}function T(E){return E===62?q(E):E===93?(n.consume(E),T):v(E)}function Q(E){return E===null||E===62?q(E):de(E)?(o=Q,J(E)):(n.consume(E),Q)}function L(E){return E===null?t(E):E===63?(n.consume(E),P):de(E)?(o=L,J(E)):(n.consume(E),L)}function P(E){return E===62?q(E):L(E)}function ee(E){return Pt(E)?(n.consume(E),z):t(E)}function z(E){return E===45||hn(E)?(n.consume(E),z):Y(E)}function Y(E){return de(E)?(o=Y,J(E)):De(E)?(n.consume(E),Y):q(E)}function ne(E){return E===45||hn(E)?(n.consume(E),ne):E===47||E===62||nt(E)?ue(E):t(E)}function ue(E){return E===47?(n.consume(E),q):E===58||E===95||Pt(E)?(n.consume(E),H):de(E)?(o=ue,J(E)):De(E)?(n.consume(E),ue):q(E)}function H(E){return E===45||E===46||E===58||E===95||hn(E)?(n.consume(E),H):re(E)}function re(E){return E===61?(n.consume(E),ie):de(E)?(o=re,J(E)):De(E)?(n.consume(E),re):ue(E)}function ie(E){return E===null||E===60||E===61||E===62||E===96?t(E):E===34||E===39?(n.consume(E),l=E,Ie):de(E)?(o=ie,J(E)):De(E)?(n.consume(E),ie):(n.consume(E),Ve)}function Ie(E){return E===l?(n.consume(E),l=void 0,ke):E===null?t(E):de(E)?(o=Ie,J(E)):(n.consume(E),Ie)}function Ve(E){return E===null||E===34||E===39||E===60||E===61||E===96?t(E):E===47||E===62||nt(E)?ue(E):(n.consume(E),Ve)}function ke(E){return E===47||E===62||nt(E)?ue(E):t(E)}function q(E){return E===62?(n.consume(E),n.exit("htmlTextData"),n.exit("htmlText"),e):t(E)}function J(E){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(E),n.exit("lineEnding"),oe}function oe(E){return De(E)?Ue(n,Ee,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(E):Ee(E)}function Ee(E){return n.enter("htmlTextData"),o(E)}}const og={name:"labelEnd",resolveAll:OO,resolveTo:RO,tokenize:DO},EO={tokenize:zO},NO={tokenize:_O},AO={tokenize:BO};function OO(n){let e=-1;const t=[];for(;++e<n.length;){const i=n[e][1];if(t.push(n[e]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const l=i.type==="labelImage"?4:2;i.type="data",e+=l}}return n.length!==t.length&&An(n,0,n.length,t),n}function RO(n,e){let t=n.length,i=0,l,a,o,c;for(;t--;)if(l=n[t][1],a){if(l.type==="link"||l.type==="labelLink"&&l._inactive)break;n[t][0]==="enter"&&l.type==="labelLink"&&(l._inactive=!0)}else if(o){if(n[t][0]==="enter"&&(l.type==="labelImage"||l.type==="labelLink")&&!l._balanced&&(a=t,l.type!=="labelLink")){i=2;break}}else l.type==="labelEnd"&&(o=t);const f={type:n[a][1].type==="labelLink"?"link":"image",start:{...n[a][1].start},end:{...n[n.length-1][1].end}},d={type:"label",start:{...n[a][1].start},end:{...n[o][1].end}},p={type:"labelText",start:{...n[a+i+2][1].end},end:{...n[o-2][1].start}};return c=[["enter",f,e],["enter",d,e]],c=Gn(c,n.slice(a+1,a+i+3)),c=Gn(c,[["enter",p,e]]),c=Gn(c,Rf(e.parser.constructs.insideSpan.null,n.slice(a+i+4,o-3),e)),c=Gn(c,[["exit",p,e],n[o-2],n[o-1],["exit",d,e]]),c=Gn(c,n.slice(o+1)),c=Gn(c,[["exit",f,e]]),An(n,a,n.length,c),n}function DO(n,e,t){const i=this;let l=i.events.length,a,o;for(;l--;)if((i.events[l][1].type==="labelImage"||i.events[l][1].type==="labelLink")&&!i.events[l][1]._balanced){a=i.events[l][1];break}return c;function c(b){return a?a._inactive?g(b):(o=i.parser.defined.includes(si(i.sliceSerialize({start:a.end,end:i.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(b),n.exit("labelMarker"),n.exit("labelEnd"),f):t(b)}function f(b){return b===40?n.attempt(EO,p,o?p:g)(b):b===91?n.attempt(NO,p,o?d:g)(b):o?p(b):g(b)}function d(b){return n.attempt(AO,p,g)(b)}function p(b){return e(b)}function g(b){return a._balanced=!0,t(b)}}function zO(n,e,t){return i;function i(g){return n.enter("resource"),n.enter("resourceMarker"),n.consume(g),n.exit("resourceMarker"),l}function l(g){return nt(g)?mo(n,a)(g):a(g)}function a(g){return g===41?p(g):VC(n,o,c,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(g)}function o(g){return nt(g)?mo(n,f)(g):p(g)}function c(g){return t(g)}function f(g){return g===34||g===39||g===40?FC(n,d,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(g):p(g)}function d(g){return nt(g)?mo(n,p)(g):p(g)}function p(g){return g===41?(n.enter("resourceMarker"),n.consume(g),n.exit("resourceMarker"),n.exit("resource"),e):t(g)}}function _O(n,e,t){const i=this;return l;function l(c){return jC.call(i,n,a,o,"reference","referenceMarker","referenceString")(c)}function a(c){return i.parser.defined.includes(si(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?e(c):t(c)}function o(c){return t(c)}}function BO(n,e,t){return i;function i(a){return n.enter("reference"),n.enter("referenceMarker"),n.consume(a),n.exit("referenceMarker"),l}function l(a){return a===93?(n.enter("referenceMarker"),n.consume(a),n.exit("referenceMarker"),n.exit("reference"),e):t(a)}}const LO={name:"labelStartImage",resolveAll:og.resolveAll,tokenize:IO};function IO(n,e,t){const i=this;return l;function l(c){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(c),n.exit("labelImageMarker"),a}function a(c){return c===91?(n.enter("labelMarker"),n.consume(c),n.exit("labelMarker"),n.exit("labelImage"),o):t(c)}function o(c){return c===94&&"_hiddenFootnoteSupport"in i.parser.constructs?t(c):e(c)}}const qO={name:"labelStartLink",resolveAll:og.resolveAll,tokenize:HO};function HO(n,e,t){const i=this;return l;function l(o){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(o),n.exit("labelMarker"),n.exit("labelLink"),a}function a(o){return o===94&&"_hiddenFootnoteSupport"in i.parser.constructs?t(o):e(o)}}const bp={name:"lineEnding",tokenize:UO};function UO(n,e){return t;function t(i){return n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),Ue(n,e,"linePrefix")}}const zc={name:"thematicBreak",tokenize:VO};function VO(n,e,t){let i=0,l;return a;function a(d){return n.enter("thematicBreak"),o(d)}function o(d){return l=d,c(d)}function c(d){return d===l?(n.enter("thematicBreakSequence"),f(d)):i>=3&&(d===null||de(d))?(n.exit("thematicBreak"),e(d)):t(d)}function f(d){return d===l?(n.consume(d),i++,f):(n.exit("thematicBreakSequence"),De(d)?Ue(n,c,"whitespace")(d):c(d))}}const fn={continuation:{tokenize:YO},exit:QO,name:"list",tokenize:KO},jO={partial:!0,tokenize:XO},FO={partial:!0,tokenize:GO};function KO(n,e,t){const i=this,l=i.events[i.events.length-1];let a=l&&l[1].type==="linePrefix"?l[2].sliceSerialize(l[1],!0).length:0,o=0;return c;function c(S){const x=i.containerState.type||(S===42||S===43||S===45?"listUnordered":"listOrdered");if(x==="listUnordered"?!i.containerState.marker||S===i.containerState.marker:hm(S)){if(i.containerState.type||(i.containerState.type=x,n.enter(x,{_container:!0})),x==="listUnordered")return n.enter("listItemPrefix"),S===42||S===45?n.check(zc,t,d)(S):d(S);if(!i.interrupt||S===49)return n.enter("listItemPrefix"),n.enter("listItemValue"),f(S)}return t(S)}function f(S){return hm(S)&&++o<10?(n.consume(S),f):(!i.interrupt||o<2)&&(i.containerState.marker?S===i.containerState.marker:S===41||S===46)?(n.exit("listItemValue"),d(S)):t(S)}function d(S){return n.enter("listItemMarker"),n.consume(S),n.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||S,n.check(Vo,i.interrupt?t:p,n.attempt(jO,b,g))}function p(S){return i.containerState.initialBlankLine=!0,a++,b(S)}function g(S){return De(S)?(n.enter("listItemPrefixWhitespace"),n.consume(S),n.exit("listItemPrefixWhitespace"),b):t(S)}function b(S){return i.containerState.size=a+i.sliceSerialize(n.exit("listItemPrefix"),!0).length,e(S)}}function YO(n,e,t){const i=this;return i.containerState._closeFlow=void 0,n.check(Vo,l,a);function l(c){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,Ue(n,e,"listItemIndent",i.containerState.size+1)(c)}function a(c){return i.containerState.furtherBlankLines||!De(c)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,o(c)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,n.attempt(FO,e,o)(c))}function o(c){return i.containerState._closeFlow=!0,i.interrupt=void 0,Ue(n,n.attempt(fn,e,t),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c)}}function GO(n,e,t){const i=this;return Ue(n,l,"listItemIndent",i.containerState.size+1);function l(a){const o=i.events[i.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===i.containerState.size?e(a):t(a)}}function QO(n){n.exit(this.containerState.type)}function XO(n,e,t){const i=this;return Ue(n,l,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function l(a){const o=i.events[i.events.length-1];return!De(a)&&o&&o[1].type==="listItemPrefixWhitespace"?e(a):t(a)}}const kk={name:"setextUnderline",resolveTo:JO,tokenize:ZO};function JO(n,e){let t=n.length,i,l,a;for(;t--;)if(n[t][0]==="enter"){if(n[t][1].type==="content"){i=t;break}n[t][1].type==="paragraph"&&(l=t)}else n[t][1].type==="content"&&n.splice(t,1),!a&&n[t][1].type==="definition"&&(a=t);const o={type:"setextHeading",start:{...n[i][1].start},end:{...n[n.length-1][1].end}};return n[l][1].type="setextHeadingText",a?(n.splice(l,0,["enter",o,e]),n.splice(a+1,0,["exit",n[i][1],e]),n[i][1].end={...n[a][1].end}):n[i][1]=o,n.push(["exit",o,e]),n}function ZO(n,e,t){const i=this;let l;return a;function a(d){let p=i.events.length,g;for(;p--;)if(i.events[p][1].type!=="lineEnding"&&i.events[p][1].type!=="linePrefix"&&i.events[p][1].type!=="content"){g=i.events[p][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||g)?(n.enter("setextHeadingLine"),l=d,o(d)):t(d)}function o(d){return n.enter("setextHeadingLineSequence"),c(d)}function c(d){return d===l?(n.consume(d),c):(n.exit("setextHeadingLineSequence"),De(d)?Ue(n,f,"lineSuffix")(d):f(d))}function f(d){return d===null||de(d)?(n.exit("setextHeadingLine"),e(d)):t(d)}}const $O={tokenize:PO};function PO(n){const e=this,t=n.attempt(Vo,i,n.attempt(this.parser.constructs.flowInitial,l,Ue(n,n.attempt(this.parser.constructs.flow,l,n.attempt(iO,l)),"linePrefix")));return t;function i(a){if(a===null){n.consume(a);return}return n.enter("lineEndingBlank"),n.consume(a),n.exit("lineEndingBlank"),e.currentConstruct=void 0,t}function l(a){if(a===null){n.consume(a);return}return n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),e.currentConstruct=void 0,t}}const WO={resolveAll:YC()},eR=KC("string"),tR=KC("text");function KC(n){return{resolveAll:YC(n==="text"?nR:void 0),tokenize:e};function e(t){const i=this,l=this.parser.constructs[n],a=t.attempt(l,o,c);return o;function o(p){return d(p)?a(p):c(p)}function c(p){if(p===null){t.consume(p);return}return t.enter("data"),t.consume(p),f}function f(p){return d(p)?(t.exit("data"),a(p)):(t.consume(p),f)}function d(p){if(p===null)return!0;const g=l[p];let b=-1;if(g)for(;++b<g.length;){const S=g[b];if(!S.previous||S.previous.call(i,i.previous))return!0}return!1}}}function YC(n){return e;function e(t,i){let l=-1,a;for(;++l<=t.length;)a===void 0?t[l]&&t[l][1].type==="data"&&(a=l,l++):(!t[l]||t[l][1].type!=="data")&&(l!==a+2&&(t[a][1].end=t[l-1][1].end,t.splice(a+2,l-a-2),l=a+2),a=void 0);return n?n(t,i):t}}function nR(n,e){let t=0;for(;++t<=n.length;)if((t===n.length||n[t][1].type==="lineEnding")&&n[t-1][1].type==="data"){const i=n[t-1][1],l=e.sliceStream(i);let a=l.length,o=-1,c=0,f;for(;a--;){const d=l[a];if(typeof d=="string"){for(o=d.length;d.charCodeAt(o-1)===32;)c++,o--;if(o)break;o=-1}else if(d===-2)f=!0,c++;else if(d!==-1){a++;break}}if(e._contentTypeTextTrailing&&t===n.length&&(c=0),c){const d={type:t===n.length||f||c<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?o:i.start._bufferIndex+o,_index:i.start._index+a,line:i.end.line,column:i.end.column-c,offset:i.end.offset-c},end:{...i.end}};i.end={...d.start},i.start.offset===i.end.offset?Object.assign(i,d):(n.splice(t,0,["enter",d,e],["exit",d,e]),t+=2)}t++}return n}const iR={42:fn,43:fn,45:fn,48:fn,49:fn,50:fn,51:fn,52:fn,53:fn,54:fn,55:fn,56:fn,57:fn,62:IC},rR={91:oO},lR={[-2]:yp,[-1]:yp,32:yp},sR={35:pO,42:zc,45:[kk,zc],60:bO,61:kk,95:zc,96:bk,126:bk},aR={38:HC,92:qC},oR={[-5]:bp,[-4]:bp,[-3]:bp,33:LO,38:HC,42:dm,60:[qA,TO],91:qO,92:[hO,qC],93:og,95:dm,96:$A},uR={null:[dm,WO]},cR={null:[42,95]},fR={null:[]},hR=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:cR,contentInitial:rR,disable:fR,document:iR,flow:sR,flowInitial:lR,insideSpan:uR,string:aR,text:oR},Symbol.toStringTag,{value:"Module"}));function dR(n,e,t){let i={_bufferIndex:-1,_index:0,line:t&&t.line||1,column:t&&t.column||1,offset:t&&t.offset||0};const l={},a=[];let o=[],c=[];const f={attempt:Y(ee),check:Y(z),consume:Q,enter:L,exit:P,interrupt:Y(z,{interrupt:!0})},d={code:null,containerState:{},defineSkip:v,events:[],now:x,parser:n,previous:null,sliceSerialize:b,sliceStream:S,write:g};let p=e.tokenize.call(d,f);return e.resolveAll&&a.push(e),d;function g(re){return o=Gn(o,re),M(),o[o.length-1]!==null?[]:(ne(e,0),d.events=Rf(a,d.events,d),d.events)}function b(re,ie){return mR(S(re),ie)}function S(re){return pR(o,re)}function x(){const{_bufferIndex:re,_index:ie,line:Ie,column:Ve,offset:ke}=i;return{_bufferIndex:re,_index:ie,line:Ie,column:Ve,offset:ke}}function v(re){l[re.line]=re.column,H()}function M(){let re;for(;i._index<o.length;){const ie=o[i._index];if(typeof ie=="string")for(re=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===re&&i._bufferIndex<ie.length;)T(ie.charCodeAt(i._bufferIndex));else T(ie)}}function T(re){p=p(re)}function Q(re){de(re)?(i.line++,i.column=1,i.offset+=re===-3?2:1,H()):re!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===o[i._index].length&&(i._bufferIndex=-1,i._index++)),d.previous=re}function L(re,ie){const Ie=ie||{};return Ie.type=re,Ie.start=x(),d.events.push(["enter",Ie,d]),c.push(Ie),Ie}function P(re){const ie=c.pop();return ie.end=x(),d.events.push(["exit",ie,d]),ie}function ee(re,ie){ne(re,ie.from)}function z(re,ie){ie.restore()}function Y(re,ie){return Ie;function Ie(Ve,ke,q){let J,oe,Ee,E;return Array.isArray(Ve)?V(Ve):"tokenize"in Ve?V([Ve]):A(Ve);function A(fe){return ze;function ze(at){const Ze=at!==null&&fe[at],zn=at!==null&&fe.null,vi=[...Array.isArray(Ze)?Ze:Ze?[Ze]:[],...Array.isArray(zn)?zn:zn?[zn]:[]];return V(vi)(at)}}function V(fe){return J=fe,oe=0,fe.length===0?q:w(fe[oe])}function w(fe){return ze;function ze(at){return E=ue(),Ee=fe,fe.partial||(d.currentConstruct=fe),fe.name&&d.parser.constructs.disable.null.includes(fe.name)?me():fe.tokenize.call(ie?Object.assign(Object.create(d),ie):d,f,te,me)(at)}}function te(fe){return re(Ee,E),ke}function me(fe){return E.restore(),++oe<J.length?w(J[oe]):q}}}function ne(re,ie){re.resolveAll&&!a.includes(re)&&a.push(re),re.resolve&&An(d.events,ie,d.events.length-ie,re.resolve(d.events.slice(ie),d)),re.resolveTo&&(d.events=re.resolveTo(d.events,d))}function ue(){const re=x(),ie=d.previous,Ie=d.currentConstruct,Ve=d.events.length,ke=Array.from(c);return{from:Ve,restore:q};function q(){i=re,d.previous=ie,d.currentConstruct=Ie,d.events.length=Ve,c=ke,H()}}function H(){i.line in l&&i.column<2&&(i.column=l[i.line],i.offset+=l[i.line]-1)}}function pR(n,e){const t=e.start._index,i=e.start._bufferIndex,l=e.end._index,a=e.end._bufferIndex;let o;if(t===l)o=[n[t].slice(i,a)];else{if(o=n.slice(t,l),i>-1){const c=o[0];typeof c=="string"?o[0]=c.slice(i):o.shift()}a>0&&o.push(n[l].slice(0,a))}return o}function mR(n,e){let t=-1;const i=[];let l;for(;++t<n.length;){const a=n[t];let o;if(typeof a=="string")o=a;else switch(a){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&l)continue;o=" ";break}default:o=String.fromCharCode(a)}l=a===-2,i.push(o)}return i.join("")}function gR(n){const i={constructs:BC([hR,...(n||{}).extensions||[]]),content:l(RA),defined:[],document:l(zA),flow:l($O),lazy:{},string:l(eR),text:l(tR)};return i;function l(a){return o;function o(c){return dR(i,a,c)}}}function yR(n){for(;!UC(n););return n}const xk=/[\0\t\n\r]/g;function bR(){let n=1,e="",t=!0,i;return l;function l(a,o,c){const f=[];let d,p,g,b,S;for(a=e+(typeof a=="string"?a.toString():new TextDecoder(o||void 0).decode(a)),g=0,e="",t&&(a.charCodeAt(0)===65279&&g++,t=void 0);g<a.length;){if(xk.lastIndex=g,d=xk.exec(a),b=d&&d.index!==void 0?d.index:a.length,S=a.charCodeAt(b),!d){e=a.slice(g);break}if(S===10&&g===b&&i)f.push(-3),i=void 0;else switch(i&&(f.push(-5),i=void 0),g<b&&(f.push(a.slice(g,b)),n+=b-g),S){case 0:{f.push(65533),n++;break}case 9:{for(p=Math.ceil(n/4)*4,f.push(-2);n++<p;)f.push(-1);break}case 10:{f.push(-4),n=1;break}default:i=!0,n=1}g=b+1}return c&&(i&&f.push(-5),e&&f.push(e),f.push(null)),f}}const SR=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function GC(n){return n.replace(SR,kR)}function kR(n,e,t){if(e)return e;if(t.charCodeAt(0)===35){const l=t.charCodeAt(1),a=l===120||l===88;return LC(t.slice(a?2:1),a?16:10)}return ag(t)||n}function go(n){return!n||typeof n!="object"?"":"position"in n||"type"in n?Ck(n.position):"start"in n||"end"in n?Ck(n):"line"in n||"column"in n?pm(n):""}function pm(n){return vk(n&&n.line)+":"+vk(n&&n.column)}function Ck(n){return pm(n&&n.start)+"-"+pm(n&&n.end)}function vk(n){return n&&typeof n=="number"?n:1}const QC={}.hasOwnProperty;function xR(n,e,t){return typeof e!="string"&&(t=e,e=void 0),CR(t)(yR(gR(t).document().write(bR()(n,e,!0))))}function CR(n){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(Yl),autolinkProtocol:ue,autolinkEmail:ue,atxHeading:a(Fl),blockQuote:a(zn),characterEscape:ue,characterReference:ue,codeFenced:a(vi),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:a(vi,o),codeText:a(ia,o),codeTextData:ue,data:ue,codeFlowValue:ue,definition:a(lu),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:a(wi),hardBreakEscape:a(Kl),hardBreakTrailing:a(Kl),htmlFlow:a(su,o),htmlFlowData:ue,htmlText:a(su,o),htmlTextData:ue,image:a(au),label:o,link:a(Yl),listItem:a(ra),listItemValue:b,listOrdered:a(Gl,g),listUnordered:a(Gl),paragraph:a(Qf),reference:w,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:a(Fl),strong:a(Xf),thematicBreak:a(Jf)},exit:{atxHeading:f(),atxHeadingSequence:ee,autolink:f(),autolinkEmail:Ze,autolinkProtocol:at,blockQuote:f(),characterEscapeValue:H,characterReferenceMarkerHexadecimal:me,characterReferenceMarkerNumeric:me,characterReferenceValue:fe,characterReference:ze,codeFenced:f(M),codeFencedFence:v,codeFencedFenceInfo:S,codeFencedFenceMeta:x,codeFlowValue:H,codeIndented:f(T),codeText:f(ke),codeTextData:H,data:H,definition:f(),definitionDestinationString:P,definitionLabelString:Q,definitionTitleString:L,emphasis:f(),hardBreakEscape:f(ie),hardBreakTrailing:f(ie),htmlFlow:f(Ie),htmlFlowData:H,htmlText:f(Ve),htmlTextData:H,image:f(J),label:Ee,labelText:oe,lineEnding:re,link:f(q),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:te,resourceDestinationString:E,resourceTitleString:A,resource:V,setextHeading:f(ne),setextHeadingLineSequence:Y,setextHeadingText:z,strong:f(),thematicBreak:f()}};XC(e,(n||{}).mdastExtensions||[]);const t={};return i;function i(j){let $={type:"root",children:[]};const ye={stack:[$],tokenStack:[],config:e,enter:c,exit:d,buffer:o,resume:p,data:t},Ae=[];let Ge=-1;for(;++Ge<j.length;)if(j[Ge][1].type==="listOrdered"||j[Ge][1].type==="listUnordered")if(j[Ge][0]==="enter")Ae.push(Ge);else{const Sn=Ae.pop();Ge=l(j,Sn,Ge)}for(Ge=-1;++Ge<j.length;){const Sn=e[j[Ge][0]];QC.call(Sn,j[Ge][1].type)&&Sn[j[Ge][1].type].call(Object.assign({sliceSerialize:j[Ge][2].sliceSerialize},ye),j[Ge][1])}if(ye.tokenStack.length>0){const Sn=ye.tokenStack[ye.tokenStack.length-1];(Sn[1]||wk).call(ye,void 0,Sn[0])}for($.position={start:Or(j.length>0?j[0][1].start:{line:1,column:1,offset:0}),end:Or(j.length>0?j[j.length-2][1].end:{line:1,column:1,offset:0})},Ge=-1;++Ge<e.transforms.length;)$=e.transforms[Ge]($)||$;return $}function l(j,$,ye){let Ae=$-1,Ge=-1,Sn=!1,Ti,Jt,Ct,nn;for(;++Ae<=ye;){const et=j[Ae];switch(et[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{et[0]==="enter"?Ge++:Ge--,nn=void 0;break}case"lineEndingBlank":{et[0]==="enter"&&(Ti&&!nn&&!Ge&&!Ct&&(Ct=Ae),nn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:nn=void 0}if(!Ge&&et[0]==="enter"&&et[1].type==="listItemPrefix"||Ge===-1&&et[0]==="exit"&&(et[1].type==="listUnordered"||et[1].type==="listOrdered")){if(Ti){let lr=Ae;for(Jt=void 0;lr--;){const ei=j[lr];if(ei[1].type==="lineEnding"||ei[1].type==="lineEndingBlank"){if(ei[0]==="exit")continue;Jt&&(j[Jt][1].type="lineEndingBlank",Sn=!0),ei[1].type="lineEnding",Jt=lr}else if(!(ei[1].type==="linePrefix"||ei[1].type==="blockQuotePrefix"||ei[1].type==="blockQuotePrefixWhitespace"||ei[1].type==="blockQuoteMarker"||ei[1].type==="listItemIndent"))break}Ct&&(!Jt||Ct<Jt)&&(Ti._spread=!0),Ti.end=Object.assign({},Jt?j[Jt][1].start:et[1].end),j.splice(Jt||Ae,0,["exit",Ti,et[2]]),Ae++,ye++}if(et[1].type==="listItemPrefix"){const lr={type:"listItem",_spread:!1,start:Object.assign({},et[1].start),end:void 0};Ti=lr,j.splice(Ae,0,["enter",lr,et[2]]),Ae++,ye++,Ct=void 0,nn=!0}}}return j[$][1]._spread=Sn,ye}function a(j,$){return ye;function ye(Ae){c.call(this,j(Ae),Ae),$&&$.call(this,Ae)}}function o(){this.stack.push({type:"fragment",children:[]})}function c(j,$,ye){this.stack[this.stack.length-1].children.push(j),this.stack.push(j),this.tokenStack.push([$,ye||void 0]),j.position={start:Or($.start),end:void 0}}function f(j){return $;function $(ye){j&&j.call(this,ye),d.call(this,ye)}}function d(j,$){const ye=this.stack.pop(),Ae=this.tokenStack.pop();if(Ae)Ae[0].type!==j.type&&($?$.call(this,j,Ae[0]):(Ae[1]||wk).call(this,j,Ae[0]));else throw new Error("Cannot close `"+j.type+"` ("+go({start:j.start,end:j.end})+"): its not open");ye.position.end=Or(j.end)}function p(){return sg(this.stack.pop())}function g(){this.data.expectingFirstListItemValue=!0}function b(j){if(this.data.expectingFirstListItemValue){const $=this.stack[this.stack.length-2];$.start=Number.parseInt(this.sliceSerialize(j),10),this.data.expectingFirstListItemValue=void 0}}function S(){const j=this.resume(),$=this.stack[this.stack.length-1];$.lang=j}function x(){const j=this.resume(),$=this.stack[this.stack.length-1];$.meta=j}function v(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function M(){const j=this.resume(),$=this.stack[this.stack.length-1];$.value=j.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function T(){const j=this.resume(),$=this.stack[this.stack.length-1];$.value=j.replace(/(\r?\n|\r)$/g,"")}function Q(j){const $=this.resume(),ye=this.stack[this.stack.length-1];ye.label=$,ye.identifier=si(this.sliceSerialize(j)).toLowerCase()}function L(){const j=this.resume(),$=this.stack[this.stack.length-1];$.title=j}function P(){const j=this.resume(),$=this.stack[this.stack.length-1];$.url=j}function ee(j){const $=this.stack[this.stack.length-1];if(!$.depth){const ye=this.sliceSerialize(j).length;$.depth=ye}}function z(){this.data.setextHeadingSlurpLineEnding=!0}function Y(j){const $=this.stack[this.stack.length-1];$.depth=this.sliceSerialize(j).codePointAt(0)===61?1:2}function ne(){this.data.setextHeadingSlurpLineEnding=void 0}function ue(j){const ye=this.stack[this.stack.length-1].children;let Ae=ye[ye.length-1];(!Ae||Ae.type!=="text")&&(Ae=Xt(),Ae.position={start:Or(j.start),end:void 0},ye.push(Ae)),this.stack.push(Ae)}function H(j){const $=this.stack.pop();$.value+=this.sliceSerialize(j),$.position.end=Or(j.end)}function re(j){const $=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ye=$.children[$.children.length-1];ye.position.end=Or(j.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes($.type)&&(ue.call(this,j),H.call(this,j))}function ie(){this.data.atHardBreak=!0}function Ie(){const j=this.resume(),$=this.stack[this.stack.length-1];$.value=j}function Ve(){const j=this.resume(),$=this.stack[this.stack.length-1];$.value=j}function ke(){const j=this.resume(),$=this.stack[this.stack.length-1];$.value=j}function q(){const j=this.stack[this.stack.length-1];if(this.data.inReference){const $=this.data.referenceType||"shortcut";j.type+="Reference",j.referenceType=$,delete j.url,delete j.title}else delete j.identifier,delete j.label;this.data.referenceType=void 0}function J(){const j=this.stack[this.stack.length-1];if(this.data.inReference){const $=this.data.referenceType||"shortcut";j.type+="Reference",j.referenceType=$,delete j.url,delete j.title}else delete j.identifier,delete j.label;this.data.referenceType=void 0}function oe(j){const $=this.sliceSerialize(j),ye=this.stack[this.stack.length-2];ye.label=GC($),ye.identifier=si($).toLowerCase()}function Ee(){const j=this.stack[this.stack.length-1],$=this.resume(),ye=this.stack[this.stack.length-1];if(this.data.inReference=!0,ye.type==="link"){const Ae=j.children;ye.children=Ae}else ye.alt=$}function E(){const j=this.resume(),$=this.stack[this.stack.length-1];$.url=j}function A(){const j=this.resume(),$=this.stack[this.stack.length-1];$.title=j}function V(){this.data.inReference=void 0}function w(){this.data.referenceType="collapsed"}function te(j){const $=this.resume(),ye=this.stack[this.stack.length-1];ye.label=$,ye.identifier=si(this.sliceSerialize(j)).toLowerCase(),this.data.referenceType="full"}function me(j){this.data.characterReferenceType=j.type}function fe(j){const $=this.sliceSerialize(j),ye=this.data.characterReferenceType;let Ae;ye?(Ae=LC($,ye==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Ae=ag($);const Ge=this.stack[this.stack.length-1];Ge.value+=Ae}function ze(j){const $=this.stack.pop();$.position.end=Or(j.end)}function at(j){H.call(this,j);const $=this.stack[this.stack.length-1];$.url=this.sliceSerialize(j)}function Ze(j){H.call(this,j);const $=this.stack[this.stack.length-1];$.url="mailto:"+this.sliceSerialize(j)}function zn(){return{type:"blockquote",children:[]}}function vi(){return{type:"code",lang:null,meta:null,value:""}}function ia(){return{type:"inlineCode",value:""}}function lu(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function wi(){return{type:"emphasis",children:[]}}function Fl(){return{type:"heading",depth:0,children:[]}}function Kl(){return{type:"break"}}function su(){return{type:"html",value:""}}function au(){return{type:"image",title:null,url:"",alt:null}}function Yl(){return{type:"link",title:null,url:"",children:[]}}function Gl(j){return{type:"list",ordered:j.type==="listOrdered",start:null,spread:j._spread,children:[]}}function ra(j){return{type:"listItem",spread:j._spread,checked:null,children:[]}}function Qf(){return{type:"paragraph",children:[]}}function Xf(){return{type:"strong",children:[]}}function Xt(){return{type:"text",value:""}}function Jf(){return{type:"thematicBreak"}}}function Or(n){return{line:n.line,column:n.column,offset:n.offset}}function XC(n,e){let t=-1;for(;++t<e.length;){const i=e[t];Array.isArray(i)?XC(n,i):vR(n,i)}}function vR(n,e){let t;for(t in e)if(QC.call(e,t))switch(t){case"canContainEols":{const i=e[t];i&&n[t].push(...i);break}case"transforms":{const i=e[t];i&&n[t].push(...i);break}case"enter":case"exit":{const i=e[t];i&&Object.assign(n[t],i);break}}}function wk(n,e){throw n?new Error("Cannot close `"+n.type+"` ("+go({start:n.start,end:n.end})+"): a different token (`"+e.type+"`, "+go({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+go({start:e.start,end:e.end})+") is still open")}function mm(n){const e=this;e.parser=t;function t(i){return xR(i,{...e.data("settings"),...n,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}const Tk={}.hasOwnProperty;function wR(n,e){const t=e||{};function i(l,...a){let o=i.invalid;const c=i.handlers;if(l&&Tk.call(l,n)){const f=String(l[n]);o=Tk.call(c,f)?c[f]:i.unknown}if(o)return o.call(this,l,...a)}return i.handlers=t.handlers||{},i.invalid=t.invalid,i.unknown=t.unknown,i}const TR={}.hasOwnProperty;function JC(n,e){let t=-1,i;if(e.extensions)for(;++t<e.extensions.length;)JC(n,e.extensions[t]);for(i in e)if(TR.call(e,i))switch(i){case"extensions":break;case"unsafe":{Mk(n[i],e[i]);break}case"join":{Mk(n[i],e[i]);break}case"handlers":{MR(n[i],e[i]);break}default:n.options[i]=e[i]}return n}function Mk(n,e){e&&n.push(...e)}function MR(n,e){e&&Object.assign(n,e)}function ER(n,e,t,i){const l=t.enter("blockquote"),a=t.createTracker(i);a.move("> "),a.shift(2);const o=t.indentLines(t.containerFlow(n,a.current()),NR);return l(),o}function NR(n,e,t){return">"+(t?"":" ")+n}function ZC(n,e){return Ek(n,e.inConstruct,!0)&&!Ek(n,e.notInConstruct,!1)}function Ek(n,e,t){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return t;let i=-1;for(;++i<e.length;)if(n.includes(e[i]))return!0;return!1}function Nk(n,e,t,i){let l=-1;for(;++l<t.unsafe.length;)if(t.unsafe[l].character===`
`&&ZC(t.stack,t.unsafe[l]))return/[ \t]/.test(i.before)?"":" ";return`\\
`}function AR(n,e){const t=String(n);let i=t.indexOf(e),l=i,a=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;i!==-1;)i===l?++a>o&&(o=a):a=1,l=i+e.length,i=t.indexOf(e,l);return o}function gm(n,e){return!!(e.options.fences===!1&&n.value&&!n.lang&&/[^ \r\n]/.test(n.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(n.value))}function OR(n){const e=n.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function RR(n,e,t,i){const l=OR(t),a=n.value||"",o=l==="`"?"GraveAccent":"Tilde";if(gm(n,t)){const g=t.enter("codeIndented"),b=t.indentLines(a,DR);return g(),b}const c=t.createTracker(i),f=l.repeat(Math.max(AR(a,l)+1,3)),d=t.enter("codeFenced");let p=c.move(f);if(n.lang){const g=t.enter(`codeFencedLang${o}`);p+=c.move(t.safe(n.lang,{before:p,after:" ",encode:["`"],...c.current()})),g()}if(n.lang&&n.meta){const g=t.enter(`codeFencedMeta${o}`);p+=c.move(" "),p+=c.move(t.safe(n.meta,{before:p,after:`
`,encode:["`"],...c.current()})),g()}return p+=c.move(`
`),a&&(p+=c.move(a+`
`)),p+=c.move(f),d(),p}function DR(n,e,t){return(t?"":"    ")+n}function ug(n){const e=n.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function zR(n,e,t,i){const l=ug(t),a=l==='"'?"Quote":"Apostrophe",o=t.enter("definition");let c=t.enter("label");const f=t.createTracker(i);let d=f.move("[");return d+=f.move(t.safe(t.associationId(n),{before:d,after:"]",...f.current()})),d+=f.move("]: "),c(),!n.url||/[\0- \u007F]/.test(n.url)?(c=t.enter("destinationLiteral"),d+=f.move("<"),d+=f.move(t.safe(n.url,{before:d,after:">",...f.current()})),d+=f.move(">")):(c=t.enter("destinationRaw"),d+=f.move(t.safe(n.url,{before:d,after:n.title?" ":`
`,...f.current()}))),c(),n.title&&(c=t.enter(`title${a}`),d+=f.move(" "+l),d+=f.move(t.safe(n.title,{before:d,after:l,...f.current()})),d+=f.move(l),c()),o(),d}function _R(n){const e=n.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function Kr(n){return"&#x"+n.toString(16).toUpperCase()+";"}function lf(n,e,t){const i=Ks(n),l=Ks(e);return i===void 0?l===void 0?t==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:l===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:i===1?l===void 0?{inside:!1,outside:!1}:l===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:l===void 0?{inside:!1,outside:!1}:l===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}$C.peek=BR;function $C(n,e,t,i){const l=_R(t),a=t.enter("emphasis"),o=t.createTracker(i),c=o.move(l);let f=o.move(t.containerPhrasing(n,{after:l,before:c,...o.current()}));const d=f.charCodeAt(0),p=lf(i.before.charCodeAt(i.before.length-1),d,l);p.inside&&(f=Kr(d)+f.slice(1));const g=f.charCodeAt(f.length-1),b=lf(i.after.charCodeAt(0),g,l);b.inside&&(f=f.slice(0,-1)+Kr(g));const S=o.move(l);return a(),t.attentionEncodeSurroundingInfo={after:b.outside,before:p.outside},c+f+S}function BR(n,e,t){return t.options.emphasis||"*"}const Df=(function(n){if(n==null)return HR;if(typeof n=="function")return zf(n);if(typeof n=="object")return Array.isArray(n)?LR(n):IR(n);if(typeof n=="string")return qR(n);throw new Error("Expected function, string, or object as test")});function LR(n){const e=[];let t=-1;for(;++t<n.length;)e[t]=Df(n[t]);return zf(i);function i(...l){let a=-1;for(;++a<e.length;)if(e[a].apply(this,l))return!0;return!1}}function IR(n){const e=n;return zf(t);function t(i){const l=i;let a;for(a in n)if(l[a]!==e[a])return!1;return!0}}function qR(n){return zf(e);function e(t){return t&&t.type===n}}function zf(n){return e;function e(t,i,l){return!!(UR(t)&&n.call(this,t,typeof i=="number"?i:void 0,l||void 0))}}function HR(){return!0}function UR(n){return n!==null&&typeof n=="object"&&"type"in n}const PC=[],VR=!0,ym=!1,bm="skip";function cg(n,e,t,i){let l;typeof e=="function"&&typeof t!="function"?(i=t,t=e):l=e;const a=Df(l),o=i?-1:1;c(n,void 0,[])();function c(f,d,p){const g=f&&typeof f=="object"?f:{};if(typeof g.type=="string"){const S=typeof g.tagName=="string"?g.tagName:typeof g.name=="string"?g.name:void 0;Object.defineProperty(b,"name",{value:"node ("+(f.type+(S?"<"+S+">":""))+")"})}return b;function b(){let S=PC,x,v,M;if((!e||a(f,d,p[p.length-1]||void 0))&&(S=jR(t(f,p)),S[0]===ym))return S;if("children"in f&&f.children){const T=f;if(T.children&&S[0]!==bm)for(v=(i?T.children.length:-1)+o,M=p.concat(T);v>-1&&v<T.children.length;){const Q=T.children[v];if(x=c(Q,v,M)(),x[0]===ym)return x;v=typeof x[1]=="number"?x[1]:v+o}}return S}}}function jR(n){return Array.isArray(n)?n:typeof n=="number"?[VR,n]:n==null?PC:[n]}function Js(n,e,t,i){let l,a,o;typeof e=="function"&&typeof t!="function"?(a=void 0,o=e,l=t):(a=e,o=t,l=i),cg(n,a,c,l);function c(f,d){const p=d[d.length-1],g=p?p.children.indexOf(f):void 0;return o(f,g,p)}}function WC(n,e){let t=!1;return Js(n,function(i){if("value"in i&&/\r?\n|\r/.test(i.value)||i.type==="break")return t=!0,ym}),!!((!n.depth||n.depth<3)&&sg(n)&&(e.options.setext||t))}function FR(n,e,t,i){const l=Math.max(Math.min(6,n.depth||1),1),a=t.createTracker(i);if(WC(n,t)){const p=t.enter("headingSetext"),g=t.enter("phrasing"),b=t.containerPhrasing(n,{...a.current(),before:`
`,after:`
`});return g(),p(),b+`
`+(l===1?"=":"-").repeat(b.length-(Math.max(b.lastIndexOf("\r"),b.lastIndexOf(`
`))+1))}const o="#".repeat(l),c=t.enter("headingAtx"),f=t.enter("phrasing");a.move(o+" ");let d=t.containerPhrasing(n,{before:"# ",after:`
`,...a.current()});return/^[\t ]/.test(d)&&(d=Kr(d.charCodeAt(0))+d.slice(1)),d=d?o+" "+d:o,t.options.closeAtx&&(d+=" "+o),f(),c(),d}ev.peek=KR;function ev(n){return n.value||""}function KR(){return"<"}tv.peek=YR;function tv(n,e,t,i){const l=ug(t),a=l==='"'?"Quote":"Apostrophe",o=t.enter("image");let c=t.enter("label");const f=t.createTracker(i);let d=f.move("![");return d+=f.move(t.safe(n.alt,{before:d,after:"]",...f.current()})),d+=f.move("]("),c(),!n.url&&n.title||/[\0- \u007F]/.test(n.url)?(c=t.enter("destinationLiteral"),d+=f.move("<"),d+=f.move(t.safe(n.url,{before:d,after:">",...f.current()})),d+=f.move(">")):(c=t.enter("destinationRaw"),d+=f.move(t.safe(n.url,{before:d,after:n.title?" ":")",...f.current()}))),c(),n.title&&(c=t.enter(`title${a}`),d+=f.move(" "+l),d+=f.move(t.safe(n.title,{before:d,after:l,...f.current()})),d+=f.move(l),c()),d+=f.move(")"),o(),d}function YR(){return"!"}nv.peek=GR;function nv(n,e,t,i){const l=n.referenceType,a=t.enter("imageReference");let o=t.enter("label");const c=t.createTracker(i);let f=c.move("![");const d=t.safe(n.alt,{before:f,after:"]",...c.current()});f+=c.move(d+"]["),o();const p=t.stack;t.stack=[],o=t.enter("reference");const g=t.safe(t.associationId(n),{before:f,after:"]",...c.current()});return o(),t.stack=p,a(),l==="full"||!d||d!==g?f+=c.move(g+"]"):l==="shortcut"?f=f.slice(0,-1):f+=c.move("]"),f}function GR(){return"!"}iv.peek=QR;function iv(n,e,t){let i=n.value||"",l="`",a=-1;for(;new RegExp("(^|[^`])"+l+"([^`]|$)").test(i);)l+="`";for(/[^ \r\n]/.test(i)&&(/^[ \r\n]/.test(i)&&/[ \r\n]$/.test(i)||/^`|`$/.test(i))&&(i=" "+i+" ");++a<t.unsafe.length;){const o=t.unsafe[a],c=t.compilePattern(o);let f;if(o.atBreak)for(;f=c.exec(i);){let d=f.index;i.charCodeAt(d)===10&&i.charCodeAt(d-1)===13&&d--,i=i.slice(0,d)+" "+i.slice(f.index+1)}}return l+i+l}function QR(){return"`"}function rv(n,e){const t=sg(n);return!!(!e.options.resourceLink&&n.url&&!n.title&&n.children&&n.children.length===1&&n.children[0].type==="text"&&(t===n.url||"mailto:"+t===n.url)&&/^[a-z][a-z+.-]+:/i.test(n.url)&&!/[\0- <>\u007F]/.test(n.url))}lv.peek=XR;function lv(n,e,t,i){const l=ug(t),a=l==='"'?"Quote":"Apostrophe",o=t.createTracker(i);let c,f;if(rv(n,t)){const p=t.stack;t.stack=[],c=t.enter("autolink");let g=o.move("<");return g+=o.move(t.containerPhrasing(n,{before:g,after:">",...o.current()})),g+=o.move(">"),c(),t.stack=p,g}c=t.enter("link"),f=t.enter("label");let d=o.move("[");return d+=o.move(t.containerPhrasing(n,{before:d,after:"](",...o.current()})),d+=o.move("]("),f(),!n.url&&n.title||/[\0- \u007F]/.test(n.url)?(f=t.enter("destinationLiteral"),d+=o.move("<"),d+=o.move(t.safe(n.url,{before:d,after:">",...o.current()})),d+=o.move(">")):(f=t.enter("destinationRaw"),d+=o.move(t.safe(n.url,{before:d,after:n.title?" ":")",...o.current()}))),f(),n.title&&(f=t.enter(`title${a}`),d+=o.move(" "+l),d+=o.move(t.safe(n.title,{before:d,after:l,...o.current()})),d+=o.move(l),f()),d+=o.move(")"),c(),d}function XR(n,e,t){return rv(n,t)?"<":"["}sv.peek=JR;function sv(n,e,t,i){const l=n.referenceType,a=t.enter("linkReference");let o=t.enter("label");const c=t.createTracker(i);let f=c.move("[");const d=t.containerPhrasing(n,{before:f,after:"]",...c.current()});f+=c.move(d+"]["),o();const p=t.stack;t.stack=[],o=t.enter("reference");const g=t.safe(t.associationId(n),{before:f,after:"]",...c.current()});return o(),t.stack=p,a(),l==="full"||!d||d!==g?f+=c.move(g+"]"):l==="shortcut"?f=f.slice(0,-1):f+=c.move("]"),f}function JR(){return"["}function fg(n){const e=n.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function ZR(n){const e=fg(n),t=n.options.bulletOther;if(!t)return e==="*"?"-":"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(t===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+t+"`) to be different");return t}function $R(n){const e=n.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function av(n){const e=n.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function PR(n,e,t,i){const l=t.enter("list"),a=t.bulletCurrent;let o=n.ordered?$R(t):fg(t);const c=n.ordered?o==="."?")":".":ZR(t);let f=e&&t.bulletLastUsed?o===t.bulletLastUsed:!1;if(!n.ordered){const p=n.children?n.children[0]:void 0;if((o==="*"||o==="-")&&p&&(!p.children||!p.children[0])&&t.stack[t.stack.length-1]==="list"&&t.stack[t.stack.length-2]==="listItem"&&t.stack[t.stack.length-3]==="list"&&t.stack[t.stack.length-4]==="listItem"&&t.indexStack[t.indexStack.length-1]===0&&t.indexStack[t.indexStack.length-2]===0&&t.indexStack[t.indexStack.length-3]===0&&(f=!0),av(t)===o&&p){let g=-1;for(;++g<n.children.length;){const b=n.children[g];if(b&&b.type==="listItem"&&b.children&&b.children[0]&&b.children[0].type==="thematicBreak"){f=!0;break}}}}f&&(o=c),t.bulletCurrent=o;const d=t.containerFlow(n,i);return t.bulletLastUsed=o,t.bulletCurrent=a,l(),d}function WR(n){const e=n.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function eD(n,e,t,i){const l=WR(t);let a=t.bulletCurrent||fg(t);e&&e.type==="list"&&e.ordered&&(a=(typeof e.start=="number"&&e.start>-1?e.start:1)+(t.options.incrementListMarker===!1?0:e.children.indexOf(n))+a);let o=a.length+1;(l==="tab"||l==="mixed"&&(e&&e.type==="list"&&e.spread||n.spread))&&(o=Math.ceil(o/4)*4);const c=t.createTracker(i);c.move(a+" ".repeat(o-a.length)),c.shift(o);const f=t.enter("listItem"),d=t.indentLines(t.containerFlow(n,c.current()),p);return f(),d;function p(g,b,S){return b?(S?"":" ".repeat(o))+g:(S?a:a+" ".repeat(o-a.length))+g}}function tD(n,e,t,i){const l=t.enter("paragraph"),a=t.enter("phrasing"),o=t.containerPhrasing(n,i);return a(),l(),o}const nD=Df(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function iD(n,e,t,i){return(n.children.some(function(o){return nD(o)})?t.containerPhrasing:t.containerFlow).call(t,n,i)}function rD(n){const e=n.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}ov.peek=lD;function ov(n,e,t,i){const l=rD(t),a=t.enter("strong"),o=t.createTracker(i),c=o.move(l+l);let f=o.move(t.containerPhrasing(n,{after:l,before:c,...o.current()}));const d=f.charCodeAt(0),p=lf(i.before.charCodeAt(i.before.length-1),d,l);p.inside&&(f=Kr(d)+f.slice(1));const g=f.charCodeAt(f.length-1),b=lf(i.after.charCodeAt(0),g,l);b.inside&&(f=f.slice(0,-1)+Kr(g));const S=o.move(l+l);return a(),t.attentionEncodeSurroundingInfo={after:b.outside,before:p.outside},c+f+S}function lD(n,e,t){return t.options.strong||"*"}function sD(n,e,t,i){return t.safe(n.value,i)}function aD(n){const e=n.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function oD(n,e,t){const i=(av(t)+(t.options.ruleSpaces?" ":"")).repeat(aD(t));return t.options.ruleSpaces?i.slice(0,-1):i}const hg={blockquote:ER,break:Nk,code:RR,definition:zR,emphasis:$C,hardBreak:Nk,heading:FR,html:ev,image:tv,imageReference:nv,inlineCode:iv,link:lv,linkReference:sv,list:PR,listItem:eD,paragraph:tD,root:iD,strong:ov,text:sD,thematicBreak:oD},uD=[cD];function cD(n,e,t,i){if(e.type==="code"&&gm(e,i)&&(n.type==="list"||n.type===e.type&&gm(n,i)))return!1;if("spread"in t&&typeof t.spread=="boolean")return n.type==="paragraph"&&(n.type===e.type||e.type==="definition"||e.type==="heading"&&WC(e,i))?void 0:t.spread?1:0}const gl=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],fD=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:`
`,inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:gl},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:`(?:[\r
]|$)`},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:gl},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:`(?:[ 	\r
*])`},{character:"*",inConstruct:"phrasing",notInConstruct:gl},{atBreak:!0,character:"+",after:`(?:[ 	\r
])`},{atBreak:!0,character:"-",after:`(?:[ 	\r
-])`},{atBreak:!0,before:"\\d+",character:".",after:`(?:[ 	\r
]|$)`},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:gl},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:gl},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:gl},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:gl},{atBreak:!0,character:"~"}];function hD(n){return n.label||!n.identifier?n.label||"":GC(n.identifier)}function dD(n){if(!n._compiled){const e=(n.atBreak?"[\\r\\n][\\t ]*":"")+(n.before?"(?:"+n.before+")":"");n._compiled=new RegExp((e?"("+e+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(n.character)?"\\":"")+n.character+(n.after?"(?:"+n.after+")":""),"g")}return n._compiled}function pD(n,e,t){const i=e.indexStack,l=n.children||[],a=[];let o=-1,c=t.before,f;i.push(-1);let d=e.createTracker(t);for(;++o<l.length;){const p=l[o];let g;if(i[i.length-1]=o,o+1<l.length){let x=e.handle.handlers[l[o+1].type];x&&x.peek&&(x=x.peek),g=x?x(l[o+1],n,e,{before:"",after:"",...d.current()}).charAt(0):""}else g=t.after;a.length>0&&(c==="\r"||c===`
`)&&p.type==="html"&&(a[a.length-1]=a[a.length-1].replace(/(\r?\n|\r)$/," "),c=" ",d=e.createTracker(t),d.move(a.join("")));let b=e.handle(p,n,e,{...d.current(),after:g,before:c});f&&f===b.slice(0,1)&&(b=Kr(f.charCodeAt(0))+b.slice(1));const S=e.attentionEncodeSurroundingInfo;e.attentionEncodeSurroundingInfo=void 0,f=void 0,S&&(a.length>0&&S.before&&c===a[a.length-1].slice(-1)&&(a[a.length-1]=a[a.length-1].slice(0,-1)+Kr(c.charCodeAt(0))),S.after&&(f=g)),d.move(b),a.push(b),c=b.slice(-1)}return i.pop(),a.join("")}function mD(n,e,t){const i=e.indexStack,l=n.children||[],a=e.createTracker(t),o=[];let c=-1;for(i.push(-1);++c<l.length;){const f=l[c];i[i.length-1]=c,o.push(a.move(e.handle(f,n,e,{before:`
`,after:`
`,...a.current()}))),f.type!=="list"&&(e.bulletLastUsed=void 0),c<l.length-1&&o.push(a.move(gD(f,l[c+1],n,e)))}return i.pop(),o.join("")}function gD(n,e,t,i){let l=i.join.length;for(;l--;){const a=i.join[l](n,e,t,i);if(a===!0||a===1)break;if(typeof a=="number")return`
`.repeat(1+a);if(a===!1)return`

<!---->

`}return`

`}const yD=/\r?\n|\r/g;function bD(n,e){const t=[];let i=0,l=0,a;for(;a=yD.exec(n);)o(n.slice(i,a.index)),t.push(a[0]),i=a.index+a[0].length,l++;return o(n.slice(i)),t.join("");function o(c){t.push(e(c,l,!c))}}function SD(n,e,t){const i=(t.before||"")+(e||"")+(t.after||""),l=[],a=[],o={};let c=-1;for(;++c<n.unsafe.length;){const p=n.unsafe[c];if(!ZC(n.stack,p))continue;const g=n.compilePattern(p);let b;for(;b=g.exec(i);){const S="before"in p||!!p.atBreak,x="after"in p,v=b.index+(S?b[1].length:0);l.includes(v)?(o[v].before&&!S&&(o[v].before=!1),o[v].after&&!x&&(o[v].after=!1)):(l.push(v),o[v]={before:S,after:x})}}l.sort(kD);let f=t.before?t.before.length:0;const d=i.length-(t.after?t.after.length:0);for(c=-1;++c<l.length;){const p=l[c];p<f||p>=d||p+1<d&&l[c+1]===p+1&&o[p].after&&!o[p+1].before&&!o[p+1].after||l[c-1]===p-1&&o[p].before&&!o[p-1].before&&!o[p-1].after||(f!==p&&a.push(Ak(i.slice(f,p),"\\")),f=p,/[!-/:-@[-`{-~]/.test(i.charAt(p))&&(!t.encode||!t.encode.includes(i.charAt(p)))?a.push("\\"):(a.push(Kr(i.charCodeAt(p))),f++))}return a.push(Ak(i.slice(f,d),t.after)),a.join("")}function kD(n,e){return n-e}function Ak(n,e){const t=/\\(?=[!-/:-@[-`{-~])/g,i=[],l=[],a=n+e;let o=-1,c=0,f;for(;f=t.exec(a);)i.push(f.index);for(;++o<i.length;)c!==i[o]&&l.push(n.slice(c,i[o])),l.push("\\"),c=i[o];return l.push(n.slice(c)),l.join("")}function xD(n){const e=n||{},t=e.now||{};let i=e.lineShift||0,l=t.line||1,a=t.column||1;return{move:f,current:o,shift:c};function o(){return{now:{line:l,column:a},lineShift:i}}function c(d){i+=d}function f(d){const p=d||"",g=p.split(/\r?\n|\r/g),b=g[g.length-1];return l+=g.length-1,a=g.length===1?a+b.length:1+b.length+i,p}}function CD(n,e){const t=e||{},i={associationId:hD,containerPhrasing:MD,containerFlow:ED,createTracker:xD,compilePattern:dD,enter:a,handlers:{...hg},handle:void 0,indentLines:bD,indexStack:[],join:[...uD],options:{},safe:ND,stack:[],unsafe:[...fD]};JC(i,t),i.options.tightDefinitions&&i.join.push(TD),i.handle=wR("type",{invalid:vD,unknown:wD,handlers:i.handlers});let l=i.handle(n,void 0,i,{before:`
`,after:`
`,now:{line:1,column:1},lineShift:0});return l&&l.charCodeAt(l.length-1)!==10&&l.charCodeAt(l.length-1)!==13&&(l+=`
`),l;function a(o){return i.stack.push(o),c;function c(){i.stack.pop()}}}function vD(n){throw new Error("Cannot handle value `"+n+"`, expected node")}function wD(n){const e=n;throw new Error("Cannot handle unknown node `"+e.type+"`")}function TD(n,e){if(n.type==="definition"&&n.type===e.type)return 0}function MD(n,e){return pD(n,this,e)}function ED(n,e){return mD(n,this,e)}function ND(n,e){return SD(this,n,e)}function Sm(n){const e=this;e.compiler=t;function t(i){return CD(i,{...e.data("settings"),...n,extensions:e.data("toMarkdownExtensions")||[]})}}function Ok(n){if(n)throw n}var Sp,Rk;function AD(){if(Rk)return Sp;Rk=1;var n=Object.prototype.hasOwnProperty,e=Object.prototype.toString,t=Object.defineProperty,i=Object.getOwnPropertyDescriptor,l=function(d){return typeof Array.isArray=="function"?Array.isArray(d):e.call(d)==="[object Array]"},a=function(d){if(!d||e.call(d)!=="[object Object]")return!1;var p=n.call(d,"constructor"),g=d.constructor&&d.constructor.prototype&&n.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!p&&!g)return!1;var b;for(b in d);return typeof b>"u"||n.call(d,b)},o=function(d,p){t&&p.name==="__proto__"?t(d,p.name,{enumerable:!0,configurable:!0,value:p.newValue,writable:!0}):d[p.name]=p.newValue},c=function(d,p){if(p==="__proto__")if(n.call(d,p)){if(i)return i(d,p).value}else return;return d[p]};return Sp=function f(){var d,p,g,b,S,x,v=arguments[0],M=1,T=arguments.length,Q=!1;for(typeof v=="boolean"&&(Q=v,v=arguments[1]||{},M=2),(v==null||typeof v!="object"&&typeof v!="function")&&(v={});M<T;++M)if(d=arguments[M],d!=null)for(p in d)g=c(v,p),b=c(d,p),v!==b&&(Q&&b&&(a(b)||(S=l(b)))?(S?(S=!1,x=g&&l(g)?g:[]):x=g&&a(g)?g:{},o(v,{name:p,newValue:f(Q,x,b)})):typeof b<"u"&&o(v,{name:p,newValue:b}));return v},Sp}var OD=AD();const kp=ig(OD);function km(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function RD(){const n=[],e={run:t,use:i};return e;function t(...l){let a=-1;const o=l.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);c(null,...l);function c(f,...d){const p=n[++a];let g=-1;if(f){o(f);return}for(;++g<l.length;)(d[g]===null||d[g]===void 0)&&(d[g]=l[g]);l=d,p?DD(p,c)(...d):o(null,...d)}}function i(l){if(typeof l!="function")throw new TypeError("Expected `middelware` to be a function, not "+l);return n.push(l),e}}function DD(n,e){let t;return i;function i(...o){const c=n.length>o.length;let f;c&&o.push(l);try{f=n.apply(this,o)}catch(d){const p=d;if(c&&t)throw p;return l(p)}c||(f&&f.then&&typeof f.then=="function"?f.then(a,l):f instanceof Error?l(f):a(f))}function l(o,...c){t||(t=!0,e(o,...c))}function a(o){l(null,o)}}class gn extends Error{constructor(e,t,i){super(),typeof t=="string"&&(i=t,t=void 0);let l="",a={},o=!1;if(t&&("line"in t&&"column"in t?a={place:t}:"start"in t&&"end"in t?a={place:t}:"type"in t?a={ancestors:[t],place:t.position}:a={...t}),typeof e=="string"?l=e:!a.cause&&e&&(o=!0,l=e.message,a.cause=e),!a.ruleId&&!a.source&&typeof i=="string"){const f=i.indexOf(":");f===-1?a.ruleId=i:(a.source=i.slice(0,f),a.ruleId=i.slice(f+1))}if(!a.place&&a.ancestors&&a.ancestors){const f=a.ancestors[a.ancestors.length-1];f&&(a.place=f.position)}const c=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=c?c.column:void 0,this.fatal=void 0,this.file="",this.message=l,this.line=c?c.line:void 0,this.name=go(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=o&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}gn.prototype.file="";gn.prototype.name="";gn.prototype.reason="";gn.prototype.message="";gn.prototype.stack="";gn.prototype.column=void 0;gn.prototype.line=void 0;gn.prototype.ancestors=void 0;gn.prototype.cause=void 0;gn.prototype.fatal=void 0;gn.prototype.place=void 0;gn.prototype.ruleId=void 0;gn.prototype.source=void 0;const mi={basename:zD,dirname:_D,extname:BD,join:LD,sep:"/"};function zD(n,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');jo(n);let t=0,i=-1,l=n.length,a;if(e===void 0||e.length===0||e.length>n.length){for(;l--;)if(n.codePointAt(l)===47){if(a){t=l+1;break}}else i<0&&(a=!0,i=l+1);return i<0?"":n.slice(t,i)}if(e===n)return"";let o=-1,c=e.length-1;for(;l--;)if(n.codePointAt(l)===47){if(a){t=l+1;break}}else o<0&&(a=!0,o=l+1),c>-1&&(n.codePointAt(l)===e.codePointAt(c--)?c<0&&(i=l):(c=-1,i=o));return t===i?i=o:i<0&&(i=n.length),n.slice(t,i)}function _D(n){if(jo(n),n.length===0)return".";let e=-1,t=n.length,i;for(;--t;)if(n.codePointAt(t)===47){if(i){e=t;break}}else i||(i=!0);return e<0?n.codePointAt(0)===47?"/":".":e===1&&n.codePointAt(0)===47?"//":n.slice(0,e)}function BD(n){jo(n);let e=n.length,t=-1,i=0,l=-1,a=0,o;for(;e--;){const c=n.codePointAt(e);if(c===47){if(o){i=e+1;break}continue}t<0&&(o=!0,t=e+1),c===46?l<0?l=e:a!==1&&(a=1):l>-1&&(a=-1)}return l<0||t<0||a===0||a===1&&l===t-1&&l===i+1?"":n.slice(l,t)}function LD(...n){let e=-1,t;for(;++e<n.length;)jo(n[e]),n[e]&&(t=t===void 0?n[e]:t+"/"+n[e]);return t===void 0?".":ID(t)}function ID(n){jo(n);const e=n.codePointAt(0)===47;let t=qD(n,!e);return t.length===0&&!e&&(t="."),t.length>0&&n.codePointAt(n.length-1)===47&&(t+="/"),e?"/"+t:t}function qD(n,e){let t="",i=0,l=-1,a=0,o=-1,c,f;for(;++o<=n.length;){if(o<n.length)c=n.codePointAt(o);else{if(c===47)break;c=47}if(c===47){if(!(l===o-1||a===1))if(l!==o-1&&a===2){if(t.length<2||i!==2||t.codePointAt(t.length-1)!==46||t.codePointAt(t.length-2)!==46){if(t.length>2){if(f=t.lastIndexOf("/"),f!==t.length-1){f<0?(t="",i=0):(t=t.slice(0,f),i=t.length-1-t.lastIndexOf("/")),l=o,a=0;continue}}else if(t.length>0){t="",i=0,l=o,a=0;continue}}e&&(t=t.length>0?t+"/..":"..",i=2)}else t.length>0?t+="/"+n.slice(l+1,o):t=n.slice(l+1,o),i=o-l-1;l=o,a=0}else c===46&&a>-1?a++:a=-1}return t}function jo(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}const HD={cwd:UD};function UD(){return"/"}function xm(n){return!!(n!==null&&typeof n=="object"&&"href"in n&&n.href&&"protocol"in n&&n.protocol&&n.auth===void 0)}function VD(n){if(typeof n=="string")n=new URL(n);else if(!xm(n)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+n+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(n.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return jD(n)}function jD(n){if(n.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const e=n.pathname;let t=-1;for(;++t<e.length;)if(e.codePointAt(t)===37&&e.codePointAt(t+1)===50){const i=e.codePointAt(t+2);if(i===70||i===102){const l=new TypeError("File URL path must not include encoded / characters");throw l.code="ERR_INVALID_FILE_URL_PATH",l}}return decodeURIComponent(e)}const xp=["history","path","basename","stem","extname","dirname"];class FD{constructor(e){let t;e?xm(e)?t={path:e}:typeof e=="string"||KD(e)?t={value:e}:t=e:t={},this.cwd="cwd"in t?"":HD.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<xp.length;){const a=xp[i];a in t&&t[a]!==void 0&&t[a]!==null&&(this[a]=a==="history"?[...t[a]]:t[a])}let l;for(l in t)xp.includes(l)||(this[l]=t[l])}get basename(){return typeof this.path=="string"?mi.basename(this.path):void 0}set basename(e){vp(e,"basename"),Cp(e,"basename"),this.path=mi.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?mi.dirname(this.path):void 0}set dirname(e){Dk(this.basename,"dirname"),this.path=mi.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?mi.extname(this.path):void 0}set extname(e){if(Cp(e,"extname"),Dk(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=mi.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){xm(e)&&(e=VD(e)),vp(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?mi.basename(this.path,this.extname):void 0}set stem(e){vp(e,"stem"),Cp(e,"stem"),this.path=mi.join(this.dirname||"",e+(this.extname||""))}fail(e,t,i){const l=this.message(e,t,i);throw l.fatal=!0,l}info(e,t,i){const l=this.message(e,t,i);return l.fatal=void 0,l}message(e,t,i){const l=new gn(e,t,i);return this.path&&(l.name=this.path+":"+l.name,l.file=this.path),l.fatal=!1,this.messages.push(l),l}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function Cp(n,e){if(n&&n.includes(mi.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+mi.sep+"`")}function vp(n,e){if(!n)throw new Error("`"+e+"` cannot be empty")}function Dk(n,e){if(!n)throw new Error("Setting `"+e+"` requires `path` to be set too")}function KD(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const YD=(function(n){const i=this.constructor.prototype,l=i[n],a=function(){return l.apply(a,arguments)};return Object.setPrototypeOf(a,i),a}),GD={}.hasOwnProperty;class dg extends YD{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=RD()}copy(){const e=new dg;let t=-1;for(;++t<this.attachers.length;){const i=this.attachers[t];e.use(...i)}return e.data(kp(!0,{},this.namespace)),e}data(e,t){return typeof e=="string"?arguments.length===2?(Mp("data",this.frozen),this.namespace[e]=t,this):GD.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Mp("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const l=t.call(e,...i);typeof l=="function"&&this.transformers.use(l)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=Mc(e),i=this.parser||this.Parser;return wp("parse",i),i(String(t),t)}process(e,t){const i=this;return this.freeze(),wp("process",this.parser||this.Parser),Tp("process",this.compiler||this.Compiler),t?l(void 0,t):new Promise(l);function l(a,o){const c=Mc(e),f=i.parse(c);i.run(f,c,function(p,g,b){if(p||!g||!b)return d(p);const S=g,x=i.stringify(S,b);XD(x)?b.value=x:b.result=x,d(p,b)});function d(p,g){p||!g?o(p):a?a(g):t(void 0,g)}}}processSync(e){let t=!1,i;return this.freeze(),wp("processSync",this.parser||this.Parser),Tp("processSync",this.compiler||this.Compiler),this.process(e,l),_k("processSync","process",t),i;function l(a,o){t=!0,Ok(a),i=o}}run(e,t,i){zk(e),this.freeze();const l=this.transformers;return!i&&typeof t=="function"&&(i=t,t=void 0),i?a(void 0,i):new Promise(a);function a(o,c){const f=Mc(t);l.run(e,f,d);function d(p,g,b){const S=g||e;p?c(p):o?o(S):i(void 0,S,b)}}}runSync(e,t){let i=!1,l;return this.run(e,t,a),_k("runSync","run",i),l;function a(o,c){Ok(o),l=c,i=!0}}stringify(e,t){this.freeze();const i=Mc(t),l=this.compiler||this.Compiler;return Tp("stringify",l),zk(e),l(e,i)}use(e,...t){const i=this.attachers,l=this.namespace;if(Mp("use",this.frozen),e!=null)if(typeof e=="function")f(e,t);else if(typeof e=="object")Array.isArray(e)?c(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function a(d){if(typeof d=="function")f(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[p,...g]=d;f(p,g)}else o(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function o(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");c(d.plugins),d.settings&&(l.settings=kp(!0,l.settings,d.settings))}function c(d){let p=-1;if(d!=null)if(Array.isArray(d))for(;++p<d.length;){const g=d[p];a(g)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function f(d,p){let g=-1,b=-1;for(;++g<i.length;)if(i[g][0]===d){b=g;break}if(b===-1)i.push([d,...p]);else if(p.length>0){let[S,...x]=p;const v=i[b][1];km(v)&&km(S)&&(S=kp(!0,v,S)),i[b]=[d,S,...x]}}}}const Cm=new dg().freeze();function wp(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `parser`")}function Tp(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `compiler`")}function Mp(n,e){if(e)throw new Error("Cannot call `"+n+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function zk(n){if(!km(n)||typeof n.type!="string")throw new TypeError("Expected node, got `"+n+"`")}function _k(n,e,t){if(!t)throw new Error("`"+n+"` finished async. Use `"+e+"` instead")}function Mc(n){return QD(n)?n:new FD(n)}function QD(n){return!!(n&&typeof n=="object"&&"message"in n&&"messages"in n)}function XD(n){return typeof n=="string"||JD(n)}function JD(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}var uv=n=>{throw TypeError(n)},cv=(n,e,t)=>e.has(n)||uv("Cannot "+t),Ne=(n,e,t)=>(cv(n,e,"read from private field"),t?t.call(n):e.get(n)),kt=(n,e,t)=>e.has(n)?uv("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),lt=(n,e,t,i)=>(cv(n,e,"write to private field"),e.set(n,t),t),pi,to,_c,Bc,Lc,no,io,Yi,ro,Ic,qc,lo,Hc,so,Uc,Vc,_s,bl,jc,ao;class fv{}class hv{constructor(){this.elements=[],this.size=()=>this.elements.length,this.top=()=>this.elements.at(-1),this.push=e=>{this.top()?.push(e)},this.open=e=>{this.elements.push(e)},this.close=()=>{const e=this.elements.pop();if(!e)throw pC();return e}}}class pg extends fv{constructor(e,t,i){super(),this.type=e,this.content=t,this.attrs=i}push(e,...t){this.content.push(e,...t)}pop(){return this.content.pop()}static create(e,t,i){return new pg(e,t,i)}}const vm=class extends hv{constructor(e){super(),kt(this,pi),kt(this,to),kt(this,_c),kt(this,Bc),kt(this,Lc),kt(this,no),kt(this,io),lt(this,pi,He.none),lt(this,to,t=>t.isText),lt(this,_c,(t,i)=>{if(Ne(this,to).call(this,t)&&Ne(this,to).call(this,i)&&He.sameSet(t.marks,i.marks))return this.schema.text(t.text+i.text,t.marks)}),lt(this,Bc,t=>{const i=Object.values({...this.schema.nodes,...this.schema.marks}).find(l=>l.spec.parseMarkdown.match(t));if(!i)throw FN(t);return i}),lt(this,Lc,t=>{const i=Ne(this,Bc).call(this,t);i.spec.parseMarkdown.runner(this,t,i)}),this.injectRoot=(t,i,l)=>(this.openNode(i,l),this.next(t.children),this),this.openNode=(t,i)=>(this.open(pg.create(t,[],i)),this),lt(this,no,()=>{lt(this,pi,He.none);const t=this.close();return Ne(this,io).call(this,t.type,t.attrs,t.content)}),this.closeNode=()=>{try{Ne(this,no).call(this)}catch(t){console.error(t)}return this},lt(this,io,(t,i,l)=>{const a=t.createAndFill(i,l,Ne(this,pi));if(!a)throw jN(t,i,l);return this.push(a),a}),this.addNode=(t,i,l)=>{try{Ne(this,io).call(this,t,i,l)}catch(a){console.error(a)}return this},this.openMark=(t,i)=>{const l=t.create(i);return lt(this,pi,l.addToSet(Ne(this,pi))),this},this.closeMark=t=>(lt(this,pi,t.removeFromSet(Ne(this,pi))),this),this.addText=t=>{try{const i=this.top();if(!i)throw pC();const l=i.pop(),a=this.schema.text(t,Ne(this,pi));if(!l)return i.push(a),this;const o=Ne(this,_c).call(this,l,a);return o?(i.push(o),this):(i.push(l,a),this)}catch(i){return console.error(i),this}},this.build=()=>{let t;do t=Ne(this,no).call(this);while(this.size());return t},this.next=(t=[])=>([t].flat().forEach(i=>Ne(this,Lc).call(this,i)),this),this.toDoc=()=>this.build(),this.run=(t,i)=>{const l=t.runSync(t.parse(i),i);return this.next(l),this},this.schema=e}};pi=new WeakMap;to=new WeakMap;_c=new WeakMap;Bc=new WeakMap;Lc=new WeakMap;no=new WeakMap;io=new WeakMap;vm.create=(n,e)=>{const t=new vm(n);return i=>(t.run(e,i),t.toDoc())};let ZD=vm;const wm=class extends fv{constructor(e,t,i,l={}){super(),this.type=e,this.children=t,this.value=i,this.props=l,this.push=(a,...o)=>{this.children||(this.children=[]),this.children.push(a,...o)},this.pop=()=>this.children?.pop()}};wm.create=(n,e,t,i={})=>new wm(n,e,t,i);let Bk=wm;const $D=n=>Object.prototype.hasOwnProperty.call(n,"size"),Tm=class extends hv{constructor(e){super(),kt(this,Yi),kt(this,ro),kt(this,Ic),kt(this,qc),kt(this,lo),kt(this,Hc),kt(this,so),kt(this,Uc),kt(this,Vc),kt(this,_s),kt(this,bl),kt(this,jc),kt(this,ao),lt(this,Yi,He.none),lt(this,ro,t=>{const i=Object.values({...this.schema.nodes,...this.schema.marks}).find(l=>l.spec.toMarkdown.match(t));if(!i)throw KN(t.type);return i}),lt(this,Ic,t=>Ne(this,ro).call(this,t).spec.toMarkdown.runner(this,t)),lt(this,qc,(t,i)=>Ne(this,ro).call(this,t).spec.toMarkdown.runner(this,t,i)),lt(this,lo,t=>{const{marks:i}=t,l=c=>c.type.spec.priority??50;[...i].sort((c,f)=>l(c)-l(f)).every(c=>!Ne(this,qc).call(this,c,t))&&Ne(this,Ic).call(this,t),i.forEach(c=>Ne(this,ao).call(this,c))}),lt(this,Hc,(t,i)=>{if(t.type===i||t.children?.length!==1)return t;const l=f=>{if(f.type===i)return f;if(f.children?.length!==1)return null;const[d]=f.children;return d?l(d):null},a=l(t);if(!a)return t;const o=a.children?[...a.children]:void 0,c={...t,children:o};return c.children=o,a.children=[c],a}),lt(this,so,t=>{const{children:i}=t;return i&&(t.children=i.reduce((l,a,o)=>{if(o===0)return[a];const c=l.at(-1);if(c&&c.isMark&&a.isMark){a=Ne(this,Hc).call(this,a,c.type);const{children:f,...d}=a,{children:p,...g}=c;if(a.type===c.type&&f&&p&&JSON.stringify(d)===JSON.stringify(g)){const b={...g,children:[...p,...f]};return l.slice(0,-1).concat(Ne(this,so).call(this,b))}}return l.concat(a)},[])),t}),lt(this,Uc,t=>{const i={...t.props,type:t.type};return t.children&&(i.children=t.children),t.value&&(i.value=t.value),i}),this.openNode=(t,i,l)=>(this.open(Bk.create(t,void 0,i,l)),this),lt(this,Vc,(t,i)=>{let l="",a="";const o=t.children;let c=-1,f=-1;const d=g=>{g&&g.forEach((b,S)=>{b.type==="text"&&b.value&&(c<0&&(c=S),f=S)})};if(o){d(o);const g=o?.[f],b=o?.[c];if(g&&g.value.endsWith(" ")){const S=g.value,x=S.trimEnd();a=S.slice(x.length),g.value=x}if(b&&b.value.startsWith(" ")){const S=b.value,x=S.trimStart();l=S.slice(0,S.length-x.length),b.value=x}}l.length&&Ne(this,bl).call(this,"text",void 0,l);const p=i();return a.length&&Ne(this,bl).call(this,"text",void 0,a),p}),lt(this,_s,(t=!1)=>{const i=this.close(),l=()=>Ne(this,bl).call(this,i.type,i.children,i.value,i.props);return t?Ne(this,Vc).call(this,i,l):l()}),this.closeNode=()=>(Ne(this,_s).call(this),this),lt(this,bl,(t,i,l,a)=>{const o=Bk.create(t,i,l,a),c=Ne(this,so).call(this,Ne(this,Uc).call(this,o));return this.push(c),c}),this.addNode=(t,i,l,a)=>(Ne(this,bl).call(this,t,i,l,a),this),lt(this,jc,(t,i,l,a)=>t.isInSet(Ne(this,Yi))?this:(lt(this,Yi,t.addToSet(Ne(this,Yi))),this.openNode(i,l,{...a,isMark:!0}))),lt(this,ao,t=>{t.isInSet(Ne(this,Yi))&&(lt(this,Yi,t.type.removeFromSet(Ne(this,Yi))),Ne(this,_s).call(this,!0))}),this.withMark=(t,i,l,a)=>(Ne(this,jc).call(this,t,i,l,a),this),this.closeMark=t=>(Ne(this,ao).call(this,t),this),this.build=()=>{let t=null;do t=Ne(this,_s).call(this);while(this.size());return t},this.next=t=>$D(t)?(t.forEach(i=>{Ne(this,lo).call(this,i)}),this):(Ne(this,lo).call(this,t),this),this.toString=t=>t.stringify(this.build()),this.run=t=>(this.next(t),this),this.schema=e}};Yi=new WeakMap;ro=new WeakMap;Ic=new WeakMap;qc=new WeakMap;lo=new WeakMap;Hc=new WeakMap;so=new WeakMap;Uc=new WeakMap;Vc=new WeakMap;_s=new WeakMap;bl=new WeakMap;jc=new WeakMap;ao=new WeakMap;Tm.create=(n,e)=>{const t=new Tm(n);return i=>(t.run(i),t.toString(e))};let PD=Tm;const dv=65535,pv=Math.pow(2,16);function WD(n,e){return n+e*pv}function Lk(n){return n&dv}function ez(n){return(n-(n&dv))/pv}const mv=1,gv=2,Fc=4,yv=8;class Mm{constructor(e,t,i){this.pos=e,this.delInfo=t,this.recover=i}get deleted(){return(this.delInfo&yv)>0}get deletedBefore(){return(this.delInfo&(mv|Fc))>0}get deletedAfter(){return(this.delInfo&(gv|Fc))>0}get deletedAcross(){return(this.delInfo&Fc)>0}}class En{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&En.empty)return En.empty}recover(e){let t=0,i=Lk(e);if(!this.inverted)for(let l=0;l<i;l++)t+=this.ranges[l*3+2]-this.ranges[l*3+1];return this.ranges[i*3]+t+ez(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,i){let l=0,a=this.inverted?2:1,o=this.inverted?1:2;for(let c=0;c<this.ranges.length;c+=3){let f=this.ranges[c]-(this.inverted?l:0);if(f>e)break;let d=this.ranges[c+a],p=this.ranges[c+o],g=f+d;if(e<=g){let b=d?e==f?-1:e==g?1:t:t,S=f+l+(b<0?0:p);if(i)return S;let x=e==(t<0?f:g)?null:WD(c/3,e-f),v=e==f?gv:e==g?mv:Fc;return(t<0?e!=f:e!=g)&&(v|=yv),new Mm(S,v,x)}l+=p-d}return i?e+l:new Mm(e+l,0,null)}touches(e,t){let i=0,l=Lk(t),a=this.inverted?2:1,o=this.inverted?1:2;for(let c=0;c<this.ranges.length;c+=3){let f=this.ranges[c]-(this.inverted?i:0);if(f>e)break;let d=this.ranges[c+a],p=f+d;if(e<=p&&c==l*3)return!0;i+=this.ranges[c+o]-d}return!1}forEach(e){let t=this.inverted?2:1,i=this.inverted?1:2;for(let l=0,a=0;l<this.ranges.length;l+=3){let o=this.ranges[l],c=o-(this.inverted?a:0),f=o+(this.inverted?0:a),d=this.ranges[l+t],p=this.ranges[l+i];e(c,c+d,f,f+p),a+=p-d}}invert(){return new En(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?En.empty:new En(e<0?[0,-e,0]:[0,0,e])}}En.empty=new En([]);class Do{constructor(e,t,i=0,l=e?e.length:0){this.mirror=t,this.from=i,this.to=l,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new Do(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,i=this._maps.length;t<e._maps.length;t++){let l=e.getMirror(t);this.appendMap(e._maps[t],l!=null&&l<t?i+l:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,i=this._maps.length+e._maps.length;t>=0;t--){let l=e.getMirror(t);this.appendMap(e._maps[t].invert(),l!=null&&l>t?i-l-1:void 0)}}invert(){let e=new Do;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let i=this.from;i<this.to;i++)e=this._maps[i].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,i){let l=0;for(let a=this.from;a<this.to;a++){let o=this._maps[a],c=o.mapResult(e,t);if(c.recover!=null){let f=this.getMirror(a);if(f!=null&&f>a&&f<this.to){a=f,e=this._maps[f].recover(c.recover);continue}}l|=c.delInfo,e=c.pos}return i?e:new Mm(e,l,null)}}const Ep=Object.create(null);class Gt{getMap(){return En.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let i=Ep[t.stepType];if(!i)throw new RangeError(`No step type ${t.stepType} defined`);return i.fromJSON(e,t)}static jsonID(e,t){if(e in Ep)throw new RangeError("Duplicate use of step JSON ID "+e);return Ep[e]=t,t.prototype.jsonID=e,t}}class xt{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new xt(e,null)}static fail(e){return new xt(null,e)}static fromReplace(e,t,i,l){try{return xt.ok(e.replace(t,i,l))}catch(a){if(a instanceof ef)return xt.fail(a.message);throw a}}}function mg(n,e,t){let i=[];for(let l=0;l<n.childCount;l++){let a=n.child(l);a.content.size&&(a=a.copy(mg(a.content,e,a))),a.isInline&&(a=e(a,t,l)),i.push(a)}return X.fromArray(i)}class Zi extends Gt{constructor(e,t,i){super(),this.from=e,this.to=t,this.mark=i}apply(e){let t=e.slice(this.from,this.to),i=e.resolve(this.from),l=i.node(i.sharedDepth(this.to)),a=new W(mg(t.content,(o,c)=>!o.isAtom||!c.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),l),t.openStart,t.openEnd);return xt.fromReplace(e,this.from,this.to,a)}invert(){return new yi(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return t.deleted&&i.deleted||t.pos>=i.pos?null:new Zi(t.pos,i.pos,this.mark)}merge(e){return e instanceof Zi&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Zi(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Zi(t.from,t.to,e.markFromJSON(t.mark))}}Gt.jsonID("addMark",Zi);class yi extends Gt{constructor(e,t,i){super(),this.from=e,this.to=t,this.mark=i}apply(e){let t=e.slice(this.from,this.to),i=new W(mg(t.content,l=>l.mark(this.mark.removeFromSet(l.marks)),e),t.openStart,t.openEnd);return xt.fromReplace(e,this.from,this.to,i)}invert(){return new Zi(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return t.deleted&&i.deleted||t.pos>=i.pos?null:new yi(t.pos,i.pos,this.mark)}merge(e){return e instanceof yi&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new yi(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new yi(t.from,t.to,e.markFromJSON(t.mark))}}Gt.jsonID("removeMark",yi);class Ir extends Gt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return xt.fail("No node at mark step's position");let i=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return xt.fromReplace(e,this.pos,this.pos+1,new W(X.from(i),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let i=this.mark.addToSet(t.marks);if(i.length==t.marks.length){for(let l=0;l<t.marks.length;l++)if(!t.marks[l].isInSet(i))return new Ir(this.pos,t.marks[l]);return new Ir(this.pos,this.mark)}}return new zl(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Ir(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ir(t.pos,e.markFromJSON(t.mark))}}Gt.jsonID("addNodeMark",Ir);class zl extends Gt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return xt.fail("No node at mark step's position");let i=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return xt.fromReplace(e,this.pos,this.pos+1,new W(X.from(i),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new Ir(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new zl(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new zl(t.pos,e.markFromJSON(t.mark))}}Gt.jsonID("removeNodeMark",zl);class Nt extends Gt{constructor(e,t,i,l=!1){super(),this.from=e,this.to=t,this.slice=i,this.structure=l}apply(e){return this.structure&&Em(e,this.from,this.to)?xt.fail("Structure replace would overwrite content"):xt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new En([this.from,this.to-this.from,this.slice.size])}invert(e){return new Nt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return t.deletedAcross&&i.deletedAcross?null:new Nt(t.pos,Math.max(t.pos,i.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Nt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?W.empty:new W(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Nt(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?W.empty:new W(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Nt(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Nt(t.from,t.to,W.fromJSON(e,t.slice),!!t.structure)}}Gt.jsonID("replace",Nt);class Kt extends Gt{constructor(e,t,i,l,a,o,c=!1){super(),this.from=e,this.to=t,this.gapFrom=i,this.gapTo=l,this.slice=a,this.insert=o,this.structure=c}apply(e){if(this.structure&&(Em(e,this.from,this.gapFrom)||Em(e,this.gapTo,this.to)))return xt.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return xt.fail("Gap is not a flat range");let i=this.slice.insertAt(this.insert,t.content);return i?xt.fromReplace(e,this.from,this.to,i):xt.fail("Content does not fit in gap")}getMap(){return new En([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new Kt(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),i=e.mapResult(this.to,-1),l=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),a=this.to==this.gapTo?i.pos:e.map(this.gapTo,1);return t.deletedAcross&&i.deletedAcross||l<t.pos||a>i.pos?null:new Kt(t.pos,i.pos,l,a,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Kt(t.from,t.to,t.gapFrom,t.gapTo,W.fromJSON(e,t.slice),t.insert,!!t.structure)}}Gt.jsonID("replaceAround",Kt);function Em(n,e,t){let i=n.resolve(e),l=t-e,a=i.depth;for(;l>0&&a>0&&i.indexAfter(a)==i.node(a).childCount;)a--,l--;if(l>0){let o=i.node(a).maybeChild(i.indexAfter(a));for(;l>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,l--}}return!1}function tz(n,e,t,i){let l=[],a=[],o,c;n.doc.nodesBetween(e,t,(f,d,p)=>{if(!f.isInline)return;let g=f.marks;if(!i.isInSet(g)&&p.type.allowsMarkType(i.type)){let b=Math.max(d,e),S=Math.min(d+f.nodeSize,t),x=i.addToSet(g);for(let v=0;v<g.length;v++)g[v].isInSet(x)||(o&&o.to==b&&o.mark.eq(g[v])?o.to=S:l.push(o=new yi(b,S,g[v])));c&&c.to==b?c.to=S:a.push(c=new Zi(b,S,i))}}),l.forEach(f=>n.step(f)),a.forEach(f=>n.step(f))}function nz(n,e,t,i){let l=[],a=0;n.doc.nodesBetween(e,t,(o,c)=>{if(!o.isInline)return;a++;let f=null;if(i instanceof Af){let d=o.marks,p;for(;p=i.isInSet(d);)(f||(f=[])).push(p),d=p.removeFromSet(d)}else i?i.isInSet(o.marks)&&(f=[i]):f=o.marks;if(f&&f.length){let d=Math.min(c+o.nodeSize,t);for(let p=0;p<f.length;p++){let g=f[p],b;for(let S=0;S<l.length;S++){let x=l[S];x.step==a-1&&g.eq(l[S].style)&&(b=x)}b?(b.to=d,b.step=a):l.push({style:g,from:Math.max(c,e),to:d,step:a})}}}),l.forEach(o=>n.step(new yi(o.from,o.to,o.style)))}function gg(n,e,t,i=t.contentMatch,l=!0){let a=n.doc.nodeAt(e),o=[],c=e+1;for(let f=0;f<a.childCount;f++){let d=a.child(f),p=c+d.nodeSize,g=i.matchType(d.type);if(!g)o.push(new Nt(c,p,W.empty));else{i=g;for(let b=0;b<d.marks.length;b++)t.allowsMarkType(d.marks[b].type)||n.step(new yi(c,p,d.marks[b]));if(l&&d.isText&&t.whitespace!="pre"){let b,S=/\r?\n|\r/g,x;for(;b=S.exec(d.text);)x||(x=new W(X.from(t.schema.text(" ",t.allowedMarks(d.marks))),0,0)),o.push(new Nt(c+b.index,c+b.index+b[0].length,x))}}c=p}if(!i.validEnd){let f=i.fillBefore(X.empty,!0);n.replace(c,c,new W(f,0,0))}for(let f=o.length-1;f>=0;f--)n.step(o[f])}function iz(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function _f(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let i=n.depth,l=0,a=0;;--i){let o=n.$from.node(i),c=n.$from.index(i)+l,f=n.$to.indexAfter(i)-a;if(i<n.depth&&o.canReplace(c,f,t))return i;if(i==0||o.type.spec.isolating||!iz(o,c,f))break;c&&(l=1),f<o.childCount&&(a=1)}return null}function rz(n,e,t){let{$from:i,$to:l,depth:a}=e,o=i.before(a+1),c=l.after(a+1),f=o,d=c,p=X.empty,g=0;for(let x=a,v=!1;x>t;x--)v||i.index(x)>0?(v=!0,p=X.from(i.node(x).copy(p)),g++):f--;let b=X.empty,S=0;for(let x=a,v=!1;x>t;x--)v||l.after(x+1)<l.end(x)?(v=!0,b=X.from(l.node(x).copy(b)),S++):d++;n.step(new Kt(f,d,o,c,new W(p.append(b),g,S),p.size-g,!0))}function yg(n,e,t=null,i=n){let l=lz(n,e),a=l&&sz(i,e);return a?l.map(Ik).concat({type:e,attrs:t}).concat(a.map(Ik)):null}function Ik(n){return{type:n,attrs:null}}function lz(n,e){let{parent:t,startIndex:i,endIndex:l}=n,a=t.contentMatchAt(i).findWrapping(e);if(!a)return null;let o=a.length?a[0]:e;return t.canReplaceWith(i,l,o)?a:null}function sz(n,e){let{parent:t,startIndex:i,endIndex:l}=n,a=t.child(i),o=e.contentMatch.findWrapping(a.type);if(!o)return null;let f=(o.length?o[o.length-1]:e).contentMatch;for(let d=i;f&&d<l;d++)f=f.matchType(t.child(d).type);return!f||!f.validEnd?null:o}function az(n,e,t){let i=X.empty;for(let o=t.length-1;o>=0;o--){if(i.size){let c=t[o].type.contentMatch.matchFragment(i);if(!c||!c.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}i=X.from(t[o].type.create(t[o].attrs,i))}let l=e.start,a=e.end;n.step(new Kt(l,a,l,a,new W(i,0,0),t.length,!0))}function oz(n,e,t,i,l){if(!i.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let a=n.steps.length;n.doc.nodesBetween(e,t,(o,c)=>{let f=typeof l=="function"?l(o):l;if(o.isTextblock&&!o.hasMarkup(i,f)&&uz(n.doc,n.mapping.slice(a).map(c),i)){let d=null;if(i.schema.linebreakReplacement){let S=i.whitespace=="pre",x=!!i.contentMatch.matchType(i.schema.linebreakReplacement);S&&!x?d=!1:!S&&x&&(d=!0)}d===!1&&Sv(n,o,c,a),gg(n,n.mapping.slice(a).map(c,1),i,void 0,d===null);let p=n.mapping.slice(a),g=p.map(c,1),b=p.map(c+o.nodeSize,1);return n.step(new Kt(g,b,g+1,b-1,new W(X.from(i.create(f,null,o.marks)),0,0),1,!0)),d===!0&&bv(n,o,c,a),!1}})}function bv(n,e,t,i){e.forEach((l,a)=>{if(l.isText){let o,c=/\r?\n|\r/g;for(;o=c.exec(l.text);){let f=n.mapping.slice(i).map(t+1+a+o.index);n.replaceWith(f,f+1,e.type.schema.linebreakReplacement.create())}}})}function Sv(n,e,t,i){e.forEach((l,a)=>{if(l.type==l.type.schema.linebreakReplacement){let o=n.mapping.slice(i).map(t+1+a);n.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function uz(n,e,t){let i=n.resolve(e),l=i.index();return i.parent.canReplaceWith(l,l+1,t)}function cz(n,e,t,i,l){let a=n.doc.nodeAt(e);if(!a)throw new RangeError("No node at given position");t||(t=a.type);let o=t.create(i,null,l||a.marks);if(a.isLeaf)return n.replaceWith(e,e+a.nodeSize,o);if(!t.validContent(a.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new Kt(e,e+a.nodeSize,e+1,e+a.nodeSize-1,new W(X.from(o),0,0),1,!0))}function yo(n,e,t=1,i){let l=n.resolve(e),a=l.depth-t,o=i&&i[i.length-1]||l.parent;if(a<0||l.parent.type.spec.isolating||!l.parent.canReplace(l.index(),l.parent.childCount)||!o.type.validContent(l.parent.content.cutByIndex(l.index(),l.parent.childCount)))return!1;for(let d=l.depth-1,p=t-2;d>a;d--,p--){let g=l.node(d),b=l.index(d);if(g.type.spec.isolating)return!1;let S=g.content.cutByIndex(b,g.childCount),x=i&&i[p+1];x&&(S=S.replaceChild(0,x.type.create(x.attrs)));let v=i&&i[p]||g;if(!g.canReplace(b+1,g.childCount)||!v.type.validContent(S))return!1}let c=l.indexAfter(a),f=i&&i[0];return l.node(a).canReplaceWith(c,c,f?f.type:l.node(a+1).type)}function fz(n,e,t=1,i){let l=n.doc.resolve(e),a=X.empty,o=X.empty;for(let c=l.depth,f=l.depth-t,d=t-1;c>f;c--,d--){a=X.from(l.node(c).copy(a));let p=i&&i[d];o=X.from(p?p.type.create(p.attrs,o):l.node(c).copy(o))}n.step(new Nt(e,e,new W(a.append(o),t,t),!0))}function Bf(n,e){let t=n.resolve(e),i=t.index();return dz(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(i,i+1)}function hz(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:i}=n.type.schema;for(let l=0;l<e.childCount;l++){let a=e.child(l),o=a.type==i?n.type.schema.nodes.text:a.type;if(t=t.matchType(o),!t||!n.type.allowsMarks(a.marks))return!1}return t.validEnd}function dz(n,e){return!!(n&&e&&!n.isLeaf&&hz(n,e))}function pz(n,e,t){let i=null,{linebreakReplacement:l}=n.doc.type.schema,a=n.doc.resolve(e-t),o=a.node().type;if(l&&o.inlineContent){let p=o.whitespace=="pre",g=!!o.contentMatch.matchType(l);p&&!g?i=!1:!p&&g&&(i=!0)}let c=n.steps.length;if(i===!1){let p=n.doc.resolve(e+t);Sv(n,p.node(),p.before(),c)}o.inlineContent&&gg(n,e+t-1,o,a.node().contentMatchAt(a.index()),i==null);let f=n.mapping.slice(c),d=f.map(e-t);if(n.step(new Nt(d,f.map(e+t,-1),W.empty,!0)),i===!0){let p=n.doc.resolve(d);bv(n,p.node(),p.before(),n.steps.length)}return n}function mz(n,e,t){let i=n.resolve(e);if(i.parent.canReplaceWith(i.index(),i.index(),t))return e;if(i.parentOffset==0)for(let l=i.depth-1;l>=0;l--){let a=i.index(l);if(i.node(l).canReplaceWith(a,a,t))return i.before(l+1);if(a>0)return null}if(i.parentOffset==i.parent.content.size)for(let l=i.depth-1;l>=0;l--){let a=i.indexAfter(l);if(i.node(l).canReplaceWith(a,a,t))return i.after(l+1);if(a<i.node(l).childCount)return null}return null}function gz(n,e,t){let i=n.resolve(e);if(!t.content.size)return e;let l=t.content;for(let a=0;a<t.openStart;a++)l=l.firstChild.content;for(let a=1;a<=(t.openStart==0&&t.size?2:1);a++)for(let o=i.depth;o>=0;o--){let c=o==i.depth?0:i.pos<=(i.start(o+1)+i.end(o+1))/2?-1:1,f=i.index(o)+(c>0?1:0),d=i.node(o),p=!1;if(a==1)p=d.canReplace(f,f,l);else{let g=d.contentMatchAt(f).findWrapping(l.firstChild.type);p=g&&d.canReplaceWith(f,f,g[0])}if(p)return c==0?i.pos:c<0?i.before(o+1):i.after(o+1)}return null}function Lf(n,e,t=e,i=W.empty){if(e==t&&!i.size)return null;let l=n.resolve(e),a=n.resolve(t);return kv(l,a,i)?new Nt(e,t,i):new yz(l,a,i).fit()}function kv(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class yz{constructor(e,t,i){this.$from=e,this.$to=t,this.unplaced=i,this.frontier=[],this.placed=X.empty;for(let l=0;l<=e.depth;l++){let a=e.node(l);this.frontier.push({type:a.type,match:a.contentMatchAt(e.indexAfter(l))})}for(let l=e.depth;l>0;l--)this.placed=X.from(e.node(l).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let d=this.findFittable();d?this.placeNodes(d):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,i=this.$from,l=this.close(e<0?this.$to:i.doc.resolve(e));if(!l)return null;let a=this.placed,o=i.depth,c=l.depth;for(;o&&c&&a.childCount==1;)a=a.firstChild.content,o--,c--;let f=new W(a,o,c);return e>-1?new Kt(i.pos,e,this.$to.pos,this.$to.end(),f,t):f.size||i.pos!=this.$to.pos?new Nt(i.pos,l.pos,f):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,i=0,l=this.unplaced.openEnd;i<e;i++){let a=t.firstChild;if(t.childCount>1&&(l=0),a.type.spec.isolating&&l<=i){e=i;break}t=a.content}for(let t=1;t<=2;t++)for(let i=t==1?e:this.unplaced.openStart;i>=0;i--){let l,a=null;i?(a=Np(this.unplaced.content,i-1).firstChild,l=a.content):l=this.unplaced.content;let o=l.firstChild;for(let c=this.depth;c>=0;c--){let{type:f,match:d}=this.frontier[c],p,g=null;if(t==1&&(o?d.matchType(o.type)||(g=d.fillBefore(X.from(o),!1)):a&&f.compatibleContent(a.type)))return{sliceDepth:i,frontierDepth:c,parent:a,inject:g};if(t==2&&o&&(p=d.findWrapping(o.type)))return{sliceDepth:i,frontierDepth:c,parent:a,wrap:p};if(a&&d.matchType(a.type))break}}}openMore(){let{content:e,openStart:t,openEnd:i}=this.unplaced,l=Np(e,t);return!l.childCount||l.firstChild.isLeaf?!1:(this.unplaced=new W(e,t+1,Math.max(i,l.size+t>=e.size-i?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:i}=this.unplaced,l=Np(e,t);if(l.childCount<=1&&t>0){let a=e.size-t<=t+l.size;this.unplaced=new W(oo(e,t-1,1),t-1,a?t-1:i)}else this.unplaced=new W(oo(e,t,1),t,i)}placeNodes({sliceDepth:e,frontierDepth:t,parent:i,inject:l,wrap:a}){for(;this.depth>t;)this.closeFrontierNode();if(a)for(let v=0;v<a.length;v++)this.openFrontierNode(a[v]);let o=this.unplaced,c=i?i.content:o.content,f=o.openStart-e,d=0,p=[],{match:g,type:b}=this.frontier[t];if(l){for(let v=0;v<l.childCount;v++)p.push(l.child(v));g=g.matchFragment(l)}let S=c.size+e-(o.content.size-o.openEnd);for(;d<c.childCount;){let v=c.child(d),M=g.matchType(v.type);if(!M)break;d++,(d>1||f==0||v.content.size)&&(g=M,p.push(xv(v.mark(b.allowedMarks(v.marks)),d==1?f:0,d==c.childCount?S:-1)))}let x=d==c.childCount;x||(S=-1),this.placed=uo(this.placed,t,X.from(p)),this.frontier[t].match=g,x&&S<0&&i&&i.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let v=0,M=c;v<S;v++){let T=M.lastChild;this.frontier.push({type:T.type,match:T.contentMatchAt(T.childCount)}),M=T.content}this.unplaced=x?e==0?W.empty:new W(oo(o.content,e-1,1),e-1,S<0?o.openEnd:e-1):new W(oo(o.content,e,d),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!Ap(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:i}=this.$to,l=this.$to.after(i);for(;i>1&&l==this.$to.end(--i);)++l;return l}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:i,type:l}=this.frontier[t],a=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),o=Ap(e,t,l,i,a);if(o){for(let c=t-1;c>=0;c--){let{match:f,type:d}=this.frontier[c],p=Ap(e,c,d,f,!0);if(!p||p.childCount)continue e}return{depth:t,fit:o,move:a?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=uo(this.placed,t.depth,t.fit)),e=t.move;for(let i=t.depth+1;i<=e.depth;i++){let l=e.node(i),a=l.type.contentMatch.fillBefore(l.content,!0,e.index(i));this.openFrontierNode(l.type,l.attrs,a)}return e}openFrontierNode(e,t=null,i){let l=this.frontier[this.depth];l.match=l.match.matchType(e),this.placed=uo(this.placed,this.depth,X.from(e.create(t,i))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(X.empty,!0);t.childCount&&(this.placed=uo(this.placed,this.frontier.length,t))}}function oo(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(oo(n.firstChild.content,e-1,t)))}function uo(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(uo(n.lastChild.content,e-1,t)))}function Np(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function xv(n,e,t){if(e<=0)return n;let i=n.content;return e>1&&(i=i.replaceChild(0,xv(i.firstChild,e-1,i.childCount==1?t-1:0))),e>0&&(i=n.type.contentMatch.fillBefore(i).append(i),t<=0&&(i=i.append(n.type.contentMatch.matchFragment(i).fillBefore(X.empty,!0)))),n.copy(i)}function Ap(n,e,t,i,l){let a=n.node(e),o=l?n.indexAfter(e):n.index(e);if(o==a.childCount&&!t.compatibleContent(a.type))return null;let c=i.fillBefore(a.content,!0,o);return c&&!bz(t,a.content,o)?c:null}function bz(n,e,t){for(let i=t;i<e.childCount;i++)if(!n.allowsMarks(e.child(i).marks))return!0;return!1}function Sz(n){return n.spec.defining||n.spec.definingForContent}function kz(n,e,t,i){if(!i.size)return n.deleteRange(e,t);let l=n.doc.resolve(e),a=n.doc.resolve(t);if(kv(l,a,i))return n.step(new Nt(e,t,i));let o=vv(l,a);o[o.length-1]==0&&o.pop();let c=-(l.depth+1);o.unshift(c);for(let b=l.depth,S=l.pos-1;b>0;b--,S--){let x=l.node(b).type.spec;if(x.defining||x.definingAsContext||x.isolating)break;o.indexOf(b)>-1?c=b:l.before(b)==S&&o.splice(1,0,-b)}let f=o.indexOf(c),d=[],p=i.openStart;for(let b=i.content,S=0;;S++){let x=b.firstChild;if(d.push(x),S==i.openStart)break;b=x.content}for(let b=p-1;b>=0;b--){let S=d[b],x=Sz(S.type);if(x&&!S.sameMarkup(l.node(Math.abs(c)-1)))p=b;else if(x||!S.type.isTextblock)break}for(let b=i.openStart;b>=0;b--){let S=(b+p+1)%(i.openStart+1),x=d[S];if(x)for(let v=0;v<o.length;v++){let M=o[(v+f)%o.length],T=!0;M<0&&(T=!1,M=-M);let Q=l.node(M-1),L=l.index(M-1);if(Q.canReplaceWith(L,L,x.type,x.marks))return n.replace(l.before(M),T?a.after(M):t,new W(Cv(i.content,0,i.openStart,S),S,i.openEnd))}}let g=n.steps.length;for(let b=o.length-1;b>=0&&(n.replace(e,t,i),!(n.steps.length>g));b--){let S=o[b];S<0||(e=l.before(S),t=a.after(S))}}function Cv(n,e,t,i,l){if(e<t){let a=n.firstChild;n=n.replaceChild(0,a.copy(Cv(a.content,e+1,t,i,a)))}if(e>i){let a=l.contentMatchAt(0),o=a.fillBefore(n).append(n);n=o.append(a.matchFragment(o).fillBefore(X.empty,!0))}return n}function xz(n,e,t,i){if(!i.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let l=mz(n.doc,e,i.type);l!=null&&(e=t=l)}n.replaceRange(e,t,new W(X.from(i),0,0))}function Cz(n,e,t){let i=n.doc.resolve(e),l=n.doc.resolve(t),a=vv(i,l);for(let o=0;o<a.length;o++){let c=a[o],f=o==a.length-1;if(f&&c==0||i.node(c).type.contentMatch.validEnd)return n.delete(i.start(c),l.end(c));if(c>0&&(f||i.node(c-1).canReplace(i.index(c-1),l.indexAfter(c-1))))return n.delete(i.before(c),l.after(c))}for(let o=1;o<=i.depth&&o<=l.depth;o++)if(e-i.start(o)==i.depth-o&&t>i.end(o)&&l.end(o)-t!=l.depth-o&&i.start(o-1)==l.start(o-1)&&i.node(o-1).canReplace(i.index(o-1),l.index(o-1)))return n.delete(i.before(o),t);n.delete(e,t)}function vv(n,e){let t=[],i=Math.min(n.depth,e.depth);for(let l=i;l>=0;l--){let a=n.start(l);if(a<n.pos-(n.depth-l)||e.end(l)>e.pos+(e.depth-l)||n.node(l).type.spec.isolating||e.node(l).type.spec.isolating)break;(a==e.start(l)||l==n.depth&&l==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&l&&e.start(l-1)==a-1)&&t.push(l)}return t}class Vs extends Gt{constructor(e,t,i){super(),this.pos=e,this.attr=t,this.value=i}apply(e){let t=e.nodeAt(this.pos);if(!t)return xt.fail("No node at attribute step's position");let i=Object.create(null);for(let a in t.attrs)i[a]=t.attrs[a];i[this.attr]=this.value;let l=t.type.create(i,null,t.marks);return xt.fromReplace(e,this.pos,this.pos+1,new W(X.from(l),0,t.isLeaf?0:1))}getMap(){return En.empty}invert(e){return new Vs(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Vs(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Vs(t.pos,t.attr,t.value)}}Gt.jsonID("attr",Vs);class zo extends Gt{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let l in e.attrs)t[l]=e.attrs[l];t[this.attr]=this.value;let i=e.type.create(t,e.content,e.marks);return xt.ok(i)}getMap(){return En.empty}invert(e){return new zo(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new zo(t.attr,t.value)}}Gt.jsonID("docAttr",zo);let Ys=class extends Error{};Ys=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};Ys.prototype=Object.create(Error.prototype);Ys.prototype.constructor=Ys;Ys.prototype.name="TransformError";class wv{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Do}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new Ys(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,i=W.empty){let l=Lf(this.doc,e,t,i);return l&&this.step(l),this}replaceWith(e,t,i){return this.replace(e,t,new W(X.from(i),0,0))}delete(e,t){return this.replace(e,t,W.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,i){return kz(this,e,t,i),this}replaceRangeWith(e,t,i){return xz(this,e,t,i),this}deleteRange(e,t){return Cz(this,e,t),this}lift(e,t){return rz(this,e,t),this}join(e,t=1){return pz(this,e,t),this}wrap(e,t){return az(this,e,t),this}setBlockType(e,t=e,i,l=null){return oz(this,e,t,i,l),this}setNodeMarkup(e,t,i=null,l){return cz(this,e,t,i,l),this}setNodeAttribute(e,t,i){return this.step(new Vs(e,t,i)),this}setDocAttribute(e,t){return this.step(new zo(e,t)),this}addNodeMark(e,t){return this.step(new Ir(e,t)),this}removeNodeMark(e,t){let i=this.doc.nodeAt(e);if(!i)throw new RangeError("No node at position "+e);if(t instanceof He)t.isInSet(i.marks)&&this.step(new zl(e,t));else{let l=i.marks,a,o=[];for(;a=t.isInSet(l);)o.push(new zl(e,a)),l=a.removeFromSet(l);for(let c=o.length-1;c>=0;c--)this.step(o[c])}return this}split(e,t=1,i){return fz(this,e,t,i),this}addMark(e,t,i){return tz(this,e,t,i),this}removeMark(e,t,i){return nz(this,e,t,i),this}clearIncompatible(e,t,i){return gg(this,e,t,i),this}}const Op=Object.create(null);class Ce{constructor(e,t,i){this.$anchor=e,this.$head=t,this.ranges=i||[new Tv(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=W.empty){let i=t.content.lastChild,l=null;for(let c=0;c<t.openEnd;c++)l=i,i=i.lastChild;let a=e.steps.length,o=this.ranges;for(let c=0;c<o.length;c++){let{$from:f,$to:d}=o[c],p=e.mapping.slice(a);e.replaceRange(p.map(f.pos),p.map(d.pos),c?W.empty:t),c==0&&Uk(e,a,(i?i.isInline:l&&l.isTextblock)?-1:1)}}replaceWith(e,t){let i=e.steps.length,l=this.ranges;for(let a=0;a<l.length;a++){let{$from:o,$to:c}=l[a],f=e.mapping.slice(i),d=f.map(o.pos),p=f.map(c.pos);a?e.deleteRange(d,p):(e.replaceRangeWith(d,p,t),Uk(e,i,t.isInline?-1:1))}}static findFrom(e,t,i=!1){let l=e.parent.inlineContent?new we(e):Bs(e.node(0),e.parent,e.pos,e.index(),t,i);if(l)return l;for(let a=e.depth-1;a>=0;a--){let o=t<0?Bs(e.node(0),e.node(a),e.before(a+1),e.index(a),t,i):Bs(e.node(0),e.node(a),e.after(a+1),e.index(a)+1,t,i);if(o)return o}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new On(e.node(0))}static atStart(e){return Bs(e,e,0,0,1)||new On(e)}static atEnd(e){return Bs(e,e,e.content.size,e.childCount,-1)||new On(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let i=Op[t.type];if(!i)throw new RangeError(`No selection type ${t.type} defined`);return i.fromJSON(e,t)}static jsonID(e,t){if(e in Op)throw new RangeError("Duplicate use of selection JSON ID "+e);return Op[e]=t,t.prototype.jsonID=e,t}getBookmark(){return we.between(this.$anchor,this.$head).getBookmark()}}Ce.prototype.visible=!0;class Tv{constructor(e,t){this.$from=e,this.$to=t}}let qk=!1;function Hk(n){!qk&&!n.parent.inlineContent&&(qk=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class we extends Ce{constructor(e,t=e){Hk(e),Hk(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let i=e.resolve(t.map(this.head));if(!i.parent.inlineContent)return Ce.near(i);let l=e.resolve(t.map(this.anchor));return new we(l.parent.inlineContent?l:i,i)}replace(e,t=W.empty){if(super.replace(e,t),t==W.empty){let i=this.$from.marksAcross(this.$to);i&&e.ensureMarks(i)}}eq(e){return e instanceof we&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new If(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new we(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,i=t){let l=e.resolve(t);return new this(l,i==t?l:e.resolve(i))}static between(e,t,i){let l=e.pos-t.pos;if((!i||l)&&(i=l>=0?1:-1),!t.parent.inlineContent){let a=Ce.findFrom(t,i,!0)||Ce.findFrom(t,-i,!0);if(a)t=a.$head;else return Ce.near(t,i)}return e.parent.inlineContent||(l==0?e=t:(e=(Ce.findFrom(e,-i,!0)||Ce.findFrom(e,i,!0)).$anchor,e.pos<t.pos!=l<0&&(e=t))),new we(e,t)}}Ce.jsonID("text",we);class If{constructor(e,t){this.anchor=e,this.head=t}map(e){return new If(e.map(this.anchor),e.map(this.head))}resolve(e){return we.between(e.resolve(this.anchor),e.resolve(this.head))}}class be extends Ce{constructor(e){let t=e.nodeAfter,i=e.node(0).resolve(e.pos+t.nodeSize);super(e,i),this.node=t}map(e,t){let{deleted:i,pos:l}=t.mapResult(this.anchor),a=e.resolve(l);return i?Ce.near(a):new be(a)}content(){return new W(X.from(this.node),0,0)}eq(e){return e instanceof be&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new bg(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new be(e.resolve(t.anchor))}static create(e,t){return new be(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}be.prototype.visible=!1;Ce.jsonID("node",be);class bg{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:i}=e.mapResult(this.anchor);return t?new If(i,i):new bg(i)}resolve(e){let t=e.resolve(this.anchor),i=t.nodeAfter;return i&&be.isSelectable(i)?new be(t):Ce.near(t)}}class On extends Ce{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=W.empty){if(t==W.empty){e.delete(0,e.doc.content.size);let i=Ce.atStart(e.doc);i.eq(e.selection)||e.setSelection(i)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new On(e)}map(e){return new On(e)}eq(e){return e instanceof On}getBookmark(){return vz}}Ce.jsonID("all",On);const vz={map(){return this},resolve(n){return new On(n)}};function Bs(n,e,t,i,l,a=!1){if(e.inlineContent)return we.create(n,t);for(let o=i-(l>0?0:1);l>0?o<e.childCount:o>=0;o+=l){let c=e.child(o);if(c.isAtom){if(!a&&be.isSelectable(c))return be.create(n,t-(l<0?c.nodeSize:0))}else{let f=Bs(n,c,t+l,l<0?c.childCount:0,l,a);if(f)return f}t+=c.nodeSize*l}return null}function Uk(n,e,t){let i=n.steps.length-1;if(i<e)return;let l=n.steps[i];if(!(l instanceof Nt||l instanceof Kt))return;let a=n.mapping.maps[i],o;a.forEach((c,f,d,p)=>{o==null&&(o=p)}),n.setSelection(Ce.near(n.doc.resolve(o),t))}const Vk=1,Ec=2,jk=4;class wz extends wv{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Vk)&~Ec,this.storedMarks=null,this}get selectionSet(){return(this.updated&Vk)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Ec,this}ensureMarks(e){return He.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Ec)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~Ec,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let i=this.selection;return t&&(e=e.mark(this.storedMarks||(i.empty?i.$from.marks():i.$from.marksAcross(i.$to)||He.none))),i.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,i){let l=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(l.text(e),!0):this.deleteSelection();{if(i==null&&(i=t),!e)return this.deleteRange(t,i);let a=this.storedMarks;if(!a){let o=this.doc.resolve(t);a=i==t?o.marks():o.marksAcross(this.doc.resolve(i))}return this.replaceRangeWith(t,i,l.text(e,a)),!this.selection.empty&&this.selection.to==t+e.length&&this.setSelection(Ce.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=jk,this}get scrolledIntoView(){return(this.updated&jk)>0}}function Fk(n,e){return!e||!n?n:n.bind(e)}class co{constructor(e,t,i){this.name=e,this.init=Fk(t.init,i),this.apply=Fk(t.apply,i)}}const Tz=[new co("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new co("selection",{init(n,e){return n.selection||Ce.atStart(e.doc)},apply(n){return n.selection}}),new co("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,i){return i.selection.$cursor?n.storedMarks:null}}),new co("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class Rp{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Tz.slice(),t&&t.forEach(i=>{if(this.pluginsByKey[i.key])throw new RangeError("Adding different instances of a keyed plugin ("+i.key+")");this.plugins.push(i),this.pluginsByKey[i.key]=i,i.spec.state&&this.fields.push(new co(i.key,i.spec.state,i))})}}class Us{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let i=0;i<this.config.plugins.length;i++)if(i!=t){let l=this.config.plugins[i];if(l.spec.filterTransaction&&!l.spec.filterTransaction.call(l,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],i=this.applyInner(e),l=null;for(;;){let a=!1;for(let o=0;o<this.config.plugins.length;o++){let c=this.config.plugins[o];if(c.spec.appendTransaction){let f=l?l[o].n:0,d=l?l[o].state:this,p=f<t.length&&c.spec.appendTransaction.call(c,f?t.slice(f):t,d,i);if(p&&i.filterTransaction(p,o)){if(p.setMeta("appendedTransaction",e),!l){l=[];for(let g=0;g<this.config.plugins.length;g++)l.push(g<o?{state:i,n:t.length}:{state:this,n:0})}t.push(p),i=i.applyInner(p),a=!0}l&&(l[o]={state:i,n:t.length})}}if(!a)return{state:i,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Us(this.config),i=this.config.fields;for(let l=0;l<i.length;l++){let a=i[l];t[a.name]=a.apply(e,this[a.name],this,t)}return t}get tr(){return new wz(this)}static create(e){let t=new Rp(e.doc?e.doc.type.schema:e.schema,e.plugins),i=new Us(t);for(let l=0;l<t.fields.length;l++)i[t.fields[l].name]=t.fields[l].init(e,i);return i}reconfigure(e){let t=new Rp(this.schema,e.plugins),i=t.fields,l=new Us(t);for(let a=0;a<i.length;a++){let o=i[a].name;l[o]=this.hasOwnProperty(o)?this[o]:i[a].init(e,l)}return l}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(i=>i.toJSON())),e&&typeof e=="object")for(let i in e){if(i=="doc"||i=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let l=e[i],a=l.spec.state;a&&a.toJSON&&(t[i]=a.toJSON.call(l,this[l.key]))}return t}static fromJSON(e,t,i){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let l=new Rp(e.schema,e.plugins),a=new Us(l);return l.fields.forEach(o=>{if(o.name=="doc")a.doc=Xn.fromJSON(e.schema,t.doc);else if(o.name=="selection")a.selection=Ce.fromJSON(a.doc,t.selection);else if(o.name=="storedMarks")t.storedMarks&&(a.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(i)for(let c in i){let f=i[c],d=f.spec.state;if(f.key==o.name&&d&&d.fromJSON&&Object.prototype.hasOwnProperty.call(t,c)){a[o.name]=d.fromJSON.call(f,e,t[c],a);return}}a[o.name]=o.init(e,a)}}),a}}function Mv(n,e,t){for(let i in n){let l=n[i];l instanceof Function?l=l.bind(e):i=="handleDOMEvents"&&(l=Mv(l,e,{})),t[i]=l}return t}class Qt{constructor(e){this.spec=e,this.props={},e.props&&Mv(e.props,this,this.props),this.key=e.key?e.key.key:Ev("plugin")}getState(e){return e[this.key]}}const Dp=Object.create(null);function Ev(n){return n in Dp?n+"$"+ ++Dp[n]:(Dp[n]=0,n+"$")}class Vt{constructor(e="key"){this.key=Ev(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Sg=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function Nv(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const Av=(n,e,t)=>{let i=Nv(n,t);if(!i)return!1;let l=kg(i);if(!l){let o=i.blockRange(),c=o&&_f(o);return c==null?!1:(e&&e(n.tr.lift(o,c).scrollIntoView()),!0)}let a=l.nodeBefore;if(Dv(n,l,e,-1))return!0;if(i.parent.content.size==0&&(Gs(a,"end")||be.isSelectable(a)))for(let o=i.depth;;o--){let c=Lf(n.doc,i.before(o),i.after(o),W.empty);if(c&&c.slice.size<c.to-c.from){if(e){let f=n.tr.step(c);f.setSelection(Gs(a,"end")?Ce.findFrom(f.doc.resolve(f.mapping.map(l.pos,-1)),-1):be.create(f.doc,l.pos-a.nodeSize)),e(f.scrollIntoView())}return!0}if(o==1||i.node(o-1).childCount>1)break}return a.isAtom&&l.depth==i.depth-1?(e&&e(n.tr.delete(l.pos-a.nodeSize,l.pos).scrollIntoView()),!0):!1},Mz=(n,e,t)=>{let i=Nv(n,t);if(!i)return!1;let l=kg(i);return l?Ez(n,l,e):!1};function Ez(n,e,t){let i=e.nodeBefore,l=i,a=e.pos-1;for(;!l.isTextblock;a--){if(l.type.spec.isolating)return!1;let p=l.lastChild;if(!p)return!1;l=p}let o=e.nodeAfter,c=o,f=e.pos+1;for(;!c.isTextblock;f++){if(c.type.spec.isolating)return!1;let p=c.firstChild;if(!p)return!1;c=p}let d=Lf(n.doc,a,f,W.empty);if(!d||d.from!=a||d instanceof Nt&&d.slice.size>=f-a)return!1;if(t){let p=n.tr.step(d);p.setSelection(we.create(p.doc,a)),t(p.scrollIntoView())}return!0}function Gs(n,e,t=!1){for(let i=n;i;i=e=="start"?i.firstChild:i.lastChild){if(i.isTextblock)return!0;if(t&&i.childCount!=1)return!1}return!1}const Ov=(n,e,t)=>{let{$head:i,empty:l}=n.selection,a=i;if(!l)return!1;if(i.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):i.parentOffset>0)return!1;a=kg(i)}let o=a&&a.nodeBefore;return!o||!be.isSelectable(o)?!1:(e&&e(n.tr.setSelection(be.create(n.doc,a.pos-o.nodeSize)).scrollIntoView()),!0)};function kg(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function Nz(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const Az=(n,e,t)=>{let i=Nz(n,t);if(!i)return!1;let l=Rv(i);if(!l)return!1;let a=l.nodeAfter;if(Dv(n,l,e,1))return!0;if(i.parent.content.size==0&&(Gs(a,"start")||be.isSelectable(a))){let o=Lf(n.doc,i.before(),i.after(),W.empty);if(o&&o.slice.size<o.to-o.from){if(e){let c=n.tr.step(o);c.setSelection(Gs(a,"start")?Ce.findFrom(c.doc.resolve(c.mapping.map(l.pos)),1):be.create(c.doc,c.mapping.map(l.pos))),e(c.scrollIntoView())}return!0}}return a.isAtom&&l.depth==i.depth-1?(e&&e(n.tr.delete(l.pos,l.pos+a.nodeSize).scrollIntoView()),!0):!1},Oz=(n,e,t)=>{let{$head:i,empty:l}=n.selection,a=i;if(!l)return!1;if(i.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):i.parentOffset<i.parent.content.size)return!1;a=Rv(i)}let o=a&&a.nodeAfter;return!o||!be.isSelectable(o)?!1:(e&&e(n.tr.setSelection(be.create(n.doc,a.pos)).scrollIntoView()),!0)};function Rv(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const Rz=(n,e)=>{let{$head:t,$anchor:i}=n.selection;return!t.parent.type.spec.code||!t.sameParent(i)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function xg(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const Dz=(n,e)=>{let{$head:t,$anchor:i}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(i))return!1;let l=t.node(-1),a=t.indexAfter(-1),o=xg(l.contentMatchAt(a));if(!o||!l.canReplaceWith(a,a,o))return!1;if(e){let c=t.after(),f=n.tr.replaceWith(c,c,o.createAndFill());f.setSelection(Ce.near(f.doc.resolve(c),1)),e(f.scrollIntoView())}return!0},zz=(n,e)=>{let t=n.selection,{$from:i,$to:l}=t;if(t instanceof On||i.parent.inlineContent||l.parent.inlineContent)return!1;let a=xg(l.parent.contentMatchAt(l.indexAfter()));if(!a||!a.isTextblock)return!1;if(e){let o=(!i.parentOffset&&l.index()<l.parent.childCount?i:l).pos,c=n.tr.insert(o,a.createAndFill());c.setSelection(we.create(c.doc,o+1)),e(c.scrollIntoView())}return!0},_z=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let a=t.before();if(yo(n.doc,a))return e&&e(n.tr.split(a).scrollIntoView()),!0}let i=t.blockRange(),l=i&&_f(i);return l==null?!1:(e&&e(n.tr.lift(i,l).scrollIntoView()),!0)};function Bz(n){return(e,t)=>{let{$from:i,$to:l}=e.selection;if(e.selection instanceof be&&e.selection.node.isBlock)return!i.parentOffset||!yo(e.doc,i.pos)?!1:(t&&t(e.tr.split(i.pos).scrollIntoView()),!0);if(!i.depth)return!1;let a=[],o,c,f=!1,d=!1;for(let S=i.depth;;S--)if(i.node(S).isBlock){f=i.end(S)==i.pos+(i.depth-S),d=i.start(S)==i.pos-(i.depth-S),c=xg(i.node(S-1).contentMatchAt(i.indexAfter(S-1))),a.unshift(f&&c?{type:c}:null),o=S;break}else{if(S==1)return!1;a.unshift(null)}let p=e.tr;(e.selection instanceof we||e.selection instanceof On)&&p.deleteSelection();let g=p.mapping.map(i.pos),b=yo(p.doc,g,a.length,a);if(b||(a[0]=c?{type:c}:null,b=yo(p.doc,g,a.length,a)),!b)return!1;if(p.split(g,a.length,a),!f&&d&&i.node(o).type!=c){let S=p.mapping.map(i.before(o)),x=p.doc.resolve(S);c&&i.node(o-1).canReplaceWith(x.index(),x.index()+1,c)&&p.setNodeMarkup(p.mapping.map(i.before(o)),c)}return t&&t(p.scrollIntoView()),!0}}const Lz=Bz(),Iz=(n,e)=>(e&&e(n.tr.setSelection(new On(n.doc))),!0);function qz(n,e,t){let i=e.nodeBefore,l=e.nodeAfter,a=e.index();return!i||!l||!i.type.compatibleContent(l.type)?!1:!i.content.size&&e.parent.canReplace(a-1,a)?(t&&t(n.tr.delete(e.pos-i.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(a,a+1)||!(l.isTextblock||Bf(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function Dv(n,e,t,i){let l=e.nodeBefore,a=e.nodeAfter,o,c,f=l.type.spec.isolating||a.type.spec.isolating;if(!f&&qz(n,e,t))return!0;let d=!f&&e.parent.canReplace(e.index(),e.index()+1);if(d&&(o=(c=l.contentMatchAt(l.childCount)).findWrapping(a.type))&&c.matchType(o[0]||a.type).validEnd){if(t){let S=e.pos+a.nodeSize,x=X.empty;for(let T=o.length-1;T>=0;T--)x=X.from(o[T].create(null,x));x=X.from(l.copy(x));let v=n.tr.step(new Kt(e.pos-1,S,e.pos,S,new W(x,1,0),o.length,!0)),M=v.doc.resolve(S+2*o.length);M.nodeAfter&&M.nodeAfter.type==l.type&&Bf(v.doc,M.pos)&&v.join(M.pos),t(v.scrollIntoView())}return!0}let p=a.type.spec.isolating||i>0&&f?null:Ce.findFrom(e,1),g=p&&p.$from.blockRange(p.$to),b=g&&_f(g);if(b!=null&&b>=e.depth)return t&&t(n.tr.lift(g,b).scrollIntoView()),!0;if(d&&Gs(a,"start",!0)&&Gs(l,"end")){let S=l,x=[];for(;x.push(S),!S.isTextblock;)S=S.lastChild;let v=a,M=1;for(;!v.isTextblock;v=v.firstChild)M++;if(S.canReplace(S.childCount,S.childCount,v.content)){if(t){let T=X.empty;for(let L=x.length-1;L>=0;L--)T=X.from(x[L].copy(T));let Q=n.tr.step(new Kt(e.pos-x.length,e.pos+a.nodeSize,e.pos+M,e.pos+a.nodeSize-M,new W(T,x.length,0),0,!0));t(Q.scrollIntoView())}return!0}}return!1}function zv(n){return function(e,t){let i=e.selection,l=n<0?i.$from:i.$to,a=l.depth;for(;l.node(a).isInline;){if(!a)return!1;a--}return l.node(a).isTextblock?(t&&t(e.tr.setSelection(we.create(e.doc,n<0?l.start(a):l.end(a)))),!0):!1}}const Hz=zv(-1),Uz=zv(1);function Cg(n,e=null){return function(t,i){let{$from:l,$to:a}=t.selection,o=l.blockRange(a),c=o&&yg(o,n,e);return c?(i&&i(t.tr.wrap(o,c).scrollIntoView()),!0):!1}}function _o(n,e=null){return function(t,i){let l=!1;for(let a=0;a<t.selection.ranges.length&&!l;a++){let{$from:{pos:o},$to:{pos:c}}=t.selection.ranges[a];t.doc.nodesBetween(o,c,(f,d)=>{if(l)return!1;if(!(!f.isTextblock||f.hasMarkup(n,e)))if(f.type==n)l=!0;else{let p=t.doc.resolve(d),g=p.index();l=p.parent.canReplaceWith(g,g+1,n)}})}if(!l)return!1;if(i){let a=t.tr;for(let o=0;o<t.selection.ranges.length;o++){let{$from:{pos:c},$to:{pos:f}}=t.selection.ranges[o];a.setBlockType(c,f,n,e)}i(a.scrollIntoView())}return!0}}function Vz(n,e,t,i){for(let l=0;l<e.length;l++){let{$from:a,$to:o}=e[l],c=a.depth==0?n.inlineContent&&n.type.allowsMarkType(t):!1;if(n.nodesBetween(a.pos,o.pos,(f,d)=>{if(c)return!1;c=f.inlineContent&&f.type.allowsMarkType(t)}),c)return!0}return!1}function qf(n,e=null,t){return function(i,l){let{empty:a,$cursor:o,ranges:c}=i.selection;if(a&&!o||!Vz(i.doc,c,n))return!1;if(l)if(o)n.isInSet(i.storedMarks||o.marks())?l(i.tr.removeStoredMark(n)):l(i.tr.addStoredMark(n.create(e)));else{let f,d=i.tr;f=!c.some(p=>i.doc.rangeHasMark(p.$from.pos,p.$to.pos,n));for(let p=0;p<c.length;p++){let{$from:g,$to:b}=c[p];if(!f)d.removeMark(g.pos,b.pos,n);else{let S=g.pos,x=b.pos,v=g.nodeAfter,M=b.nodeBefore,T=v&&v.isText?/^\s*/.exec(v.text)[0].length:0,Q=M&&M.isText?/\s*$/.exec(M.text)[0].length:0;S+T<x&&(S+=T,x-=Q),d.addMark(S,x,n.create(e))}}l(d.scrollIntoView())}return!0}}function Zs(...n){return function(e,t,i){for(let l=0;l<n.length;l++)if(n[l](e,t,i))return!0;return!1}}let zp=Zs(Sg,Av,Ov),Kk=Zs(Sg,Az,Oz);const Ji={Enter:Zs(Rz,zz,_z,Lz),"Mod-Enter":Dz,Backspace:zp,"Mod-Backspace":zp,"Shift-Backspace":zp,Delete:Kk,"Mod-Delete":Kk,"Mod-a":Iz},_v={"Ctrl-h":Ji.Backspace,"Alt-Backspace":Ji["Mod-Backspace"],"Ctrl-d":Ji.Delete,"Ctrl-Alt-Backspace":Ji["Mod-Delete"],"Alt-Delete":Ji["Mod-Delete"],"Alt-d":Ji["Mod-Delete"],"Ctrl-a":Hz,"Ctrl-e":Uz};for(let n in Ji)_v[n]=Ji[n];const jz=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform?os.platform()=="darwin":!1,Fz=jz?_v:Ji;class Dn{constructor(e,t,i={}){this.match=e,this.match=e,this.handler=typeof t=="string"?Kz(t):t,this.undoable=i.undoable!==!1,this.inCode=i.inCode||!1,this.inCodeMark=i.inCodeMark!==!1}}function Kz(n){return function(e,t,i,l){let a=n;if(t[1]){let o=t[0].lastIndexOf(t[1]);a+=t[0].slice(o+t[1].length),i+=o;let c=i-l;c>0&&(a=t[0].slice(o-c,o)+a,i=l)}return e.tr.insertText(a,i,l)}}const Yz=(n,e)=>{let t=n.plugins;for(let i=0;i<t.length;i++){let l=t[i],a;if(l.spec.isInputRules&&(a=l.getState(n))){if(e){let o=n.tr,c=a.transform;for(let f=c.steps.length-1;f>=0;f--)o.step(c.steps[f].invert(c.docs[f]));if(a.text){let f=o.doc.resolve(a.from).marks();o.replaceWith(a.from,a.to,n.schema.text(a.text,f))}else o.delete(a.from,a.to);e(o)}return!0}}return!1};new Dn(/--$/,"",{inCodeMark:!1});new Dn(/\.\.\.$/,"",{inCodeMark:!1});new Dn(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"",{inCodeMark:!1});new Dn(/"$/,"",{inCodeMark:!1});new Dn(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"",{inCodeMark:!1});new Dn(/'$/,"",{inCodeMark:!1});function vg(n,e,t=null,i){return new Dn(n,(l,a,o,c)=>{let f=t instanceof Function?t(a):t,d=l.tr.delete(o,c),p=d.doc.resolve(o),g=p.blockRange(),b=g&&yg(g,e,f);if(!b)return null;d.wrap(g,b);let S=d.doc.resolve(o-1).nodeBefore;return S&&S.type==e&&Bf(d.doc,o-1)&&(!i||i(a,S))&&d.join(o-1),d})}function Bv(n,e,t=null){return new Dn(n,(i,l,a,o)=>{let c=i.doc.resolve(a),f=t instanceof Function?t(l):t;return c.node(-1).canReplaceWith(c.index(-1),c.indexAfter(-1),e)?i.tr.delete(a,o).setBlockType(a,a,e,f):null})}const Yr=typeof navigator<"u"?navigator:null,Yk=typeof document<"u"?document:null,ql=Yr&&Yr.userAgent||"",Nm=/Edge\/(\d+)/.exec(ql),Lv=/MSIE \d/.exec(ql),Am=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ql),wg=!!(Lv||Am||Nm);Lv?document.documentMode:Am?+Am[1]:Nm&&+Nm[1];const Gz=!wg&&/gecko\/(\d+)/i.test(ql);Gz&&+(/Firefox\/(\d+)/.exec(ql)||[0,0])[1];const Gk=!wg&&/Chrome\/(\d+)/.exec(ql);Gk&&+Gk[1];const Qz=!wg&&!!Yr&&/Apple Computer/.test(Yr.vendor),Xz=Qz&&(/Mobile\/\w+/.test(ql)||!!Yr&&Yr.maxTouchPoints>2);Xz||Yr&&/Mac/.test(Yr.platform);const Jz=!!Yk&&"webkitFontSmoothing"in Yk.documentElement.style;Jz&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];function _p(n,e,t,i,l,a){if(n.composing)return!1;const o=n.state,c=o.doc.resolve(e);if(c.parent.type.spec.code)return!1;const f=c.parent.textBetween(Math.max(0,c.parentOffset-500),c.parentOffset,void 0,"")+i;for(let d of l){const p=d,g=p.match.exec(f),b=g&&g[0]&&p.handler(o,g,e-(g[0].length-i.length),t);if(b)return p.undoable!==!1&&b.setMeta(a,{transform:b,from:e,to:t,text:i}),n.dispatch(b),!0}return!1}const Zz=new Vt("MILKDOWN_CUSTOM_INPUTRULES");function $z({rules:n}){const e=new Qt({key:Zz,isInputRules:!0,state:{init(){return null},apply(t,i){const l=t.getMeta(this);return l||(t.selectionSet||t.docChanged?null:i)}},props:{handleTextInput(t,i,l,a){return _p(t,i,l,a,n,e)},handleDOMEvents:{compositionend:t=>(setTimeout(()=>{const{$cursor:i}=t.state.selection;i&&_p(t,i.pos,i.pos,"",n,e)}),!1)},handleKeyDown(t,i){if(i.key!=="Enter")return!1;const{$cursor:l}=t.state.selection;return l?_p(t,l.pos,l.pos,`
`,n,e):!1}}});return e}function Fo(n,e,t={}){return new Dn(n,(i,l,a,o)=>{var c,f,d,p;const{tr:g}=i,b=l.length;let S=l[b-1],x=l[0],v=[],M=o;const T={group:S,fullMatch:x,start:a,end:o},Q=(c=t.updateCaptured)==null?void 0:c.call(t,T);if(Object.assign(T,Q),{group:S,fullMatch:x,start:a,end:o}=T,x===null||S?.trim()==="")return null;if(S){const L=x.search(/\S/),P=a+x.indexOf(S),ee=P+S.length;v=(f=g.storedMarks)!=null?f:[],ee<o&&g.delete(ee,o),P>a&&g.delete(a+L,P),M=a+L+S.length;const z=(d=t.getAttr)==null?void 0:d.call(t,l);g.addMark(a,M,e.create(z)),g.setStoredMarks(v),(p=t.beforeDispatch)==null||p.call(t,{match:l,start:a,end:o,tr:g})}return g})}function Iv(n){return Object.assign(Object.create(n),n).setTime(Date.now())}function Pz(n,e){return Array.isArray(n)&&n.includes(e.type)||e.type===n}function Wz(n){if(n.content.childCount===1){const e=n.content.firstChild;if(e?.type.name==="text"&&e.marks.length===0)return e;if(e?.type.name==="paragraph"&&e.childCount===1){const t=e.firstChild;if(t?.type.name==="text"&&t.marks.length===0)return t}}return!1}function e2(n){return e=>{for(let t=e.depth;t>0;t-=1){const i=e.node(t);if(n(i)){const l=e.before(t),a=e.after(t);return{from:l,to:a,node:i}}}}}function t2(n,e){return e2(t=>t.type===e)(n)}function n2(n,e){const t=e.nodes[n];if(!t)throw YN("node",n);return t}function i2(n){return e=>{for(let t=e.depth;t>0;t--){const i=e.node(t);if(n(i))return{pos:t>0?e.before(t):0,start:e.start(t),depth:t,node:i}}}}function r2(n,e){if(!(n instanceof be))return;const{node:t,$from:i}=n;if(Pz(e,t))return{node:t,pos:i.pos,start:i.start(i.depth),depth:i.depth}}const l2=(n,e)=>{const{selection:t,doc:i}=n;if(t instanceof be)return{hasNode:t.node.type===e,pos:t.from,target:t.node};const{from:l,to:a}=t;let o=!1,c=-1,f=null;return i.nodesBetween(l,a,(d,p)=>f?!1:d.type===e?(o=!0,c=p,f=d,!1):!0),{hasNode:o,pos:c,target:f}};var Gr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},sf={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},s2=typeof navigator<"u"&&/Mac/.test(navigator.platform),a2=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var qt=0;qt<10;qt++)Gr[48+qt]=Gr[96+qt]=String(qt);for(var qt=1;qt<=24;qt++)Gr[qt+111]="F"+qt;for(var qt=65;qt<=90;qt++)Gr[qt]=String.fromCharCode(qt+32),sf[qt]=String.fromCharCode(qt);for(var Bp in Gr)sf.hasOwnProperty(Bp)||(sf[Bp]=Gr[Bp]);function o2(n){var e=s2&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||a2&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?sf:Gr)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const u2=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),c2=typeof navigator<"u"&&/Win/.test(navigator.platform);function f2(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let i,l,a,o;for(let c=0;c<e.length-1;c++){let f=e[c];if(/^(cmd|meta|m)$/i.test(f))o=!0;else if(/^a(lt)?$/i.test(f))i=!0;else if(/^(c|ctrl|control)$/i.test(f))l=!0;else if(/^s(hift)?$/i.test(f))a=!0;else if(/^mod$/i.test(f))u2?o=!0:l=!0;else throw new Error("Unrecognized modifier name: "+f)}return i&&(t="Alt-"+t),l&&(t="Ctrl-"+t),o&&(t="Meta-"+t),a&&(t="Shift-"+t),t}function h2(n){let e=Object.create(null);for(let t in n)e[f2(t)]=n[t];return e}function Lp(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function d2(n){return new Qt({props:{handleKeyDown:qv(n)}})}function qv(n){let e=h2(n);return function(t,i){let l=o2(i),a,o=e[Lp(l,i)];if(o&&o(t.state,t.dispatch,t))return!0;if(l.length==1&&l!=" "){if(i.shiftKey){let c=e[Lp(l,i,!1)];if(c&&c(t.state,t.dispatch,t))return!0}if((i.altKey||i.metaKey||i.ctrlKey)&&!(c2&&i.ctrlKey&&i.altKey)&&(a=Gr[i.keyCode])&&a!=l){let c=e[Lp(a,i)];if(c&&c(t.state,t.dispatch,t))return!0}}return!1}}const Ht=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},Qs=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let Om=null;const Xi=function(n,e,t){let i=Om||(Om=document.createRange());return i.setEnd(n,t??n.nodeValue.length),i.setStart(n,e||0),i},p2=function(){Om=null},_l=function(n,e,t,i){return t&&(Qk(n,e,t,i,-1)||Qk(n,e,t,i,1))},m2=/^(img|br|input|textarea|hr)$/i;function Qk(n,e,t,i,l){for(var a;;){if(n==t&&e==i)return!0;if(e==(l<0?0:Qn(n))){let o=n.parentNode;if(!o||o.nodeType!=1||Ko(n)||m2.test(n.nodeName)||n.contentEditable=="false")return!1;e=Ht(n)+(l<0?0:1),n=o}else if(n.nodeType==1){let o=n.childNodes[e+(l<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((a=o.pmViewDesc)===null||a===void 0)&&a.ignoreForSelection)e+=l;else return!1;else n=o,e=l<0?Qn(n):0}else return!1}}function Qn(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function g2(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=Qn(n)}else if(n.parentNode&&!Ko(n))e=Ht(n),n=n.parentNode;else return null}}function y2(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!Ko(n))e=Ht(n)+1,n=n.parentNode;else return null}}function b2(n,e,t){for(let i=e==0,l=e==Qn(n);i||l;){if(n==t)return!0;let a=Ht(n);if(n=n.parentNode,!n)return!1;i=i&&a==0,l=l&&a==Qn(n)}}function Ko(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const Hf=function(n){return n.focusNode&&_l(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function Sl(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function S2(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function k2(n,e,t){if(n.caretPositionFromPoint)try{let i=n.caretPositionFromPoint(e,t);if(i)return{node:i.offsetNode,offset:Math.min(Qn(i.offsetNode),i.offset)}}catch{}if(n.caretRangeFromPoint){let i=n.caretRangeFromPoint(e,t);if(i)return{node:i.startContainer,offset:Math.min(Qn(i.startContainer),i.startOffset)}}}const bi=typeof navigator<"u"?navigator:null,Xk=typeof document<"u"?document:null,Zr=bi&&bi.userAgent||"",Rm=/Edge\/(\d+)/.exec(Zr),Hv=/MSIE \d/.exec(Zr),Dm=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Zr),dn=!!(Hv||Dm||Rm),Ur=Hv?document.documentMode:Dm?+Dm[1]:Rm?+Rm[1]:0,Jn=!dn&&/gecko\/(\d+)/i.test(Zr);Jn&&+(/Firefox\/(\d+)/.exec(Zr)||[0,0])[1];const zm=!dn&&/Chrome\/(\d+)/.exec(Zr),At=!!zm,Uv=zm?+zm[1]:0,Yt=!dn&&!!bi&&/Apple Computer/.test(bi.vendor),Xs=Yt&&(/Mobile\/\w+/.test(Zr)||!!bi&&bi.maxTouchPoints>2),Yn=Xs||(bi?/Mac/.test(bi.platform):!1),Vv=bi?/Win/.test(bi.platform):!1,$i=/Android \d/.test(Zr),Yo=!!Xk&&"webkitFontSmoothing"in Xk.documentElement.style,x2=Yo?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function C2(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function Ki(n,e){return typeof n=="number"?n:n[e]}function v2(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,i=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*i}}function Jk(n,e,t){let i=n.someProp("scrollThreshold")||0,l=n.someProp("scrollMargin")||5,a=n.dom.ownerDocument;for(let o=t||n.dom;o;){if(o.nodeType!=1){o=Qs(o);continue}let c=o,f=c==a.body,d=f?C2(a):v2(c),p=0,g=0;if(e.top<d.top+Ki(i,"top")?g=-(d.top-e.top+Ki(l,"top")):e.bottom>d.bottom-Ki(i,"bottom")&&(g=e.bottom-e.top>d.bottom-d.top?e.top+Ki(l,"top")-d.top:e.bottom-d.bottom+Ki(l,"bottom")),e.left<d.left+Ki(i,"left")?p=-(d.left-e.left+Ki(l,"left")):e.right>d.right-Ki(i,"right")&&(p=e.right-d.right+Ki(l,"right")),p||g)if(f)a.defaultView.scrollBy(p,g);else{let S=c.scrollLeft,x=c.scrollTop;g&&(c.scrollTop+=g),p&&(c.scrollLeft+=p);let v=c.scrollLeft-S,M=c.scrollTop-x;e={left:e.left-v,top:e.top-M,right:e.right-v,bottom:e.bottom-M}}let b=f?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(b))break;o=b=="absolute"?o.offsetParent:Qs(o)}}function w2(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),i,l;for(let a=(e.left+e.right)/2,o=t+1;o<Math.min(innerHeight,e.bottom);o+=5){let c=n.root.elementFromPoint(a,o);if(!c||c==n.dom||!n.dom.contains(c))continue;let f=c.getBoundingClientRect();if(f.top>=t-20){i=c,l=f.top;break}}return{refDOM:i,refTop:l,stack:jv(n.dom)}}function jv(n){let e=[],t=n.ownerDocument;for(let i=n;i&&(e.push({dom:i,top:i.scrollTop,left:i.scrollLeft}),n!=t);i=Qs(i));return e}function T2({refDOM:n,refTop:e,stack:t}){let i=n?n.getBoundingClientRect().top:0;Fv(t,i==0?0:i-e)}function Fv(n,e){for(let t=0;t<n.length;t++){let{dom:i,top:l,left:a}=n[t];i.scrollTop!=l+e&&(i.scrollTop=l+e),i.scrollLeft!=a&&(i.scrollLeft=a)}}let Ds=null;function M2(n){if(n.setActive)return n.setActive();if(Ds)return n.focus(Ds);let e=jv(n);n.focus(Ds==null?{get preventScroll(){return Ds={preventScroll:!0},!0}}:void 0),Ds||(Ds=!1,Fv(e,0))}function Kv(n,e){let t,i=2e8,l,a=0,o=e.top,c=e.top,f,d;for(let p=n.firstChild,g=0;p;p=p.nextSibling,g++){let b;if(p.nodeType==1)b=p.getClientRects();else if(p.nodeType==3)b=Xi(p).getClientRects();else continue;for(let S=0;S<b.length;S++){let x=b[S];if(x.top<=o&&x.bottom>=c){o=Math.max(x.bottom,o),c=Math.min(x.top,c);let v=x.left>e.left?x.left-e.left:x.right<e.left?e.left-x.right:0;if(v<i){t=p,i=v,l=v&&t.nodeType==3?{left:x.right<e.left?x.right:x.left,top:e.top}:e,p.nodeType==1&&v&&(a=g+(e.left>=(x.left+x.right)/2?1:0));continue}}else x.top>e.top&&!f&&x.left<=e.left&&x.right>=e.left&&(f=p,d={left:Math.max(x.left,Math.min(x.right,e.left)),top:x.top});!t&&(e.left>=x.right&&e.top>=x.top||e.left>=x.left&&e.top>=x.bottom)&&(a=g+1)}}return!t&&f&&(t=f,l=d,i=0),t&&t.nodeType==3?E2(t,l):!t||i&&t.nodeType==1?{node:n,offset:a}:Kv(t,l)}function E2(n,e){let t=n.nodeValue.length,i=document.createRange(),l;for(let a=0;a<t;a++){i.setEnd(n,a+1),i.setStart(n,a);let o=Rr(i,1);if(o.top!=o.bottom&&Tg(e,o)){l={node:n,offset:a+(e.left>=(o.left+o.right)/2?1:0)};break}}return i.detach(),l||{node:n,offset:0}}function Tg(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function N2(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function A2(n,e,t){let{node:i,offset:l}=Kv(e,t),a=-1;if(i.nodeType==1&&!i.firstChild){let o=i.getBoundingClientRect();a=o.left!=o.right&&t.left>(o.left+o.right)/2?1:-1}return n.docView.posFromDOM(i,l,a)}function O2(n,e,t,i){let l=-1;for(let a=e,o=!1;a!=n.dom;){let c=n.docView.nearestDesc(a,!0),f;if(!c)return null;if(c.dom.nodeType==1&&(c.node.isBlock&&c.parent||!c.contentDOM)&&((f=c.dom.getBoundingClientRect()).width||f.height)&&(c.node.isBlock&&c.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(c.dom.nodeName)&&(!o&&f.left>i.left||f.top>i.top?l=c.posBefore:(!o&&f.right<i.left||f.bottom<i.top)&&(l=c.posAfter),o=!0),!c.contentDOM&&l<0&&!c.node.isText))return(c.node.isBlock?i.top<(f.top+f.bottom)/2:i.left<(f.left+f.right)/2)?c.posBefore:c.posAfter;a=c.dom.parentNode}return l>-1?l:n.docView.posFromDOM(e,t,-1)}function Yv(n,e,t){let i=n.childNodes.length;if(i&&t.top<t.bottom)for(let l=Math.max(0,Math.min(i-1,Math.floor(i*(e.top-t.top)/(t.bottom-t.top))-2)),a=l;;){let o=n.childNodes[a];if(o.nodeType==1){let c=o.getClientRects();for(let f=0;f<c.length;f++){let d=c[f];if(Tg(e,d))return Yv(o,e,d)}}if((a=(a+1)%i)==l)break}return n}function R2(n,e){let t=n.dom.ownerDocument,i,l=0,a=k2(t,e.left,e.top);a&&({node:i,offset:l}=a);let o=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),c;if(!o||!n.dom.contains(o.nodeType!=1?o.parentNode:o)){let d=n.dom.getBoundingClientRect();if(!Tg(e,d)||(o=Yv(n.dom,e,d),!o))return null}if(Yt)for(let d=o;i&&d;d=Qs(d))d.draggable&&(i=void 0);if(o=N2(o,e),i){if(Jn&&i.nodeType==1&&(l=Math.min(l,i.childNodes.length),l<i.childNodes.length)){let p=i.childNodes[l],g;p.nodeName=="IMG"&&(g=p.getBoundingClientRect()).right<=e.left&&g.bottom>e.top&&l++}let d;Yo&&l&&i.nodeType==1&&(d=i.childNodes[l-1]).nodeType==1&&d.contentEditable=="false"&&d.getBoundingClientRect().top>=e.top&&l--,i==n.dom&&l==i.childNodes.length-1&&i.lastChild.nodeType==1&&e.top>i.lastChild.getBoundingClientRect().bottom?c=n.state.doc.content.size:(l==0||i.nodeType!=1||i.childNodes[l-1].nodeName!="BR")&&(c=O2(n,i,l,e))}c==null&&(c=A2(n,o,e));let f=n.docView.nearestDesc(o,!0);return{pos:c,inside:f?f.posAtStart-f.border:-1}}function Zk(n){return n.top<n.bottom||n.left<n.right}function Rr(n,e){let t=n.getClientRects();if(t.length){let i=t[e<0?0:t.length-1];if(Zk(i))return i}return Array.prototype.find.call(t,Zk)||n.getBoundingClientRect()}const D2=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Gv(n,e,t){let{node:i,offset:l,atom:a}=n.docView.domFromPos(e,t<0?-1:1),o=Yo||Jn;if(i.nodeType==3)if(o&&(D2.test(i.nodeValue)||(t<0?!l:l==i.nodeValue.length))){let f=Rr(Xi(i,l,l),t);if(Jn&&l&&/\s/.test(i.nodeValue[l-1])&&l<i.nodeValue.length){let d=Rr(Xi(i,l-1,l-1),-1);if(d.top==f.top){let p=Rr(Xi(i,l,l+1),-1);if(p.top!=f.top)return Wa(p,p.left<d.left)}}return f}else{let f=l,d=l,p=t<0?1:-1;return t<0&&!l?(d++,p=-1):t>=0&&l==i.nodeValue.length?(f--,p=1):t<0?f--:d++,Wa(Rr(Xi(i,f,d),p),p<0)}if(!n.state.doc.resolve(e-(a||0)).parent.inlineContent){if(a==null&&l&&(t<0||l==Qn(i))){let f=i.childNodes[l-1];if(f.nodeType==1)return Ip(f.getBoundingClientRect(),!1)}if(a==null&&l<Qn(i)){let f=i.childNodes[l];if(f.nodeType==1)return Ip(f.getBoundingClientRect(),!0)}return Ip(i.getBoundingClientRect(),t>=0)}if(a==null&&l&&(t<0||l==Qn(i))){let f=i.childNodes[l-1],d=f.nodeType==3?Xi(f,Qn(f)-(o?0:1)):f.nodeType==1&&(f.nodeName!="BR"||!f.nextSibling)?f:null;if(d)return Wa(Rr(d,1),!1)}if(a==null&&l<Qn(i)){let f=i.childNodes[l];for(;f.pmViewDesc&&f.pmViewDesc.ignoreForCoords;)f=f.nextSibling;let d=f?f.nodeType==3?Xi(f,0,o?0:1):f.nodeType==1?f:null:null;if(d)return Wa(Rr(d,-1),!0)}return Wa(Rr(i.nodeType==3?Xi(i):i,-t),t>=0)}function Wa(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function Ip(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function Qv(n,e,t){let i=n.state,l=n.root.activeElement;i!=e&&n.updateState(e),l!=n.dom&&n.focus();try{return t()}finally{i!=e&&n.updateState(i),l!=n.dom&&l&&l.focus()}}function z2(n,e,t){let i=e.selection,l=t=="up"?i.$from:i.$to;return Qv(n,e,()=>{let{node:a}=n.docView.domFromPos(l.pos,t=="up"?-1:1);for(;;){let c=n.docView.nearestDesc(a,!0);if(!c)break;if(c.node.isBlock){a=c.contentDOM||c.dom;break}a=c.dom.parentNode}let o=Gv(n,l.pos,1);for(let c=a.firstChild;c;c=c.nextSibling){let f;if(c.nodeType==1)f=c.getClientRects();else if(c.nodeType==3)f=Xi(c,0,c.nodeValue.length).getClientRects();else continue;for(let d=0;d<f.length;d++){let p=f[d];if(p.bottom>p.top+1&&(t=="up"?o.top-p.top>(p.bottom-o.top)*2:p.bottom-o.bottom>(o.bottom-p.top)*2))return!1}}return!0})}const _2=/[\u0590-\u08ac]/;function B2(n,e,t){let{$head:i}=e.selection;if(!i.parent.isTextblock)return!1;let l=i.parentOffset,a=!l,o=l==i.parent.content.size,c=n.domSelection();return c?!_2.test(i.parent.textContent)||!c.modify?t=="left"||t=="backward"?a:o:Qv(n,e,()=>{let{focusNode:f,focusOffset:d,anchorNode:p,anchorOffset:g}=n.domSelectionRange(),b=c.caretBidiLevel;c.modify("move",t,"character");let S=i.depth?n.docView.domAfterPos(i.before()):n.dom,{focusNode:x,focusOffset:v}=n.domSelectionRange(),M=x&&!S.contains(x.nodeType==1?x:x.parentNode)||f==x&&d==v;try{c.collapse(p,g),f&&(f!=p||d!=g)&&c.extend&&c.extend(f,d)}catch{}return b!=null&&(c.caretBidiLevel=b),M}):i.pos==i.start()||i.pos==i.end()}let $k=null,Pk=null,Wk=!1;function L2(n,e,t){return $k==e&&Pk==t?Wk:($k=e,Pk=t,Wk=t=="up"||t=="down"?z2(n,e,t):B2(n,e,t))}const Zn=0,ex=1,kl=2,Si=3;class Go{constructor(e,t,i,l){this.parent=e,this.children=t,this.dom=i,this.contentDOM=l,this.dirty=Zn,i.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,i){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,i=this.posAtStart;;t++){let l=this.children[t];if(l==e)return i;i+=l.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,i){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(i<0){let a,o;if(e==this.contentDOM)a=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;a=e.previousSibling}for(;a&&!((o=a.pmViewDesc)&&o.parent==this);)a=a.previousSibling;return a?this.posBeforeChild(o)+o.size:this.posAtStart}else{let a,o;if(e==this.contentDOM)a=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;a=e.nextSibling}for(;a&&!((o=a.pmViewDesc)&&o.parent==this);)a=a.nextSibling;return a?this.posBeforeChild(o):this.posAtEnd}let l;if(e==this.dom&&this.contentDOM)l=t>Ht(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))l=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let a=e;;a=a.parentNode){if(a==this.dom){l=!1;break}if(a.previousSibling)break}if(l==null&&t==e.childNodes.length)for(let a=e;;a=a.parentNode){if(a==this.dom){l=!0;break}if(a.nextSibling)break}}return l??i>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let i=!0,l=e;l;l=l.parentNode){let a=this.getDesc(l),o;if(a&&(!t||a.node))if(i&&(o=a.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))i=!1;else return a}}getDesc(e){let t=e.pmViewDesc;for(let i=t;i;i=i.parent)if(i==this)return t}posFromDOM(e,t,i){for(let l=e;l;l=l.parentNode){let a=this.getDesc(l);if(a)return a.localPosFromDOM(e,t,i)}return-1}descAt(e){for(let t=0,i=0;t<this.children.length;t++){let l=this.children[t],a=i+l.size;if(i==e&&a!=i){for(;!l.border&&l.children.length;)for(let o=0;o<l.children.length;o++){let c=l.children[o];if(c.size){l=c;break}}return l}if(e<a)return l.descAt(e-i-l.border);i=a}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let i=0,l=0;for(let a=0;i<this.children.length;i++){let o=this.children[i],c=a+o.size;if(c>e||o instanceof Jv){l=e-a;break}a=c}if(l)return this.children[i].domFromPos(l-this.children[i].border,t);for(let a;i&&!(a=this.children[i-1]).size&&a instanceof Xv&&a.side>=0;i--);if(t<=0){let a,o=!0;for(;a=i?this.children[i-1]:null,!(!a||a.dom.parentNode==this.contentDOM);i--,o=!1);return a&&t&&o&&!a.border&&!a.domAtom?a.domFromPos(a.size,t):{node:this.contentDOM,offset:a?Ht(a.dom)+1:0}}else{let a,o=!0;for(;a=i<this.children.length?this.children[i]:null,!(!a||a.dom.parentNode==this.contentDOM);i++,o=!1);return a&&o&&!a.border&&!a.domAtom?a.domFromPos(0,t):{node:this.contentDOM,offset:a?Ht(a.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,i=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let l=-1,a=-1;for(let o=i,c=0;;c++){let f=this.children[c],d=o+f.size;if(l==-1&&e<=d){let p=o+f.border;if(e>=p&&t<=d-f.border&&f.node&&f.contentDOM&&this.contentDOM.contains(f.contentDOM))return f.parseRange(e,t,p);e=o;for(let g=c;g>0;g--){let b=this.children[g-1];if(b.size&&b.dom.parentNode==this.contentDOM&&!b.emptyChildAt(1)){l=Ht(b.dom)+1;break}e-=b.size}l==-1&&(l=0)}if(l>-1&&(d>t||c==this.children.length-1)){t=d;for(let p=c+1;p<this.children.length;p++){let g=this.children[p];if(g.size&&g.dom.parentNode==this.contentDOM&&!g.emptyChildAt(-1)){a=Ht(g.dom);break}t+=g.size}a==-1&&(a=this.contentDOM.childNodes.length);break}o=d}return{node:this.contentDOM,from:e,to:t,fromOffset:l,toOffset:a}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:i}=this.domFromPos(e,0);if(t.nodeType!=1||i==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[i]}setSelection(e,t,i,l=!1){let a=Math.min(e,t),o=Math.max(e,t);for(let S=0,x=0;S<this.children.length;S++){let v=this.children[S],M=x+v.size;if(a>x&&o<M)return v.setSelection(e-x-v.border,t-x-v.border,i,l);x=M}let c=this.domFromPos(e,e?-1:1),f=t==e?c:this.domFromPos(t,t?-1:1),d=i.root.getSelection(),p=i.domSelectionRange(),g=!1;if((Jn||Yt)&&e==t){let{node:S,offset:x}=c;if(S.nodeType==3){if(g=!!(x&&S.nodeValue[x-1]==`
`),g&&x==S.nodeValue.length)for(let v=S,M;v;v=v.parentNode){if(M=v.nextSibling){M.nodeName=="BR"&&(c=f={node:M.parentNode,offset:Ht(M)+1});break}let T=v.pmViewDesc;if(T&&T.node&&T.node.isBlock)break}}else{let v=S.childNodes[x-1];g=v&&(v.nodeName=="BR"||v.contentEditable=="false")}}if(Jn&&p.focusNode&&p.focusNode!=f.node&&p.focusNode.nodeType==1){let S=p.focusNode.childNodes[p.focusOffset];S&&S.contentEditable=="false"&&(l=!0)}if(!(l||g&&Yt)&&_l(c.node,c.offset,p.anchorNode,p.anchorOffset)&&_l(f.node,f.offset,p.focusNode,p.focusOffset))return;let b=!1;if((d.extend||e==t)&&!(g&&Jn)){d.collapse(c.node,c.offset);try{e!=t&&d.extend(f.node,f.offset),b=!0}catch{}}if(!b){if(e>t){let x=c;c=f,f=x}let S=document.createRange();S.setEnd(f.node,f.offset),S.setStart(c.node,c.offset),d.removeAllRanges(),d.addRange(S)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let i=0,l=0;l<this.children.length;l++){let a=this.children[l],o=i+a.size;if(i==o?e<=o&&t>=i:e<o&&t>i){let c=i+a.border,f=o-a.border;if(e>=c&&t<=f){this.dirty=e==i||t==o?kl:ex,e==c&&t==f&&(a.contentLost||a.dom.parentNode!=this.contentDOM)?a.dirty=Si:a.markDirty(e-c,t-c);return}else a.dirty=a.dom==a.contentDOM&&a.dom.parentNode==this.contentDOM&&!a.children.length?kl:Si}i=o}this.dirty=kl}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let i=e==1?kl:ex;t.dirty<i&&(t.dirty=i)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class Xv extends Go{constructor(e,t,i,l){let a,o=t.type.toDOM;if(typeof o=="function"&&(o=o(i,()=>{if(!a)return l;if(a.parent)return a.parent.posBeforeChild(a)})),!t.type.spec.raw){if(o.nodeType!=1){let c=document.createElement("span");c.appendChild(o),o=c}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=t,this.widget=t,a=this}matchesWidget(e){return this.dirty==Zn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class I2 extends Go{constructor(e,t,i,l){super(e,[],t,null),this.textDOM=i,this.text=l}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Bl extends Go{constructor(e,t,i,l,a){super(e,[],i,l),this.mark=t,this.spec=a}static create(e,t,i,l){let a=l.nodeViews[t.type.name],o=a&&a(t,l,i);return(!o||!o.dom)&&(o=Il.renderSpec(document,t.type.spec.toDOM(t,i),null,t.attrs)),new Bl(e,t,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&Si||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Si&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=Zn){let i=this.parent;for(;!i.node;)i=i.parent;i.dirty<this.dirty&&(i.dirty=this.dirty),this.dirty=Zn}}slice(e,t,i){let l=Bl.create(this.parent,this.mark,!0,i),a=this.children,o=this.size;t<o&&(a=Bm(a,t,o,i)),e>0&&(a=Bm(a,0,e,i));for(let c=0;c<a.length;c++)a[c].parent=l;return l.children=a,l}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Vr extends Go{constructor(e,t,i,l,a,o,c,f,d){super(e,[],a,o),this.node=t,this.outerDeco=i,this.innerDeco=l,this.nodeDOM=c}static create(e,t,i,l,a,o){let c=a.nodeViews[t.type.name],f,d=c&&c(t,a,()=>{if(!f)return o;if(f.parent)return f.parent.posBeforeChild(f)},i,l),p=d&&d.dom,g=d&&d.contentDOM;if(t.isText){if(!p)p=document.createTextNode(t.text);else if(p.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else p||({dom:p,contentDOM:g}=Il.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!g&&!t.isText&&p.nodeName!="BR"&&(p.hasAttribute("contenteditable")||(p.contentEditable="false"),t.type.spec.draggable&&(p.draggable=!0));let b=p;return p=Pv(p,i,t),d?f=new q2(e,t,i,l,p,g||null,b,d,a,o+1):t.isText?new Uf(e,t,i,l,p,b,a):new Vr(e,t,i,l,p,g||null,b,a,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let i=this.children[t];if(this.dom.contains(i.dom.parentNode)){e.contentElement=i.dom.parentNode;break}}e.contentElement||(e.getContent=()=>X.empty)}return e}matchesNode(e,t,i){return this.dirty==Zn&&e.eq(this.node)&&af(t,this.outerDeco)&&i.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let i=this.node.inlineContent,l=t,a=e.composing?this.localCompositionInfo(e,t):null,o=a&&a.pos>-1?a:null,c=a&&a.pos<0,f=new U2(this,o&&o.node,e);F2(this.node,this.innerDeco,(d,p,g)=>{d.spec.marks?f.syncToMarks(d.spec.marks,i,e):d.type.side>=0&&!g&&f.syncToMarks(p==this.node.childCount?He.none:this.node.child(p).marks,i,e),f.placeWidget(d,e,l)},(d,p,g,b)=>{f.syncToMarks(d.marks,i,e);let S;f.findNodeMatch(d,p,g,b)||c&&e.state.selection.from>l&&e.state.selection.to<l+d.nodeSize&&(S=f.findIndexWithChild(a.node))>-1&&f.updateNodeAt(d,p,g,S,e)||f.updateNextNode(d,p,g,e,b,l)||f.addNode(d,p,g,e,l),l+=d.nodeSize}),f.syncToMarks([],i,e),this.node.isTextblock&&f.addTextblockHacks(),f.destroyRest(),(f.changed||this.dirty==kl)&&(o&&this.protectLocalComposition(e,o),Zv(this.contentDOM,this.children,e),Xs&&K2(this.dom))}localCompositionInfo(e,t){let{from:i,to:l}=e.state.selection;if(!(e.state.selection instanceof we)||i<t||l>t+this.node.content.size)return null;let a=e.input.compositionNode;if(!a||!this.dom.contains(a.parentNode))return null;if(this.node.inlineContent){let o=a.nodeValue,c=Y2(this.node.content,o,i-t,l-t);return c<0?null:{node:a,pos:c,text:o}}else return{node:a,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:i,text:l}){if(this.getDesc(t))return;let a=t;for(;a.parentNode!=this.contentDOM;a=a.parentNode){for(;a.previousSibling;)a.parentNode.removeChild(a.previousSibling);for(;a.nextSibling;)a.parentNode.removeChild(a.nextSibling);a.pmViewDesc&&(a.pmViewDesc=void 0)}let o=new I2(this,a,t,l);e.input.compositionNodes.push(o),this.children=Bm(this.children,i,i+l.length,e,o)}update(e,t,i,l){return this.dirty==Si||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,i,l),!0)}updateInner(e,t,i,l){this.updateOuterDeco(t),this.node=e,this.innerDeco=i,this.contentDOM&&this.updateChildren(l,this.posAtStart),this.dirty=Zn}updateOuterDeco(e){if(af(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,i=this.dom;this.dom=$v(this.dom,this.nodeDOM,_m(this.outerDeco,this.node,t),_m(e,this.node,t)),this.dom!=i&&(i.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function tx(n,e,t,i,l){Pv(i,e,n);let a=new Vr(void 0,n,e,t,i,i,i,l,0);return a.contentDOM&&a.updateChildren(l,0),a}class Uf extends Vr{constructor(e,t,i,l,a,o,c){super(e,t,i,l,a,null,o,c,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,i,l){return this.dirty==Si||this.dirty!=Zn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=Zn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,l.trackWrites==this.nodeDOM&&(l.trackWrites=null)),this.node=e,this.dirty=Zn,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,i){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,i)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,i){let l=this.node.cut(e,t),a=document.createTextNode(l.text);return new Uf(this.parent,l,this.outerDeco,this.innerDeco,a,a,i)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=Si)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Jv extends Go{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Zn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class q2 extends Vr{constructor(e,t,i,l,a,o,c,f,d,p){super(e,t,i,l,a,o,c,d,p),this.spec=f}update(e,t,i,l){if(this.dirty==Si)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let a=this.spec.update(e,t,i);return a&&this.updateInner(e,t,i,l),a}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,i,l)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,i,l){this.spec.setSelection?this.spec.setSelection(e,t,i.root):super.setSelection(e,t,i,l)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Zv(n,e,t){let i=n.firstChild,l=!1;for(let a=0;a<e.length;a++){let o=e[a],c=o.dom;if(c.parentNode==n){for(;c!=i;)i=nx(i),l=!0;i=i.nextSibling}else l=!0,n.insertBefore(c,i);if(o instanceof Bl){let f=i?i.previousSibling:n.lastChild;Zv(o.contentDOM,o.children,t),i=f?f.nextSibling:n.firstChild}}for(;i;)i=nx(i),l=!0;l&&t.trackWrites==n&&(t.trackWrites=null)}const bo=function(n){n&&(this.nodeName=n)};bo.prototype=Object.create(null);const xl=[new bo];function _m(n,e,t){if(n.length==0)return xl;let i=t?xl[0]:new bo,l=[i];for(let a=0;a<n.length;a++){let o=n[a].type.attrs;if(o){o.nodeName&&l.push(i=new bo(o.nodeName));for(let c in o){let f=o[c];f!=null&&(t&&l.length==1&&l.push(i=new bo(e.isInline?"span":"div")),c=="class"?i.class=(i.class?i.class+" ":"")+f:c=="style"?i.style=(i.style?i.style+";":"")+f:c!="nodeName"&&(i[c]=f))}}}return l}function $v(n,e,t,i){if(t==xl&&i==xl)return e;let l=e;for(let a=0;a<i.length;a++){let o=i[a],c=t[a];if(a){let f;c&&c.nodeName==o.nodeName&&l!=n&&(f=l.parentNode)&&f.nodeName.toLowerCase()==o.nodeName||(f=document.createElement(o.nodeName),f.pmIsDeco=!0,f.appendChild(l),c=xl[0]),l=f}H2(l,c||xl[0],o)}return l}function H2(n,e,t){for(let i in e)i!="class"&&i!="style"&&i!="nodeName"&&!(i in t)&&n.removeAttribute(i);for(let i in t)i!="class"&&i!="style"&&i!="nodeName"&&t[i]!=e[i]&&n.setAttribute(i,t[i]);if(e.class!=t.class){let i=e.class?e.class.split(" ").filter(Boolean):[],l=t.class?t.class.split(" ").filter(Boolean):[];for(let a=0;a<i.length;a++)l.indexOf(i[a])==-1&&n.classList.remove(i[a]);for(let a=0;a<l.length;a++)i.indexOf(l[a])==-1&&n.classList.add(l[a]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let i=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,l;for(;l=i.exec(e.style);)n.style.removeProperty(l[1])}t.style&&(n.style.cssText+=t.style)}}function Pv(n,e,t){return $v(n,n,xl,_m(e,t,n.nodeType!=1))}function af(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function nx(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class U2{constructor(e,t,i){this.lock=t,this.view=i,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=V2(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let i=e;i<t;i++)this.top.children[i].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,i){let l=0,a=this.stack.length>>1,o=Math.min(a,e.length);for(;l<o&&(l==a-1?this.top:this.stack[l+1<<1]).matchesMark(e[l])&&e[l].type.spec.spanning!==!1;)l++;for(;l<a;)this.destroyRest(),this.top.dirty=Zn,this.index=this.stack.pop(),this.top=this.stack.pop(),a--;for(;a<e.length;){this.stack.push(this.top,this.index+1);let c=-1;for(let f=this.index;f<Math.min(this.index+3,this.top.children.length);f++){let d=this.top.children[f];if(d.matchesMark(e[a])&&!this.isLocked(d.dom)){c=f;break}}if(c>-1)c>this.index&&(this.changed=!0,this.destroyBetween(this.index,c)),this.top=this.top.children[this.index];else{let f=Bl.create(this.top,e[a],t,i);this.top.children.splice(this.index,0,f),this.top=f,this.changed=!0}this.index=0,a++}}findNodeMatch(e,t,i,l){let a=-1,o;if(l>=this.preMatch.index&&(o=this.preMatch.matches[l-this.preMatch.index]).parent==this.top&&o.matchesNode(e,t,i))a=this.top.children.indexOf(o,this.index);else for(let c=this.index,f=Math.min(this.top.children.length,c+5);c<f;c++){let d=this.top.children[c];if(d.matchesNode(e,t,i)&&!this.preMatch.matched.has(d)){a=c;break}}return a<0?!1:(this.destroyBetween(this.index,a),this.index++,!0)}updateNodeAt(e,t,i,l,a){let o=this.top.children[l];return o.dirty==Si&&o.dom==o.contentDOM&&(o.dirty=kl),o.update(e,t,i,a)?(this.destroyBetween(this.index,l),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let i=e.pmViewDesc;if(i){for(let l=this.index;l<this.top.children.length;l++)if(this.top.children[l]==i)return l}return-1}e=t}}updateNextNode(e,t,i,l,a,o){for(let c=this.index;c<this.top.children.length;c++){let f=this.top.children[c];if(f instanceof Vr){let d=this.preMatch.matched.get(f);if(d!=null&&d!=a)return!1;let p=f.dom,g,b=this.isLocked(p)&&!(e.isText&&f.node&&f.node.isText&&f.nodeDOM.nodeValue==e.text&&f.dirty!=Si&&af(t,f.outerDeco));if(!b&&f.update(e,t,i,l))return this.destroyBetween(this.index,c),f.dom!=p&&(this.changed=!0),this.index++,!0;if(!b&&(g=this.recreateWrapper(f,e,t,i,l,o)))return this.destroyBetween(this.index,c),this.top.children[this.index]=g,g.contentDOM&&(g.dirty=kl,g.updateChildren(l,o+1),g.dirty=Zn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,i,l,a,o){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!af(i,e.outerDeco)||!l.eq(e.innerDeco))return null;let c=Vr.create(this.top,t,i,l,a,o);if(c.contentDOM){c.children=e.children,e.children=[];for(let f of c.children)f.parent=c}return e.destroy(),c}addNode(e,t,i,l,a){let o=Vr.create(this.top,e,t,i,l,a);o.contentDOM&&o.updateChildren(l,a+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,t,i){let l=this.index<this.top.children.length?this.top.children[this.index]:null;if(l&&l.matchesWidget(e)&&(e==l.widget||!l.widget.type.toDOM.parentNode))this.index++;else{let a=new Xv(this.top,e,t,i);this.top.children.splice(this.index++,0,a),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Bl;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof Uf)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Yt||At)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let i=document.createElement(e);e=="IMG"&&(i.className="ProseMirror-separator",i.alt=""),e=="BR"&&(i.className="ProseMirror-trailingBreak");let l=new Jv(this.top,[],i,null);t!=this.top?t.children.push(l):t.children.splice(this.index++,0,l),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function V2(n,e){let t=e,i=t.children.length,l=n.childCount,a=new Map,o=[];e:for(;l>0;){let c;for(;;)if(i){let d=t.children[i-1];if(d instanceof Bl)t=d,i=d.children.length;else{c=d,i--;break}}else{if(t==e)break e;i=t.parent.children.indexOf(t),t=t.parent}let f=c.node;if(f){if(f!=n.child(l-1))break;--l,a.set(c,l),o.push(c)}}return{index:l,matched:a,matches:o.reverse()}}function j2(n,e){return n.type.side-e.type.side}function F2(n,e,t,i){let l=e.locals(n),a=0;if(l.length==0){for(let d=0;d<n.childCount;d++){let p=n.child(d);i(p,l,e.forChild(a,p),d),a+=p.nodeSize}return}let o=0,c=[],f=null;for(let d=0;;){let p,g;for(;o<l.length&&l[o].to==a;){let M=l[o++];M.widget&&(p?(g||(g=[p])).push(M):p=M)}if(p)if(g){g.sort(j2);for(let M=0;M<g.length;M++)t(g[M],d,!!f)}else t(p,d,!!f);let b,S;if(f)S=-1,b=f,f=null;else if(d<n.childCount)S=d,b=n.child(d++);else break;for(let M=0;M<c.length;M++)c[M].to<=a&&c.splice(M--,1);for(;o<l.length&&l[o].from<=a&&l[o].to>a;)c.push(l[o++]);let x=a+b.nodeSize;if(b.isText){let M=x;o<l.length&&l[o].from<M&&(M=l[o].from);for(let T=0;T<c.length;T++)c[T].to<M&&(M=c[T].to);M<x&&(f=b.cut(M-a),b=b.cut(0,M-a),x=M,S=-1)}else for(;o<l.length&&l[o].to<x;)o++;let v=b.isInline&&!b.isLeaf?c.filter(M=>!M.inline):c.slice();i(b,v,e.forChild(a,b),S),a=x}}function K2(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function Y2(n,e,t,i){for(let l=0,a=0;l<n.childCount&&a<=i;){let o=n.child(l++),c=a;if(a+=o.nodeSize,!o.isText)continue;let f=o.text;for(;l<n.childCount;){let d=n.child(l++);if(a+=d.nodeSize,!d.isText)break;f+=d.text}if(a>=t){if(a>=i&&f.slice(i-e.length-c,i-c)==e)return i-e.length;let d=c<i?f.lastIndexOf(e,i-c-1):-1;if(d>=0&&d+e.length+c>=t)return c+d;if(t==i&&f.length>=i+e.length-c&&f.slice(i-c,i-c+e.length)==e)return i}}return-1}function Bm(n,e,t,i,l){let a=[];for(let o=0,c=0;o<n.length;o++){let f=n[o],d=c,p=c+=f.size;d>=t||p<=e?a.push(f):(d<e&&a.push(f.slice(0,e-d,i)),l&&(a.push(l),l=void 0),p>t&&a.push(f.slice(t-d,f.size,i)))}return a}function Mg(n,e=null){let t=n.domSelectionRange(),i=n.state.doc;if(!t.focusNode)return null;let l=n.docView.nearestDesc(t.focusNode),a=l&&l.size==0,o=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(o<0)return null;let c=i.resolve(o),f,d;if(Hf(t)){for(f=o;l&&!l.node;)l=l.parent;let g=l.node;if(l&&g.isAtom&&be.isSelectable(g)&&l.parent&&!(g.isInline&&b2(t.focusNode,t.focusOffset,l.dom))){let b=l.posBefore;d=new be(o==b?c:i.resolve(b))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let g=o,b=o;for(let S=0;S<t.rangeCount;S++){let x=t.getRangeAt(S);g=Math.min(g,n.docView.posFromDOM(x.startContainer,x.startOffset,1)),b=Math.max(b,n.docView.posFromDOM(x.endContainer,x.endOffset,-1))}if(g<0)return null;[f,o]=b==n.state.selection.anchor?[b,g]:[g,b],c=i.resolve(o)}else f=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(f<0)return null}let p=i.resolve(f);if(!d){let g=e=="pointer"||n.state.selection.head<c.pos&&!a?1:-1;d=Eg(n,p,c,g)}return d}function Wv(n){return n.editable?n.hasFocus():tw(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Pi(n,e=!1){let t=n.state.selection;if(ew(n,t),!!Wv(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&At){let i=n.domSelectionRange(),l=n.domObserver.currentSelection;if(i.anchorNode&&l.anchorNode&&_l(i.anchorNode,i.anchorOffset,l.anchorNode,l.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)Q2(n);else{let{anchor:i,head:l}=t,a,o;ix&&!(t instanceof we)&&(t.$from.parent.inlineContent||(a=rx(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(o=rx(n,t.to))),n.docView.setSelection(i,l,n,e),ix&&(a&&lx(a),o&&lx(o)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&G2(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const ix=Yt||At&&Uv<63;function rx(n,e){let{node:t,offset:i}=n.docView.domFromPos(e,0),l=i<t.childNodes.length?t.childNodes[i]:null,a=i?t.childNodes[i-1]:null;if(Yt&&l&&l.contentEditable=="false")return qp(l);if((!l||l.contentEditable=="false")&&(!a||a.contentEditable=="false")){if(l)return qp(l);if(a)return qp(a)}}function qp(n){return n.contentEditable="true",Yt&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function lx(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function G2(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),i=t.anchorNode,l=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=i||t.anchorOffset!=l)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!Wv(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function Q2(n){let e=n.domSelection();if(!e)return;let t=n.cursorWrapper.dom,i=t.nodeName=="IMG";i?e.collapse(t.parentNode,Ht(t)+1):e.collapse(t,0),!i&&!n.state.selection.visible&&dn&&Ur<=11&&(t.disabled=!0,t.disabled=!1)}function ew(n,e){if(e instanceof be){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(sx(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else sx(n)}function sx(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function Eg(n,e,t,i){return n.someProp("createSelectionBetween",l=>l(n,e,t))||we.between(e,t,i)}function ax(n){return n.editable&&!n.hasFocus()?!1:tw(n)}function tw(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function X2(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return _l(e.node,e.offset,t.anchorNode,t.anchorOffset)}function Lm(n,e){let{$anchor:t,$head:i}=n.selection,l=e>0?t.max(i):t.min(i),a=l.parent.inlineContent?l.depth?n.doc.resolve(e>0?l.after():l.before()):null:l;return a&&Ce.findFrom(a,e)}function Dr(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function ox(n,e,t){let i=n.state.selection;if(i instanceof we)if(t.indexOf("s")>-1){let{$head:l}=i,a=l.textOffset?null:e<0?l.nodeBefore:l.nodeAfter;if(!a||a.isText||!a.isLeaf)return!1;let o=n.state.doc.resolve(l.pos+a.nodeSize*(e<0?-1:1));return Dr(n,new we(i.$anchor,o))}else if(i.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let l=Lm(n.state,e);return l&&l instanceof be?Dr(n,l):!1}else if(!(Yn&&t.indexOf("m")>-1)){let l=i.$head,a=l.textOffset?null:e<0?l.nodeBefore:l.nodeAfter,o;if(!a||a.isText)return!1;let c=e<0?l.pos-a.nodeSize:l.pos;return a.isAtom||(o=n.docView.descAt(c))&&!o.contentDOM?be.isSelectable(a)?Dr(n,new be(e<0?n.state.doc.resolve(l.pos-a.nodeSize):l)):Yo?Dr(n,new we(n.state.doc.resolve(e<0?c:c+a.nodeSize))):!1:!1}}else return!1;else{if(i instanceof be&&i.node.isInline)return Dr(n,new we(e>0?i.$to:i.$from));{let l=Lm(n.state,e);return l?Dr(n,l):!1}}}function of(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function So(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function zs(n,e){return e<0?J2(n):Z2(n)}function J2(n){let e=n.domSelectionRange(),t=e.focusNode,i=e.focusOffset;if(!t)return;let l,a,o=!1;for(Jn&&t.nodeType==1&&i<of(t)&&So(t.childNodes[i],-1)&&(o=!0);;)if(i>0){if(t.nodeType!=1)break;{let c=t.childNodes[i-1];if(So(c,-1))l=t,a=--i;else if(c.nodeType==3)t=c,i=t.nodeValue.length;else break}}else{if(nw(t))break;{let c=t.previousSibling;for(;c&&So(c,-1);)l=t.parentNode,a=Ht(c),c=c.previousSibling;if(c)t=c,i=of(t);else{if(t=t.parentNode,t==n.dom)break;i=0}}}o?Im(n,t,i):l&&Im(n,l,a)}function Z2(n){let e=n.domSelectionRange(),t=e.focusNode,i=e.focusOffset;if(!t)return;let l=of(t),a,o;for(;;)if(i<l){if(t.nodeType!=1)break;let c=t.childNodes[i];if(So(c,1))a=t,o=++i;else break}else{if(nw(t))break;{let c=t.nextSibling;for(;c&&So(c,1);)a=c.parentNode,o=Ht(c)+1,c=c.nextSibling;if(c)t=c,i=0,l=of(t);else{if(t=t.parentNode,t==n.dom)break;i=l=0}}}a&&Im(n,a,o)}function nw(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function $2(n,e){for(;n&&e==n.childNodes.length&&!Ko(n);)e=Ht(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function P2(n,e){for(;n&&!e&&!Ko(n);)e=Ht(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function Im(n,e,t){if(e.nodeType!=3){let a,o;(o=$2(e,t))?(e=o,t=0):(a=P2(e,t))&&(e=a,t=a.nodeValue.length)}let i=n.domSelection();if(!i)return;if(Hf(i)){let a=document.createRange();a.setEnd(e,t),a.setStart(e,t),i.removeAllRanges(),i.addRange(a)}else i.extend&&i.extend(e,t);n.domObserver.setCurSelection();let{state:l}=n;setTimeout(()=>{n.state==l&&Pi(n)},50)}function ux(n,e){let t=n.state.doc.resolve(e);if(!(At||Vv)&&t.parent.inlineContent){let l=n.coordsAtPos(e);if(e>t.start()){let a=n.coordsAtPos(e-1),o=(a.top+a.bottom)/2;if(o>l.top&&o<l.bottom&&Math.abs(a.left-l.left)>1)return a.left<l.left?"ltr":"rtl"}if(e<t.end()){let a=n.coordsAtPos(e+1),o=(a.top+a.bottom)/2;if(o>l.top&&o<l.bottom&&Math.abs(a.left-l.left)>1)return a.left>l.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function cx(n,e,t){let i=n.state.selection;if(i instanceof we&&!i.empty||t.indexOf("s")>-1||Yn&&t.indexOf("m")>-1)return!1;let{$from:l,$to:a}=i;if(!l.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let o=Lm(n.state,e);if(o&&o instanceof be)return Dr(n,o)}if(!l.parent.inlineContent){let o=e<0?l:a,c=i instanceof On?Ce.near(o,e):Ce.findFrom(o,e);return c?Dr(n,c):!1}return!1}function fx(n,e){if(!(n.state.selection instanceof we))return!0;let{$head:t,$anchor:i,empty:l}=n.state.selection;if(!t.sameParent(i))return!0;if(!l)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let a=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(a&&!a.isText){let o=n.state.tr;return e<0?o.delete(t.pos-a.nodeSize,t.pos):o.delete(t.pos,t.pos+a.nodeSize),n.dispatch(o),!0}return!1}function hx(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function W2(n){if(!Yt||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let i=e.firstChild;hx(n,i,"true"),setTimeout(()=>hx(n,i,"false"),20)}return!1}function e3(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function t3(n,e){let t=e.keyCode,i=e3(e);if(t==8||Yn&&t==72&&i=="c")return fx(n,-1)||zs(n,-1);if(t==46&&!e.shiftKey||Yn&&t==68&&i=="c")return fx(n,1)||zs(n,1);if(t==13||t==27)return!0;if(t==37||Yn&&t==66&&i=="c"){let l=t==37?ux(n,n.state.selection.from)=="ltr"?-1:1:-1;return ox(n,l,i)||zs(n,l)}else if(t==39||Yn&&t==70&&i=="c"){let l=t==39?ux(n,n.state.selection.from)=="ltr"?1:-1:1;return ox(n,l,i)||zs(n,l)}else{if(t==38||Yn&&t==80&&i=="c")return cx(n,-1,i)||zs(n,-1);if(t==40||Yn&&t==78&&i=="c")return W2(n)||cx(n,1,i)||zs(n,1);if(i==(Yn?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function Ng(n,e){n.someProp("transformCopied",S=>{e=S(e,n)});let t=[],{content:i,openStart:l,openEnd:a}=e;for(;l>1&&a>1&&i.childCount==1&&i.firstChild.childCount==1;){l--,a--;let S=i.firstChild;t.push(S.type.name,S.attrs!=S.type.defaultAttrs?S.attrs:null),i=S.content}let o=n.someProp("clipboardSerializer")||Il.fromSchema(n.state.schema),c=ow(),f=c.createElement("div");f.appendChild(o.serializeFragment(i,{document:c}));let d=f.firstChild,p,g=0;for(;d&&d.nodeType==1&&(p=aw[d.nodeName.toLowerCase()]);){for(let S=p.length-1;S>=0;S--){let x=c.createElement(p[S]);for(;f.firstChild;)x.appendChild(f.firstChild);f.appendChild(x),g++}d=f.firstChild}d&&d.nodeType==1&&d.setAttribute("data-pm-slice",`${l} ${a}${g?` -${g}`:""} ${JSON.stringify(t)}`);let b=n.someProp("clipboardTextSerializer",S=>S(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:f,text:b,slice:e}}function iw(n,e,t,i,l){let a=l.parent.type.spec.code,o,c;if(!t&&!e)return null;let f=!!e&&(i||a||!t);if(f){if(n.someProp("transformPastedText",b=>{e=b(e,a||i,n)}),a)return c=new W(X.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),n.someProp("transformPasted",b=>{c=b(c,n,!0)}),c;let g=n.someProp("clipboardTextParser",b=>b(e,l,i,n));if(g)c=g;else{let b=l.marks(),{schema:S}=n.state,x=Il.fromSchema(S);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(v=>{let M=o.appendChild(document.createElement("p"));v&&M.appendChild(x.serializeNode(S.text(v,b)))})}}else n.someProp("transformPastedHTML",g=>{t=g(t,n)}),o=l3(t),Yo&&s3(o);let d=o&&o.querySelector("[data-pm-slice]"),p=d&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(d.getAttribute("data-pm-slice")||"");if(p&&p[3])for(let g=+p[3];g>0;g--){let b=o.firstChild;for(;b&&b.nodeType!=1;)b=b.nextSibling;if(!b)break;o=b}if(c||(c=(n.someProp("clipboardParser")||n.someProp("domParser")||Rl.fromSchema(n.state.schema)).parseSlice(o,{preserveWhitespace:!!(f||p),context:l,ruleFromNode(b){return b.nodeName=="BR"&&!b.nextSibling&&b.parentNode&&!n3.test(b.parentNode.nodeName)?{ignore:!0}:null}})),p)c=a3(dx(c,+p[1],+p[2]),p[4]);else if(c=W.maxOpen(i3(c.content,l),!0),c.openStart||c.openEnd){let g=0,b=0;for(let S=c.content.firstChild;g<c.openStart&&!S.type.spec.isolating;g++,S=S.firstChild);for(let S=c.content.lastChild;b<c.openEnd&&!S.type.spec.isolating;b++,S=S.lastChild);c=dx(c,g,b)}return n.someProp("transformPasted",g=>{c=g(c,n,f)}),c}const n3=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function i3(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let l=e.node(t).contentMatchAt(e.index(t)),a,o=[];if(n.forEach(c=>{if(!o)return;let f=l.findWrapping(c.type),d;if(!f)return o=null;if(d=o.length&&a.length&&lw(f,a,c,o[o.length-1],0))o[o.length-1]=d;else{o.length&&(o[o.length-1]=sw(o[o.length-1],a.length));let p=rw(c,f);o.push(p),l=l.matchType(p.type),a=f}}),o)return X.from(o)}return n}function rw(n,e,t=0){for(let i=e.length-1;i>=t;i--)n=e[i].create(null,X.from(n));return n}function lw(n,e,t,i,l){if(l<n.length&&l<e.length&&n[l]==e[l]){let a=lw(n,e,t,i.lastChild,l+1);if(a)return i.copy(i.content.replaceChild(i.childCount-1,a));if(i.contentMatchAt(i.childCount).matchType(l==n.length-1?t.type:n[l+1]))return i.copy(i.content.append(X.from(rw(t,n,l+1))))}}function sw(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,sw(n.lastChild,e-1)),i=n.contentMatchAt(n.childCount).fillBefore(X.empty,!0);return n.copy(t.append(i))}function qm(n,e,t,i,l,a){let o=e<0?n.firstChild:n.lastChild,c=o.content;return n.childCount>1&&(a=0),l<i-1&&(c=qm(c,e,t,i,l+1,a)),l>=t&&(c=e<0?o.contentMatchAt(0).fillBefore(c,a<=l).append(c):c.append(o.contentMatchAt(o.childCount).fillBefore(X.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,o.copy(c))}function dx(n,e,t){return e<n.openStart&&(n=new W(qm(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new W(qm(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const aw={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let px=null;function ow(){return px||(px=document.implementation.createHTMLDocument("title"))}let Hp=null;function r3(n){let e=window.trustedTypes;return e?(Hp||(Hp=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),Hp.createHTML(n)):n}function l3(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=ow().createElement("div"),i=/<([a-z][^>\s]+)/i.exec(n),l;if((l=i&&aw[i[1].toLowerCase()])&&(n=l.map(a=>"<"+a+">").join("")+n+l.map(a=>"</"+a+">").reverse().join("")),t.innerHTML=r3(n),l)for(let a=0;a<l.length;a++)t=t.querySelector(l[a])||t;return t}function s3(n){let e=n.querySelectorAll(At?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let i=e[t];i.childNodes.length==1&&i.textContent==""&&i.parentNode&&i.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),i)}}function a3(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,i;try{i=JSON.parse(e)}catch{return n}let{content:l,openStart:a,openEnd:o}=n;for(let c=i.length-2;c>=0;c-=2){let f=t.nodes[i[c]];if(!f||f.hasRequiredAttrs())break;l=X.from(f.create(i[c+1],l)),a++,o++}return new W(l,a,o)}const Wt={},en={},o3={touchstart:!0,touchmove:!0};class u3{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function c3(n){for(let e in Wt){let t=Wt[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=i=>{h3(n,i)&&!Ag(n,i)&&(n.editable||!(i.type in en))&&t(n,i)},o3[e]?{passive:!0}:void 0)}Yt&&n.dom.addEventListener("input",()=>null),Hm(n)}function qr(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function f3(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function Hm(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=i=>Ag(n,i))})}function Ag(n,e){return n.someProp("handleDOMEvents",t=>{let i=t[e.type];return i?i(n,e)||e.defaultPrevented:!1})}function h3(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function d3(n,e){!Ag(n,e)&&Wt[e.type]&&(n.editable||!(e.type in en))&&Wt[e.type](n,e)}en.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!cw(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!($i&&At&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),Xs&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let i=Date.now();n.input.lastIOSEnter=i,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==i&&(n.someProp("handleKeyDown",l=>l(n,Sl(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",i=>i(n,t))||t3(n,t)?t.preventDefault():qr(n,"key")};en.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};en.keypress=(n,e)=>{let t=e;if(cw(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||Yn&&t.metaKey)return;if(n.someProp("handleKeyPress",l=>l(n,t))){t.preventDefault();return}let i=n.state.selection;if(!(i instanceof we)||!i.$from.sameParent(i.$to)){let l=String.fromCharCode(t.charCode),a=()=>n.state.tr.insertText(l).scrollIntoView();!/[\r\n]/.test(l)&&!n.someProp("handleTextInput",o=>o(n,i.$from.pos,i.$to.pos,l,a))&&n.dispatch(a()),t.preventDefault()}};function Vf(n){return{left:n.clientX,top:n.clientY}}function p3(n,e){let t=e.x-n.clientX,i=e.y-n.clientY;return t*t+i*i<100}function Og(n,e,t,i,l){if(i==-1)return!1;let a=n.state.doc.resolve(i);for(let o=a.depth+1;o>0;o--)if(n.someProp(e,c=>o>a.depth?c(n,t,a.nodeAfter,a.before(o),l,!0):c(n,t,a.node(o),a.before(o),l,!1)))return!0;return!1}function js(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let i=n.state.tr.setSelection(e);i.setMeta("pointer",!0),n.dispatch(i)}function m3(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),i=t.nodeAfter;return i&&i.isAtom&&be.isSelectable(i)?(js(n,new be(t)),!0):!1}function g3(n,e){if(e==-1)return!1;let t=n.state.selection,i,l;t instanceof be&&(i=t.node);let a=n.state.doc.resolve(e);for(let o=a.depth+1;o>0;o--){let c=o>a.depth?a.nodeAfter:a.node(o);if(be.isSelectable(c)){i&&t.$from.depth>0&&o>=t.$from.depth&&a.before(t.$from.depth+1)==t.$from.pos?l=a.before(t.$from.depth):l=a.before(o);break}}return l!=null?(js(n,be.create(n.state.doc,l)),!0):!1}function y3(n,e,t,i,l){return Og(n,"handleClickOn",e,t,i)||n.someProp("handleClick",a=>a(n,e,i))||(l?g3(n,t):m3(n,t))}function b3(n,e,t,i){return Og(n,"handleDoubleClickOn",e,t,i)||n.someProp("handleDoubleClick",l=>l(n,e,i))}function S3(n,e,t,i){return Og(n,"handleTripleClickOn",e,t,i)||n.someProp("handleTripleClick",l=>l(n,e,i))||k3(n,t,i)}function k3(n,e,t){if(t.button!=0)return!1;let i=n.state.doc;if(e==-1)return i.inlineContent?(js(n,we.create(i,0,i.content.size)),!0):!1;let l=i.resolve(e);for(let a=l.depth+1;a>0;a--){let o=a>l.depth?l.nodeAfter:l.node(a),c=l.before(a);if(o.inlineContent)js(n,we.create(i,c+1,c+1+o.content.size));else if(be.isSelectable(o))js(n,be.create(i,c));else continue;return!0}}function Rg(n){return uf(n)}const uw=Yn?"metaKey":"ctrlKey";Wt.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let i=Rg(n),l=Date.now(),a="singleClick";l-n.input.lastClick.time<500&&p3(t,n.input.lastClick)&&!t[uw]&&n.input.lastClick.button==t.button&&(n.input.lastClick.type=="singleClick"?a="doubleClick":n.input.lastClick.type=="doubleClick"&&(a="tripleClick")),n.input.lastClick={time:l,x:t.clientX,y:t.clientY,type:a,button:t.button};let o=n.posAtCoords(Vf(t));o&&(a=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new x3(n,o,t,!!i)):(a=="doubleClick"?b3:S3)(n,o.pos,o.inside,t)?t.preventDefault():qr(n,"pointer"))};class x3{constructor(e,t,i,l){this.view=e,this.pos=t,this.event=i,this.flushed=l,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!i[uw],this.allowDefault=i.shiftKey;let a,o;if(t.inside>-1)a=e.state.doc.nodeAt(t.inside),o=t.inside;else{let p=e.state.doc.resolve(t.pos);a=p.parent,o=p.depth?p.before():0}const c=l?null:i.target,f=c?e.docView.nearestDesc(c,!0):null;this.target=f&&f.nodeDOM.nodeType==1?f.nodeDOM:null;let{selection:d}=e.state;(i.button==0&&a.type.spec.draggable&&a.type.spec.selectable!==!1||d instanceof be&&d.from<=o&&d.to>o)&&(this.mightDrag={node:a,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Jn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),qr(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Pi(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Vf(e))),this.updateAllowDefault(e),this.allowDefault||!t?qr(this.view,"pointer"):y3(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Yt&&this.mightDrag&&!this.mightDrag.node.isAtom||At&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(js(this.view,Ce.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):qr(this.view,"pointer")}move(e){this.updateAllowDefault(e),qr(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Wt.touchstart=n=>{n.input.lastTouch=Date.now(),Rg(n),qr(n,"pointer")};Wt.touchmove=n=>{n.input.lastTouch=Date.now(),qr(n,"pointer")};Wt.contextmenu=n=>Rg(n);function cw(n,e){return n.composing?!0:Yt&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const C3=$i?5e3:-1;en.compositionstart=en.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof we&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(i=>i.type.spec.inclusive===!1)||At&&Vv&&v3(n)))n.markCursor=n.state.storedMarks||t.marks(),uf(n,!0),n.markCursor=null;else if(uf(n,!e.selection.empty),Jn&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let i=n.domSelectionRange();for(let l=i.focusNode,a=i.focusOffset;l&&l.nodeType==1&&a!=0;){let o=a<0?l.lastChild:l.childNodes[a-1];if(!o)break;if(o.nodeType==3){let c=n.domSelection();c&&c.collapse(o,o.nodeValue.length);break}else l=o,a=-1}}n.input.composing=!0}fw(n,C3)};function v3(n){let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(!e||e.nodeType!=1||t>=e.childNodes.length)return!1;let i=e.childNodes[t];return i.nodeType==1&&i.contentEditable=="false"}en.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,fw(n,20))};function fw(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>uf(n),e))}function hw(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=T3());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function w3(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=g2(e.focusNode,e.focusOffset),i=y2(e.focusNode,e.focusOffset);if(t&&i&&t!=i){let l=i.pmViewDesc,a=n.domObserver.lastChangedTextNode;if(t==a||i==a)return a;if(!l||!l.isText(i.nodeValue))return i;if(n.input.compositionNode==i){let o=t.pmViewDesc;if(!(!o||!o.isText(t.nodeValue)))return i}}return t||i}function T3(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function uf(n,e=!1){if(!($i&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),hw(n),e||n.docView&&n.docView.dirty){let t=Mg(n),i=n.state.selection;return t&&!t.eq(i)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!i.$from.node(i.$from.sharedDepth(i.to)).inlineContent?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function M3(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let i=getSelection(),l=document.createRange();l.selectNodeContents(e),n.dom.blur(),i.removeAllRanges(),i.addRange(l),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const Bo=dn&&Ur<15||Xs&&x2<604;Wt.copy=en.cut=(n,e)=>{let t=e,i=n.state.selection,l=t.type=="cut";if(i.empty)return;let a=Bo?null:t.clipboardData,o=i.content(),{dom:c,text:f}=Ng(n,o);a?(t.preventDefault(),a.clearData(),a.setData("text/html",c.innerHTML),a.setData("text/plain",f)):M3(n,c),l&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function E3(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function N3(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,i=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(i.contentEditable="true"),i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus();let l=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),i.parentNode&&i.parentNode.removeChild(i),t?Lo(n,i.value,null,l,e):Lo(n,i.textContent,i.innerHTML,l,e)},50)}function Lo(n,e,t,i,l){let a=iw(n,e,t,i,n.state.selection.$from);if(n.someProp("handlePaste",f=>f(n,l,a||W.empty)))return!0;if(!a)return!1;let o=E3(a),c=o?n.state.tr.replaceSelectionWith(o,i):n.state.tr.replaceSelection(a);return n.dispatch(c.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function dw(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}en.paste=(n,e)=>{let t=e;if(n.composing&&!$i)return;let i=Bo?null:t.clipboardData,l=n.input.shiftKey&&n.input.lastKeyCode!=45;i&&Lo(n,dw(i),i.getData("text/html"),l,t)?t.preventDefault():N3(n,t)};class pw{constructor(e,t,i){this.slice=e,this.move=t,this.node=i}}const A3=Yn?"altKey":"ctrlKey";function mw(n,e){let t=n.someProp("dragCopies",i=>!i(e));return t??!e[A3]}Wt.dragstart=(n,e)=>{let t=e,i=n.input.mouseDown;if(i&&i.done(),!t.dataTransfer)return;let l=n.state.selection,a=l.empty?null:n.posAtCoords(Vf(t)),o;if(!(a&&a.pos>=l.from&&a.pos<=(l instanceof be?l.to-1:l.to))){if(i&&i.mightDrag)o=be.create(n.state.doc,i.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let g=n.docView.nearestDesc(t.target,!0);g&&g.node.type.spec.draggable&&g!=n.docView&&(o=be.create(n.state.doc,g.posBefore))}}let c=(o||n.state.selection).content(),{dom:f,text:d,slice:p}=Ng(n,c);(!t.dataTransfer.files.length||!At||Uv>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(Bo?"Text":"text/html",f.innerHTML),t.dataTransfer.effectAllowed="copyMove",Bo||t.dataTransfer.setData("text/plain",d),n.dragging=new pw(p,mw(n,t),o)};Wt.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};en.dragover=en.dragenter=(n,e)=>e.preventDefault();en.drop=(n,e)=>{try{O3(n,e,n.dragging)}finally{n.dragging=null}};function O3(n,e,t){if(!e.dataTransfer)return;let i=n.posAtCoords(Vf(e));if(!i)return;let l=n.state.doc.resolve(i.pos),a=t&&t.slice;a?n.someProp("transformPasted",S=>{a=S(a,n,!1)}):a=iw(n,dw(e.dataTransfer),Bo?null:e.dataTransfer.getData("text/html"),!1,l);let o=!!(t&&mw(n,e));if(n.someProp("handleDrop",S=>S(n,e,a||W.empty,o))){e.preventDefault();return}if(!a)return;e.preventDefault();let c=a?gz(n.state.doc,l.pos,a):l.pos;c==null&&(c=l.pos);let f=n.state.tr;if(o){let{node:S}=t;S?S.replace(f):f.deleteSelection()}let d=f.mapping.map(c),p=a.openStart==0&&a.openEnd==0&&a.content.childCount==1,g=f.doc;if(p?f.replaceRangeWith(d,d,a.content.firstChild):f.replaceRange(d,d,a),f.doc.eq(g))return;let b=f.doc.resolve(d);if(p&&be.isSelectable(a.content.firstChild)&&b.nodeAfter&&b.nodeAfter.sameMarkup(a.content.firstChild))f.setSelection(new be(b));else{let S=f.mapping.map(c);f.mapping.maps[f.mapping.maps.length-1].forEach((x,v,M,T)=>S=T),f.setSelection(Eg(n,b,f.doc.resolve(S)))}n.focus(),n.dispatch(f.setMeta("uiEvent","drop"))}Wt.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Pi(n)},20))};Wt.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};Wt.beforeinput=(n,e)=>{if(At&&$i&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:i}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=i||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",a=>a(n,Sl(8,"Backspace")))))return;let{$cursor:l}=n.state.selection;l&&l.pos>0&&n.dispatch(n.state.tr.delete(l.pos-1,l.pos).scrollIntoView())},50)}};for(let n in en)Wt[n]=en[n];function Io(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class cf{constructor(e,t){this.toDOM=e,this.spec=t||wl,this.side=this.spec.side||0}map(e,t,i,l){let{pos:a,deleted:o}=e.mapResult(t.from+l,this.side<0?-1:1);return o?null:new Ut(a-i,a-i,this)}valid(){return!0}eq(e){return this==e||e instanceof cf&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Io(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class jr{constructor(e,t){this.attrs=e,this.spec=t||wl}map(e,t,i,l){let a=e.map(t.from+l,this.spec.inclusiveStart?-1:1)-i,o=e.map(t.to+l,this.spec.inclusiveEnd?1:-1)-i;return a>=o?null:new Ut(a,o,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof jr&&Io(this.attrs,e.attrs)&&Io(this.spec,e.spec)}static is(e){return e.type instanceof jr}destroy(){}}class Dg{constructor(e,t){this.attrs=e,this.spec=t||wl}map(e,t,i,l){let a=e.mapResult(t.from+l,1);if(a.deleted)return null;let o=e.mapResult(t.to+l,-1);return o.deleted||o.pos<=a.pos?null:new Ut(a.pos-i,o.pos-i,this)}valid(e,t){let{index:i,offset:l}=e.content.findIndex(t.from),a;return l==t.from&&!(a=e.child(i)).isText&&l+a.nodeSize==t.to}eq(e){return this==e||e instanceof Dg&&Io(this.attrs,e.attrs)&&Io(this.spec,e.spec)}destroy(){}}class Ut{constructor(e,t,i){this.from=e,this.to=t,this.type=i}copy(e,t){return new Ut(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,i){return this.type.map(e,this,t,i)}static widget(e,t,i){return new Ut(e,e,new cf(t,i))}static inline(e,t,i,l){return new Ut(e,t,new jr(i,l))}static node(e,t,i,l){return new Ut(e,t,new Dg(i,l))}get spec(){return this.type.spec}get inline(){return this.type instanceof jr}get widget(){return this.type instanceof cf}}const Ls=[],wl={};class ut{constructor(e,t){this.local=e.length?e:Ls,this.children=t.length?t:Ls}static create(e,t){return t.length?ff(t,e,0,wl):Ft}find(e,t,i){let l=[];return this.findInner(e??0,t??1e9,l,0,i),l}findInner(e,t,i,l,a){for(let o=0;o<this.local.length;o++){let c=this.local[o];c.from<=t&&c.to>=e&&(!a||a(c.spec))&&i.push(c.copy(c.from+l,c.to+l))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<t&&this.children[o+1]>e){let c=this.children[o]+1;this.children[o+2].findInner(e-c,t-c,i,l+c,a)}}map(e,t,i){return this==Ft||e.maps.length==0?this:this.mapInner(e,t,0,0,i||wl)}mapInner(e,t,i,l,a){let o;for(let c=0;c<this.local.length;c++){let f=this.local[c].map(e,i,l);f&&f.type.valid(t,f)?(o||(o=[])).push(f):a.onRemove&&a.onRemove(this.local[c].spec)}return this.children.length?R3(this.children,o||[],e,t,i,l,a):o?new ut(o.sort(Tl),Ls):Ft}add(e,t){return t.length?this==Ft?ut.create(e,t):this.addInner(e,t,0):this}addInner(e,t,i){let l,a=0;e.forEach((c,f)=>{let d=f+i,p;if(p=yw(t,c,d)){for(l||(l=this.children.slice());a<l.length&&l[a]<f;)a+=3;l[a]==f?l[a+2]=l[a+2].addInner(c,p,d+1):l.splice(a,0,f,f+c.nodeSize,ff(p,c,d+1,wl)),a+=3}});let o=gw(a?bw(t):t,-i);for(let c=0;c<o.length;c++)o[c].type.valid(e,o[c])||o.splice(c--,1);return new ut(o.length?this.local.concat(o).sort(Tl):this.local,l||this.children)}remove(e){return e.length==0||this==Ft?this:this.removeInner(e,0)}removeInner(e,t){let i=this.children,l=this.local;for(let a=0;a<i.length;a+=3){let o,c=i[a]+t,f=i[a+1]+t;for(let p=0,g;p<e.length;p++)(g=e[p])&&g.from>c&&g.to<f&&(e[p]=null,(o||(o=[])).push(g));if(!o)continue;i==this.children&&(i=this.children.slice());let d=i[a+2].removeInner(o,c+1);d!=Ft?i[a+2]=d:(i.splice(a,3),a-=3)}if(l.length){for(let a=0,o;a<e.length;a++)if(o=e[a])for(let c=0;c<l.length;c++)l[c].eq(o,t)&&(l==this.local&&(l=this.local.slice()),l.splice(c--,1))}return i==this.children&&l==this.local?this:l.length||i.length?new ut(l,i):Ft}forChild(e,t){if(this==Ft)return this;if(t.isLeaf)return ut.empty;let i,l;for(let c=0;c<this.children.length;c+=3)if(this.children[c]>=e){this.children[c]==e&&(i=this.children[c+2]);break}let a=e+1,o=a+t.content.size;for(let c=0;c<this.local.length;c++){let f=this.local[c];if(f.from<o&&f.to>a&&f.type instanceof jr){let d=Math.max(a,f.from)-a,p=Math.min(o,f.to)-a;d<p&&(l||(l=[])).push(f.copy(d,p))}}if(l){let c=new ut(l.sort(Tl),Ls);return i?new Br([c,i]):c}return i||Ft}eq(e){if(this==e)return!0;if(!(e instanceof ut)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return zg(this.localsInner(e))}localsInner(e){if(this==Ft)return Ls;if(e.inlineContent||!this.local.some(jr.is))return this.local;let t=[];for(let i=0;i<this.local.length;i++)this.local[i].type instanceof jr||t.push(this.local[i]);return t}forEachSet(e){e(this)}}ut.empty=new ut([],[]);ut.removeOverlap=zg;const Ft=ut.empty;class Br{constructor(e){this.members=e}map(e,t){const i=this.members.map(l=>l.map(e,t,wl));return Br.from(i)}forChild(e,t){if(t.isLeaf)return ut.empty;let i=[];for(let l=0;l<this.members.length;l++){let a=this.members[l].forChild(e,t);a!=Ft&&(a instanceof Br?i=i.concat(a.members):i.push(a))}return Br.from(i)}eq(e){if(!(e instanceof Br)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,i=!0;for(let l=0;l<this.members.length;l++){let a=this.members[l].localsInner(e);if(a.length)if(!t)t=a;else{i&&(t=t.slice(),i=!1);for(let o=0;o<a.length;o++)t.push(a[o])}}return t?zg(i?t:t.sort(Tl)):Ls}static from(e){switch(e.length){case 0:return Ft;case 1:return e[0];default:return new Br(e.every(t=>t instanceof ut)?e:e.reduce((t,i)=>t.concat(i instanceof ut?i:i.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function R3(n,e,t,i,l,a,o){let c=n.slice();for(let d=0,p=a;d<t.maps.length;d++){let g=0;t.maps[d].forEach((b,S,x,v)=>{let M=v-x-(S-b);for(let T=0;T<c.length;T+=3){let Q=c[T+1];if(Q<0||b>Q+p-g)continue;let L=c[T]+p-g;S>=L?c[T+1]=b<=L?-2:-1:b>=p&&M&&(c[T]+=M,c[T+1]+=M)}g+=M}),p=t.maps[d].map(p,-1)}let f=!1;for(let d=0;d<c.length;d+=3)if(c[d+1]<0){if(c[d+1]==-2){f=!0,c[d+1]=-1;continue}let p=t.map(n[d]+a),g=p-l;if(g<0||g>=i.content.size){f=!0;continue}let b=t.map(n[d+1]+a,-1),S=b-l,{index:x,offset:v}=i.content.findIndex(g),M=i.maybeChild(x);if(M&&v==g&&v+M.nodeSize==S){let T=c[d+2].mapInner(t,M,p+1,n[d]+a+1,o);T!=Ft?(c[d]=g,c[d+1]=S,c[d+2]=T):(c[d+1]=-2,f=!0)}else f=!0}if(f){let d=D3(c,n,e,t,l,a,o),p=ff(d,i,0,o);e=p.local;for(let g=0;g<c.length;g+=3)c[g+1]<0&&(c.splice(g,3),g-=3);for(let g=0,b=0;g<p.children.length;g+=3){let S=p.children[g];for(;b<c.length&&c[b]<S;)b+=3;c.splice(b,0,p.children[g],p.children[g+1],p.children[g+2])}}return new ut(e.sort(Tl),c)}function gw(n,e){if(!e||!n.length)return n;let t=[];for(let i=0;i<n.length;i++){let l=n[i];t.push(new Ut(l.from+e,l.to+e,l.type))}return t}function D3(n,e,t,i,l,a,o){function c(f,d){for(let p=0;p<f.local.length;p++){let g=f.local[p].map(i,l,d);g?t.push(g):o.onRemove&&o.onRemove(f.local[p].spec)}for(let p=0;p<f.children.length;p+=3)c(f.children[p+2],f.children[p]+d+1)}for(let f=0;f<n.length;f+=3)n[f+1]==-1&&c(n[f+2],e[f]+a+1);return t}function yw(n,e,t){if(e.isLeaf)return null;let i=t+e.nodeSize,l=null;for(let a=0,o;a<n.length;a++)(o=n[a])&&o.from>t&&o.to<i&&((l||(l=[])).push(o),n[a]=null);return l}function bw(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function ff(n,e,t,i){let l=[],a=!1;e.forEach((c,f)=>{let d=yw(n,c,f+t);if(d){a=!0;let p=ff(d,c,t+f+1,i);p!=Ft&&l.push(f,f+c.nodeSize,p)}});let o=gw(a?bw(n):n,-t).sort(Tl);for(let c=0;c<o.length;c++)o[c].type.valid(e,o[c])||(i.onRemove&&i.onRemove(o[c].spec),o.splice(c--,1));return o.length||l.length?new ut(o,l):Ft}function Tl(n,e){return n.from-e.from||n.to-e.to}function zg(n){let e=n;for(let t=0;t<e.length-1;t++){let i=e[t];if(i.from!=i.to)for(let l=t+1;l<e.length;l++){let a=e[l];if(a.from==i.from){a.to!=i.to&&(e==n&&(e=n.slice()),e[l]=a.copy(a.from,i.to),mx(e,l+1,a.copy(i.to,a.to)));continue}else{a.from<i.to&&(e==n&&(e=n.slice()),e[t]=i.copy(i.from,a.from),mx(e,l,i.copy(a.from,i.to)));break}}}return e}function mx(n,e,t){for(;e<n.length&&Tl(t,n[e])>0;)e++;n.splice(e,0,t)}function Up(n){let e=[];return n.someProp("decorations",t=>{let i=t(n.state);i&&i!=Ft&&e.push(i)}),n.cursorWrapper&&e.push(ut.create(n.state.doc,[n.cursorWrapper.deco])),Br.from(e)}const z3={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},_3=dn&&Ur<=11;class B3{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class L3{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new B3,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(i=>{for(let l=0;l<i.length;l++)this.queue.push(i[l]);dn&&Ur<=11&&i.some(l=>l.type=="childList"&&l.removedNodes.length||l.type=="characterData"&&l.oldValue.length>l.target.nodeValue.length)?this.flushSoon():this.flush()}),_3&&(this.onCharData=i=>{this.queue.push({target:i.target,type:"characterData",oldValue:i.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,z3)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(ax(this.view)){if(this.suppressingSelectionUpdates)return Pi(this.view);if(dn&&Ur<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&_l(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,i;for(let a=e.focusNode;a;a=Qs(a))t.add(a);for(let a=e.anchorNode;a;a=Qs(a))if(t.has(a)){i=a;break}let l=i&&this.view.docView.nearestDesc(i);if(l&&l.ignoreMutation({type:"selection",target:i.nodeType==3?i.parentNode:i}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let i=e.domSelectionRange(),l=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(i)&&ax(e)&&!this.ignoreSelectionChange(i),a=-1,o=-1,c=!1,f=[];if(e.editable)for(let p=0;p<t.length;p++){let g=this.registerMutation(t[p],f);g&&(a=a<0?g.from:Math.min(g.from,a),o=o<0?g.to:Math.max(g.to,o),g.typeOver&&(c=!0))}if(Jn&&f.length){let p=f.filter(g=>g.nodeName=="BR");if(p.length==2){let[g,b]=p;g.parentNode&&g.parentNode.parentNode==b.parentNode?b.remove():g.remove()}else{let{focusNode:g}=this.currentSelection;for(let b of p){let S=b.parentNode;S&&S.nodeName=="LI"&&(!g||H3(e,g)!=S)&&b.remove()}}}else if((At||Yt)&&f.some(p=>p.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let p of f)if(p.nodeName=="BR"&&p.parentNode){let g=p.nextSibling;g&&g.nodeType==1&&g.contentEditable=="false"&&p.parentNode.removeChild(p)}}let d=null;a<0&&l&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Hf(i)&&(d=Mg(e))&&d.eq(Ce.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Pi(e),this.currentSelection.set(i),e.scrollToSelection()):(a>-1||l)&&(a>-1&&(e.docView.markDirty(a,o),I3(e)),this.handleDOMChange(a,o,c,f),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(i)||Pi(e),this.currentSelection.set(i))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let i=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(i==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!i||i.ignoreMutation(e))return null;if(e.type=="childList"){for(let p=0;p<e.addedNodes.length;p++){let g=e.addedNodes[p];t.push(g),g.nodeType==3&&(this.lastChangedTextNode=g)}if(i.contentDOM&&i.contentDOM!=i.dom&&!i.contentDOM.contains(e.target))return{from:i.posBefore,to:i.posAfter};let l=e.previousSibling,a=e.nextSibling;if(dn&&Ur<=11&&e.addedNodes.length)for(let p=0;p<e.addedNodes.length;p++){let{previousSibling:g,nextSibling:b}=e.addedNodes[p];(!g||Array.prototype.indexOf.call(e.addedNodes,g)<0)&&(l=g),(!b||Array.prototype.indexOf.call(e.addedNodes,b)<0)&&(a=b)}let o=l&&l.parentNode==e.target?Ht(l)+1:0,c=i.localPosFromDOM(e.target,o,-1),f=a&&a.parentNode==e.target?Ht(a):e.target.childNodes.length,d=i.localPosFromDOM(e.target,f,1);return{from:c,to:d}}else return e.type=="attributes"?{from:i.posAtStart-i.border,to:i.posAtEnd+i.border}:(this.lastChangedTextNode=e.target,{from:i.posAtStart,to:i.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let gx=new WeakMap,yx=!1;function I3(n){if(!gx.has(n)&&(gx.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=Jn,yx)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),yx=!0}}function bx(n,e){let t=e.startContainer,i=e.startOffset,l=e.endContainer,a=e.endOffset,o=n.domAtPos(n.state.selection.anchor);return _l(o.node,o.offset,l,a)&&([t,i,l,a]=[l,a,t,i]),{anchorNode:t,anchorOffset:i,focusNode:l,focusOffset:a}}function q3(n,e){if(e.getComposedRanges){let l=e.getComposedRanges(n.root)[0];if(l)return bx(n,l)}let t;function i(l){l.preventDefault(),l.stopImmediatePropagation(),t=l.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",i,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",i,!0),t?bx(n,t):null}function H3(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let i=n.docView.nearestDesc(t,!0);if(i&&i.node.isBlock)return t}return null}function U3(n,e,t){let{node:i,fromOffset:l,toOffset:a,from:o,to:c}=n.docView.parseRange(e,t),f=n.domSelectionRange(),d,p=f.anchorNode;if(p&&n.dom.contains(p.nodeType==1?p:p.parentNode)&&(d=[{node:p,offset:f.anchorOffset}],Hf(f)||d.push({node:f.focusNode,offset:f.focusOffset})),At&&n.input.lastKeyCode===8)for(let M=a;M>l;M--){let T=i.childNodes[M-1],Q=T.pmViewDesc;if(T.nodeName=="BR"&&!Q){a=M;break}if(!Q||Q.size)break}let g=n.state.doc,b=n.someProp("domParser")||Rl.fromSchema(n.state.schema),S=g.resolve(o),x=null,v=b.parse(i,{topNode:S.parent,topMatch:S.parent.contentMatchAt(S.index()),topOpen:!0,from:l,to:a,preserveWhitespace:S.parent.type.whitespace=="pre"?"full":!0,findPositions:d,ruleFromNode:V3,context:S});if(d&&d[0].pos!=null){let M=d[0].pos,T=d[1]&&d[1].pos;T==null&&(T=M),x={anchor:M+o,head:T+o}}return{doc:v,sel:x,from:o,to:c}}function V3(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(Yt&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||Yt&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const j3=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function F3(n,e,t,i,l){let a=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let Y=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,ne=Mg(n,Y);if(ne&&!n.state.selection.eq(ne)){if(At&&$i&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",H=>H(n,Sl(13,"Enter"))))return;let ue=n.state.tr.setSelection(ne);Y=="pointer"?ue.setMeta("pointer",!0):Y=="key"&&ue.scrollIntoView(),a&&ue.setMeta("composition",a),n.dispatch(ue)}return}let o=n.state.doc.resolve(e),c=o.sharedDepth(t);e=o.before(c+1),t=n.state.doc.resolve(t).after(c+1);let f=n.state.selection,d=U3(n,e,t),p=n.state.doc,g=p.slice(d.from,d.to),b,S;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(b=n.state.selection.to,S="end"):(b=n.state.selection.from,S="start"),n.input.lastKeyCode=null;let x=G3(g.content,d.doc.content,d.from,b,S);if(x&&n.input.domChangeCount++,(Xs&&n.input.lastIOSEnter>Date.now()-225||$i)&&l.some(Y=>Y.nodeType==1&&!j3.test(Y.nodeName))&&(!x||x.endA>=x.endB)&&n.someProp("handleKeyDown",Y=>Y(n,Sl(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!x)if(i&&f instanceof we&&!f.empty&&f.$head.sameParent(f.$anchor)&&!n.composing&&!(d.sel&&d.sel.anchor!=d.sel.head))x={start:f.from,endA:f.to,endB:f.to};else{if(d.sel){let Y=Sx(n,n.state.doc,d.sel);if(Y&&!Y.eq(n.state.selection)){let ne=n.state.tr.setSelection(Y);a&&ne.setMeta("composition",a),n.dispatch(ne)}}return}n.state.selection.from<n.state.selection.to&&x.start==x.endB&&n.state.selection instanceof we&&(x.start>n.state.selection.from&&x.start<=n.state.selection.from+2&&n.state.selection.from>=d.from?x.start=n.state.selection.from:x.endA<n.state.selection.to&&x.endA>=n.state.selection.to-2&&n.state.selection.to<=d.to&&(x.endB+=n.state.selection.to-x.endA,x.endA=n.state.selection.to)),dn&&Ur<=11&&x.endB==x.start+1&&x.endA==x.start&&x.start>d.from&&d.doc.textBetween(x.start-d.from-1,x.start-d.from+1)==" "&&(x.start--,x.endA--,x.endB--);let v=d.doc.resolveNoCache(x.start-d.from),M=d.doc.resolveNoCache(x.endB-d.from),T=p.resolve(x.start),Q=v.sameParent(M)&&v.parent.inlineContent&&T.end()>=x.endA;if((Xs&&n.input.lastIOSEnter>Date.now()-225&&(!Q||l.some(Y=>Y.nodeName=="DIV"||Y.nodeName=="P"))||!Q&&v.pos<d.doc.content.size&&(!v.sameParent(M)||!v.parent.inlineContent)&&v.pos<M.pos&&!/\S/.test(d.doc.textBetween(v.pos,M.pos,"","")))&&n.someProp("handleKeyDown",Y=>Y(n,Sl(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>x.start&&Y3(p,x.start,x.endA,v,M)&&n.someProp("handleKeyDown",Y=>Y(n,Sl(8,"Backspace")))){$i&&At&&n.domObserver.suppressSelectionUpdates();return}At&&x.endB==x.start&&(n.input.lastChromeDelete=Date.now()),$i&&!Q&&v.start()!=M.start()&&M.parentOffset==0&&v.depth==M.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==x.endA&&(x.endB-=2,M=d.doc.resolveNoCache(x.endB-d.from),setTimeout(()=>{n.someProp("handleKeyDown",function(Y){return Y(n,Sl(13,"Enter"))})},20));let L=x.start,P=x.endA,ee=Y=>{let ne=Y||n.state.tr.replace(L,P,d.doc.slice(x.start-d.from,x.endB-d.from));if(d.sel){let ue=Sx(n,ne.doc,d.sel);ue&&!(At&&n.composing&&ue.empty&&(x.start!=x.endB||n.input.lastChromeDelete<Date.now()-100)&&(ue.head==L||ue.head==ne.mapping.map(P)-1)||dn&&ue.empty&&ue.head==L)&&ne.setSelection(ue)}return a&&ne.setMeta("composition",a),ne.scrollIntoView()},z;if(Q)if(v.pos==M.pos){dn&&Ur<=11&&v.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Pi(n),20));let Y=ee(n.state.tr.delete(L,P)),ne=p.resolve(x.start).marksAcross(p.resolve(x.endA));ne&&Y.ensureMarks(ne),n.dispatch(Y)}else if(x.endA==x.endB&&(z=K3(v.parent.content.cut(v.parentOffset,M.parentOffset),T.parent.content.cut(T.parentOffset,x.endA-T.start())))){let Y=ee(n.state.tr);z.type=="add"?Y.addMark(L,P,z.mark):Y.removeMark(L,P,z.mark),n.dispatch(Y)}else if(v.parent.child(v.index()).isText&&v.index()==M.index()-(M.textOffset?0:1)){let Y=v.parent.textBetween(v.parentOffset,M.parentOffset),ne=()=>ee(n.state.tr.insertText(Y,L,P));n.someProp("handleTextInput",ue=>ue(n,L,P,Y,ne))||n.dispatch(ne())}else n.dispatch(ee());else n.dispatch(ee())}function Sx(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:Eg(n,e.resolve(t.anchor),e.resolve(t.head))}function K3(n,e){let t=n.firstChild.marks,i=e.firstChild.marks,l=t,a=i,o,c,f;for(let p=0;p<i.length;p++)l=i[p].removeFromSet(l);for(let p=0;p<t.length;p++)a=t[p].removeFromSet(a);if(l.length==1&&a.length==0)c=l[0],o="add",f=p=>p.mark(c.addToSet(p.marks));else if(l.length==0&&a.length==1)c=a[0],o="remove",f=p=>p.mark(c.removeFromSet(p.marks));else return null;let d=[];for(let p=0;p<e.childCount;p++)d.push(f(e.child(p)));if(X.from(d).eq(n))return{mark:c,type:o}}function Y3(n,e,t,i,l){if(t-e<=l.pos-i.pos||Vp(i,!0,!1)<l.pos)return!1;let a=n.resolve(e);if(!i.parent.isTextblock){let c=a.nodeAfter;return c!=null&&t==e+c.nodeSize}if(a.parentOffset<a.parent.content.size||!a.parent.isTextblock)return!1;let o=n.resolve(Vp(a,!0,!0));return!o.parent.isTextblock||o.pos>t||Vp(o,!0,!1)<t?!1:i.parent.content.cut(i.parentOffset).eq(o.parent.content)}function Vp(n,e,t){let i=n.depth,l=e?n.end():n.pos;for(;i>0&&(e||n.indexAfter(i)==n.node(i).childCount);)i--,l++,e=!1;if(t){let a=n.node(i).maybeChild(n.indexAfter(i));for(;a&&!a.isLeaf;)a=a.firstChild,l++}return l}function G3(n,e,t,i,l){let a=n.findDiffStart(e,t);if(a==null)return null;let{a:o,b:c}=n.findDiffEnd(e,t+n.size,t+e.size);if(l=="end"){let f=Math.max(0,a-Math.min(o,c));i-=o+f-a}if(o<a&&n.size<e.size){let f=i<=a&&i>=o?a-i:0;a-=f,a&&a<e.size&&kx(e.textBetween(a-1,a+1))&&(a+=f?1:-1),c=a+(c-o),o=a}else if(c<a){let f=i<=a&&i>=c?a-i:0;a-=f,a&&a<n.size&&kx(n.textBetween(a-1,a+1))&&(a+=f?1:-1),o=a+(o-c),c=a}return{start:a,endA:o,endB:c}}function kx(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class Sw{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new u3,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(Tx),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=vx(this),Cx(this),this.nodeViews=wx(this),this.docView=tx(this.state.doc,xx(this),Up(this),this.dom,this),this.domObserver=new L3(this,(i,l,a,o)=>F3(this,i,l,a,o)),this.domObserver.start(),c3(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Hm(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Tx),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let i in this._props)t[i]=this._props[i];t.state=this.state;for(let i in e)t[i]=e[i];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var i;let l=this.state,a=!1,o=!1;e.storedMarks&&this.composing&&(hw(this),o=!0),this.state=e;let c=l.plugins!=e.plugins||this._props.plugins!=t.plugins;if(c||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let S=wx(this);X3(S,this.nodeViews)&&(this.nodeViews=S,a=!0)}(c||t.handleDOMEvents!=this._props.handleDOMEvents)&&Hm(this),this.editable=vx(this),Cx(this);let f=Up(this),d=xx(this),p=l.plugins!=e.plugins&&!l.doc.eq(e.doc)?"reset":e.scrollToSelection>l.scrollToSelection?"to selection":"preserve",g=a||!this.docView.matchesNode(e.doc,d,f);(g||!e.selection.eq(l.selection))&&(o=!0);let b=p=="preserve"&&o&&this.dom.style.overflowAnchor==null&&w2(this);if(o){this.domObserver.stop();let S=g&&(dn||At)&&!this.composing&&!l.selection.empty&&!e.selection.empty&&Q3(l.selection,e.selection);if(g){let x=At?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=w3(this)),(a||!this.docView.update(e.doc,d,f,this))&&(this.docView.updateOuterDeco(d),this.docView.destroy(),this.docView=tx(e.doc,d,f,this.dom,this)),x&&!this.trackWrites&&(S=!0)}S||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&X2(this))?Pi(this,S):(ew(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(l),!((i=this.dragging)===null||i===void 0)&&i.node&&!l.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,l),p=="reset"?this.dom.scrollTop=0:p=="to selection"?this.scrollToSelection():b&&T2(b)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof be){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&Jk(this,t.getBoundingClientRect(),e)}else Jk(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let i=this.directPlugins[t];i.spec.view&&this.pluginViews.push(i.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let i=this.state.plugins[t];i.spec.view&&this.pluginViews.push(i.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let i=this.pluginViews[t];i.update&&i.update(this,e)}}updateDraggedNode(e,t){let i=e.node,l=-1;if(this.state.doc.nodeAt(i.from)==i.node)l=i.from;else{let a=i.from+(this.state.doc.content.size-t.doc.content.size);(a>0&&this.state.doc.nodeAt(a))==i.node&&(l=a)}this.dragging=new pw(e.slice,e.move,l<0?void 0:be.create(this.state.doc,l))}someProp(e,t){let i=this._props&&this._props[e],l;if(i!=null&&(l=t?t(i):i))return l;for(let o=0;o<this.directPlugins.length;o++){let c=this.directPlugins[o].props[e];if(c!=null&&(l=t?t(c):c))return l}let a=this.state.plugins;if(a)for(let o=0;o<a.length;o++){let c=a[o].props[e];if(c!=null&&(l=t?t(c):c))return l}}hasFocus(){if(dn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&M2(this.dom),Pi(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return R2(this,e)}coordsAtPos(e,t=1){return Gv(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,i=-1){let l=this.docView.posFromDOM(e,t,i);if(l==null)throw new RangeError("DOM position not inside the editor");return l}endOfTextblock(e,t){return L2(this,t||this.state,e)}pasteHTML(e,t){return Lo(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return Lo(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return Ng(this,e)}destroy(){this.docView&&(f3(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Up(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,p2())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return d3(this,e)}domSelectionRange(){let e=this.domSelection();return e?Yt&&this.root.nodeType===11&&S2(this.dom.ownerDocument)==this.dom&&q3(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}Sw.prototype.dispatch=function(n){let e=this._props.dispatchTransaction;e?e.call(this,n):this.updateState(this.state.apply(n))};function xx(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let i in t)i=="class"?e.class+=" "+t[i]:i=="style"?e.style=(e.style?e.style+";":"")+t[i]:!e[i]&&i!="contenteditable"&&i!="nodeName"&&(e[i]=String(t[i]))}),e.translate||(e.translate="no"),[Ut.node(0,n.state.doc.content.size,e)]}function Cx(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:Ut.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function vx(n){return!n.someProp("editable",e=>e(n.state)===!1)}function Q3(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function wx(n){let e=Object.create(null);function t(i){for(let l in i)Object.prototype.hasOwnProperty.call(e,l)||(e[l]=i[l])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function X3(n,e){let t=0,i=0;for(let l in n){if(n[l]!=e[l])return!0;t++}for(let l in e)i++;return t!=i}function Tx(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}function er(n,e){return n.meta={package:"@milkdown/core",group:"System",...e},n}const kw={text:(n,e,t,i)=>{const l=n.value;return/^[^*_\\]*\s+$/.test(l)?l:t.safe(l,{...i,encode:[]})},strong:(n,e,t,i)=>{const l=n.marker||t.options.strong||"*",a=t.enter("strong"),o=t.createTracker(i);let c=o.move(l+l);return c+=o.move(t.containerPhrasing(n,{before:c,after:l,...o.current()})),c+=o.move(l+l),a(),c},emphasis:(n,e,t,i)=>{const l=n.marker||t.options.emphasis||"*",a=t.enter("emphasis"),o=t.createTracker(i);let c=o.move(l);return c+=o.move(t.containerPhrasing(n,{before:c,after:l,...o.current()})),c+=o.move(l),a(),c}},Fr=Le({},"editorView"),fo=Le({},"editorState"),jp=Le([],"initTimer"),Mx=Le({},"editor"),qo=Le([],"inputRules"),Qr=Le([],"prosePlugins"),Ho=Le([],"remarkPlugins"),Um=Le([],"nodeView"),Vm=Le([],"markView"),Ml=Le(Cm().use(mm).use(Sm),"remark"),ko=Le({handlers:kw,encode:[]},"remarkStringifyOptions"),Kc=xi("ConfigReady");function J3(n){const e=t=>(t.record(Kc),async()=>(await n(t),t.done(Kc),()=>{t.clearTimer(Kc)}));return er(e,{displayName:"Config"}),e}const El=xi("InitReady");function Z3(n){const e=t=>(t.inject(Mx,n).inject(Qr,[]).inject(Ho,[]).inject(qo,[]).inject(Um,[]).inject(Vm,[]).inject(ko,{handlers:kw,encode:[]}).inject(Ml,Cm().use(mm).use(Sm)).inject(jp,[Kc]).record(El),async()=>{await t.waitTimers(jp);const i=t.get(ko);return t.set(Ml,Cm().use(mm).use(Sm,i)),t.done(El),()=>{t.remove(Mx).remove(Qr).remove(Ho).remove(qo).remove(Um).remove(Vm).remove(ko).remove(Ml).remove(jp).clearTimer(El)}});return er(e,{displayName:"Init"}),e}const pn=xi("SchemaReady"),Fp=Le([],"schemaTimer"),Wi=Le({},"schema"),xo=Le([],"nodes"),Co=Le([],"marks");function Ex(n){return{...n,parseDOM:n.parseDOM?.map(e=>({priority:n.priority,...e}))}}const xw=n=>(n.inject(Wi,{}).inject(xo,[]).inject(Co,[]).inject(Fp,[El]).record(pn),async()=>{await n.waitTimers(Fp);const e=n.get(Ml),i=n.get(Ho).reduce((c,f)=>c.use(f.plugin,f.options),e);n.set(Ml,i);const l=Object.fromEntries(n.get(xo).map(([c,f])=>[c,Ex(f)])),a=Object.fromEntries(n.get(Co).map(([c,f])=>[c,Ex(f)])),o=new gA({nodes:l,marks:a});return n.set(Wi,o),n.done(pn),()=>{n.remove(Wi).remove(xo).remove(Co).remove(Fp).clearTimer(pn)}});er(xw,{displayName:"Schema"});class Cw{constructor(){this.#t=new mC,this.#e=null,this.setCtx=e=>{this.#e=e},this.chain=()=>{if(this.#e==null)throw pp();const e=this.#e,t=[],i=this.get.bind(this),l={run:()=>{const o=Zs(...t),c=e.get(Fr);return o(c.state,c.dispatch,c)},inline:o=>(t.push(o),l),pipe:a.bind(this)};function a(o,c){const f=i(o);return t.push(f(c)),l}return l}}#t;#e;get ctx(){return this.#e}create(e,t){const i=e.create(this.#t.sliceMap);return i.set(t),i}get(e){return this.#t.get(e).get()}remove(e){return this.#t.remove(e)}call(e,t){if(this.#e==null)throw pp();const l=this.get(e)(t),a=this.#e.get(Fr);return l(a.state,a.dispatch,a)}inline(e){if(this.#e==null)throw pp();const t=this.#e.get(Fr);return e(t.state,t.dispatch,t)}}function $3(n="cmdKey"){return Le((()=>()=>!1),n)}const Ye=Le(new Cw,"commands"),Kp=Le([pn],"commandsTimer"),vo=xi("CommandsReady"),vw=n=>{const e=new Cw;return e.setCtx(n),n.inject(Ye,e).inject(Kp,[pn]).record(vo),async()=>(await n.waitTimers(Kp),n.done(vo),()=>{n.remove(Ye).remove(Kp).clearTimer(vo)})};er(vw,{displayName:"Commands"});function P3(n){const e=Zs(Yz,Sg,Mz,Ov);return n.Backspace=e,n}class ww{constructor(){this.#t=null,this.#e=[],this.setCtx=e=>{this.#t=e},this.add=e=>(this.#e.push(e),()=>{this.#e=this.#e.filter(t=>t!==e)}),this.addObjectKeymap=e=>{const t=[];return Object.entries(e).forEach(([i,l])=>{if(typeof l=="function"){const a={key:i,onRun:()=>l};this.#e.push(a),t.push(()=>{this.#e=this.#e.filter(o=>o!==a)})}else this.#e.push(l),t.push(()=>{this.#e=this.#e.filter(a=>a!==l)})}),()=>{t.forEach(i=>i())}},this.addBaseKeymap=()=>{const e=P3(Fz);return this.addObjectKeymap(e)},this.build=()=>{const e={};return this.#e.forEach(i=>{e[i.key]=[...e[i.key]||[],i]}),Object.fromEntries(Object.entries(e).map(([i,l])=>{const a=l.sort((c,f)=>(f.priority??50)-(c.priority??50));return[i,(c,f,d)=>{const p=this.#t;if(p==null)throw Nf();const g=a.map(S=>S.onRun(p));return Zs(...g)(c,f,d)}]}))}}#t;#e;get ctx(){return this.#t}}const hf=Le(new ww,"keymap"),Yp=Le([pn],"keymapTimer"),wo=xi("KeymapReady"),W3=n=>{const e=new ww;return e.setCtx(n),n.inject(hf,e).inject(Yp,[pn]).record(wo),async()=>(await n.waitTimers(Yp),n.done(wo),()=>{n.remove(hf).remove(Yp).clearTimer(wo)})},Yc=xi("ParserReady"),Tw=(()=>{throw Nf()}),To=Le(Tw,"parser"),Gp=Le([],"parserTimer"),Mw=n=>(n.inject(To,Tw).inject(Gp,[pn]).record(Yc),async()=>{await n.waitTimers(Gp);const e=n.get(Ml),t=n.get(Wi);return n.set(To,ZD.create(t,e)),n.done(Yc),()=>{n.remove(To).remove(Gp).clearTimer(Yc)}});er(Mw,{displayName:"Parser"});const Mo=xi("SerializerReady"),Qp=Le([],"serializerTimer"),Ew=(()=>{throw Nf()}),Eo=Le(Ew,"serializer"),Nw=n=>(n.inject(Eo,Ew).inject(Qp,[pn]).record(Mo),async()=>{await n.waitTimers(Qp);const e=n.get(Ml),t=n.get(Wi);return n.set(Eo,PD.create(t,e)),n.done(Mo),()=>{n.remove(Eo).remove(Qp).clearTimer(Mo)}});er(Nw,{displayName:"Serializer"});const No=Le("","defaultValue"),Xp=Le(n=>n,"stateOptions"),Jp=Le([],"editorStateTimer"),Gc=xi("EditorStateReady");function e_(n,e,t){if(typeof n=="string")return e(n);if(n.type==="html")return Rl.fromSchema(t).parse(n.dom);if(n.type==="json")return Xn.fromJSON(t,n.value);throw HN(n)}const t_=new Vt("MILKDOWN_STATE_TRACKER"),Aw=n=>(n.inject(No,"").inject(fo,{}).inject(Xp,e=>e).inject(Jp,[Yc,Mo,vo,wo]).record(Gc),async()=>{await n.waitTimers(Jp);const e=n.get(Wi),t=n.get(To),i=n.get(qo),l=n.get(Xp),a=n.get(Qr),o=n.get(No),c=e_(o,t,e),f=n.get(hf),d=f.addBaseKeymap(),p=[...a,new Qt({key:t_,state:{init:()=>{},apply:(S,x,v,M)=>{n.set(fo,M)}}}),$z({rules:i}),d2(f.build())];n.set(Qr,p);const g=l({schema:e,doc:c,plugins:p}),b=Us.create(g);return n.set(fo,b),n.done(Gc),()=>{d(),n.remove(No).remove(fo).remove(Xp).remove(Jp).clearTimer(Gc)}});er(Aw,{displayName:"EditorState"});const Uo=Le([],"pasteRule"),Zp=Le([pn],"pasteRuleTimer"),Qc=xi("PasteRuleReady"),Ow=n=>(n.inject(Uo,[]).inject(Zp,[pn]).record(Qc),async()=>(await n.waitTimers(Zp),n.done(Qc),()=>{n.remove(Uo).remove(Zp).clearTimer(Qc)}));er(Ow,{displayName:"PasteRule"});const Xc=xi("EditorViewReady"),$p=Le([],"editorViewTimer"),Ao=Le({},"editorViewOptions"),Jc=Le(null,"root"),jm=Le(null,"rootDOM"),Fm=Le({},"rootAttrs");function n_(n,e){const t=document.createElement("div");t.className="milkdown",n.appendChild(t),e.set(jm,t);const i=e.get(Fm);return Object.entries(i).forEach(([l,a])=>t.setAttribute(l,a)),t}function i_(n){n.classList.add("editor"),n.setAttribute("role","textbox")}const r_=new Vt("MILKDOWN_VIEW_CLEAR"),Rw=n=>(n.inject(Jc,document.body).inject(Fr,{}).inject(Ao,{}).inject(jm,null).inject(Fm,{}).inject($p,[Gc,Qc]).record(Xc),async()=>{await n.wait(El);const e=n.get(Jc)||document.body,t=typeof e=="string"?document.querySelector(e):e;n.update(Qr,f=>[new Qt({key:r_,view:d=>{const p=t?n_(t,n):void 0;return(()=>{if(p&&t){const b=d.dom;t.replaceChild(p,b),p.appendChild(b)}})(),{destroy:()=>{p?.parentNode&&p?.parentNode.replaceChild(d.dom,p),p?.remove()}}}}),...f]),await n.waitTimers($p);const i=n.get(fo),l=n.get(Ao),a=Object.fromEntries(n.get(Um)),o=Object.fromEntries(n.get(Vm)),c=new Sw(t,{state:i,nodeViews:a,markViews:o,transformPasted:(f,d,p)=>(n.get(Uo).sort((g,b)=>(b.priority??50)-(g.priority??50)).map(g=>g.run).forEach(g=>{f=g(f,d,p)}),f),...l});return i_(c.dom),n.set(Fr,c),n.done(Xc),()=>{c?.destroy(),n.remove(Jc).remove(Fr).remove(Ao).remove(jm).remove(Fm).remove($p).clearTimer(Xc)}});er(Rw,{displayName:"EditorView"});class _g{constructor(){this.#t=!1,this.#e="Idle",this.#i=[],this.#n=()=>{},this.#s=new mC,this.#l=new $N,this.#r=new Map,this.#a=new Map,this.#o=new lg(this.#s,this.#l),this.#d=()=>{const e=J3(async i=>{await Promise.all(this.#i.map(l=>Promise.resolve(l(i))))}),t=[xw,Mw,Nw,vw,W3,Ow,Aw,Rw,Z3(this),e];this.#c(t,this.#a)},this.#c=(e,t)=>{e.forEach(i=>{const l=this.#o.produce(this.#t?i.meta:void 0),a=i(l);t.set(i,{ctx:l,handler:a,cleanup:void 0})})},this.#f=(e,t=!1)=>Promise.all([e].flat().map(async i=>{const a=this.#r.get(i)?.cleanup;return t?this.#r.delete(i):this.#r.set(i,{ctx:void 0,handler:void 0,cleanup:void 0}),typeof a=="function"?a():a})),this.#p=async()=>{await Promise.all([...this.#a.entries()].map(async([e,{cleanup:t}])=>typeof t=="function"?t():t)),this.#a.clear()},this.#u=e=>{this.#e=e,this.#n(e)},this.#h=e=>[...e.entries()].map(async([t,i])=>{const{ctx:l,handler:a}=i;if(!a)return;const o=await a();e.set(t,{ctx:l,handler:a,cleanup:o})}),this.enableInspector=(e=!0)=>(this.#t=e,this),this.onStatusChange=e=>(this.#n=e,this),this.config=e=>(this.#i.push(e),this),this.removeConfig=e=>(this.#i=this.#i.filter(t=>t!==e),this),this.use=e=>{const t=[e].flat();return t.flat().forEach(i=>{this.#r.set(i,{ctx:void 0,handler:void 0,cleanup:void 0})}),this.#e==="Created"&&this.#c(t,this.#r),this},this.remove=async e=>this.#e==="OnCreate"?(console.warn("[Milkdown]: You are trying to remove plugins when the editor is creating, this is not recommended, please check your code."),new Promise(t=>{setTimeout(()=>{t(this.remove(e))},50)})):(await this.#f([e].flat(),!0),this),this.create=async()=>this.#e==="OnCreate"?this:(this.#e==="Created"&&await this.destroy(),this.#u("OnCreate"),this.#d(),this.#c([...this.#r.keys()],this.#r),await Promise.all([this.#h(this.#a),this.#h(this.#r)].flat()),this.#u("Created"),this),this.destroy=async(e=!1)=>this.#e==="Destroyed"||this.#e==="OnDestroy"?this:this.#e==="OnCreate"?new Promise(t=>{setTimeout(()=>{t(this.destroy(e))},50)}):(e&&(this.#i=[]),this.#u("OnDestroy"),await this.#f([...this.#r.keys()],e),await this.#p(),this.#u("Destroyed"),this),this.action=e=>e(this.#o),this.inspect=()=>this.#t?[...this.#a.values(),...this.#r.values()].map(({ctx:e})=>e?.inspector?.read()).filter(e=>!!e):(console.warn("[Milkdown]: You are trying to collect inspection when inspector is disabled, please enable inspector by `editor.enableInspector()` first."),[])}static make(){return new _g}#t;#e;#i;#n;#s;#l;#r;#a;#o;#d;#c;#f;#p;#u;#h;get ctx(){return this.#o}get status(){return this.#e}}function Se(n,e){const t=$3(n),i=l=>async()=>{i.key=t,await l.wait(vo);const a=e(l);return l.get(Ye).create(t,a),i.run=o=>l.get(Ye).call(n,o),()=>{l.get(Ye).remove(t)}};return i}function yn(n){const e=t=>async()=>{await t.wait(pn);const i=n(t);return t.update(qo,l=>[...l,i]),e.inputRule=i,()=>{t.update(qo,l=>l.filter(a=>a!==i))}};return e}function l_(n){const e=t=>async()=>{await t.wait(pn);const i=n(t);return t.update(Uo,l=>[...l,i]),e.pasteRule=i,()=>{t.update(Uo,l=>l.filter(a=>a!==i))}};return e}function s_(n,e){const t=i=>async()=>{const l=e(i);return i.update(Co,a=>[...a.filter(o=>o[0]!==n),[n,l]]),t.id=n,t.schema=l,()=>{i.update(Co,a=>a.filter(([o])=>o!==n))}};return t.type=i=>{const l=i.get(Wi).marks[n];if(!l)throw QN(n);return l},t}function Bg(n,e){const t=i=>async()=>{const l=e(i);return i.update(xo,a=>[...a.filter(o=>o[0]!==n),[n,l]]),t.id=n,t.schema=l,()=>{i.update(xo,a=>a.filter(([o])=>o!==n))}};return t.type=i=>{const l=i.get(Wi).nodes[n];if(!l)throw GN(n);return l},t}function oi(n){let e;const t=i=>async()=>(await i.wait(pn),e=n(i),i.update(Qr,l=>[...l,e]),()=>{i.update(Qr,l=>l.filter(a=>a!==e))});return t.plugin=()=>e,t.key=()=>e.spec.key,t}function a_(n){const e=t=>async()=>{await t.wait(wo);const i=t.get(hf),l=n(t),a=i.addObjectKeymap(l);return e.keymap=l,()=>{a()}};return e}function tr(n,e){const t=Le(n,e),i=l=>(l.inject(t),()=>()=>{l.remove(t)});return i.key=t,i}function wt(n,e){const t=tr(e,n),i=Bg(n,a=>a.get(t.key)(a)),l=[t,i];return l.id=i.id,l.node=i,l.type=a=>i.type(a),l.ctx=t,l.key=t.key,l.extendSchema=a=>{const o=a(e);return wt(n,o)},l}function $s(n,e){const t=tr(e,n),i=s_(n,a=>a.get(t.key)(a)),l=[t,i];return l.id=i.id,l.mark=i,l.type=a=>i.type(a),l.ctx=t,l.key=t.key,l.extendSchema=a=>{const o=a(e);return $s(n,o)},l}function bn(n,e){const t=Object.fromEntries(Object.entries(e).map(([o,{shortcuts:c,priority:f}])=>[o,{shortcuts:c,priority:f}])),i=tr(t,`${n}Keymap`),l=a_(o=>{const c=o.get(i.key),f=Object.entries(e).flatMap(([d,{command:p}])=>{const g=c[d],b=[g.shortcuts].flat(),S=g.priority;return b.map(x=>[x,{key:x,onRun:p,priority:S}])});return Object.fromEntries(f)}),a=[i,l];return a.ctx=i,a.shortcuts=l,a.key=i.key,a.keymap=l.keymap,a}const ui=(n,e=()=>({}))=>tr(e,`${n}Attr`),Qo=(n,e=()=>({}))=>tr(e,`${n}Attr`);function Hl(n,e,t){const i=tr({},n),l=o=>async()=>{await o.wait(El);const f={plugin:e(o),options:o.get(i.key)};return o.update(Ho,d=>[...d,f]),()=>{o.update(Ho,d=>d.filter(p=>p!==f))}},a=[i,l];return a.id=n,a.plugin=l,a.options=i,a}function o_(n,e){return function(t,i){let{$from:l,$to:a,node:o}=t.selection;if(o&&o.isBlock||l.depth<2||!l.sameParent(a))return!1;let c=l.node(-1);if(c.type!=n)return!1;if(l.parent.content.size==0&&l.node(-1).childCount==l.indexAfter(-1)){if(l.depth==3||l.node(-3).type!=n||l.index(-2)!=l.node(-2).childCount-1)return!1;if(i){let g=X.empty,b=l.index(-1)?1:l.index(-2)?2:3;for(let T=l.depth-b;T>=l.depth-3;T--)g=X.from(l.node(T).copy(g));let S=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3;g=g.append(X.from(n.createAndFill()));let x=l.before(l.depth-(b-1)),v=t.tr.replace(x,l.after(-S),new W(g,4-b,0)),M=-1;v.doc.nodesBetween(x,v.doc.content.size,(T,Q)=>{if(M>-1)return!1;T.isTextblock&&T.content.size==0&&(M=Q+1)}),M>-1&&v.setSelection(Ce.near(v.doc.resolve(M))),i(v.scrollIntoView())}return!0}let f=a.pos==l.end()?c.contentMatchAt(0).defaultType:null,d=t.tr.delete(l.pos,a.pos),p=f?[null,{type:f}]:void 0;return yo(d.doc,l.pos,2,p)?(i&&i(d.split(l.pos,2,p).scrollIntoView()),!0):!1}}function u_(n){return function(e,t){let{$from:i,$to:l}=e.selection,a=i.blockRange(l,o=>o.childCount>0&&o.firstChild.type==n);return a?t?i.node(a.depth-1).type==n?c_(e,t,n,a):f_(e,t,a):!0:!1}}function c_(n,e,t,i){let l=n.tr,a=i.end,o=i.$to.end(i.depth);a<o&&(l.step(new Kt(a-1,o,a,o,new W(X.from(t.create(null,i.parent.copy())),1,0),1,!0)),i=new vC(l.doc.resolve(i.$from.pos),l.doc.resolve(o),i.depth));const c=_f(i);if(c==null)return!1;l.lift(i,c);let f=l.doc.resolve(l.mapping.map(a,-1)-1);return Bf(l.doc,f.pos)&&f.nodeBefore.type==f.nodeAfter.type&&l.join(f.pos),e(l.scrollIntoView()),!0}function f_(n,e,t){let i=n.tr,l=t.parent;for(let S=t.end,x=t.endIndex-1,v=t.startIndex;x>v;x--)S-=l.child(x).nodeSize,i.delete(S-1,S+1);let a=i.doc.resolve(t.start),o=a.nodeAfter;if(i.mapping.map(t.end)!=t.start+a.nodeAfter.nodeSize)return!1;let c=t.startIndex==0,f=t.endIndex==l.childCount,d=a.node(-1),p=a.index(-1);if(!d.canReplace(p+(c?0:1),p+1,o.content.append(f?X.empty:X.from(l))))return!1;let g=a.pos,b=g+o.nodeSize;return i.step(new Kt(g-(c?1:0),b+(f?1:0),g+1,b-1,new W((c?X.empty:X.from(l.copy(X.empty))).append(f?X.empty:X.from(l.copy(X.empty))),c?0:1,f?0:1),c?0:1)),e(i.scrollIntoView()),!0}function h_(n){return function(e,t){let{$from:i,$to:l}=e.selection,a=i.blockRange(l,d=>d.childCount>0&&d.firstChild.type==n);if(!a)return!1;let o=a.startIndex;if(o==0)return!1;let c=a.parent,f=c.child(o-1);if(f.type!=n)return!1;if(t){let d=f.lastChild&&f.lastChild.type==c.type,p=X.from(d?n.create():null),g=new W(X.from(n.create(null,X.from(c.type.create(null,p)))),d?3:1,0),b=a.start,S=a.end;t(e.tr.step(new Kt(b-(d?3:1),S,b,S,g,1,!0)).scrollIntoView())}return!0}}function d_(n){const e=new Map;if(!n||!n.type)throw new Error("mdast-util-definitions expected node");return Js(n,"definition",function(i){const l=Nx(i.identifier);l&&!e.get(l)&&e.set(l,i)}),t;function t(i){const l=Nx(i);return e.get(l)}}function Nx(n){return String(n||"").toUpperCase()}function p_(){return function(n){const e=d_(n);Js(n,function(t,i,l){if(t.type==="definition"&&l!==void 0&&typeof i=="number")return l.children.splice(i,1),[bm,i];if(t.type==="imageReference"||t.type==="linkReference"){const a=e(t.identifier);if(a&&l&&typeof i=="number")return l.children[i]=t.type==="imageReference"?{type:"image",url:a.url,title:a.title,alt:t.alt}:{type:"link",url:a.url,title:a.title,children:t.children},[bm,i]}})}}function Dw(n,e){if(!(e.childCount>=1&&e.lastChild?.type.name==="hardbreak")){n.next(e.content);return}const i=[];e.content.forEach((l,a,o)=>{o!==e.childCount-1&&i.push(l)}),n.next(X.fromArray(i))}function K(n,e){return Object.assign(n,{meta:{package:"@milkdown/preset-commonmark",...e}}),n}const Lg=Qo("emphasis");K(Lg,{displayName:"Attr<emphasis>",group:"Emphasis"});const Ps=$s("emphasis",n=>({attrs:{marker:{default:n.get(ko).emphasis||"*",validate:"string"}},parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style",getAttrs:e=>e==="italic"}],toDOM:e=>["em",n.get(Lg.key)(e)],parseMarkdown:{match:e=>e.type==="emphasis",runner:(e,t,i)=>{e.openMark(i,{marker:t.marker}),e.next(t.children),e.closeMark(i)}},toMarkdown:{match:e=>e.type.name==="emphasis",runner:(e,t)=>{e.withMark(t,"emphasis",void 0,{marker:t.attrs.marker})}}}));K(Ps.mark,{displayName:"MarkSchema<emphasis>",group:"Emphasis"});K(Ps.ctx,{displayName:"MarkSchemaCtx<emphasis>",group:"Emphasis"});const Ig=Se("ToggleEmphasis",n=>()=>qf(Ps.type(n)));K(Ig,{displayName:"Command<toggleEmphasisCommand>",group:"Emphasis"});const zw=yn(n=>Fo(/(?:^|[^*])\*([^*]+)\*$/,Ps.type(n),{getAttr:()=>({marker:"*"}),updateCaptured:({fullMatch:e,start:t})=>e.startsWith("*")?{}:{fullMatch:e.slice(1),start:t+1}}));K(zw,{displayName:"InputRule<emphasis>|Star",group:"Emphasis"});const _w=yn(n=>Fo(/\b_(?![_\s])(.*?[^_\s])_\b/,Ps.type(n),{getAttr:()=>({marker:"_"}),updateCaptured:({fullMatch:e,start:t})=>e.startsWith("_")?{}:{fullMatch:e.slice(1),start:t+1}}));K(_w,{displayName:"InputRule<emphasis>|Underscore",group:"Emphasis"});const qg=bn("emphasisKeymap",{ToggleEmphasis:{shortcuts:"Mod-i",command:n=>{const e=n.get(Ye);return()=>e.call(Ig.key)}}});K(qg.ctx,{displayName:"KeymapCtx<emphasis>",group:"Emphasis"});K(qg.shortcuts,{displayName:"Keymap<emphasis>",group:"Emphasis"});const Hg=Qo("strong");K(Hg,{displayName:"Attr<strong>",group:"Strong"});const Xo=$s("strong",n=>({attrs:{marker:{default:n.get(ko).strong||"*",validate:"string"}},parseDOM:[{tag:"b",getAttrs:e=>e.style.fontWeight!="normal"&&null},{tag:"strong"},{style:"font-style",getAttrs:e=>e==="bold"},{style:"font-weight=400",clearMark:e=>e.type.name=="strong"},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}],toDOM:e=>["strong",n.get(Hg.key)(e)],parseMarkdown:{match:e=>e.type==="strong",runner:(e,t,i)=>{e.openMark(i,{marker:t.marker}),e.next(t.children),e.closeMark(i)}},toMarkdown:{match:e=>e.type.name==="strong",runner:(e,t)=>{e.withMark(t,"strong",void 0,{marker:t.attrs.marker})}}}));K(Xo.mark,{displayName:"MarkSchema<strong>",group:"Strong"});K(Xo.ctx,{displayName:"MarkSchemaCtx<strong>",group:"Strong"});const Ug=Se("ToggleStrong",n=>()=>qf(Xo.type(n)));K(Ug,{displayName:"Command<toggleStrongCommand>",group:"Strong"});const Bw=yn(n=>Fo(new RegExp("(?<![\\w:/])(?:\\*\\*|__)([^*_]+?)(?:\\*\\*|__)(?![\\w/])$"),Xo.type(n),{getAttr:e=>({marker:e[0].startsWith("*")?"*":"_"})}));K(Bw,{displayName:"InputRule<strong>",group:"Strong"});const Vg=bn("strongKeymap",{ToggleBold:{shortcuts:["Mod-b"],command:n=>{const e=n.get(Ye);return()=>e.call(Ug.key)}}});K(Vg.ctx,{displayName:"KeymapCtx<strong>",group:"Strong"});K(Vg.shortcuts,{displayName:"Keymap<strong>",group:"Strong"});const jg=Qo("inlineCode");K(jg,{displayName:"Attr<inlineCode>",group:"InlineCode"});const Hr=$s("inlineCode",n=>({priority:100,code:!0,parseDOM:[{tag:"code"}],toDOM:e=>["code",n.get(jg.key)(e)],parseMarkdown:{match:e=>e.type==="inlineCode",runner:(e,t,i)=>{e.openMark(i),e.addText(t.value),e.closeMark(i)}},toMarkdown:{match:e=>e.type.name==="inlineCode",runner:(e,t,i)=>{e.withMark(t,"inlineCode",i.text||"")}}}));K(Hr.mark,{displayName:"MarkSchema<inlineCode>",group:"InlineCode"});K(Hr.ctx,{displayName:"MarkSchemaCtx<inlineCode>",group:"InlineCode"});const Fg=Se("ToggleInlineCode",n=>()=>(e,t)=>{const{selection:i,tr:l}=e;if(i.empty)return!1;const{from:a,to:o}=i;return e.doc.rangeHasMark(a,o,Hr.type(n))?(t?.(l.removeMark(a,o,Hr.type(n))),!0):(Object.keys(e.schema.marks).filter(d=>d!==Hr.type.name).map(d=>e.schema.marks[d]).forEach(d=>{l.removeMark(a,o,d)}),t?.(l.addMark(a,o,Hr.type(n).create())),!0)});K(Fg,{displayName:"Command<toggleInlineCodeCommand>",group:"InlineCode"});const Lw=yn(n=>Fo(/(?:`)([^`]+)(?:`)$/,Hr.type(n)));K(Lw,{displayName:"InputRule<inlineCodeInputRule>",group:"InlineCode"});const Kg=bn("inlineCodeKeymap",{ToggleInlineCode:{shortcuts:"Mod-e",command:n=>{const e=n.get(Ye);return()=>e.call(Fg.key)}}});K(Kg.ctx,{displayName:"KeymapCtx<inlineCode>",group:"InlineCode"});K(Kg.shortcuts,{displayName:"Keymap<inlineCode>",group:"InlineCode"});const Yg=Qo("link");K(Yg,{displayName:"Attr<link>",group:"Link"});const Fs=$s("link",n=>({attrs:{href:{validate:"string"},title:{default:null,validate:"string|null"}},parseDOM:[{tag:"a[href]",getAttrs:e=>{if(!(e instanceof HTMLElement))throw ki(e);return{href:e.getAttribute("href"),title:e.getAttribute("title")}}}],toDOM:e=>["a",{...n.get(Yg.key)(e),...e.attrs}],parseMarkdown:{match:e=>e.type==="link",runner:(e,t,i)=>{const l=t.url,a=t.title;e.openMark(i,{href:l,title:a}),e.next(t.children),e.closeMark(i)}},toMarkdown:{match:e=>e.type.name==="link",runner:(e,t)=>{e.withMark(t,"link",void 0,{title:t.attrs.title,url:t.attrs.href})}}}));K(Fs.mark,{displayName:"MarkSchema<link>",group:"Link"});const Iw=Se("ToggleLink",n=>(e={})=>qf(Fs.type(n),e));K(Iw,{displayName:"Command<toggleLinkCommand>",group:"Link"});const qw=Se("UpdateLink",n=>(e={})=>(t,i)=>{if(!i)return!1;let l,a=-1;const{selection:o}=t,{from:c,to:f}=o;if(t.doc.nodesBetween(c,c===f?f+1:f,(x,v)=>{if(Fs.type(n).isInSet(x.marks))return l=x,a=v,!1}),!l)return!1;const d=l.marks.find(({type:x})=>x===Fs.type(n));if(!d)return!1;const p=a,g=a+l.nodeSize,{tr:b}=t,S=Fs.type(n).create({...d.attrs,...e});return S?(i(b.removeMark(p,g,d).addMark(p,g,S).setSelection(new we(b.selection.$anchor)).scrollIntoView()),!0):!1});K(qw,{displayName:"Command<updateLinkCommand>",group:"Link"});const Hw=Bg("doc",()=>({content:"block+",parseMarkdown:{match:({type:n})=>n==="root",runner:(n,e,t)=>{n.injectRoot(e,t)}},toMarkdown:{match:n=>n.type.name==="doc",runner:(n,e)=>{n.openNode("root"),n.next(e.content)}}}));K(Hw,{displayName:"NodeSchema<doc>",group:"Doc"});function m_(n){return cg(n,e=>e.type==="html"&&["<br />","<br>","<br >","<br/>"].includes(e.value?.trim()),(e,t)=>{if(!t.length)return;const i=t[t.length-1];if(!i)return;const l=i.children.indexOf(e);l!==-1&&i.children.splice(l,1)},!0)}const jf=Hl("remark-preserve-empty-line",()=>()=>m_);K(jf.plugin,{displayName:"Remark<remarkPreserveEmptyLine>",group:"Remark"});K(jf.options,{displayName:"RemarkConfig<remarkPreserveEmptyLine>",group:"Remark"});const Gg=ui("paragraph");K(Gg,{displayName:"Attr<paragraph>",group:"Paragraph"});const nr=wt("paragraph",n=>({content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:e=>["p",n.get(Gg.key)(e),0],parseMarkdown:{match:e=>e.type==="paragraph",runner:(e,t,i)=>{e.openNode(i),t.children?e.next(t.children):e.addText(t.value||""),e.closeNode()}},toMarkdown:{match:e=>e.type.name==="paragraph",runner:(e,t)=>{const l=n.get(Fr).state?.doc.lastChild;e.openNode("paragraph"),(!t.content||t.content.size===0)&&t!==l&&g_(n)?e.addNode("html",void 0,"<br />"):Dw(e,t),e.closeNode()}}}));function g_(n){let e=!1;try{n.get(jf.id),e=!0}catch{e=!1}return e}K(nr.node,{displayName:"NodeSchema<paragraph>",group:"Paragraph"});K(nr.ctx,{displayName:"NodeSchemaCtx<paragraph>",group:"Paragraph"});const Qg=Se("TurnIntoText",n=>()=>_o(nr.type(n)));K(Qg,{displayName:"Command<turnIntoTextCommand>",group:"Paragraph"});const Xg=bn("paragraphKeymap",{TurnIntoText:{shortcuts:"Mod-Alt-0",command:n=>{const e=n.get(Ye);return()=>e.call(Qg.key)}}});K(Xg.ctx,{displayName:"KeymapCtx<paragraph>",group:"Paragraph"});K(Xg.shortcuts,{displayName:"Keymap<paragraph>",group:"Paragraph"});const y_=Array(6).fill(0).map((n,e)=>e+1);function b_(n){return n.textContent.toLowerCase().trim().replace(/\s+/g,"-")}const Ff=tr(b_,"headingIdGenerator");K(Ff,{displayName:"Ctx<HeadingIdGenerator>",group:"Heading"});const Jg=ui("heading");K(Jg,{displayName:"Attr<heading>",group:"Heading"});const Ul=wt("heading",n=>{const e=n.get(Ff.key);return{content:"inline*",group:"block",defining:!0,attrs:{id:{default:"",validate:"string"},level:{default:1,validate:"number"}},parseDOM:y_.map(t=>({tag:`h${t}`,getAttrs:i=>{if(!(i instanceof HTMLElement))throw ki(i);return{level:t,id:i.id}}})),toDOM:t=>[`h${t.attrs.level}`,{...n.get(Jg.key)(t),id:t.attrs.id||e(t)},0],parseMarkdown:{match:({type:t})=>t==="heading",runner:(t,i,l)=>{const a=i.depth;t.openNode(l,{level:a}),t.next(i.children),t.closeNode()}},toMarkdown:{match:t=>t.type.name==="heading",runner:(t,i)=>{t.openNode("heading",void 0,{depth:i.attrs.level}),Dw(t,i),t.closeNode()}}}});K(Ul.node,{displayName:"NodeSchema<heading>",group:"Heading"});K(Ul.ctx,{displayName:"NodeSchemaCtx<heading>",group:"Heading"});const Uw=yn(n=>Bv(/^(?<hashes>#+)\s$/,Ul.type(n),e=>{const t=e.groups?.hashes?.length||0,i=n.get(Fr),{$from:l}=i.state.selection,a=l.node();if(a.type.name==="heading"){let o=Number(a.attrs.level)+Number(t);return o>6&&(o=6),{level:o}}return{level:t}}));K(Uw,{displayName:"InputRule<wrapInHeadingInputRule>",group:"Heading"});const zr=Se("WrapInHeading",n=>e=>(e??=1,e<1?_o(nr.type(n)):_o(Ul.type(n),{level:e})));K(zr,{displayName:"Command<wrapInHeadingCommand>",group:"Heading"});const Zg=Se("DowngradeHeading",n=>()=>(e,t,i)=>{const{$from:l}=e.selection,a=l.node();if(a.type!==Ul.type(n)||!e.selection.empty||l.parentOffset!==0)return!1;const o=a.attrs.level-1;return o?(t?.(e.tr.setNodeMarkup(e.selection.$from.before(),void 0,{...a.attrs,level:o})),!0):_o(nr.type(n))(e,t,i)});K(Zg,{displayName:"Command<downgradeHeadingCommand>",group:"Heading"});const $g=bn("headingKeymap",{TurnIntoH1:{shortcuts:"Mod-Alt-1",command:n=>{const e=n.get(Ye);return()=>e.call(zr.key,1)}},TurnIntoH2:{shortcuts:"Mod-Alt-2",command:n=>{const e=n.get(Ye);return()=>e.call(zr.key,2)}},TurnIntoH3:{shortcuts:"Mod-Alt-3",command:n=>{const e=n.get(Ye);return()=>e.call(zr.key,3)}},TurnIntoH4:{shortcuts:"Mod-Alt-4",command:n=>{const e=n.get(Ye);return()=>e.call(zr.key,4)}},TurnIntoH5:{shortcuts:"Mod-Alt-5",command:n=>{const e=n.get(Ye);return()=>e.call(zr.key,5)}},TurnIntoH6:{shortcuts:"Mod-Alt-6",command:n=>{const e=n.get(Ye);return()=>e.call(zr.key,6)}},DowngradeHeading:{shortcuts:["Delete","Backspace"],command:n=>{const e=n.get(Ye);return()=>e.call(Zg.key)}}});K($g.ctx,{displayName:"KeymapCtx<heading>",group:"Heading"});K($g.shortcuts,{displayName:"Keymap<heading>",group:"Heading"});const Pg=ui("blockquote");K(Pg,{displayName:"Attr<blockquote>",group:"Blockquote"});const Jo=wt("blockquote",n=>({content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:e=>["blockquote",n.get(Pg.key)(e),0],parseMarkdown:{match:({type:e})=>e==="blockquote",runner:(e,t,i)=>{e.openNode(i).next(t.children).closeNode()}},toMarkdown:{match:e=>e.type.name==="blockquote",runner:(e,t)=>{e.openNode("blockquote").next(t.content).closeNode()}}}));K(Jo.node,{displayName:"NodeSchema<blockquote>",group:"Blockquote"});K(Jo.ctx,{displayName:"NodeSchemaCtx<blockquote>",group:"Blockquote"});const Vw=yn(n=>vg(/^\s*>\s$/,Jo.type(n)));K(Vw,{displayName:"InputRule<wrapInBlockquoteInputRule>",group:"Blockquote"});const Wg=Se("WrapInBlockquote",n=>()=>Cg(Jo.type(n)));K(Wg,{displayName:"Command<wrapInBlockquoteCommand>",group:"Blockquote"});const ey=bn("blockquoteKeymap",{WrapInBlockquote:{shortcuts:"Mod-Shift-b",command:n=>{const e=n.get(Ye);return()=>e.call(Wg.key)}}});K(ey.ctx,{displayName:"KeymapCtx<blockquote>",group:"Blockquote"});K(ey.shortcuts,{displayName:"Keymap<blockquote>",group:"Blockquote"});const ty=ui("codeBlock",()=>({pre:{},code:{}}));K(ty,{displayName:"Attr<codeBlock>",group:"CodeBlock"});const Zo=wt("code_block",n=>({content:"text*",group:"block",marks:"",defining:!0,code:!0,attrs:{language:{default:"",validate:"string"}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:e=>{if(!(e instanceof HTMLElement))throw ki(e);return{language:e.dataset.language}}}],toDOM:e=>{const t=n.get(ty.key)(e),i=e.attrs.language,l=i&&i.length>0?{"data-language":i}:void 0;return["pre",{...t.pre,...l},["code",t.code,0]]},parseMarkdown:{match:({type:e})=>e==="code",runner:(e,t,i)=>{const l=t.lang??"",a=t.value;e.openNode(i,{language:l}),a&&e.addText(a),e.closeNode()}},toMarkdown:{match:e=>e.type.name==="code_block",runner:(e,t)=>{e.addNode("code",void 0,t.content.firstChild?.text||"",{lang:t.attrs.language})}}}));K(Zo.node,{displayName:"NodeSchema<codeBlock>",group:"CodeBlock"});K(Zo.ctx,{displayName:"NodeSchemaCtx<codeBlock>",group:"CodeBlock"});const jw=yn(n=>Bv(/^```(?<language>[a-z]*)?[\s\n]$/,Zo.type(n),e=>({language:e.groups?.language??""})));K(jw,{displayName:"InputRule<createCodeBlockInputRule>",group:"CodeBlock"});const ny=Se("CreateCodeBlock",n=>(e="")=>_o(Zo.type(n),{language:e}));K(ny,{displayName:"Command<createCodeBlockCommand>",group:"CodeBlock"});const S_=Se("UpdateCodeBlockLanguage",()=>({pos:n,language:e}={pos:-1,language:""})=>(t,i)=>n>=0?(i?.(t.tr.setNodeAttribute(n,"language",e)),!0):!1);K(S_,{displayName:"Command<updateCodeBlockLanguageCommand>",group:"CodeBlock"});const iy=bn("codeBlockKeymap",{CreateCodeBlock:{shortcuts:"Mod-Alt-c",command:n=>{const e=n.get(Ye);return()=>e.call(ny.key)}}});K(iy.ctx,{displayName:"KeymapCtx<codeBlock>",group:"CodeBlock"});K(iy.shortcuts,{displayName:"Keymap<codeBlock>",group:"CodeBlock"});const ry=ui("image");K(ry,{displayName:"Attr<image>",group:"Image"});const Ws=wt("image",n=>({inline:!0,group:"inline",selectable:!0,draggable:!0,marks:"",atom:!0,defining:!0,isolating:!0,attrs:{src:{default:"",validate:"string"},alt:{default:"",validate:"string"},title:{default:"",validate:"string"}},parseDOM:[{tag:"img[src]",getAttrs:e=>{if(!(e instanceof HTMLElement))throw ki(e);return{src:e.getAttribute("src")||"",alt:e.getAttribute("alt")||"",title:e.getAttribute("title")||e.getAttribute("alt")||""}}}],toDOM:e=>["img",{...n.get(ry.key)(e),...e.attrs}],parseMarkdown:{match:({type:e})=>e==="image",runner:(e,t,i)=>{const l=t.url,a=t.alt,o=t.title;e.addNode(i,{src:l,alt:a,title:o})}},toMarkdown:{match:e=>e.type.name==="image",runner:(e,t)=>{e.addNode("image",void 0,void 0,{title:t.attrs.title,url:t.attrs.src,alt:t.attrs.alt})}}}));K(Ws.node,{displayName:"NodeSchema<image>",group:"Image"});K(Ws.ctx,{displayName:"NodeSchemaCtx<image>",group:"Image"});const Fw=Se("InsertImage",n=>(e={})=>(t,i)=>{if(!i)return!0;const{src:l="",alt:a="",title:o=""}=e,c=Ws.type(n).create({src:l,alt:a,title:o});return c&&i(t.tr.replaceSelectionWith(c).scrollIntoView()),!0});K(Fw,{displayName:"Command<insertImageCommand>",group:"Image"});const Kw=Se("UpdateImage",n=>(e={})=>(t,i)=>{const l=r2(t.selection,Ws.type(n));if(!l)return!1;const{node:a,pos:o}=l,c={...a.attrs},{src:f,alt:d,title:p}=e;return f!==void 0&&(c.src=f),d!==void 0&&(c.alt=d),p!==void 0&&(c.title=p),i?.(t.tr.setNodeMarkup(o,void 0,c).scrollIntoView()),!0});K(Kw,{displayName:"Command<updateImageCommand>",group:"Image"});const k_=yn(n=>new Dn(/!\[(?<alt>.*?)]\((?<filename>.*?)\s*(?="|\))"?(?<title>[^"]+)?"?\)/,(e,t,i,l)=>{const[a,o,c="",f]=t;return a?e.tr.replaceWith(i,l,Ws.type(n).create({src:c,alt:o,title:f})):null}));K(k_,{displayName:"InputRule<insertImageInputRule>",group:"Image"});const df=ui("hardbreak",n=>({"data-type":"hardbreak","data-is-inline":n.attrs.isInline}));K(df,{displayName:"Attr<hardbreak>",group:"Hardbreak"});const Nl=wt("hardbreak",n=>({inline:!0,group:"inline",attrs:{isInline:{default:!1,validate:"boolean"}},selectable:!1,parseDOM:[{tag:"br"},{tag:'span[data-type="hardbreak"]',getAttrs:()=>({isInline:!0})}],toDOM:e=>e.attrs.isInline?["span",n.get(df.key)(e)," "]:["br",n.get(df.key)(e)],parseMarkdown:{match:({type:e})=>e==="break",runner:(e,t,i)=>{e.addNode(i,{isInline:!!t.data?.isInline})}},leafText:()=>`
`,toMarkdown:{match:e=>e.type.name==="hardbreak",runner:(e,t)=>{t.attrs.isInline?e.addNode("text",void 0,`
`):e.addNode("break")}}}));K(Nl.node,{displayName:"NodeSchema<hardbreak>",group:"Hardbreak"});K(Nl.ctx,{displayName:"NodeSchemaCtx<hardbreak>",group:"Hardbreak"});const ly=Se("InsertHardbreak",n=>()=>(e,t)=>{const{selection:i,tr:l}=e;if(!(i instanceof we))return!1;if(i.empty){const a=i.$from.node();if(a.childCount>0&&a.lastChild?.type.name==="hardbreak")return t?.(l.replaceRangeWith(i.to-1,i.to,e.schema.node("paragraph")).setSelection(Ce.near(l.doc.resolve(i.to))).scrollIntoView()),!0}return t?.(l.setMeta("hardbreak",!0).replaceSelectionWith(Nl.type(n).create()).scrollIntoView()),!0});K(ly,{displayName:"Command<insertHardbreakCommand>",group:"Hardbreak"});const sy=bn("hardbreakKeymap",{InsertHardbreak:{shortcuts:"Shift-Enter",command:n=>{const e=n.get(Ye);return()=>e.call(ly.key)}}});K(sy.ctx,{displayName:"KeymapCtx<hardbreak>",group:"Hardbreak"});K(sy.shortcuts,{displayName:"Keymap<hardbreak>",group:"Hardbreak"});const ay=ui("hr");K(ay,{displayName:"Attr<hr>",group:"Hr"});const $o=wt("hr",n=>({group:"block",parseDOM:[{tag:"hr"}],toDOM:e=>["hr",n.get(ay.key)(e)],parseMarkdown:{match:({type:e})=>e==="thematicBreak",runner:(e,t,i)=>{e.addNode(i)}},toMarkdown:{match:e=>e.type.name==="hr",runner:e=>{e.addNode("thematicBreak")}}}));K($o.node,{displayName:"NodeSchema<hr>",group:"Hr"});K($o.ctx,{displayName:"NodeSchemaCtx<hr>",group:"Hr"});const Yw=yn(n=>new Dn(/^(?:---|___\s|\*\*\*\s)$/,(e,t,i,l)=>{const{tr:a}=e;return t[0]&&a.replaceWith(i-1,l,$o.type(n).create()),a}));K(Yw,{displayName:"InputRule<insertHrInputRule>",group:"Hr"});const Gw=Se("InsertHr",n=>()=>(e,t)=>{if(!t)return!0;const i=nr.node.type(n).create(),{tr:l,selection:a}=e,{from:o}=a,c=$o.type(n).create();if(!c)return!0;const f=l.replaceSelectionWith(c).insert(o,i),d=Ce.findFrom(f.doc.resolve(o),1,!0);return d&&t(f.setSelection(d).scrollIntoView()),!0});K(Gw,{displayName:"Command<insertHrCommand>",group:"Hr"});const oy=ui("bulletList");K(oy,{displayName:"Attr<bulletList>",group:"BulletList"});const ea=wt("bullet_list",n=>({content:"listItem+",group:"block",attrs:{spread:{default:!1,validate:"boolean"}},parseDOM:[{tag:"ul",getAttrs:e=>{if(!(e instanceof HTMLElement))throw ki(e);return{spread:e.dataset.spread==="true"}}}],toDOM:e=>["ul",{...n.get(oy.key)(e),"data-spread":e.attrs.spread},0],parseMarkdown:{match:({type:e,ordered:t})=>e==="list"&&!t,runner:(e,t,i)=>{const l=t.spread!=null?`${t.spread}`:"false";e.openNode(i,{spread:l}).next(t.children).closeNode()}},toMarkdown:{match:e=>e.type.name==="bullet_list",runner:(e,t)=>{e.openNode("list",void 0,{ordered:!1,spread:t.attrs.spread}).next(t.content).closeNode()}}}));K(ea.node,{displayName:"NodeSchema<bulletList>",group:"BulletList"});K(ea.ctx,{displayName:"NodeSchemaCtx<bulletList>",group:"BulletList"});const Qw=yn(n=>vg(/^\s*([-+*])\s$/,ea.type(n)));K(Qw,{displayName:"InputRule<wrapInBulletListInputRule>",group:"BulletList"});const uy=Se("WrapInBulletList",n=>()=>Cg(ea.type(n)));K(uy,{displayName:"Command<wrapInBulletListCommand>",group:"BulletList"});const cy=bn("bulletListKeymap",{WrapInBulletList:{shortcuts:"Mod-Alt-8",command:n=>{const e=n.get(Ye);return()=>e.call(uy.key)}}});K(cy.ctx,{displayName:"KeymapCtx<bulletListKeymap>",group:"BulletList"});K(cy.shortcuts,{displayName:"Keymap<bulletListKeymap>",group:"BulletList"});const fy=ui("orderedList");K(fy,{displayName:"Attr<orderedList>",group:"OrderedList"});const ta=wt("ordered_list",n=>({content:"listItem+",group:"block",attrs:{order:{default:1,validate:"number"},spread:{default:!1,validate:"boolean"}},parseDOM:[{tag:"ol",getAttrs:e=>{if(!(e instanceof HTMLElement))throw ki(e);return{spread:e.dataset.spread,order:e.hasAttribute("start")?Number(e.getAttribute("start")):1}}}],toDOM:e=>["ol",{...n.get(fy.key)(e),...e.attrs.order===1?{}:e.attrs.order,"data-spread":e.attrs.spread},0],parseMarkdown:{match:({type:e,ordered:t})=>e==="list"&&!!t,runner:(e,t,i)=>{const l=t.spread!=null?`${t.spread}`:"true";e.openNode(i,{spread:l}).next(t.children).closeNode()}},toMarkdown:{match:e=>e.type.name==="ordered_list",runner:(e,t)=>{e.openNode("list",void 0,{ordered:!0,start:1,spread:t.attrs.spread==="true"}),e.next(t.content),e.closeNode()}}}));K(ta.node,{displayName:"NodeSchema<orderedList>",group:"OrderedList"});K(ta.ctx,{displayName:"NodeSchemaCtx<orderedList>",group:"OrderedList"});const Xw=yn(n=>vg(/^\s*(\d+)\.\s$/,ta.type(n),e=>({order:Number(e[1])}),(e,t)=>t.childCount+t.attrs.order===Number(e[1])));K(Xw,{displayName:"InputRule<wrapInOrderedListInputRule>",group:"OrderedList"});const hy=Se("WrapInOrderedList",n=>()=>Cg(ta.type(n)));K(hy,{displayName:"Command<wrapInOrderedListCommand>",group:"OrderedList"});const dy=bn("orderedListKeymap",{WrapInOrderedList:{shortcuts:"Mod-Alt-7",command:n=>{const e=n.get(Ye);return()=>e.call(hy.key)}}});K(dy.ctx,{displayName:"KeymapCtx<orderedList>",group:"OrderedList"});K(dy.shortcuts,{displayName:"Keymap<orderedList>",group:"OrderedList"});const py=ui("listItem");K(py,{displayName:"Attr<listItem>",group:"ListItem"});const ir=wt("list_item",n=>({group:"listItem",content:"paragraph block*",attrs:{label:{default:"",validate:"string"},listType:{default:"bullet",validate:"string"},spread:{default:!0,validate:"boolean"}},defining:!0,parseDOM:[{tag:"li",getAttrs:e=>{if(!(e instanceof HTMLElement))throw ki(e);return{label:e.dataset.label,listType:e.dataset.listType,spread:e.dataset.spread==="true"}}}],toDOM:e=>["li",{...n.get(py.key)(e),"data-label":e.attrs.label,"data-list-type":e.attrs.listType,"data-spread":e.attrs.spread},0],parseMarkdown:{match:({type:e})=>e==="listItem",runner:(e,t,i)=>{const l=t.label!=null?`${t.label}.`:"",a=t.label!=null?"ordered":"bullet",o=t.spread!=null?`${t.spread}`:"true";e.openNode(i,{label:l,listType:a,spread:o}),e.next(t.children),e.closeNode()}},toMarkdown:{match:e=>e.type.name==="list_item",runner:(e,t)=>{e.openNode("listItem",void 0,{spread:t.attrs.spread}),e.next(t.content),e.closeNode()}}}));K(ir.node,{displayName:"NodeSchema<listItem>",group:"ListItem"});K(ir.ctx,{displayName:"NodeSchemaCtx<listItem>",group:"ListItem"});const my=Se("SinkListItem",n=>()=>h_(ir.type(n)));K(my,{displayName:"Command<sinkListItemCommand>",group:"ListItem"});const gy=Se("LiftListItem",n=>()=>u_(ir.type(n)));K(gy,{displayName:"Command<liftListItemCommand>",group:"ListItem"});const yy=Se("SplitListItem",n=>()=>o_(ir.type(n)));K(yy,{displayName:"Command<splitListItemCommand>",group:"ListItem"});function x_(n){return(e,t,i)=>{const{selection:l}=e;if(!(l instanceof we))return!1;const{empty:a,$from:o}=l;return!a||o.parentOffset!==0||o.node(-1).type!==ir.type(n)?!1:Av(e,t,i)}}const by=Se("LiftFirstListItem",n=>()=>x_(n));K(by,{displayName:"Command<liftFirstListItemCommand>",group:"ListItem"});const Sy=bn("listItemKeymap",{NextListItem:{shortcuts:"Enter",command:n=>{const e=n.get(Ye);return()=>e.call(yy.key)}},SinkListItem:{shortcuts:["Tab","Mod-]"],command:n=>{const e=n.get(Ye);return()=>e.call(my.key)}},LiftListItem:{shortcuts:["Shift-Tab","Mod-["],command:n=>{const e=n.get(Ye);return()=>e.call(gy.key)}},LiftFirstListItem:{shortcuts:["Backspace","Delete"],command:n=>{const e=n.get(Ye);return()=>e.call(by.key)}}});K(Sy.ctx,{displayName:"KeymapCtx<listItem>",group:"ListItem"});K(Sy.shortcuts,{displayName:"Keymap<listItem>",group:"ListItem"});const Jw=Bg("text",()=>({group:"inline",parseMarkdown:{match:({type:n})=>n==="text",runner:(n,e)=>{n.addText(e.value)}},toMarkdown:{match:n=>n.type.name==="text",runner:(n,e)=>{n.addNode("text",void 0,e.text)}}}));K(Jw,{displayName:"NodeSchema<text>",group:"Text"});const ky=ui("html");K(ky,{displayName:"Attr<html>",group:"Html"});const xy=wt("html",n=>({atom:!0,group:"inline",inline:!0,attrs:{value:{default:"",validate:"string"}},toDOM:e=>{const t=document.createElement("span"),i={...n.get(ky.key)(e),"data-value":e.attrs.value,"data-type":"html"};return t.textContent=e.attrs.value,["span",i,e.attrs.value]},parseDOM:[{tag:'span[data-type="html"]',getAttrs:e=>({value:e.dataset.value??""})}],parseMarkdown:{match:({type:e})=>e==="html",runner:(e,t,i)=>{e.addNode(i,{value:t.value})}},toMarkdown:{match:e=>e.type.name==="html",runner:(e,t)=>{e.addNode("html",void 0,t.attrs.value)}}}));K(xy.node,{displayName:"NodeSchema<html>",group:"Html"});K(xy.ctx,{displayName:"NodeSchemaCtx<html>",group:"Html"});const C_=[Hw,Gg,nr,Ff,Jg,Ul,df,Nl,Pg,Jo,ty,Zo,ay,$o,ry,Ws,oy,ea,fy,ta,py,ir,Lg,Ps,Hg,Xo,jg,Hr,Yg,Fs,ky,xy,Jw].flat(),v_=[Vw,Qw,Xw,jw,Yw,Uw].flat(),w_=[zw,_w,Lw,Bw],T_=Se("IsMarkSelected",()=>n=>e=>{if(!n)return!1;const{doc:t,selection:i}=e;return t.rangeHasMark(i.from,i.to,n)}),M_=Se("IsNoteSelected",()=>n=>e=>n?l2(e,n).hasNode:!1),E_=Se("ClearTextInCurrentBlock",()=>()=>(n,e)=>{let t=n.tr;const{$from:i,$to:l}=t.selection,{pos:a}=i,{pos:o}=l,c=a-i.node().content.size;return c<0?!1:(t=t.deleteRange(c,o),e?.(t),!0)}),N_=Se("SetBlockType",()=>n=>(e,t)=>{const{nodeType:i,attrs:l=null}=n??{};if(!i)return!1;const a=e.tr,{from:o,to:c}=a.selection;try{a.setBlockType(o,c,i,l)}catch{return!1}return t?.(a),!0}),A_=Se("WrapInBlockType",()=>n=>(e,t)=>{const{nodeType:i,attrs:l=null}=n??{};if(!i)return!1;let a=e.tr;try{const{$from:o,$to:c}=a.selection,f=o.blockRange(c),d=f&&yg(f,i,l);if(!d)return!1;a=a.wrap(f,d)}catch{return!1}return t?.(a),!0}),O_=Se("AddBlockType",()=>n=>(e,t)=>{const{nodeType:i,attrs:l=null}=n??{};if(!i)return!1;const a=e.tr;try{const o=i instanceof Xn?i:i.createAndFill(l);if(!o)return!1;a.replaceSelectionWith(o)}catch{return!1}return t?.(a),!0}),R_=Se("SelectTextNearPos",()=>n=>(e,t)=>{const{pos:i}=n??{};if(i==null)return!1;const l=(o,c,f)=>Math.min(Math.max(o,c),f),a=e.tr;try{const o=e.doc.resolve(l(i,0,e.doc.content.size));a.setSelection(we.near(o))}catch{return!1}return t?.(a.scrollIntoView()),!0}),D_=[Qg,Wg,zr,Zg,ny,ly,Gw,Fw,Kw,hy,uy,my,yy,gy,by,Ig,Fg,Ug,Iw,qw,T_,M_,E_,N_,A_,O_,R_],z_=[ey,iy,sy,$g,Sy,dy,cy,Xg,qg,Kg,Vg].flat(),Cy=Hl("remarkAddOrderInList",()=>()=>n=>{Js(n,"list",e=>{if(e.ordered){const t=e.start??1;e.children.forEach((i,l)=>{i.label=l+t})}})});K(Cy.plugin,{displayName:"Remark<remarkAddOrderInListPlugin>",group:"Remark"});K(Cy.options,{displayName:"RemarkConfig<remarkAddOrderInListPlugin>",group:"Remark"});const vy=Hl("remarkLineBreak",()=>()=>n=>{const e=/[\t ]*(?:\r?\n|\r)/g;Js(n,"text",(t,i,l)=>{if(!t.value||typeof t.value!="string")return;const a=[];let o=0;e.lastIndex=0;let c=e.exec(t.value);for(;c;){const d=c.index;o!==d&&a.push({type:"text",value:t.value.slice(o,d)}),a.push({type:"break",data:{isInline:!0}}),o=d+c[0].length,c=e.exec(t.value)}if(a.length>0&&l&&typeof i=="number")return o<t.value.length&&a.push({type:"text",value:t.value.slice(o)}),l.children.splice(i,1,...a),i+a.length})});K(vy.plugin,{displayName:"Remark<remarkLineBreak>",group:"Remark"});K(vy.options,{displayName:"RemarkConfig<remarkLineBreak>",group:"Remark"});const wy=Hl("remarkInlineLink",()=>p_);K(wy.plugin,{displayName:"Remark<remarkInlineLinkPlugin>",group:"Remark"});K(wy.options,{displayName:"RemarkConfig<remarkInlineLinkPlugin>",group:"Remark"});const __=n=>!!n.children,B_=n=>n.type==="html";function L_(n,e){return t(n,0,null)[0];function t(i,l,a){if(__(i)){const o=[];for(let c=0,f=i.children.length;c<f;c++){const d=i.children[c];if(d){const p=t(d,c,i);if(p)for(let g=0,b=p.length;g<b;g++){const S=p[g];S&&o.push(S)}}}i.children=o}return e(i,l,a)}}const I_=["root","blockquote","listItem"],Ty=Hl("remarkHTMLTransformer",()=>()=>n=>{L_(n,(e,t,i)=>B_(e)?(i&&I_.includes(i.type)&&(e.children=[{...e}],delete e.value,e.type="paragraph"),[e]):[e])});K(Ty.plugin,{displayName:"Remark<remarkHtmlTransformer>",group:"Remark"});K(Ty.options,{displayName:"RemarkConfig<remarkHtmlTransformer>",group:"Remark"});const My=Hl("remarkMarker",()=>()=>(n,e)=>{const t=i=>e.value.charAt(i.position.start.offset);Js(n,i=>["strong","emphasis"].includes(i.type),i=>{i.marker=t(i)})});K(My.plugin,{displayName:"Remark<remarkMarker>",group:"Remark"});K(My.options,{displayName:"RemarkConfig<remarkMarker>",group:"Remark"});const Zw=oi(()=>{let n=!1;const e=new Vt("MILKDOWN_INLINE_NODES_CURSOR"),t=new Qt({key:e,state:{init(){return!1},apply(i){if(!i.selection.empty)return!1;const l=i.selection.$from,a=l.nodeBefore,o=l.nodeAfter;return!!(a&&o&&a.isInline&&!a.isText&&o.isInline&&!o.isText)}},props:{handleDOMEvents:{compositionend:(i,l)=>n?(n=!1,requestAnimationFrame(()=>{if(t.getState(i.state)){const o=i.state.selection.from;l.preventDefault(),i.dispatch(i.state.tr.insertText(l.data||"",o))}}),!0):!1,compositionstart:i=>(t.getState(i.state)&&(n=!0),!1),beforeinput:(i,l)=>{if(t.getState(i.state)&&l instanceof InputEvent&&l.data&&!n){const o=i.state.selection.from;return l.preventDefault(),i.dispatch(i.state.tr.insertText(l.data||"",o)),!0}return!1}},decorations(i){if(t.getState(i)){const o=i.selection.$from.pos,c=document.createElement("span"),f=Ut.widget(o,c,{side:-1}),d=document.createElement("span"),p=Ut.widget(o,d);return setTimeout(()=>{c.contentEditable="true",d.contentEditable="true"}),ut.create(i.doc,[f,p])}return ut.empty}}});return t});K(Zw,{displayName:"Prose<inlineNodesCursorPlugin>",group:"Prose"});const $w=oi(n=>new Qt({key:new Vt("MILKDOWN_HARDBREAK_MARKS"),appendTransaction:(e,t,i)=>{if(!e.length)return;const[l]=e;if(!l)return;const[a]=l.steps;if(l.getMeta("hardbreak")){if(!(a instanceof Nt))return;const{from:f}=a;return i.tr.setNodeMarkup(f,Nl.type(n),void 0,[])}if(a instanceof Zi){let f=i.tr;const{from:d,to:p}=a;return i.doc.nodesBetween(d,p,(g,b)=>{g.type===Nl.type(n)&&(f=f.setNodeMarkup(b,Nl.type(n),void 0,[]))}),f}}}));K($w,{displayName:"Prose<hardbreakClearMarkPlugin>",group:"Prose"});const Ey=tr(["table","code_block"],"hardbreakFilterNodes");K(Ey,{displayName:"Ctx<hardbreakFilterNodes>",group:"Prose"});const Pw=oi(n=>{const e=n.get(Ey.key);return new Qt({key:new Vt("MILKDOWN_HARDBREAK_FILTER"),filterTransaction:(t,i)=>{const l=t.getMeta("hardbreak"),[a]=t.steps;if(l&&a){const{from:o}=a,c=i.doc.resolve(o);let f=c.depth,d=!0;for(;f>0;)e.includes(c.node(f).type.name)&&(d=!1),f--;return d}return!0}})});K(Pw,{displayName:"Prose<hardbreakFilterPlugin>",group:"Prose"});const Ww=oi(n=>{const e=new Vt("MILKDOWN_HEADING_ID"),t=i=>{if(i.composing)return;const l=n.get(Ff.key),a=i.state.tr.setMeta("addToHistory",!1);let o=!1;const c={};i.state.doc.descendants((f,d)=>{if(f.type===Ul.type(n)){if(f.textContent.trim().length===0)return;const p=f.attrs;let g=l(f);c[g]?(c[g]+=1,g+=`-#${c[g]}`):c[g]=1,p.id!==g&&(o=!0,a.setMeta(e,!0).setNodeMarkup(d,void 0,{...p,id:g}))}}),o&&i.dispatch(a)};return new Qt({key:e,view:i=>(t(i),{update:(l,a)=>{l.state.doc.eq(a.doc)||t(l)}})})});K(Ww,{displayName:"Prose<syncHeadingIdPlugin>",group:"Prose"});const eT=oi(n=>{const e=(t,i,l)=>{if(!l.selection||t.some(g=>g.getMeta("addToHistory")===!1||!g.isGeneric))return null;const a=ta.type(n),o=ea.type(n),c=ir.type(n),f=(g,b)=>{let S=!1;const x=`${b+1}.`;return g.label!==x&&(g.label=x,S=!0),S};let d=l.tr,p=!1;return l.doc.descendants((g,b,S,x)=>{if(g.type===o){const v=g.maybeChild(0);v?.type===c&&v.attrs.listType==="ordered"&&(p=!0,d.setNodeMarkup(b,a,{spread:"true"}),g.descendants((M,T,Q,L)=>{if(M.type===c){const P={...M.attrs};f(P,L)&&(d=d.setNodeMarkup(T,void 0,P))}return!1}))}else if(g.type===c&&S?.type===a){const v={...g.attrs};let M=!1;v.listType!=="ordered"&&(v.listType="ordered",M=!0),S?.maybeChild(0)&&(M=f(v,x)),M&&(d=d.setNodeMarkup(b,void 0,v),p=!0)}}),p?d.setMeta("addToHistory",!1):null};return new Qt({key:new Vt("MILKDOWN_KEEP_LIST_ORDER"),appendTransaction:e})});K(eT,{displayName:"Prose<syncListOrderPlugin>",group:"Prose"});const q_=[$w,Ey,Pw,Zw,Cy,wy,vy,Ty,My,jf,Ww,eT].flat(),H_=[C_,v_,w_,D_,z_,q_].flat();let Km,Ym;if(typeof WeakMap<"u"){let n=new WeakMap;Km=e=>n.get(e),Ym=(e,t)=>(n.set(e,t),t)}else{const n=[];let t=0;Km=i=>{for(let l=0;l<n.length;l+=2)if(n[l]==i)return n[l+1]},Ym=(i,l)=>(t==10&&(t=0),n[t++]=i,n[t++]=l)}var Qe=class{constructor(n,e,t,i){this.width=n,this.height=e,this.map=t,this.problems=i}findCell(n){for(let e=0;e<this.map.length;e++){const t=this.map[e];if(t!=n)continue;const i=e%this.width,l=e/this.width|0;let a=i+1,o=l+1;for(let c=1;a<this.width&&this.map[e+c]==t;c++)a++;for(let c=1;o<this.height&&this.map[e+this.width*c]==t;c++)o++;return{left:i,top:l,right:a,bottom:o}}throw new RangeError(`No cell with offset ${n} found`)}colCount(n){for(let e=0;e<this.map.length;e++)if(this.map[e]==n)return e%this.width;throw new RangeError(`No cell with offset ${n} found`)}nextCell(n,e,t){const{left:i,right:l,top:a,bottom:o}=this.findCell(n);return e=="horiz"?(t<0?i==0:l==this.width)?null:this.map[a*this.width+(t<0?i-1:l)]:(t<0?a==0:o==this.height)?null:this.map[i+this.width*(t<0?a-1:o)]}rectBetween(n,e){const{left:t,right:i,top:l,bottom:a}=this.findCell(n),{left:o,right:c,top:f,bottom:d}=this.findCell(e);return{left:Math.min(t,o),top:Math.min(l,f),right:Math.max(i,c),bottom:Math.max(a,d)}}cellsInRect(n){const e=[],t={};for(let i=n.top;i<n.bottom;i++)for(let l=n.left;l<n.right;l++){const a=i*this.width+l,o=this.map[a];t[o]||(t[o]=!0,!(l==n.left&&l&&this.map[a-1]==o||i==n.top&&i&&this.map[a-this.width]==o)&&e.push(o))}return e}positionAt(n,e,t){for(let i=0,l=0;;i++){const a=l+t.child(i).nodeSize;if(i==n){let o=e+n*this.width;const c=(n+1)*this.width;for(;o<c&&this.map[o]<l;)o++;return o==c?a-1:this.map[o]}l=a}}static get(n){return Km(n)||Ym(n,U_(n))}};function U_(n){if(n.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+n.type.name);const e=V_(n),t=n.childCount,i=[];let l=0,a=null;const o=[];for(let d=0,p=e*t;d<p;d++)i[d]=0;for(let d=0,p=0;d<t;d++){const g=n.child(d);p++;for(let x=0;;x++){for(;l<i.length&&i[l]!=0;)l++;if(x==g.childCount)break;const v=g.child(x),{colspan:M,rowspan:T,colwidth:Q}=v.attrs;for(let L=0;L<T;L++){if(L+d>=t){(a||(a=[])).push({type:"overlong_rowspan",pos:p,n:T-L});break}const P=l+L*e;for(let ee=0;ee<M;ee++){i[P+ee]==0?i[P+ee]=p:(a||(a=[])).push({type:"collision",row:d,pos:p,n:M-ee});const z=Q&&Q[ee];if(z){const Y=(P+ee)%e*2,ne=o[Y];ne==null||ne!=z&&o[Y+1]==1?(o[Y]=z,o[Y+1]=1):ne==z&&o[Y+1]++}}}l+=M,p+=v.nodeSize}const b=(d+1)*e;let S=0;for(;l<b;)i[l++]==0&&S++;S&&(a||(a=[])).push({type:"missing",row:d,n:S}),p++}(e===0||t===0)&&(a||(a=[])).push({type:"zero_sized"});const c=new Qe(e,t,i,a);let f=!1;for(let d=0;!f&&d<o.length;d+=2)o[d]!=null&&o[d+1]<t&&(f=!0);return f&&j_(c,o,n),c}function V_(n){let e=-1,t=!1;for(let i=0;i<n.childCount;i++){const l=n.child(i);let a=0;if(t)for(let o=0;o<i;o++){const c=n.child(o);for(let f=0;f<c.childCount;f++){const d=c.child(f);o+d.attrs.rowspan>i&&(a+=d.attrs.colspan)}}for(let o=0;o<l.childCount;o++){const c=l.child(o);a+=c.attrs.colspan,c.attrs.rowspan>1&&(t=!0)}e==-1?e=a:e!=a&&(e=Math.max(e,a))}return e}function j_(n,e,t){n.problems||(n.problems=[]);const i={};for(let l=0;l<n.map.length;l++){const a=n.map[l];if(i[a])continue;i[a]=!0;const o=t.nodeAt(a);if(!o)throw new RangeError(`No cell with offset ${a} found`);let c=null;const f=o.attrs;for(let d=0;d<f.colspan;d++){const p=e[(l+d)%n.width*2];p!=null&&(!f.colwidth||f.colwidth[d]!=p)&&((c||(c=F_(f)))[d]=p)}c&&n.problems.unshift({type:"colwidth mismatch",pos:a,colwidth:c})}}function F_(n){if(n.colwidth)return n.colwidth.slice();const e=[];for(let t=0;t<n.colspan;t++)e.push(0);return e}function Ax(n,e){if(typeof n=="string")return{};const t=n.getAttribute("data-colwidth"),i=t&&/^\d+(,\d+)*$/.test(t)?t.split(",").map(o=>Number(o)):null,l=Number(n.getAttribute("colspan")||1),a={colspan:l,rowspan:Number(n.getAttribute("rowspan")||1),colwidth:i&&i.length==l?i:null};for(const o in e){const c=e[o].getFromDOM,f=c&&c(n);f!=null&&(a[o]=f)}return a}function Ox(n,e){const t={};n.attrs.colspan!=1&&(t.colspan=n.attrs.colspan),n.attrs.rowspan!=1&&(t.rowspan=n.attrs.rowspan),n.attrs.colwidth&&(t["data-colwidth"]=n.attrs.colwidth.join(","));for(const i in e){const l=e[i].setDOMAttr;l&&l(n.attrs[i],t)}return t}function K_(n){if(n!==null){if(!Array.isArray(n))throw new TypeError("colwidth must be null or an array");for(const e of n)if(typeof e!="number")throw new TypeError("colwidth must be null or an array of numbers")}}function Y_(n){const e=n.cellAttributes||{},t={colspan:{default:1,validate:"number"},rowspan:{default:1,validate:"number"},colwidth:{default:null,validate:K_}};for(const i in e)t[i]={default:e[i].default,validate:e[i].validate};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:n.tableGroup,parseDOM:[{tag:"table"}],toDOM(){return["table",["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM(){return["tr",0]}},table_cell:{content:n.cellContent,attrs:t,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:i=>Ax(i,e)}],toDOM(i){return["td",Ox(i,e),0]}},table_header:{content:n.cellContent,attrs:t,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:i=>Ax(i,e)}],toDOM(i){return["th",Ox(i,e),0]}}}}function $n(n){let e=n.cached.tableNodeTypes;if(!e){e=n.cached.tableNodeTypes={};for(const t in n.nodes){const i=n.nodes[t],l=i.spec.tableRole;l&&(e[l]=i)}}return e}const Lr=new Vt("selectingCells");function Po(n){for(let e=n.depth-1;e>0;e--)if(n.node(e).type.spec.tableRole=="row")return n.node(0).resolve(n.before(e+1));return null}function Pn(n){const e=n.selection.$head;for(let t=e.depth;t>0;t--)if(e.node(t).type.spec.tableRole=="row")return!0;return!1}function Kf(n){const e=n.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const t=Po(e.$head)||G_(e.$head);if(t)return t;throw new RangeError(`No cell found around position ${e.head}`)}function G_(n){for(let e=n.nodeAfter,t=n.pos;e;e=e.firstChild,t++){const i=e.type.spec.tableRole;if(i=="cell"||i=="header_cell")return n.doc.resolve(t)}for(let e=n.nodeBefore,t=n.pos;e;e=e.lastChild,t--){const i=e.type.spec.tableRole;if(i=="cell"||i=="header_cell")return n.doc.resolve(t-e.nodeSize)}}function Gm(n){return n.parent.type.spec.tableRole=="row"&&!!n.nodeAfter}function Q_(n){return n.node(0).resolve(n.pos+n.nodeAfter.nodeSize)}function Ny(n,e){return n.depth==e.depth&&n.pos>=e.start(-1)&&n.pos<=e.end(-1)}function tT(n,e,t){const i=n.node(-1),l=Qe.get(i),a=n.start(-1),o=l.nextCell(n.pos-a,e,t);return o==null?null:n.node(0).resolve(a+o)}function Ll(n,e,t=1){const i={...n,colspan:n.colspan-t};return i.colwidth&&(i.colwidth=i.colwidth.slice(),i.colwidth.splice(e,t),i.colwidth.some(l=>l>0)||(i.colwidth=null)),i}function X_(n,e,t=1){const i={...n,colspan:n.colspan+t};if(i.colwidth){i.colwidth=i.colwidth.slice();for(let l=0;l<t;l++)i.colwidth.splice(e,0,0)}return i}function J_(n,e,t){const i=$n(e.type.schema).header_cell;for(let l=0;l<n.height;l++)if(e.nodeAt(n.map[t+l*n.width]).type!=i)return!1;return!0}var st=class Gi extends Ce{constructor(e,t=e){const i=e.node(-1),l=Qe.get(i),a=e.start(-1),o=l.rectBetween(e.pos-a,t.pos-a),c=e.node(0),f=l.cellsInRect(o).filter(p=>p!=t.pos-a);f.unshift(t.pos-a);const d=f.map(p=>{const g=i.nodeAt(p);if(!g)throw new RangeError(`No cell with offset ${p} found`);const b=a+p+1;return new Tv(c.resolve(b),c.resolve(b+g.content.size))});super(d[0].$from,d[0].$to,d),this.$anchorCell=e,this.$headCell=t}map(e,t){const i=e.resolve(t.map(this.$anchorCell.pos)),l=e.resolve(t.map(this.$headCell.pos));if(Gm(i)&&Gm(l)&&Ny(i,l)){const a=this.$anchorCell.node(-1)!=i.node(-1);return a&&this.isRowSelection()?Gi.rowSelection(i,l):a&&this.isColSelection()?Gi.colSelection(i,l):new Gi(i,l)}return we.between(i,l)}content(){const e=this.$anchorCell.node(-1),t=Qe.get(e),i=this.$anchorCell.start(-1),l=t.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i),a={},o=[];for(let f=l.top;f<l.bottom;f++){const d=[];for(let p=f*t.width+l.left,g=l.left;g<l.right;g++,p++){const b=t.map[p];if(a[b])continue;a[b]=!0;const S=t.findCell(b);let x=e.nodeAt(b);if(!x)throw new RangeError(`No cell with offset ${b} found`);const v=l.left-S.left,M=S.right-l.right;if(v>0||M>0){let T=x.attrs;if(v>0&&(T=Ll(T,0,v)),M>0&&(T=Ll(T,T.colspan-M,M)),S.left<l.left){if(x=x.type.createAndFill(T),!x)throw new RangeError(`Could not create cell with attrs ${JSON.stringify(T)}`)}else x=x.type.create(T,x.content)}if(S.top<l.top||S.bottom>l.bottom){const T={...x.attrs,rowspan:Math.min(S.bottom,l.bottom)-Math.max(S.top,l.top)};S.top<l.top?x=x.type.createAndFill(T):x=x.type.create(T,x.content)}d.push(x)}o.push(e.child(f).copy(X.from(d)))}const c=this.isColSelection()&&this.isRowSelection()?e:o;return new W(X.from(c),1,1)}replace(e,t=W.empty){const i=e.steps.length,l=this.ranges;for(let o=0;o<l.length;o++){const{$from:c,$to:f}=l[o],d=e.mapping.slice(i);e.replace(d.map(c.pos),d.map(f.pos),o?W.empty:t)}const a=Ce.findFrom(e.doc.resolve(e.mapping.slice(i).map(this.to)),-1);a&&e.setSelection(a)}replaceWith(e,t){this.replace(e,new W(X.from(t),0,0))}forEachCell(e){const t=this.$anchorCell.node(-1),i=Qe.get(t),l=this.$anchorCell.start(-1),a=i.cellsInRect(i.rectBetween(this.$anchorCell.pos-l,this.$headCell.pos-l));for(let o=0;o<a.length;o++)e(t.nodeAt(a[o]),l+a[o])}isColSelection(){const e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);if(Math.min(e,t)>0)return!1;const i=e+this.$anchorCell.nodeAfter.attrs.rowspan,l=t+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(i,l)==this.$headCell.node(-1).childCount}static colSelection(e,t=e){const i=e.node(-1),l=Qe.get(i),a=e.start(-1),o=l.findCell(e.pos-a),c=l.findCell(t.pos-a),f=e.node(0);return o.top<=c.top?(o.top>0&&(e=f.resolve(a+l.map[o.left])),c.bottom<l.height&&(t=f.resolve(a+l.map[l.width*(l.height-1)+c.right-1]))):(c.top>0&&(t=f.resolve(a+l.map[c.left])),o.bottom<l.height&&(e=f.resolve(a+l.map[l.width*(l.height-1)+o.right-1]))),new Gi(e,t)}isRowSelection(){const e=this.$anchorCell.node(-1),t=Qe.get(e),i=this.$anchorCell.start(-1),l=t.colCount(this.$anchorCell.pos-i),a=t.colCount(this.$headCell.pos-i);if(Math.min(l,a)>0)return!1;const o=l+this.$anchorCell.nodeAfter.attrs.colspan,c=a+this.$headCell.nodeAfter.attrs.colspan;return Math.max(o,c)==t.width}eq(e){return e instanceof Gi&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,t=e){const i=e.node(-1),l=Qe.get(i),a=e.start(-1),o=l.findCell(e.pos-a),c=l.findCell(t.pos-a),f=e.node(0);return o.left<=c.left?(o.left>0&&(e=f.resolve(a+l.map[o.top*l.width])),c.right<l.width&&(t=f.resolve(a+l.map[l.width*(c.top+1)-1]))):(c.left>0&&(t=f.resolve(a+l.map[c.top*l.width])),o.right<l.width&&(e=f.resolve(a+l.map[l.width*(o.top+1)-1]))),new Gi(e,t)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,t){return new Gi(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,i=t){return new Gi(e.resolve(t),e.resolve(i))}getBookmark(){return new Z_(this.$anchorCell.pos,this.$headCell.pos)}};st.prototype.visible=!1;Ce.jsonID("cell",st);var Z_=class nT{constructor(e,t){this.anchor=e,this.head=t}map(e){return new nT(e.map(this.anchor),e.map(this.head))}resolve(e){const t=e.resolve(this.anchor),i=e.resolve(this.head);return t.parent.type.spec.tableRole=="row"&&i.parent.type.spec.tableRole=="row"&&t.index()<t.parent.childCount&&i.index()<i.parent.childCount&&Ny(t,i)?new st(t,i):Ce.near(i,1)}};function $_(n){if(!(n.selection instanceof st))return null;const e=[];return n.selection.forEachCell((t,i)=>{e.push(Ut.node(i,i+t.nodeSize,{class:"selectedCell"}))}),ut.create(n.doc,e)}function P_({$from:n,$to:e}){if(n.pos==e.pos||n.pos<e.pos-6)return!1;let t=n.pos,i=e.pos,l=n.depth;for(;l>=0&&!(n.after(l+1)<n.end(l));l--,t++);for(let a=e.depth;a>=0&&!(e.before(a+1)>e.start(a));a--,i--);return t==i&&/row|table/.test(n.node(l).type.spec.tableRole)}function W_({$from:n,$to:e}){let t,i;for(let l=n.depth;l>0;l--){const a=n.node(l);if(a.type.spec.tableRole==="cell"||a.type.spec.tableRole==="header_cell"){t=a;break}}for(let l=e.depth;l>0;l--){const a=e.node(l);if(a.type.spec.tableRole==="cell"||a.type.spec.tableRole==="header_cell"){i=a;break}}return t!==i&&e.parentOffset===0}function eB(n,e,t){const i=(e||n).selection,l=(e||n).doc;let a,o;if(i instanceof be&&(o=i.node.type.spec.tableRole)){if(o=="cell"||o=="header_cell")a=st.create(l,i.from);else if(o=="row"){const c=l.resolve(i.from+1);a=st.rowSelection(c,c)}else if(!t){const c=Qe.get(i.node),f=i.from+1,d=f+c.map[c.width*c.height-1];a=st.create(l,f+1,d)}}else i instanceof we&&P_(i)?a=we.create(l,i.from):i instanceof we&&W_(i)&&(a=we.create(l,i.$from.start(),i.$from.end()));return a&&(e||(e=n.tr)).setSelection(a),e}const tB=new Vt("fix-tables");function iT(n,e,t,i){const l=n.childCount,a=e.childCount;e:for(let o=0,c=0;o<a;o++){const f=e.child(o);for(let d=c,p=Math.min(l,o+3);d<p;d++)if(n.child(d)==f){c=d+1,t+=f.nodeSize;continue e}i(f,t),c<l&&n.child(c).sameMarkup(f)?iT(n.child(c),f,t+1,i):f.nodesBetween(0,f.content.size,i,t+1),t+=f.nodeSize}}function nB(n,e){let t;const i=(l,a)=>{l.type.spec.tableRole=="table"&&(t=iB(n,l,a,t))};return e?e.doc!=n.doc&&iT(e.doc,n.doc,0,i):n.doc.descendants(i),t}function iB(n,e,t,i){const l=Qe.get(e);if(!l.problems)return i;i||(i=n.tr);const a=[];for(let f=0;f<l.height;f++)a.push(0);for(let f=0;f<l.problems.length;f++){const d=l.problems[f];if(d.type=="collision"){const p=e.nodeAt(d.pos);if(!p)continue;const g=p.attrs;for(let b=0;b<g.rowspan;b++)a[d.row+b]+=d.n;i.setNodeMarkup(i.mapping.map(t+1+d.pos),null,Ll(g,g.colspan-d.n,d.n))}else if(d.type=="missing")a[d.row]+=d.n;else if(d.type=="overlong_rowspan"){const p=e.nodeAt(d.pos);if(!p)continue;i.setNodeMarkup(i.mapping.map(t+1+d.pos),null,{...p.attrs,rowspan:p.attrs.rowspan-d.n})}else if(d.type=="colwidth mismatch"){const p=e.nodeAt(d.pos);if(!p)continue;i.setNodeMarkup(i.mapping.map(t+1+d.pos),null,{...p.attrs,colwidth:d.colwidth})}else if(d.type=="zero_sized"){const p=i.mapping.map(t);i.delete(p,p+e.nodeSize)}}let o,c;for(let f=0;f<a.length;f++)a[f]&&(o==null&&(o=f),c=f);for(let f=0,d=t+1;f<l.height;f++){const p=e.child(f),g=d+p.nodeSize,b=a[f];if(b>0){let S="cell";p.firstChild&&(S=p.firstChild.type.spec.tableRole);const x=[];for(let M=0;M<b;M++){const T=$n(n.schema)[S].createAndFill();T&&x.push(T)}const v=(f==0||o==f-1)&&c==f?d+1:g-1;i.insert(i.mapping.map(v),x)}d=g}return i.setMeta(tB,{fixTables:!0})}function rT(n){const e=Qe.get(n),t=[],i=e.height,l=e.width;for(let a=0;a<i;a++){const o=[];for(let c=0;c<l;c++){const f=a*l+c,d=e.map[f];if(a>0){const p=f-l;if(d===e.map[p]){o.push(null);continue}}if(c>0){const p=f-1;if(d===e.map[p]){o.push(null);continue}}o.push(n.nodeAt(d))}t.push(o)}return t}function lT(n,e){const t=[],i=Qe.get(n),l=i.height,a=i.width;for(let o=0;o<l;o++){const c=n.child(o),f=[];for(let p=0;p<a;p++){const g=e[o][p];if(!g)continue;const b=i.map[o*i.width+p],S=n.nodeAt(b);if(!S)continue;const x=S.type.createChecked(g.attrs,g.content,g.marks);f.push(x)}const d=c.type.createChecked(c.attrs,f,c.marks);t.push(d)}return n.type.createChecked(n.attrs,t,n.marks)}function sT(n,e,t,i){const l=e[0]>t[0]?-1:1,a=n.splice(e[0],e.length),o=a.length%2===0?1:0;let c;return c=l===-1?t[0]:t[t.length-1]-o,n.splice(c,0,...a),n}function Wo(n){return rB(e=>e.type.spec.tableRole==="table",n)}function rB(n,e){for(let t=e.depth;t>=0;t-=1){const i=e.node(t);if(n(i))return{node:i,pos:t===0?0:e.before(t),start:e.start(t),depth:t}}return null}function Is(n,e){const t=Wo(e.$from);if(!t)return;const i=Qe.get(t.node);if(!(n<0||n>i.width-1))return i.cellsInRect({left:n,right:n+1,top:0,bottom:i.height}).map(l=>{const a=t.node.nodeAt(l),o=l+t.start;return{pos:o,start:o+1,node:a,depth:t.depth+2}})}function qs(n,e){const t=Wo(e.$from);if(!t)return;const i=Qe.get(t.node);if(!(n<0||n>i.height-1))return i.cellsInRect({left:0,right:i.width,top:n,bottom:n+1}).map(l=>{const a=t.node.nodeAt(l),o=l+t.start;return{pos:o,start:o+1,node:a,depth:t.depth+2}})}function Rx(n,e,t=e){let i=e,l=t;for(let p=e;p>=0;p--){const g=Is(p,n.selection);g&&g.forEach(b=>{const S=b.node.attrs.colspan+p-1;S>=i&&(i=p),S>l&&(l=S)})}for(let p=e;p<=l;p++){const g=Is(p,n.selection);g&&g.forEach(b=>{const S=b.node.attrs.colspan+p-1;b.node.attrs.colspan>1&&S>l&&(l=S)})}const a=[];for(let p=i;p<=l;p++){const g=Is(p,n.selection);g&&g.length>0&&a.push(p)}i=a[0],l=a[a.length-1];const o=Is(i,n.selection),c=qs(0,n.selection);if(!o||!c)return;const f=n.doc.resolve(o[o.length-1].pos);let d;for(let p=l;p>=i;p--){const g=Is(p,n.selection);if(g&&g.length>0){for(let b=c.length-1;b>=0;b--)if(c[b].pos===g[0].pos){d=g[0];break}if(d)break}}if(d)return{$anchor:f,$head:n.doc.resolve(d.pos),indexes:a}}function Dx(n,e,t=e){let i=e,l=t;for(let p=e;p>=0;p--){const g=qs(p,n.selection);g&&g.forEach(b=>{const S=b.node.attrs.rowspan+p-1;S>=i&&(i=p),S>l&&(l=S)})}for(let p=e;p<=l;p++){const g=qs(p,n.selection);g&&g.forEach(b=>{const S=b.node.attrs.rowspan+p-1;b.node.attrs.rowspan>1&&S>l&&(l=S)})}const a=[];for(let p=i;p<=l;p++){const g=qs(p,n.selection);g&&g.length>0&&a.push(p)}i=a[0],l=a[a.length-1];const o=qs(i,n.selection),c=Is(0,n.selection);if(!o||!c)return;const f=n.doc.resolve(o[o.length-1].pos);let d;for(let p=l;p>=i;p--){const g=qs(p,n.selection);if(g&&g.length>0){for(let b=c.length-1;b>=0;b--)if(c[b].pos===g[0].pos){d=g[0];break}if(d)break}}if(d)return{$anchor:f,$head:n.doc.resolve(d.pos),indexes:a}}function zx(n){return n[0].map((e,t)=>n.map(i=>i[t]))}function lB(n){var e,t;const{tr:i,originIndex:l,targetIndex:a,select:o,pos:c}=n,f=Wo(i.doc.resolve(c));if(!f)return!1;const d=(e=Rx(i,l))===null||e===void 0?void 0:e.indexes,p=(t=Rx(i,a))===null||t===void 0?void 0:t.indexes;if(!d||!p||d.includes(a))return!1;const g=sB(f.node,d,p);if(i.replaceWith(f.pos,f.pos+f.node.nodeSize,g),!o)return!0;const b=Qe.get(g),S=f.start,x=a,v=b.positionAt(b.height-1,x,g),M=i.doc.resolve(S+v),T=b.positionAt(0,x,g),Q=i.doc.resolve(S+T);return i.setSelection(st.colSelection(M,Q)),!0}function sB(n,e,t,i){let l=zx(rT(n));return l=sT(l,e,t),l=zx(l),lT(n,l)}function aB(n){var e,t;const{tr:i,originIndex:l,targetIndex:a,select:o,pos:c}=n,f=Wo(i.doc.resolve(c));if(!f)return!1;const d=(e=Dx(i,l))===null||e===void 0?void 0:e.indexes,p=(t=Dx(i,a))===null||t===void 0?void 0:t.indexes;if(!d||!p||d.includes(a))return!1;const g=oB(f.node,d,p);if(i.replaceWith(f.pos,f.pos+f.node.nodeSize,g),!o)return!0;const b=Qe.get(g),S=f.start,x=a,v=b.positionAt(x,b.width-1,g),M=i.doc.resolve(S+v),T=b.positionAt(x,0,g),Q=i.doc.resolve(S+T);return i.setSelection(st.rowSelection(M,Q)),!0}function oB(n,e,t,i){let l=rT(n);return l=sT(l,e,t),lT(n,l)}function $r(n){const e=n.selection,t=Kf(n),i=t.node(-1),l=t.start(-1),a=Qe.get(i);return{...e instanceof st?a.rectBetween(e.$anchorCell.pos-l,e.$headCell.pos-l):a.findCell(t.pos-l),tableStart:l,map:a,table:i}}function aT(n,{map:e,tableStart:t,table:i},l){let a=l>0?-1:0;J_(e,i,l+a)&&(a=l==0||l==e.width?null:0);for(let o=0;o<e.height;o++){const c=o*e.width+l;if(l>0&&l<e.width&&e.map[c-1]==e.map[c]){const f=e.map[c],d=i.nodeAt(f);n.setNodeMarkup(n.mapping.map(t+f),null,X_(d.attrs,l-e.colCount(f))),o+=d.attrs.rowspan-1}else{const f=a==null?$n(i.type.schema).cell:i.nodeAt(e.map[c+a]).type,d=e.positionAt(o,l,i);n.insert(n.mapping.map(t+d),f.createAndFill())}}return n}function uB(n,e){if(!Pn(n))return!1;if(e){const t=$r(n);e(aT(n.tr,t,t.left))}return!0}function cB(n,e){if(!Pn(n))return!1;if(e){const t=$r(n);e(aT(n.tr,t,t.right))}return!0}function fB(n,{map:e,table:t,tableStart:i},l){const a=n.mapping.maps.length;for(let o=0;o<e.height;){const c=o*e.width+l,f=e.map[c],d=t.nodeAt(f),p=d.attrs;if(l>0&&e.map[c-1]==f||l<e.width-1&&e.map[c+1]==f)n.setNodeMarkup(n.mapping.slice(a).map(i+f),null,Ll(p,l-e.colCount(f)));else{const g=n.mapping.slice(a).map(i+f);n.delete(g,g+d.nodeSize)}o+=p.rowspan}}function hB(n,e){if(!Pn(n))return!1;if(e){const t=$r(n),i=n.tr;if(t.left==0&&t.right==t.map.width)return!1;for(let l=t.right-1;fB(i,t,l),l!=t.left;l--){const a=t.tableStart?i.doc.nodeAt(t.tableStart-1):i.doc;if(!a)throw new RangeError("No table found");t.table=a,t.map=Qe.get(a)}e(i)}return!0}function dB(n,{map:e,table:t,tableStart:i},l){let a=0;for(let d=0;d<l;d++)a+=t.child(d).nodeSize;const o=a+t.child(l).nodeSize,c=n.mapping.maps.length;n.delete(a+i,o+i);const f=new Set;for(let d=0,p=l*e.width;d<e.width;d++,p++){const g=e.map[p];if(!f.has(g)){if(f.add(g),l>0&&g==e.map[p-e.width]){const b=t.nodeAt(g).attrs;n.setNodeMarkup(n.mapping.slice(c).map(g+i),null,{...b,rowspan:b.rowspan-1}),d+=b.colspan-1}else if(l<e.height&&g==e.map[p+e.width]){const b=t.nodeAt(g),S=b.attrs,x=b.type.create({...S,rowspan:b.attrs.rowspan-1},b.content),v=e.positionAt(l+1,d,t);n.insert(n.mapping.slice(c).map(i+v),x),d+=S.colspan-1}}}}function pB(n,e){if(!Pn(n))return!1;if(e){const t=$r(n),i=n.tr;if(t.top==0&&t.bottom==t.map.height)return!1;for(let l=t.bottom-1;dB(i,t,l),l!=t.top;l--){const a=t.tableStart?i.doc.nodeAt(t.tableStart-1):i.doc;if(!a)throw new RangeError("No table found");t.table=a,t.map=Qe.get(t.table)}e(i)}return!0}function mB(n,e){return function(t,i){if(!Pn(t))return!1;const l=Kf(t);if(l.nodeAfter.attrs[n]===e)return!1;if(i){const a=t.tr;t.selection instanceof st?t.selection.forEachCell((o,c)=>{o.attrs[n]!==e&&a.setNodeMarkup(c,null,{...o.attrs,[n]:e})}):a.setNodeMarkup(l.pos,null,{...l.nodeAfter.attrs,[n]:e}),i(a)}return!0}}function gB(n){return function(e,t){if(!Pn(e))return!1;if(t){const i=$n(e.schema),l=$r(e),a=e.tr,o=l.map.cellsInRect(n=="column"?{left:l.left,top:0,right:l.right,bottom:l.map.height}:n=="row"?{left:0,top:l.top,right:l.map.width,bottom:l.bottom}:l),c=o.map(f=>l.table.nodeAt(f));for(let f=0;f<o.length;f++)c[f].type==i.header_cell&&a.setNodeMarkup(l.tableStart+o[f],i.cell,c[f].attrs);if(a.steps.length===0)for(let f=0;f<o.length;f++)a.setNodeMarkup(l.tableStart+o[f],i.header_cell,c[f].attrs);t(a)}return!0}}function _x(n,e,t){const i=e.map.cellsInRect({left:0,top:0,right:n=="row"?e.map.width:1,bottom:n=="column"?e.map.height:1});for(let l=0;l<i.length;l++){const a=e.table.nodeAt(i[l]);if(a&&a.type!==t.header_cell)return!1}return!0}function Ay(n,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?gB(n):function(t,i){if(!Pn(t))return!1;if(i){const l=$n(t.schema),a=$r(t),o=t.tr,c=_x("row",a,l),f=_x("column",a,l),d=(n==="column"?c:n==="row"&&f)?1:0,p=n=="column"?{left:0,top:d,right:1,bottom:a.map.height}:n=="row"?{left:d,top:0,right:a.map.width,bottom:1}:a,g=n=="column"?f?l.cell:l.header_cell:n=="row"?c?l.cell:l.header_cell:l.cell;a.map.cellsInRect(p).forEach(b=>{const S=b+a.tableStart,x=o.doc.nodeAt(S);x&&o.setNodeMarkup(S,g,x.attrs)}),i(o)}return!0}}Ay("row",{useDeprecatedLogic:!0});Ay("column",{useDeprecatedLogic:!0});Ay("cell",{useDeprecatedLogic:!0});function yB(n,e){if(e<0){const t=n.nodeBefore;if(t)return n.pos-t.nodeSize;for(let i=n.index(-1)-1,l=n.before();i>=0;i--){const a=n.node(-1).child(i),o=a.lastChild;if(o)return l-1-o.nodeSize;l-=a.nodeSize}}else{if(n.index()<n.parent.childCount-1)return n.pos+n.nodeAfter.nodeSize;const t=n.node(-1);for(let i=n.indexAfter(-1),l=n.after();i<t.childCount;i++){const a=t.child(i);if(a.childCount)return l+1;l+=a.nodeSize}}return null}function oT(n){return function(e,t){if(!Pn(e))return!1;const i=yB(Kf(e),n);if(i==null)return!1;if(t){const l=e.doc.resolve(i);t(e.tr.setSelection(we.between(l,Q_(l))).scrollIntoView())}return!0}}function bB(n,e){const t=n.selection.$anchor;for(let i=t.depth;i>0;i--)if(t.node(i).type.spec.tableRole=="table")return e&&e(n.tr.delete(t.before(i),t.after(i)).scrollIntoView()),!0;return!1}function Nc(n,e){const t=n.selection;if(!(t instanceof st))return!1;if(e){const i=n.tr,l=$n(n.schema).cell.createAndFill().content;t.forEachCell((a,o)=>{a.content.eq(l)||i.replace(i.mapping.map(o+1),i.mapping.map(o+a.nodeSize-1),new W(l,0,0))}),i.docChanged&&e(i)}return!0}function SB(n){return(e,t)=>{const{from:i,to:l,select:a=!0,pos:o=e.selection.from}=n,c=e.tr;return aB({tr:c,originIndex:i,targetIndex:l,select:a,pos:o})?(t?.(c),!0):!1}}function kB(n){return(e,t)=>{const{from:i,to:l,select:a=!0,pos:o=e.selection.from}=n,c=e.tr;return lB({tr:c,originIndex:i,targetIndex:l,select:a,pos:o})?(t?.(c),!0):!1}}function xB(n){if(n.size===0)return null;let{content:e,openStart:t,openEnd:i}=n;for(;e.childCount==1&&(t>0&&i>0||e.child(0).type.spec.tableRole=="table");)t--,i--,e=e.child(0).content;const l=e.child(0),a=l.type.spec.tableRole,o=l.type.schema,c=[];if(a=="row")for(let f=0;f<e.childCount;f++){let d=e.child(f).content;const p=f?0:Math.max(0,t-1),g=f<e.childCount-1?0:Math.max(0,i-1);(p||g)&&(d=Qm($n(o).row,new W(d,p,g)).content),c.push(d)}else if(a=="cell"||a=="header_cell")c.push(t||i?Qm($n(o).row,new W(e,t,i)).content:e);else return null;return CB(o,c)}function CB(n,e){const t=[];for(let l=0;l<e.length;l++){const a=e[l];for(let o=a.childCount-1;o>=0;o--){const{rowspan:c,colspan:f}=a.child(o).attrs;for(let d=l;d<l+c;d++)t[d]=(t[d]||0)+f}}let i=0;for(let l=0;l<t.length;l++)i=Math.max(i,t[l]);for(let l=0;l<t.length;l++)if(l>=e.length&&e.push(X.empty),t[l]<i){const a=$n(n).cell.createAndFill(),o=[];for(let c=t[l];c<i;c++)o.push(a);e[l]=e[l].append(X.from(o))}return{height:e.length,width:i,rows:e}}function Qm(n,e){const t=n.createAndFill();return new wv(t).replace(0,t.content.size,e).doc}function vB({width:n,height:e,rows:t},i,l){if(n!=i){const a=[],o=[];for(let c=0;c<t.length;c++){const f=t[c],d=[];for(let p=a[c]||0,g=0;p<i;g++){let b=f.child(g%f.childCount);p+b.attrs.colspan>i&&(b=b.type.createChecked(Ll(b.attrs,b.attrs.colspan,p+b.attrs.colspan-i),b.content)),d.push(b),p+=b.attrs.colspan;for(let S=1;S<b.attrs.rowspan;S++)a[c+S]=(a[c+S]||0)+b.attrs.colspan}o.push(X.from(d))}t=o,n=i}if(e!=l){const a=[];for(let o=0,c=0;o<l;o++,c++){const f=[],d=t[c%e];for(let p=0;p<d.childCount;p++){let g=d.child(p);o+g.attrs.rowspan>l&&(g=g.type.create({...g.attrs,rowspan:Math.max(1,l-g.attrs.rowspan)},g.content)),f.push(g)}a.push(X.from(f))}t=a,e=l}return{width:n,height:e,rows:t}}function wB(n,e,t,i,l,a,o){const c=n.doc.type.schema,f=$n(c);let d,p;if(l>e.width)for(let g=0,b=0;g<e.height;g++){const S=t.child(g);b+=S.nodeSize;const x=[];let v;S.lastChild==null||S.lastChild.type==f.cell?v=d||(d=f.cell.createAndFill()):v=p||(p=f.header_cell.createAndFill());for(let M=e.width;M<l;M++)x.push(v);n.insert(n.mapping.slice(o).map(b-1+i),x)}if(a>e.height){const g=[];for(let x=0,v=(e.height-1)*e.width;x<Math.max(e.width,l);x++){const M=x>=e.width?!1:t.nodeAt(e.map[v+x]).type==f.header_cell;g.push(M?p||(p=f.header_cell.createAndFill()):d||(d=f.cell.createAndFill()))}const b=f.row.create(null,X.from(g)),S=[];for(let x=e.height;x<a;x++)S.push(b);n.insert(n.mapping.slice(o).map(i+t.nodeSize-2),S)}return!!(d||p)}function Bx(n,e,t,i,l,a,o,c){if(o==0||o==e.height)return!1;let f=!1;for(let d=l;d<a;d++){const p=o*e.width+d,g=e.map[p];if(e.map[p-e.width]==g){f=!0;const b=t.nodeAt(g),{top:S,left:x}=e.findCell(g);n.setNodeMarkup(n.mapping.slice(c).map(g+i),null,{...b.attrs,rowspan:o-S}),n.insert(n.mapping.slice(c).map(e.positionAt(o,x,t)),b.type.createAndFill({...b.attrs,rowspan:S+b.attrs.rowspan-o})),d+=b.attrs.colspan-1}}return f}function Lx(n,e,t,i,l,a,o,c){if(o==0||o==e.width)return!1;let f=!1;for(let d=l;d<a;d++){const p=d*e.width+o,g=e.map[p];if(e.map[p-1]==g){f=!0;const b=t.nodeAt(g),S=e.colCount(g),x=n.mapping.slice(c).map(g+i);n.setNodeMarkup(x,null,Ll(b.attrs,o-S,b.attrs.colspan-(o-S))),n.insert(x+b.nodeSize,b.type.createAndFill(Ll(b.attrs,0,o-S))),d+=b.attrs.rowspan-1}}return f}function Ix(n,e,t,i,l){let a=t?n.doc.nodeAt(t-1):n.doc;if(!a)throw new Error("No table found");let o=Qe.get(a);const{top:c,left:f}=i,d=f+l.width,p=c+l.height,g=n.tr;let b=0;function S(){if(a=t?g.doc.nodeAt(t-1):g.doc,!a)throw new Error("No table found");o=Qe.get(a),b=g.mapping.maps.length}wB(g,o,a,t,d,p,b)&&S(),Bx(g,o,a,t,f,d,c,b)&&S(),Bx(g,o,a,t,f,d,p,b)&&S(),Lx(g,o,a,t,c,p,f,b)&&S(),Lx(g,o,a,t,c,p,d,b)&&S();for(let x=c;x<p;x++){const v=o.positionAt(x,f,a),M=o.positionAt(x,d,a);g.replace(g.mapping.slice(b).map(v+t),g.mapping.slice(b).map(M+t),new W(l.rows[x-c],0,0))}S(),g.setSelection(new st(g.doc.resolve(t+o.positionAt(c,f,a)),g.doc.resolve(t+o.positionAt(p-1,d-1,a)))),e(g)}const TB=qv({ArrowLeft:Ac("horiz",-1),ArrowRight:Ac("horiz",1),ArrowUp:Ac("vert",-1),ArrowDown:Ac("vert",1),"Shift-ArrowLeft":Oc("horiz",-1),"Shift-ArrowRight":Oc("horiz",1),"Shift-ArrowUp":Oc("vert",-1),"Shift-ArrowDown":Oc("vert",1),Backspace:Nc,"Mod-Backspace":Nc,Delete:Nc,"Mod-Delete":Nc});function Zc(n,e,t){return t.eq(n.selection)?!1:(e&&e(n.tr.setSelection(t).scrollIntoView()),!0)}function Ac(n,e){return(t,i,l)=>{if(!l)return!1;const a=t.selection;if(a instanceof st)return Zc(t,i,Ce.near(a.$headCell,e));if(n!="horiz"&&!a.empty)return!1;const o=uT(l,n,e);if(o==null)return!1;if(n=="horiz")return Zc(t,i,Ce.near(t.doc.resolve(a.head+e),e));{const c=t.doc.resolve(o),f=tT(c,n,e);let d;return f?d=Ce.near(f,1):e<0?d=Ce.near(t.doc.resolve(c.before(-1)),-1):d=Ce.near(t.doc.resolve(c.after(-1)),1),Zc(t,i,d)}}}function Oc(n,e){return(t,i,l)=>{if(!l)return!1;const a=t.selection;let o;if(a instanceof st)o=a;else{const f=uT(l,n,e);if(f==null)return!1;o=new st(t.doc.resolve(f))}const c=tT(o.$headCell,n,e);return c?Zc(t,i,new st(o.$anchorCell,c)):!1}}function MB(n,e){const t=n.state.doc,i=Po(t.resolve(e));return i?(n.dispatch(n.state.tr.setSelection(new st(i))),!0):!1}function EB(n,e,t){if(!Pn(n.state))return!1;let i=xB(t);const l=n.state.selection;if(l instanceof st){i||(i={width:1,height:1,rows:[X.from(Qm($n(n.state.schema).cell,t))]});const a=l.$anchorCell.node(-1),o=l.$anchorCell.start(-1),c=Qe.get(a).rectBetween(l.$anchorCell.pos-o,l.$headCell.pos-o);return i=vB(i,c.right-c.left,c.bottom-c.top),Ix(n.state,n.dispatch,o,c,i),!0}else if(i){const a=Kf(n.state),o=a.start(-1);return Ix(n.state,n.dispatch,o,Qe.get(a.node(-1)).findCell(a.pos-o),i),!0}else return!1}function NB(n,e){var t;if(e.ctrlKey||e.metaKey)return;const i=qx(n,e.target);let l;if(e.shiftKey&&n.state.selection instanceof st)a(n.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&i&&(l=Po(n.state.selection.$anchor))!=null&&((t=Pp(n,e))===null||t===void 0?void 0:t.pos)!=l.pos)a(l,e),e.preventDefault();else if(!i)return;function a(f,d){let p=Pp(n,d);const g=Lr.getState(n.state)==null;if(!p||!Ny(f,p))if(g)p=f;else return;const b=new st(f,p);if(g||!n.state.selection.eq(b)){const S=n.state.tr.setSelection(b);g&&S.setMeta(Lr,f.pos),n.dispatch(S)}}function o(){n.root.removeEventListener("mouseup",o),n.root.removeEventListener("dragstart",o),n.root.removeEventListener("mousemove",c),Lr.getState(n.state)!=null&&n.dispatch(n.state.tr.setMeta(Lr,-1))}function c(f){const d=f,p=Lr.getState(n.state);let g;if(p!=null)g=n.state.doc.resolve(p);else if(qx(n,d.target)!=i&&(g=Pp(n,e),!g))return o();g&&a(g,d)}n.root.addEventListener("mouseup",o),n.root.addEventListener("dragstart",o),n.root.addEventListener("mousemove",c)}function uT(n,e,t){if(!(n.state.selection instanceof we))return null;const{$head:i}=n.state.selection;for(let l=i.depth-1;l>=0;l--){const a=i.node(l);if((t<0?i.index(l):i.indexAfter(l))!=(t<0?0:a.childCount))return null;if(a.type.spec.tableRole=="cell"||a.type.spec.tableRole=="header_cell"){const o=i.before(l),c=e=="vert"?t>0?"down":"up":t>0?"right":"left";return n.endOfTextblock(c)?o:null}}return null}function qx(n,e){for(;e&&e!=n.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function Pp(n,e){const t=n.posAtCoords({left:e.clientX,top:e.clientY});if(!t)return null;const i=t.inside>=0?t.inside:t.pos;return Po(n.state.doc.resolve(i))}var AB=class{constructor(n,e){this.node=n,this.defaultCellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${e}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Xm(n,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(n){return n.type!=this.node.type?!1:(this.node=n,Xm(n,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(n){return n.type=="attributes"&&(n.target==this.table||this.colgroup.contains(n.target))}};function Xm(n,e,t,i,l,a){let o=0,c=!0,f=e.firstChild;const d=n.firstChild;if(d){for(let g=0,b=0;g<d.childCount;g++){const{colspan:S,colwidth:x}=d.child(g).attrs;for(let v=0;v<S;v++,b++){const M=l==b?a:x&&x[v],T=M?M+"px":"";if(o+=M||i,M||(c=!1),f)f.style.width!=T&&(f.style.width=T),f=f.nextSibling;else{const Q=document.createElement("col");Q.style.width=T,e.appendChild(Q)}}}for(;f;){var p;const g=f.nextSibling;(p=f.parentNode)===null||p===void 0||p.removeChild(f),f=g}c?(t.style.width=o+"px",t.style.minWidth=""):(t.style.width="",t.style.minWidth=o+"px")}}const Nn=new Vt("tableColumnResizing");function OB({handleWidth:n=5,cellMinWidth:e=25,defaultCellMinWidth:t=100,View:i=AB,lastColumnResizable:l=!0}={}){const a=new Qt({key:Nn,state:{init(o,c){var f;const d=(f=a.spec)===null||f===void 0||(f=f.props)===null||f===void 0?void 0:f.nodeViews,p=$n(c.schema).table.name;return i&&d&&(d[p]=(g,b)=>new i(g,t,b)),new RB(-1,!1)},apply(o,c){return c.apply(o)}},props:{attributes:o=>{const c=Nn.getState(o);return c&&c.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(o,c)=>{DB(o,c,n,l)},mouseleave:o=>{zB(o)},mousedown:(o,c)=>{_B(o,c,e,t)}},decorations:o=>{const c=Nn.getState(o);if(c&&c.activeHandle>-1)return HB(o,c.activeHandle)},nodeViews:{}}});return a}var RB=class $c{constructor(e,t){this.activeHandle=e,this.dragging=t}apply(e){const t=this,i=e.getMeta(Nn);if(i&&i.setHandle!=null)return new $c(i.setHandle,!1);if(i&&i.setDragging!==void 0)return new $c(t.activeHandle,i.setDragging);if(t.activeHandle>-1&&e.docChanged){let l=e.mapping.map(t.activeHandle,-1);return Gm(e.doc.resolve(l))||(l=-1),new $c(l,t.dragging)}return t}};function DB(n,e,t,i){if(!n.editable)return;const l=Nn.getState(n.state);if(l&&!l.dragging){const a=LB(e.target);let o=-1;if(a){const{left:c,right:f}=a.getBoundingClientRect();e.clientX-c<=t?o=Hx(n,e,"left",t):f-e.clientX<=t&&(o=Hx(n,e,"right",t))}if(o!=l.activeHandle){if(!i&&o!==-1){const c=n.state.doc.resolve(o),f=c.node(-1),d=Qe.get(f),p=c.start(-1);if(d.colCount(c.pos-p)+c.nodeAfter.attrs.colspan-1==d.width-1)return}cT(n,o)}}}function zB(n){if(!n.editable)return;const e=Nn.getState(n.state);e&&e.activeHandle>-1&&!e.dragging&&cT(n,-1)}function _B(n,e,t,i){var l;if(!n.editable)return!1;const a=(l=n.dom.ownerDocument.defaultView)!==null&&l!==void 0?l:window,o=Nn.getState(n.state);if(!o||o.activeHandle==-1||o.dragging)return!1;const c=n.state.doc.nodeAt(o.activeHandle),f=BB(n,o.activeHandle,c.attrs);n.dispatch(n.state.tr.setMeta(Nn,{setDragging:{startX:e.clientX,startWidth:f}}));function d(g){a.removeEventListener("mouseup",d),a.removeEventListener("mousemove",p);const b=Nn.getState(n.state);b?.dragging&&(IB(n,b.activeHandle,Ux(b.dragging,g,t)),n.dispatch(n.state.tr.setMeta(Nn,{setDragging:null})))}function p(g){if(!g.which)return d(g);const b=Nn.getState(n.state);if(b&&b.dragging){const S=Ux(b.dragging,g,t);Vx(n,b.activeHandle,S,i)}}return Vx(n,o.activeHandle,f,i),a.addEventListener("mouseup",d),a.addEventListener("mousemove",p),e.preventDefault(),!0}function BB(n,e,{colspan:t,colwidth:i}){const l=i&&i[i.length-1];if(l)return l;const a=n.domAtPos(e);let o=a.node.childNodes[a.offset].offsetWidth,c=t;if(i)for(let f=0;f<t;f++)i[f]&&(o-=i[f],c--);return o/c}function LB(n){for(;n&&n.nodeName!="TD"&&n.nodeName!="TH";)n=n.classList&&n.classList.contains("ProseMirror")?null:n.parentNode;return n}function Hx(n,e,t,i){const l=t=="right"?-i:i,a=n.posAtCoords({left:e.clientX+l,top:e.clientY});if(!a)return-1;const{pos:o}=a,c=Po(n.state.doc.resolve(o));if(!c)return-1;if(t=="right")return c.pos;const f=Qe.get(c.node(-1)),d=c.start(-1),p=f.map.indexOf(c.pos-d);return p%f.width==0?-1:d+f.map[p-1]}function Ux(n,e,t){const i=e.clientX-n.startX;return Math.max(t,n.startWidth+i)}function cT(n,e){n.dispatch(n.state.tr.setMeta(Nn,{setHandle:e}))}function IB(n,e,t){const i=n.state.doc.resolve(e),l=i.node(-1),a=Qe.get(l),o=i.start(-1),c=a.colCount(i.pos-o)+i.nodeAfter.attrs.colspan-1,f=n.state.tr;for(let d=0;d<a.height;d++){const p=d*a.width+c;if(d&&a.map[p]==a.map[p-a.width])continue;const g=a.map[p],b=l.nodeAt(g).attrs,S=b.colspan==1?0:c-a.colCount(g);if(b.colwidth&&b.colwidth[S]==t)continue;const x=b.colwidth?b.colwidth.slice():qB(b.colspan);x[S]=t,f.setNodeMarkup(o+g,null,{...b,colwidth:x})}f.docChanged&&n.dispatch(f)}function Vx(n,e,t,i){const l=n.state.doc.resolve(e),a=l.node(-1),o=l.start(-1),c=Qe.get(a).colCount(l.pos-o)+l.nodeAfter.attrs.colspan-1;let f=n.domAtPos(l.start(-1)).node;for(;f&&f.nodeName!="TABLE";)f=f.parentNode;f&&Xm(a,f.firstChild,f,i,c,t)}function qB(n){return Array(n).fill(0)}function HB(n,e){const t=[],i=n.doc.resolve(e),l=i.node(-1);if(!l)return ut.empty;const a=Qe.get(l),o=i.start(-1),c=a.colCount(i.pos-o)+i.nodeAfter.attrs.colspan-1;for(let d=0;d<a.height;d++){const p=c+d*a.width;if((c==a.width-1||a.map[p]!=a.map[p+1])&&(d==0||a.map[p]!=a.map[p-a.width])){var f;const g=a.map[p],b=o+g+l.nodeAt(g).nodeSize-1,S=document.createElement("div");S.className="column-resize-handle",!((f=Nn.getState(n))===null||f===void 0)&&f.dragging&&t.push(Ut.node(o+g,o+g+l.nodeAt(g).nodeSize,{class:"column-resize-dragging"})),t.push(Ut.widget(b,S))}}return ut.create(n.doc,t)}function UB({allowTableNodeSelection:n=!1}={}){return new Qt({key:Lr,state:{init(){return null},apply(e,t){const i=e.getMeta(Lr);if(i!=null)return i==-1?null:i;if(t==null||!e.docChanged)return t;const{deleted:l,pos:a}=e.mapping.mapResult(t);return l?null:a}},props:{decorations:$_,handleDOMEvents:{mousedown:NB},createSelectionBetween(e){return Lr.getState(e.state)!=null?e.state.selection:null},handleTripleClick:MB,handleKeyDown:TB,handlePaste:EB},appendTransaction(e,t,i){return eB(i,nB(i,t),n)}})}var pf=typeof navigator<"u"?navigator:null,Oy=pf&&pf.userAgent||"",VB=/Edge\/(\d+)/.exec(Oy),jB=/MSIE \d/.exec(Oy),FB=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Oy),KB=!!(jB||FB||VB),YB=!KB&&!!pf&&/Apple Computer/.test(pf.vendor),fT=new Vt("safari-ime-span"),Jm=!1,GB={key:fT,props:{decorations:QB,handleDOMEvents:{compositionstart:()=>{Jm=!0},compositionend:()=>{Jm=!1}}}};function QB(n){const{$from:e,$to:t,to:i}=n.selection;if(Jm&&e.sameParent(t)){const l=Ut.widget(i,XB,{ignoreSelection:!0,key:"safari-ime-span"});return ut.create(n.doc,[l])}}function XB(n){const e=n.dom.ownerDocument.createElement("span");return e.className="ProseMirror-safari-ime-span",e}var JB=new Qt(YB?GB:{key:fT});function jx(n,e){const t=String(n);if(typeof e!="string")throw new TypeError("Expected character");let i=0,l=t.indexOf(e);for(;l!==-1;)i++,l=t.indexOf(e,l+e.length);return i}function ZB(n){if(typeof n!="string")throw new TypeError("Expected a string");return n.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function $B(n,e,t){const l=Df((t||{}).ignore||[]),a=PB(e);let o=-1;for(;++o<a.length;)cg(n,"text",c);function c(d,p){let g=-1,b;for(;++g<p.length;){const S=p[g],x=b?b.children:void 0;if(l(S,x?x.indexOf(S):void 0,b))return;b=S}if(b)return f(d,p)}function f(d,p){const g=p[p.length-1],b=a[o][0],S=a[o][1];let x=0;const M=g.children.indexOf(d);let T=!1,Q=[];b.lastIndex=0;let L=b.exec(d.value);for(;L;){const P=L.index,ee={index:L.index,input:L.input,stack:[...p,d]};let z=S(...L,ee);if(typeof z=="string"&&(z=z.length>0?{type:"text",value:z}:void 0),z===!1?b.lastIndex=P+1:(x!==P&&Q.push({type:"text",value:d.value.slice(x,P)}),Array.isArray(z)?Q.push(...z):z&&Q.push(z),x=P+L[0].length,T=!0),!b.global)break;L=b.exec(d.value)}return T?(x<d.value.length&&Q.push({type:"text",value:d.value.slice(x)}),g.children.splice(M,1,...Q)):Q=[d],M+Q.length}}function PB(n){const e=[];if(!Array.isArray(n))throw new TypeError("Expected find and replace tuple or list of tuples");const t=!n[0]||Array.isArray(n[0])?n:[n];let i=-1;for(;++i<t.length;){const l=t[i];e.push([WB(l[0]),e4(l[1])])}return e}function WB(n){return typeof n=="string"?new RegExp(ZB(n),"g"):n}function e4(n){return typeof n=="function"?n:function(){return n}}const Wp="phrasing",em=["autolink","link","image","label"];function t4(){return{transforms:[o4],enter:{literalAutolink:i4,literalAutolinkEmail:tm,literalAutolinkHttp:tm,literalAutolinkWww:tm},exit:{literalAutolink:a4,literalAutolinkEmail:s4,literalAutolinkHttp:r4,literalAutolinkWww:l4}}}function n4(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Wp,notInConstruct:em},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Wp,notInConstruct:em},{character:":",before:"[ps]",after:"\\/",inConstruct:Wp,notInConstruct:em}]}}function i4(n){this.enter({type:"link",title:null,url:"",children:[]},n)}function tm(n){this.config.enter.autolinkProtocol.call(this,n)}function r4(n){this.config.exit.autolinkProtocol.call(this,n)}function l4(n){this.config.exit.data.call(this,n);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(n)}function s4(n){this.config.exit.autolinkEmail.call(this,n)}function a4(n){this.exit(n)}function o4(n){$B(n,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,u4],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),c4]],{ignore:["link","linkReference"]})}function u4(n,e,t,i,l){let a="";if(!hT(l)||(/^w/i.test(e)&&(t=e+t,e="",a="http://"),!f4(t)))return!1;const o=h4(t+i);if(!o[0])return!1;const c={type:"link",title:null,url:a+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[c,{type:"text",value:o[1]}]:c}function c4(n,e,t,i){return!hT(i,!0)||/[-\d_]$/.test(t)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+t,children:[{type:"text",value:e+"@"+t}]}}function f4(n){const e=n.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function h4(n){const e=/[!"&'),.:;<>?\]}]+$/.exec(n);if(!e)return[n,void 0];n=n.slice(0,e.index);let t=e[0],i=t.indexOf(")");const l=jx(n,"(");let a=jx(n,")");for(;i!==-1&&l>a;)n+=t.slice(0,i+1),t=t.slice(i+1),i=t.indexOf(")"),a++;return[n,t]}function hT(n,e){const t=n.input.charCodeAt(n.index-1);return(n.index===0||Dl(t)||Of(t))&&(!e||t!==47)}dT.peek=x4;function d4(){this.buffer()}function p4(n){this.enter({type:"footnoteReference",identifier:"",label:""},n)}function m4(){this.buffer()}function g4(n){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},n)}function y4(n){const e=this.resume(),t=this.stack[this.stack.length-1];t.type,t.identifier=si(this.sliceSerialize(n)).toLowerCase(),t.label=e}function b4(n){this.exit(n)}function S4(n){const e=this.resume(),t=this.stack[this.stack.length-1];t.type,t.identifier=si(this.sliceSerialize(n)).toLowerCase(),t.label=e}function k4(n){this.exit(n)}function x4(){return"["}function dT(n,e,t,i){const l=t.createTracker(i);let a=l.move("[^");const o=t.enter("footnoteReference"),c=t.enter("reference");return a+=l.move(t.safe(t.associationId(n),{after:"]",before:a})),c(),o(),a+=l.move("]"),a}function C4(){return{enter:{gfmFootnoteCallString:d4,gfmFootnoteCall:p4,gfmFootnoteDefinitionLabelString:m4,gfmFootnoteDefinition:g4},exit:{gfmFootnoteCallString:y4,gfmFootnoteCall:b4,gfmFootnoteDefinitionLabelString:S4,gfmFootnoteDefinition:k4}}}function v4(n){let e=!1;return n&&n.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:t,footnoteReference:dT},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function t(i,l,a,o){const c=a.createTracker(o);let f=c.move("[^");const d=a.enter("footnoteDefinition"),p=a.enter("label");return f+=c.move(a.safe(a.associationId(i),{before:f,after:"]"})),p(),f+=c.move("]:"),i.children&&i.children.length>0&&(c.shift(4),f+=c.move((e?`
`:" ")+a.indentLines(a.containerFlow(i,c.current()),e?pT:w4))),d(),f}}function w4(n,e,t){return e===0?n:pT(n,e,t)}function pT(n,e,t){return(t?"":"    ")+n}const T4=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];mT.peek=O4;function M4(){return{canContainEols:["delete"],enter:{strikethrough:N4},exit:{strikethrough:A4}}}function E4(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:T4}],handlers:{delete:mT}}}function N4(n){this.enter({type:"delete",children:[]},n)}function A4(n){this.exit(n)}function mT(n,e,t,i){const l=t.createTracker(i),a=t.enter("strikethrough");let o=l.move("~~");return o+=t.containerPhrasing(n,{...l.current(),before:o,after:"~"}),o+=l.move("~~"),a(),o}function O4(){return"~"}function R4(n){return n.length}function D4(n,e){const t=e||{},i=(t.align||[]).concat(),l=t.stringLength||R4,a=[],o=[],c=[],f=[];let d=0,p=-1;for(;++p<n.length;){const v=[],M=[];let T=-1;for(n[p].length>d&&(d=n[p].length);++T<n[p].length;){const Q=z4(n[p][T]);if(t.alignDelimiters!==!1){const L=l(Q);M[T]=L,(f[T]===void 0||L>f[T])&&(f[T]=L)}v.push(Q)}o[p]=v,c[p]=M}let g=-1;if(typeof i=="object"&&"length"in i)for(;++g<d;)a[g]=Fx(i[g]);else{const v=Fx(i);for(;++g<d;)a[g]=v}g=-1;const b=[],S=[];for(;++g<d;){const v=a[g];let M="",T="";v===99?(M=":",T=":"):v===108?M=":":v===114&&(T=":");let Q=t.alignDelimiters===!1?1:Math.max(1,f[g]-M.length-T.length);const L=M+"-".repeat(Q)+T;t.alignDelimiters!==!1&&(Q=M.length+Q+T.length,Q>f[g]&&(f[g]=Q),S[g]=Q),b[g]=L}o.splice(1,0,b),c.splice(1,0,S),p=-1;const x=[];for(;++p<o.length;){const v=o[p],M=c[p];g=-1;const T=[];for(;++g<d;){const Q=v[g]||"";let L="",P="";if(t.alignDelimiters!==!1){const ee=f[g]-(M[g]||0),z=a[g];z===114?L=" ".repeat(ee):z===99?ee%2?(L=" ".repeat(ee/2+.5),P=" ".repeat(ee/2-.5)):(L=" ".repeat(ee/2),P=L):P=" ".repeat(ee)}t.delimiterStart!==!1&&!g&&T.push("|"),t.padding!==!1&&!(t.alignDelimiters===!1&&Q==="")&&(t.delimiterStart!==!1||g)&&T.push(" "),t.alignDelimiters!==!1&&T.push(L),T.push(Q),t.alignDelimiters!==!1&&T.push(P),t.padding!==!1&&T.push(" "),(t.delimiterEnd!==!1||g!==d-1)&&T.push("|")}x.push(t.delimiterEnd===!1?T.join("").replace(/ +$/,""):T.join(""))}return x.join(`
`)}function z4(n){return n==null?"":String(n)}function Fx(n){const e=typeof n=="string"?n.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function _4(){return{enter:{table:B4,tableData:Kx,tableHeader:Kx,tableRow:I4},exit:{codeText:q4,table:L4,tableData:nm,tableHeader:nm,tableRow:nm}}}function B4(n){const e=n._align;this.enter({type:"table",align:e.map(function(t){return t==="none"?null:t}),children:[]},n),this.data.inTable=!0}function L4(n){this.exit(n),this.data.inTable=void 0}function I4(n){this.enter({type:"tableRow",children:[]},n)}function nm(n){this.exit(n)}function Kx(n){this.enter({type:"tableCell",children:[]},n)}function q4(n){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,H4));const t=this.stack[this.stack.length-1];t.type,t.value=e,this.exit(n)}function H4(n,e){return e==="|"?e:n}function U4(n){const e=n||{},t=e.tableCellPadding,i=e.tablePipeAlign,l=e.stringLength,a=t?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:b,table:o,tableCell:f,tableRow:c}};function o(S,x,v,M){return d(p(S,v,M),S.align)}function c(S,x,v,M){const T=g(S,v,M),Q=d([T]);return Q.slice(0,Q.indexOf(`
`))}function f(S,x,v,M){const T=v.enter("tableCell"),Q=v.enter("phrasing"),L=v.containerPhrasing(S,{...M,before:a,after:a});return Q(),T(),L}function d(S,x){return D4(S,{align:x,alignDelimiters:i,padding:t,stringLength:l})}function p(S,x,v){const M=S.children;let T=-1;const Q=[],L=x.enter("table");for(;++T<M.length;)Q[T]=g(M[T],x,v);return L(),Q}function g(S,x,v){const M=S.children;let T=-1;const Q=[],L=x.enter("tableRow");for(;++T<M.length;)Q[T]=f(M[T],S,x,v);return L(),Q}function b(S,x,v){let M=hg.inlineCode(S,x,v);return v.stack.includes("tableCell")&&(M=M.replace(/\|/g,"\\$&")),M}}function V4(){return{exit:{taskListCheckValueChecked:Yx,taskListCheckValueUnchecked:Yx,paragraph:F4}}}function j4(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:K4}}}function Yx(n){const e=this.stack[this.stack.length-2];e.type,e.checked=n.type==="taskListCheckValueChecked"}function F4(n){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const t=this.stack[this.stack.length-1];t.type;const i=t.children[0];if(i&&i.type==="text"){const l=e.children;let a=-1,o;for(;++a<l.length;){const c=l[a];if(c.type==="paragraph"){o=c;break}}o===t&&(i.value=i.value.slice(1),i.value.length===0?t.children.shift():t.position&&i.position&&typeof i.position.start.offset=="number"&&(i.position.start.column++,i.position.start.offset++,t.position.start=Object.assign({},i.position.start)))}}this.exit(n)}function K4(n,e,t,i){const l=n.children[0],a=typeof n.checked=="boolean"&&l&&l.type==="paragraph",o="["+(n.checked?"x":" ")+"] ",c=t.createTracker(i);a&&c.move(o);let f=hg.listItem(n,e,t,{...i,...c.current()});return a&&(f=f.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,d)),f;function d(p){return p+o}}function Y4(){return[t4(),C4(),M4(),_4(),V4()]}function G4(n){return{extensions:[n4(),v4(n),E4(),U4(n),j4()]}}const Q4={tokenize:W4,partial:!0},gT={tokenize:eL,partial:!0},yT={tokenize:tL,partial:!0},bT={tokenize:nL,partial:!0},X4={tokenize:iL,partial:!0},ST={name:"wwwAutolink",tokenize:$4,previous:xT},kT={name:"protocolAutolink",tokenize:P4,previous:CT},rr={name:"emailAutolink",tokenize:Z4,previous:vT},Ci={};function J4(){return{text:Ci}}let yl=48;for(;yl<123;)Ci[yl]=rr,yl++,yl===58?yl=65:yl===91&&(yl=97);Ci[43]=rr;Ci[45]=rr;Ci[46]=rr;Ci[95]=rr;Ci[72]=[rr,kT];Ci[104]=[rr,kT];Ci[87]=[rr,ST];Ci[119]=[rr,ST];function Z4(n,e,t){const i=this;let l,a;return o;function o(g){return!Zm(g)||!vT.call(i,i.previous)||Ry(i.events)?t(g):(n.enter("literalAutolink"),n.enter("literalAutolinkEmail"),c(g))}function c(g){return Zm(g)?(n.consume(g),c):g===64?(n.consume(g),f):t(g)}function f(g){return g===46?n.check(X4,p,d)(g):g===45||g===95||hn(g)?(a=!0,n.consume(g),f):p(g)}function d(g){return n.consume(g),l=!0,f}function p(g){return a&&l&&Pt(i.previous)?(n.exit("literalAutolinkEmail"),n.exit("literalAutolink"),e(g)):t(g)}}function $4(n,e,t){const i=this;return l;function l(o){return o!==87&&o!==119||!xT.call(i,i.previous)||Ry(i.events)?t(o):(n.enter("literalAutolink"),n.enter("literalAutolinkWww"),n.check(Q4,n.attempt(gT,n.attempt(yT,a),t),t)(o))}function a(o){return n.exit("literalAutolinkWww"),n.exit("literalAutolink"),e(o)}}function P4(n,e,t){const i=this;let l="",a=!1;return o;function o(g){return(g===72||g===104)&&CT.call(i,i.previous)&&!Ry(i.events)?(n.enter("literalAutolink"),n.enter("literalAutolinkHttp"),l+=String.fromCodePoint(g),n.consume(g),c):t(g)}function c(g){if(Pt(g)&&l.length<5)return l+=String.fromCodePoint(g),n.consume(g),c;if(g===58){const b=l.toLowerCase();if(b==="http"||b==="https")return n.consume(g),f}return t(g)}function f(g){return g===47?(n.consume(g),a?d:(a=!0,f)):t(g)}function d(g){return g===null||rf(g)||nt(g)||Dl(g)||Of(g)?t(g):n.attempt(gT,n.attempt(yT,p),t)(g)}function p(g){return n.exit("literalAutolinkHttp"),n.exit("literalAutolink"),e(g)}}function W4(n,e,t){let i=0;return l;function l(o){return(o===87||o===119)&&i<3?(i++,n.consume(o),l):o===46&&i===3?(n.consume(o),a):t(o)}function a(o){return o===null?t(o):e(o)}}function eL(n,e,t){let i,l,a;return o;function o(d){return d===46||d===95?n.check(bT,f,c)(d):d===null||nt(d)||Dl(d)||d!==45&&Of(d)?f(d):(a=!0,n.consume(d),o)}function c(d){return d===95?i=!0:(l=i,i=void 0),n.consume(d),o}function f(d){return l||i||!a?t(d):e(d)}}function tL(n,e){let t=0,i=0;return l;function l(o){return o===40?(t++,n.consume(o),l):o===41&&i<t?a(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?n.check(bT,e,a)(o):o===null||nt(o)||Dl(o)?e(o):(n.consume(o),l)}function a(o){return o===41&&i++,n.consume(o),l}}function nL(n,e,t){return i;function i(c){return c===33||c===34||c===39||c===41||c===42||c===44||c===46||c===58||c===59||c===63||c===95||c===126?(n.consume(c),i):c===38?(n.consume(c),a):c===93?(n.consume(c),l):c===60||c===null||nt(c)||Dl(c)?e(c):t(c)}function l(c){return c===null||c===40||c===91||nt(c)||Dl(c)?e(c):i(c)}function a(c){return Pt(c)?o(c):t(c)}function o(c){return c===59?(n.consume(c),i):Pt(c)?(n.consume(c),o):t(c)}}function iL(n,e,t){return i;function i(a){return n.consume(a),l}function l(a){return hn(a)?t(a):e(a)}}function xT(n){return n===null||n===40||n===42||n===95||n===91||n===93||n===126||nt(n)}function CT(n){return!Pt(n)}function vT(n){return!(n===47||Zm(n))}function Zm(n){return n===43||n===45||n===46||n===95||hn(n)}function Ry(n){let e=n.length,t=!1;for(;e--;){const i=n[e][1];if((i.type==="labelLink"||i.type==="labelImage")&&!i._balanced){t=!0;break}if(i._gfmAutolinkLiteralWalkedInto){t=!1;break}}return n.length>0&&!t&&(n[n.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),t}const rL={tokenize:hL,partial:!0};function lL(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:uL,continuation:{tokenize:cL},exit:fL}},text:{91:{name:"gfmFootnoteCall",tokenize:oL},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:sL,resolveTo:aL}}}}function sL(n,e,t){const i=this;let l=i.events.length;const a=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let o;for(;l--;){const f=i.events[l][1];if(f.type==="labelImage"){o=f;break}if(f.type==="gfmFootnoteCall"||f.type==="labelLink"||f.type==="label"||f.type==="image"||f.type==="link")break}return c;function c(f){if(!o||!o._balanced)return t(f);const d=si(i.sliceSerialize({start:o.end,end:i.now()}));return d.codePointAt(0)!==94||!a.includes(d.slice(1))?t(f):(n.enter("gfmFootnoteCallLabelMarker"),n.consume(f),n.exit("gfmFootnoteCallLabelMarker"),e(f))}}function aL(n,e){let t=n.length;for(;t--;)if(n[t][1].type==="labelImage"&&n[t][0]==="enter"){n[t][1];break}n[t+1][1].type="data",n[t+3][1].type="gfmFootnoteCallLabelMarker";const i={type:"gfmFootnoteCall",start:Object.assign({},n[t+3][1].start),end:Object.assign({},n[n.length-1][1].end)},l={type:"gfmFootnoteCallMarker",start:Object.assign({},n[t+3][1].end),end:Object.assign({},n[t+3][1].end)};l.end.column++,l.end.offset++,l.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},l.end),end:Object.assign({},n[n.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},c=[n[t+1],n[t+2],["enter",i,e],n[t+3],n[t+4],["enter",l,e],["exit",l,e],["enter",a,e],["enter",o,e],["exit",o,e],["exit",a,e],n[n.length-2],n[n.length-1],["exit",i,e]];return n.splice(t,n.length-t+1,...c),n}function oL(n,e,t){const i=this,l=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let a=0,o;return c;function c(g){return n.enter("gfmFootnoteCall"),n.enter("gfmFootnoteCallLabelMarker"),n.consume(g),n.exit("gfmFootnoteCallLabelMarker"),f}function f(g){return g!==94?t(g):(n.enter("gfmFootnoteCallMarker"),n.consume(g),n.exit("gfmFootnoteCallMarker"),n.enter("gfmFootnoteCallString"),n.enter("chunkString").contentType="string",d)}function d(g){if(a>999||g===93&&!o||g===null||g===91||nt(g))return t(g);if(g===93){n.exit("chunkString");const b=n.exit("gfmFootnoteCallString");return l.includes(si(i.sliceSerialize(b)))?(n.enter("gfmFootnoteCallLabelMarker"),n.consume(g),n.exit("gfmFootnoteCallLabelMarker"),n.exit("gfmFootnoteCall"),e):t(g)}return nt(g)||(o=!0),a++,n.consume(g),g===92?p:d}function p(g){return g===91||g===92||g===93?(n.consume(g),a++,d):d(g)}}function uL(n,e,t){const i=this,l=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let a,o=0,c;return f;function f(x){return n.enter("gfmFootnoteDefinition")._container=!0,n.enter("gfmFootnoteDefinitionLabel"),n.enter("gfmFootnoteDefinitionLabelMarker"),n.consume(x),n.exit("gfmFootnoteDefinitionLabelMarker"),d}function d(x){return x===94?(n.enter("gfmFootnoteDefinitionMarker"),n.consume(x),n.exit("gfmFootnoteDefinitionMarker"),n.enter("gfmFootnoteDefinitionLabelString"),n.enter("chunkString").contentType="string",p):t(x)}function p(x){if(o>999||x===93&&!c||x===null||x===91||nt(x))return t(x);if(x===93){n.exit("chunkString");const v=n.exit("gfmFootnoteDefinitionLabelString");return a=si(i.sliceSerialize(v)),n.enter("gfmFootnoteDefinitionLabelMarker"),n.consume(x),n.exit("gfmFootnoteDefinitionLabelMarker"),n.exit("gfmFootnoteDefinitionLabel"),b}return nt(x)||(c=!0),o++,n.consume(x),x===92?g:p}function g(x){return x===91||x===92||x===93?(n.consume(x),o++,p):p(x)}function b(x){return x===58?(n.enter("definitionMarker"),n.consume(x),n.exit("definitionMarker"),l.includes(a)||l.push(a),Ue(n,S,"gfmFootnoteDefinitionWhitespace")):t(x)}function S(x){return e(x)}}function cL(n,e,t){return n.check(Vo,e,n.attempt(rL,e,t))}function fL(n){n.exit("gfmFootnoteDefinition")}function hL(n,e,t){const i=this;return Ue(n,l,"gfmFootnoteDefinitionIndent",5);function l(a){const o=i.events[i.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(a):t(a)}}function dL(n){let t=(n||{}).singleTilde;const i={name:"strikethrough",tokenize:a,resolveAll:l};return t==null&&(t=!0),{text:{126:i},insideSpan:{null:[i]},attentionMarkers:{null:[126]}};function l(o,c){let f=-1;for(;++f<o.length;)if(o[f][0]==="enter"&&o[f][1].type==="strikethroughSequenceTemporary"&&o[f][1]._close){let d=f;for(;d--;)if(o[d][0]==="exit"&&o[d][1].type==="strikethroughSequenceTemporary"&&o[d][1]._open&&o[f][1].end.offset-o[f][1].start.offset===o[d][1].end.offset-o[d][1].start.offset){o[f][1].type="strikethroughSequence",o[d][1].type="strikethroughSequence";const p={type:"strikethrough",start:Object.assign({},o[d][1].start),end:Object.assign({},o[f][1].end)},g={type:"strikethroughText",start:Object.assign({},o[d][1].end),end:Object.assign({},o[f][1].start)},b=[["enter",p,c],["enter",o[d][1],c],["exit",o[d][1],c],["enter",g,c]],S=c.parser.constructs.insideSpan.null;S&&An(b,b.length,0,Rf(S,o.slice(d+1,f),c)),An(b,b.length,0,[["exit",g,c],["enter",o[f][1],c],["exit",o[f][1],c],["exit",p,c]]),An(o,d-1,f-d+3,b),f=d+b.length-2;break}}for(f=-1;++f<o.length;)o[f][1].type==="strikethroughSequenceTemporary"&&(o[f][1].type="data");return o}function a(o,c,f){const d=this.previous,p=this.events;let g=0;return b;function b(x){return d===126&&p[p.length-1][1].type!=="characterEscape"?f(x):(o.enter("strikethroughSequenceTemporary"),S(x))}function S(x){const v=Ks(d);if(x===126)return g>1?f(x):(o.consume(x),g++,S);if(g<2&&!t)return f(x);const M=o.exit("strikethroughSequenceTemporary"),T=Ks(x);return M._open=!T||T===2&&!!v,M._close=!v||v===2&&!!T,c(x)}}}class pL{constructor(){this.map=[]}add(e,t,i){mL(this,e,t,i)}consume(e){if(this.map.sort(function(a,o){return a[0]-o[0]}),this.map.length===0)return;let t=this.map.length;const i=[];for(;t>0;)t-=1,i.push(e.slice(this.map[t][0]+this.map[t][1]),this.map[t][2]),e.length=this.map[t][0];i.push(e.slice()),e.length=0;let l=i.pop();for(;l;){for(const a of l)e.push(a);l=i.pop()}this.map.length=0}}function mL(n,e,t,i){let l=0;if(!(t===0&&i.length===0)){for(;l<n.map.length;){if(n.map[l][0]===e){n.map[l][1]+=t,n.map[l][2].push(...i);return}l+=1}n.map.push([e,t,i])}}function gL(n,e){let t=!1;const i=[];for(;e<n.length;){const l=n[e];if(t){if(l[0]==="enter")l[1].type==="tableContent"&&i.push(n[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(l[1].type==="tableContent"){if(n[e-1][1].type==="tableDelimiterMarker"){const a=i.length-1;i[a]=i[a]==="left"?"center":"right"}}else if(l[1].type==="tableDelimiterRow")break}else l[0]==="enter"&&l[1].type==="tableDelimiterRow"&&(t=!0);e+=1}return i}function yL(){return{flow:{null:{name:"table",tokenize:bL,resolveAll:SL}}}}function bL(n,e,t){const i=this;let l=0,a=0,o;return c;function c(H){let re=i.events.length-1;for(;re>-1;){const Ve=i.events[re][1].type;if(Ve==="lineEnding"||Ve==="linePrefix")re--;else break}const ie=re>-1?i.events[re][1].type:null,Ie=ie==="tableHead"||ie==="tableRow"?z:f;return Ie===z&&i.parser.lazy[i.now().line]?t(H):Ie(H)}function f(H){return n.enter("tableHead"),n.enter("tableRow"),d(H)}function d(H){return H===124||(o=!0,a+=1),p(H)}function p(H){return H===null?t(H):de(H)?a>1?(a=0,i.interrupt=!0,n.exit("tableRow"),n.enter("lineEnding"),n.consume(H),n.exit("lineEnding"),S):t(H):De(H)?Ue(n,p,"whitespace")(H):(a+=1,o&&(o=!1,l+=1),H===124?(n.enter("tableCellDivider"),n.consume(H),n.exit("tableCellDivider"),o=!0,p):(n.enter("data"),g(H)))}function g(H){return H===null||H===124||nt(H)?(n.exit("data"),p(H)):(n.consume(H),H===92?b:g)}function b(H){return H===92||H===124?(n.consume(H),g):g(H)}function S(H){return i.interrupt=!1,i.parser.lazy[i.now().line]?t(H):(n.enter("tableDelimiterRow"),o=!1,De(H)?Ue(n,x,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(H):x(H))}function x(H){return H===45||H===58?M(H):H===124?(o=!0,n.enter("tableCellDivider"),n.consume(H),n.exit("tableCellDivider"),v):ee(H)}function v(H){return De(H)?Ue(n,M,"whitespace")(H):M(H)}function M(H){return H===58?(a+=1,o=!0,n.enter("tableDelimiterMarker"),n.consume(H),n.exit("tableDelimiterMarker"),T):H===45?(a+=1,T(H)):H===null||de(H)?P(H):ee(H)}function T(H){return H===45?(n.enter("tableDelimiterFiller"),Q(H)):ee(H)}function Q(H){return H===45?(n.consume(H),Q):H===58?(o=!0,n.exit("tableDelimiterFiller"),n.enter("tableDelimiterMarker"),n.consume(H),n.exit("tableDelimiterMarker"),L):(n.exit("tableDelimiterFiller"),L(H))}function L(H){return De(H)?Ue(n,P,"whitespace")(H):P(H)}function P(H){return H===124?x(H):H===null||de(H)?!o||l!==a?ee(H):(n.exit("tableDelimiterRow"),n.exit("tableHead"),e(H)):ee(H)}function ee(H){return t(H)}function z(H){return n.enter("tableRow"),Y(H)}function Y(H){return H===124?(n.enter("tableCellDivider"),n.consume(H),n.exit("tableCellDivider"),Y):H===null||de(H)?(n.exit("tableRow"),e(H)):De(H)?Ue(n,Y,"whitespace")(H):(n.enter("data"),ne(H))}function ne(H){return H===null||H===124||nt(H)?(n.exit("data"),Y(H)):(n.consume(H),H===92?ue:ne)}function ue(H){return H===92||H===124?(n.consume(H),ne):ne(H)}}function SL(n,e){let t=-1,i=!0,l=0,a=[0,0,0,0],o=[0,0,0,0],c=!1,f=0,d,p,g;const b=new pL;for(;++t<n.length;){const S=n[t],x=S[1];S[0]==="enter"?x.type==="tableHead"?(c=!1,f!==0&&(Gx(b,e,f,d,p),p=void 0,f=0),d={type:"table",start:Object.assign({},x.start),end:Object.assign({},x.end)},b.add(t,0,[["enter",d,e]])):x.type==="tableRow"||x.type==="tableDelimiterRow"?(i=!0,g=void 0,a=[0,0,0,0],o=[0,t+1,0,0],c&&(c=!1,p={type:"tableBody",start:Object.assign({},x.start),end:Object.assign({},x.end)},b.add(t,0,[["enter",p,e]])),l=x.type==="tableDelimiterRow"?2:p?3:1):l&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")?(i=!1,o[2]===0&&(a[1]!==0&&(o[0]=o[1],g=Rc(b,e,a,l,void 0,g),a=[0,0,0,0]),o[2]=t)):x.type==="tableCellDivider"&&(i?i=!1:(a[1]!==0&&(o[0]=o[1],g=Rc(b,e,a,l,void 0,g)),a=o,o=[a[1],t,0,0])):x.type==="tableHead"?(c=!0,f=t):x.type==="tableRow"||x.type==="tableDelimiterRow"?(f=t,a[1]!==0?(o[0]=o[1],g=Rc(b,e,a,l,t,g)):o[1]!==0&&(g=Rc(b,e,o,l,t,g)),l=0):l&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")&&(o[3]=t)}for(f!==0&&Gx(b,e,f,d,p),b.consume(e.events),t=-1;++t<e.events.length;){const S=e.events[t];S[0]==="enter"&&S[1].type==="table"&&(S[1]._align=gL(e.events,t))}return n}function Rc(n,e,t,i,l,a){const o=i===1?"tableHeader":i===2?"tableDelimiter":"tableData",c="tableContent";t[0]!==0&&(a.end=Object.assign({},Hs(e.events,t[0])),n.add(t[0],0,[["exit",a,e]]));const f=Hs(e.events,t[1]);if(a={type:o,start:Object.assign({},f),end:Object.assign({},f)},n.add(t[1],0,[["enter",a,e]]),t[2]!==0){const d=Hs(e.events,t[2]),p=Hs(e.events,t[3]),g={type:c,start:Object.assign({},d),end:Object.assign({},p)};if(n.add(t[2],0,[["enter",g,e]]),i!==2){const b=e.events[t[2]],S=e.events[t[3]];if(b[1].end=Object.assign({},S[1].end),b[1].type="chunkText",b[1].contentType="text",t[3]>t[2]+1){const x=t[2]+1,v=t[3]-t[2]-1;n.add(x,v,[])}}n.add(t[3]+1,0,[["exit",g,e]])}return l!==void 0&&(a.end=Object.assign({},Hs(e.events,l)),n.add(l,0,[["exit",a,e]]),a=void 0),a}function Gx(n,e,t,i,l){const a=[],o=Hs(e.events,t);l&&(l.end=Object.assign({},o),a.push(["exit",l,e])),i.end=Object.assign({},o),a.push(["exit",i,e]),n.add(t+1,0,a)}function Hs(n,e){const t=n[e],i=t[0]==="enter"?"start":"end";return t[1][i]}const kL={name:"tasklistCheck",tokenize:CL};function xL(){return{text:{91:kL}}}function CL(n,e,t){const i=this;return l;function l(f){return i.previous!==null||!i._gfmTasklistFirstContentOfListItem?t(f):(n.enter("taskListCheck"),n.enter("taskListCheckMarker"),n.consume(f),n.exit("taskListCheckMarker"),a)}function a(f){return nt(f)?(n.enter("taskListCheckValueUnchecked"),n.consume(f),n.exit("taskListCheckValueUnchecked"),o):f===88||f===120?(n.enter("taskListCheckValueChecked"),n.consume(f),n.exit("taskListCheckValueChecked"),o):t(f)}function o(f){return f===93?(n.enter("taskListCheckMarker"),n.consume(f),n.exit("taskListCheckMarker"),n.exit("taskListCheck"),c):t(f)}function c(f){return de(f)?e(f):De(f)?n.check({tokenize:vL},e,t)(f):t(f)}}function vL(n,e,t){return Ue(n,i,"whitespace");function i(l){return l===null?t(l):e(l)}}function wL(n){return BC([J4(),lL(),dL(n),yL(),xL()])}const TL={};function ML(n){const e=this,t=n||TL,i=e.data(),l=i.micromarkExtensions||(i.micromarkExtensions=[]),a=i.fromMarkdownExtensions||(i.fromMarkdownExtensions=[]),o=i.toMarkdownExtensions||(i.toMarkdownExtensions=[]);l.push(wL(t)),a.push(Y4()),o.push(G4(t))}function ge(n,e){return Object.assign(n,{meta:{package:"@milkdown/preset-gfm",...e}}),n}const Dy=Qo("strike_through");ge(Dy,{displayName:"Attr<strikethrough>",group:"Strikethrough"});const eu=$s("strike_through",n=>({parseDOM:[{tag:"del"},{style:"text-decoration",getAttrs:e=>e==="line-through"}],toDOM:e=>["del",n.get(Dy.key)(e)],parseMarkdown:{match:e=>e.type==="delete",runner:(e,t,i)=>{e.openMark(i),e.next(t.children),e.closeMark(i)}},toMarkdown:{match:e=>e.type.name==="strike_through",runner:(e,t)=>{e.withMark(t,"delete")}}}));ge(eu.mark,{displayName:"MarkSchema<strikethrough>",group:"Strikethrough"});ge(eu.ctx,{displayName:"MarkSchemaCtx<strikethrough>",group:"Strikethrough"});const zy=Se("ToggleStrikeThrough",n=>()=>qf(eu.type(n)));ge(zy,{displayName:"Command<ToggleStrikethrough>",group:"Strikethrough"});const wT=yn(n=>Fo(new RegExp("(?<![\\w:/])(~{1,2})(.+?)\\1(?!\\w|\\/)"),eu.type(n)));ge(wT,{displayName:"InputRule<strikethrough>",group:"Strikethrough"});const _y=bn("strikeThroughKeymap",{ToggleStrikethrough:{shortcuts:"Mod-Alt-x",command:n=>{const e=n.get(Ye);return()=>e.call(zy.key)}}});ge(_y.ctx,{displayName:"KeymapCtx<strikethrough>",group:"Strikethrough"});ge(_y.shortcuts,{displayName:"Keymap<strikethrough>",group:"Strikethrough"});const tu=Y_({tableGroup:"block",cellContent:"paragraph",cellAttributes:{alignment:{default:"left",getFromDOM:n=>n.style.textAlign||"left",setDOMAttr:(n,e)=>{e.style=`text-align: ${n||"left"}`}}}}),Vl=wt("table",()=>({...tu.table,content:"table_header_row table_row+",disableDropCursor:!0,parseMarkdown:{match:n=>n.type==="table",runner:(n,e,t)=>{const i=e.align,l=e.children.map((a,o)=>({...a,align:i,isHeader:o===0}));n.openNode(t),n.next(l),n.closeNode()}},toMarkdown:{match:n=>n.type.name==="table",runner:(n,e)=>{const t=e.content.firstChild?.content;if(!t)return;const i=[];t.forEach(l=>{i.push(l.attrs.alignment)}),n.openNode("table",void 0,{align:i}),n.next(e.content),n.closeNode()}}}));ge(Vl.node,{displayName:"NodeSchema<table>",group:"Table"});ge(Vl.ctx,{displayName:"NodeSchemaCtx<table>",group:"Table"});const Yf=wt("table_header_row",()=>({...tu.table_row,disableDropCursor:!0,content:"(table_header)*",parseDOM:[{tag:"tr[data-is-header]"}],toDOM(){return["tr",{"data-is-header":!0},0]},parseMarkdown:{match:n=>!!(n.type==="tableRow"&&n.isHeader),runner:(n,e,t)=>{const i=e.align,l=e.children.map((a,o)=>({...a,align:i[o],isHeader:e.isHeader}));n.openNode(t),n.next(l),n.closeNode()}},toMarkdown:{match:n=>n.type.name==="table_header_row",runner:(n,e)=>{n.openNode("tableRow",void 0,{isHeader:!0}),n.next(e.content),n.closeNode()}}}));ge(Yf.node,{displayName:"NodeSchema<tableHeaderRow>",group:"Table"});ge(Yf.ctx,{displayName:"NodeSchemaCtx<tableHeaderRow>",group:"Table"});const nu=wt("table_row",()=>({...tu.table_row,disableDropCursor:!0,content:"(table_cell)*",parseMarkdown:{match:n=>n.type==="tableRow",runner:(n,e,t)=>{const i=e.align,l=e.children.map((a,o)=>({...a,align:i[o]}));n.openNode(t),n.next(l),n.closeNode()}},toMarkdown:{match:n=>n.type.name==="table_row",runner:(n,e)=>{e.content.size!==0&&(n.openNode("tableRow"),n.next(e.content),n.closeNode())}}}));ge(nu.node,{displayName:"NodeSchema<tableRow>",group:"Table"});ge(nu.ctx,{displayName:"NodeSchemaCtx<tableRow>",group:"Table"});const iu=wt("table_cell",()=>({...tu.table_cell,disableDropCursor:!0,parseMarkdown:{match:n=>n.type==="tableCell"&&!n.isHeader,runner:(n,e,t)=>{const i=e.align;n.openNode(t,{alignment:i}).openNode(n.schema.nodes.paragraph).next(e.children).closeNode().closeNode()}},toMarkdown:{match:n=>n.type.name==="table_cell",runner:(n,e)=>{n.openNode("tableCell").next(e.content).closeNode()}}}));ge(iu.node,{displayName:"NodeSchema<tableCell>",group:"Table"});ge(iu.ctx,{displayName:"NodeSchemaCtx<tableCell>",group:"Table"});const ru=wt("table_header",()=>({...tu.table_header,disableDropCursor:!0,parseMarkdown:{match:n=>n.type==="tableCell"&&!!n.isHeader,runner:(n,e,t)=>{const i=e.align;n.openNode(t,{alignment:i}),n.openNode(n.schema.nodes.paragraph),n.next(e.children),n.closeNode(),n.closeNode()}},toMarkdown:{match:n=>n.type.name==="table_header",runner:(n,e)=>{n.openNode("tableCell"),n.next(e.content),n.closeNode()}}}));ge(ru.node,{displayName:"NodeSchema<tableHeader>",group:"Table"});ge(ru.ctx,{displayName:"NodeSchemaCtx<tableHeader>",group:"Table"});function TT(n,e=3,t=3){const i=Array(t).fill(0).map(()=>iu.type(n).createAndFill()),l=Array(t).fill(0).map(()=>ru.type(n).createAndFill()),a=Array(e).fill(0).map((o,c)=>c===0?Yf.type(n).create(null,l):nu.type(n).create(null,i));return Vl.type(n).create(null,a)}function MT(n){return(e,t)=>i=>{t=t??i.selection.from;const l=i.doc.resolve(t),a=i2(f=>f.type.name==="table")(l),o=a?{node:a.node,from:a.start}:void 0,c=n==="row";if(o){const f=Qe.get(o.node);if(e>=0&&e<(c?f.height:f.width)){const d=f.positionAt(c?e:f.height-1,c?f.width-1:e,o.node),p=i.doc.resolve(o.from+d),g=c?st.rowSelection:st.colSelection,b=f.positionAt(c?e:0,c?0:e,o.node),S=i.doc.resolve(o.from+b);return Iv(i.setSelection(g(p,S)))}}return i}}const EL=MT("row"),NL=MT("col");function ET(n,e,{map:t,tableStart:i,table:l},a){const o=Array(a).fill(0).reduce((f,d,p)=>f+l.child(p).nodeSize,i),c=Array(t.width).fill(0).map((f,d)=>{const p=l.nodeAt(t.map[d]);return iu.type(n).createAndFill({alignment:p?.attrs.alignment})});return e.insert(o,nu.type(n).create(null,c)),e}function AL(n){const e=Wo(n.$from);if(!e)return;const t=Qe.get(e.node);return t.cellsInRect({left:0,right:t.width,top:0,bottom:t.height}).map(l=>{const a=e.node.nodeAt(l),o=l+e.start;return{pos:o,start:o+1,node:a}})}function OL(n){const e=AL(n.selection);if(e&&e[0]){const t=n.doc.resolve(e[0].pos),i=e[e.length-1];if(i){const l=n.doc.resolve(i.pos);return Iv(n.setSelection(new st(l,t)))}}return n}const By=Se("GoToPrevTableCell",()=>()=>oT(-1));ge(By,{displayName:"Command<goToPrevTableCellCommand>",group:"Table"});const Ly=Se("GoToNextTableCell",()=>()=>oT(1));ge(Ly,{displayName:"Command<goToNextTableCellCommand>",group:"Table"});const Iy=Se("ExitTable",n=>()=>(e,t)=>{if(!Pn(e))return!1;const{$head:i}=e.selection,l=t2(i,Vl.type(n));if(!l)return!1;const{to:a}=l,o=e.tr.replaceWith(a,a,nr.type(n).createAndFill());return o.setSelection(Ce.near(o.doc.resolve(a),1)).scrollIntoView(),t?.(o),!0});ge(Iy,{displayName:"Command<breakTableCommand>",group:"Table"});const NT=Se("InsertTable",n=>({row:e,col:t}={})=>(i,l)=>{const{selection:a,tr:o}=i,{from:c}=a,f=TT(n,e,t),d=o.replaceSelectionWith(f),p=Ce.findFrom(d.doc.resolve(c),1,!0);return p&&d.setSelection(p),l?.(d),!0});ge(NT,{displayName:"Command<insertTableCommand>",group:"Table"});const AT=Se("MoveRow",()=>({from:n,to:e,pos:t}={})=>SB({from:n??0,to:e??0,pos:t}));ge(AT,{displayName:"Command<moveRowCommand>",group:"Table"});const OT=Se("MoveCol",()=>({from:n,to:e,pos:t}={})=>kB({from:n??0,to:e??0,pos:t}));ge(OT,{displayName:"Command<moveColCommand>",group:"Table"});const RT=Se("SelectRow",()=>(n={index:0})=>(e,t)=>{const{tr:i}=e;return!!t?.(EL(n.index,n.pos)(i))});ge(RT,{displayName:"Command<selectRowCommand>",group:"Table"});const DT=Se("SelectCol",()=>(n={index:0})=>(e,t)=>{const{tr:i}=e;return!!t?.(NL(n.index,n.pos)(i))});ge(DT,{displayName:"Command<selectColCommand>",group:"Table"});const zT=Se("SelectTable",()=>()=>(n,e)=>{const{tr:t}=n;return!!e?.(OL(t))});ge(zT,{displayName:"Command<selectTableCommand>",group:"Table"});const _T=Se("DeleteSelectedCells",()=>()=>(n,e)=>{const{selection:t}=n;if(!(t instanceof st))return!1;const i=t.isRowSelection(),l=t.isColSelection();return i&&l?bB(n,e):l?hB(n,e):pB(n,e)});ge(_T,{displayName:"Command<deleteSelectedCellsCommand>",group:"Table"});const BT=Se("AddColBefore",()=>()=>uB);ge(BT,{displayName:"Command<addColBeforeCommand>",group:"Table"});const LT=Se("AddColAfter",()=>()=>cB);ge(LT,{displayName:"Command<addColAfterCommand>",group:"Table"});const IT=Se("AddRowBefore",n=>()=>(e,t)=>{if(!Pn(e))return!1;if(t){const i=$r(e);t(ET(n,e.tr,i,i.top))}return!0});ge(IT,{displayName:"Command<addRowBeforeCommand>",group:"Table"});const qT=Se("AddRowAfter",n=>()=>(e,t)=>{if(!Pn(e))return!1;if(t){const i=$r(e);t(ET(n,e.tr,i,i.bottom))}return!0});ge(qT,{displayName:"Command<addRowAfterCommand>",group:"Table"});const HT=Se("SetAlign",()=>(n="left")=>mB("alignment",n));ge(HT,{displayName:"Command<setAlignCommand>",group:"Table"});const UT=yn(n=>new Dn(/^\|(?<col>\d+)[xX](?<row>\d+)\|\s$/,(e,t,i,l)=>{const a=e.doc.resolve(i);if(!a.node(-1).canReplaceWith(a.index(-1),a.indexAfter(-1),Vl.type(n)))return null;const o=Math.max(Number(t.groups?.row??0),2),c=TT(n,o,Number(t.groups?.col)),f=e.tr.replaceRangeWith(i,l,c);return f.setSelection(we.create(f.doc,i+3)).scrollIntoView()}));ge(UT,{displayName:"InputRule<insertTableInputRule>",group:"Table"});const VT=l_(n=>({run:(e,t,i)=>{if(i)return e;let l=e.content;return e.content.forEach((a,o,c)=>{if(a?.type!==Vl.type(n))return;const f=a.childCount,d=a.lastChild?.childCount??0;if(f===0||d===0){l=l.replaceChild(c,nr.type(n).create());return}const p=a.firstChild;if(!(d>0&&p&&p.childCount===0))return;const b=Array(d).fill(0).map(()=>ru.type(n).createAndFill()),S=new W(X.from(b),0,0),x=p.replace(0,0,S),v=a.replace(0,p.nodeSize,new W(X.from(x),0,0));l=l.replaceChild(c,v)}),new W(X.from(l),e.openStart,e.openEnd)}}));ge(VT,{displayName:"PasteRule<table>",group:"Table"});const qy=bn("tableKeymap",{NextCell:{priority:100,shortcuts:["Mod-]","Tab"],command:n=>{const e=n.get(Ye);return()=>e.call(Ly.key)}},PrevCell:{shortcuts:["Mod-[","Shift-Tab"],command:n=>{const e=n.get(Ye);return()=>e.call(By.key)}},ExitTable:{shortcuts:["Mod-Enter","Enter"],command:n=>{const e=n.get(Ye);return()=>e.call(Iy.key)}}});ge(qy.ctx,{displayName:"KeymapCtx<table>",group:"Table"});ge(qy.shortcuts,{displayName:"Keymap<table>",group:"Table"});const im="footnote_definition",Qx="footnoteDefinition",Hy=wt("footnote_definition",()=>({group:"block",content:"block+",defining:!0,attrs:{label:{default:"",validate:"string"}},parseDOM:[{tag:`dl[data-type="${im}"]`,getAttrs:n=>{if(!(n instanceof HTMLElement))throw ki(n);return{label:n.dataset.label}},contentElement:"dd"}],toDOM:n=>{const e=n.attrs.label;return["dl",{"data-label":e,"data-type":im},["dt",e],["dd",0]]},parseMarkdown:{match:({type:n})=>n===Qx,runner:(n,e,t)=>{n.openNode(t,{label:e.label}).next(e.children).closeNode()}},toMarkdown:{match:n=>n.type.name===im,runner:(n,e)=>{n.openNode(Qx,void 0,{label:e.attrs.label,identifier:e.attrs.label}).next(e.content).closeNode()}}}));ge(Hy.ctx,{displayName:"NodeSchemaCtx<footnodeDef>",group:"footnote"});ge(Hy.node,{displayName:"NodeSchema<footnodeDef>",group:"footnote"});const rm="footnote_reference",Uy=wt("footnote_reference",()=>({group:"inline",inline:!0,atom:!0,attrs:{label:{default:"",validate:"string"}},parseDOM:[{tag:`sup[data-type="${rm}"]`,getAttrs:n=>{if(!(n instanceof HTMLElement))throw ki(n);return{label:n.dataset.label}}}],toDOM:n=>{const e=n.attrs.label;return["sup",{"data-label":e,"data-type":rm},e]},parseMarkdown:{match:({type:n})=>n==="footnoteReference",runner:(n,e,t)=>{n.addNode(t,{label:e.label})}},toMarkdown:{match:n=>n.type.name===rm,runner:(n,e)=>{n.addNode("footnoteReference",void 0,void 0,{label:e.attrs.label,identifier:e.attrs.label})}}}));ge(Uy.ctx,{displayName:"NodeSchemaCtx<footnodeRef>",group:"footnote"});ge(Uy.node,{displayName:"NodeSchema<footnodeRef>",group:"footnote"});const Vy=ir.extendSchema(n=>e=>{const t=n(e);return{...t,attrs:{...t.attrs,checked:{default:null,validate:"boolean|null"}},parseDOM:[{tag:'li[data-item-type="task"]',getAttrs:i=>{if(!(i instanceof HTMLElement))throw ki(i);return{label:i.dataset.label,listType:i.dataset.listType,spread:i.dataset.spread,checked:i.dataset.checked?i.dataset.checked==="true":null}}},...t?.parseDOM||[]],toDOM:i=>t.toDOM&&i.attrs.checked==null?t.toDOM(i):["li",{"data-item-type":"task","data-label":i.attrs.label,"data-list-type":i.attrs.listType,"data-spread":i.attrs.spread,"data-checked":i.attrs.checked},0],parseMarkdown:{match:({type:i})=>i==="listItem",runner:(i,l,a)=>{if(l.checked==null){t.parseMarkdown.runner(i,l,a);return}const o=l.label!=null?`${l.label}.`:"",c=l.checked!=null?!!l.checked:null,f=l.label!=null?"ordered":"bullet",d=l.spread!=null?`${l.spread}`:"true";i.openNode(a,{label:o,listType:f,spread:d,checked:c}),i.next(l.children),i.closeNode()}},toMarkdown:{match:i=>i.type.name==="list_item",runner:(i,l)=>{if(l.attrs.checked==null){t.toMarkdown.runner(i,l);return}const a=l.attrs.label,o=l.attrs.listType,c=l.attrs.spread==="true",f=l.attrs.checked;i.openNode("listItem",void 0,{label:a,listType:o,spread:c,checked:f}),i.next(l.content),i.closeNode()}}}});ge(Vy.node,{displayName:"NodeSchema<taskListItem>",group:"ListItem"});ge(Vy.ctx,{displayName:"NodeSchemaCtx<taskListItem>",group:"ListItem"});const jT=yn(()=>new Dn(/^\[(?<checked>\s|x)\]\s$/,(n,e,t,i)=>{const l=n.doc.resolve(t);let a=0,o=l.node(a);for(;o&&o.type.name!=="list_item";)a--,o=l.node(a);if(!o||o.attrs.checked!=null)return null;const c=e.groups?.checked==="x",f=l.before(a),d=n.tr;return d.deleteRange(t,i).setNodeMarkup(f,void 0,{...o.attrs,checked:c}),d}));ge(jT,{displayName:"InputRule<wrapInTaskListInputRule>",group:"ListItem"});const RL=[_y,qy].flat(),DL=[UT,jT],zL=[wT],_L=[VT],FT=oi(()=>JB);ge(FT,{displayName:"Prose<autoInsertSpanPlugin>",group:"Prose"});const BL=oi(()=>OB({}));ge(BL,{displayName:"Prose<columnResizingPlugin>",group:"Prose"});const KT=oi(()=>UB({allowTableNodeSelection:!0}));ge(KT,{displayName:"Prose<tableEditingPlugin>",group:"Prose"});const jy=Hl("remarkGFM",()=>ML);ge(jy.plugin,{displayName:"Remark<remarkGFMPlugin>",group:"Remark"});ge(jy.options,{displayName:"RemarkConfig<remarkGFMPlugin>",group:"Remark"});const LL=new Vt("MILKDOWN_KEEP_TABLE_ALIGN_PLUGIN");function IL(n,e){let t=0;return e.forEach((i,l,a)=>{i===n&&(t=a)}),t}const YT=oi(()=>new Qt({key:LL,appendTransaction:(n,e,t)=>{let i;const l=(a,o)=>{if(i||(i=t.tr),a.type.name!=="table_cell")return;const c=t.doc.resolve(o),f=c.node(c.depth),p=c.node(c.depth-1).firstChild;if(!p)return;const g=IL(a,f),b=p.maybeChild(g);if(!b)return;const S=b.attrs.alignment,x=a.attrs.alignment;S!==x&&i.setNodeMarkup(o,void 0,{...a.attrs,alignment:S})};return e.doc!==t.doc&&t.doc.descendants(l),i}}));ge(YT,{displayName:"Prose<keepTableAlignPlugin>",group:"Prose"});const qL=[YT,FT,jy,KT].flat(),HL=[Vy,Vl,Yf,nu,ru,iu,Hy,Uy,Dy,eu].flat(),UL=[Ly,By,Iy,NT,AT,OT,RT,DT,zT,_T,IT,qT,BT,LT,HT,zy],VL=[HL,DL,_L,zL,RL,UL,qL].flat();var mf=200,Ot=function(){};Ot.prototype.append=function(e){return e.length?(e=Ot.from(e),!this.length&&e||e.length<mf&&this.leafAppend(e)||this.length<mf&&e.leafPrepend(this)||this.appendInner(e)):this};Ot.prototype.prepend=function(e){return e.length?Ot.from(e).append(this):this};Ot.prototype.appendInner=function(e){return new jL(this,e)};Ot.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?Ot.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};Ot.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Ot.prototype.forEach=function(e,t,i){t===void 0&&(t=0),i===void 0&&(i=this.length),t<=i?this.forEachInner(e,t,i,0):this.forEachInvertedInner(e,t,i,0)};Ot.prototype.map=function(e,t,i){t===void 0&&(t=0),i===void 0&&(i=this.length);var l=[];return this.forEach(function(a,o){return l.push(e(a,o))},t,i),l};Ot.from=function(e){return e instanceof Ot?e:e&&e.length?new GT(e):Ot.empty};var GT=(function(n){function e(i){n.call(this),this.values=i}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(l,a){return l==0&&a==this.length?this:new e(this.values.slice(l,a))},e.prototype.getInner=function(l){return this.values[l]},e.prototype.forEachInner=function(l,a,o,c){for(var f=a;f<o;f++)if(l(this.values[f],c+f)===!1)return!1},e.prototype.forEachInvertedInner=function(l,a,o,c){for(var f=a-1;f>=o;f--)if(l(this.values[f],c+f)===!1)return!1},e.prototype.leafAppend=function(l){if(this.length+l.length<=mf)return new e(this.values.concat(l.flatten()))},e.prototype.leafPrepend=function(l){if(this.length+l.length<=mf)return new e(l.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e})(Ot);Ot.empty=new GT([]);var jL=(function(n){function e(t,i){n.call(this),this.left=t,this.right=i,this.length=t.length+i.length,this.depth=Math.max(t.depth,i.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(i){return i<this.left.length?this.left.get(i):this.right.get(i-this.left.length)},e.prototype.forEachInner=function(i,l,a,o){var c=this.left.length;if(l<c&&this.left.forEachInner(i,l,Math.min(a,c),o)===!1||a>c&&this.right.forEachInner(i,Math.max(l-c,0),Math.min(this.length,a)-c,o+c)===!1)return!1},e.prototype.forEachInvertedInner=function(i,l,a,o){var c=this.left.length;if(l>c&&this.right.forEachInvertedInner(i,l-c,Math.max(a,c)-c,o+c)===!1||a<c&&this.left.forEachInvertedInner(i,Math.min(l,c),a,o)===!1)return!1},e.prototype.sliceInner=function(i,l){if(i==0&&l==this.length)return this;var a=this.left.length;return l<=a?this.left.slice(i,l):i>=a?this.right.slice(i-a,l-a):this.left.slice(i,a).append(this.right.slice(0,l-a))},e.prototype.leafAppend=function(i){var l=this.right.leafAppend(i);if(l)return new e(this.left,l)},e.prototype.leafPrepend=function(i){var l=this.left.leafPrepend(i);if(l)return new e(l,this.right)},e.prototype.appendInner=function(i){return this.left.depth>=Math.max(this.right.depth,i.depth)+1?new e(this.left,new e(this.right,i)):new e(this,i)},e})(Ot);const FL=500;class li{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let i=this.items.length;for(;;i--)if(this.items.get(i-1).selection){--i;break}let l,a;t&&(l=this.remapping(i,this.items.length),a=l.maps.length);let o=e.tr,c,f,d=[],p=[];return this.items.forEach((g,b)=>{if(!g.step){l||(l=this.remapping(i,b+1),a=l.maps.length),a--,p.push(g);return}if(l){p.push(new gi(g.map));let S=g.step.map(l.slice(a)),x;S&&o.maybeStep(S).doc&&(x=o.mapping.maps[o.mapping.maps.length-1],d.push(new gi(x,void 0,void 0,d.length+p.length))),a--,x&&l.appendMap(x,a)}else o.maybeStep(g.step);if(g.selection)return c=l?g.selection.map(l.slice(a)):g.selection,f=new li(this.items.slice(0,i).append(p.reverse().concat(d)),this.eventCount-1),!1},this.items.length,0),{remaining:f,transform:o,selection:c}}addTransform(e,t,i,l){let a=[],o=this.eventCount,c=this.items,f=!l&&c.length?c.get(c.length-1):null;for(let p=0;p<e.steps.length;p++){let g=e.steps[p].invert(e.docs[p]),b=new gi(e.mapping.maps[p],g,t),S;(S=f&&f.merge(b))&&(b=S,p?a.pop():c=c.slice(0,c.length-1)),a.push(b),t&&(o++,t=void 0),l||(f=b)}let d=o-i.depth;return d>YL&&(c=KL(c,d),o-=d),new li(c.append(a),o)}remapping(e,t){let i=new Do;return this.items.forEach((l,a)=>{let o=l.mirrorOffset!=null&&a-l.mirrorOffset>=e?i.maps.length-l.mirrorOffset:void 0;i.appendMap(l.map,o)},e,t),i}addMaps(e){return this.eventCount==0?this:new li(this.items.append(e.map(t=>new gi(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let i=[],l=Math.max(0,this.items.length-t),a=e.mapping,o=e.steps.length,c=this.eventCount;this.items.forEach(b=>{b.selection&&c--},l);let f=t;this.items.forEach(b=>{let S=a.getMirror(--f);if(S==null)return;o=Math.min(o,S);let x=a.maps[S];if(b.step){let v=e.steps[S].invert(e.docs[S]),M=b.selection&&b.selection.map(a.slice(f+1,S));M&&c++,i.push(new gi(x,v,M))}else i.push(new gi(x))},l);let d=[];for(let b=t;b<o;b++)d.push(new gi(a.maps[b]));let p=this.items.slice(0,l).append(d).append(i),g=new li(p,c);return g.emptyItemCount()>FL&&(g=g.compress(this.items.length-i.length)),g}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),i=t.maps.length,l=[],a=0;return this.items.forEach((o,c)=>{if(c>=e)l.push(o),o.selection&&a++;else if(o.step){let f=o.step.map(t.slice(i)),d=f&&f.getMap();if(i--,d&&t.appendMap(d,i),f){let p=o.selection&&o.selection.map(t.slice(i));p&&a++;let g=new gi(d.invert(),f,p),b,S=l.length-1;(b=l.length&&l[S].merge(g))?l[S]=b:l.push(g)}}else o.map&&i--},this.items.length,0),new li(Ot.from(l.reverse()),a)}}li.empty=new li(Ot.empty,0);function KL(n,e){let t;return n.forEach((i,l)=>{if(i.selection&&e--==0)return t=l,!1}),n.slice(t)}class gi{constructor(e,t,i,l){this.map=e,this.step=t,this.selection=i,this.mirrorOffset=l}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new gi(t.getMap().invert(),t,this.selection)}}}class _r{constructor(e,t,i,l,a){this.done=e,this.undone=t,this.prevRanges=i,this.prevTime=l,this.prevComposition=a}}const YL=20;function GL(n,e,t,i){let l=t.getMeta(Al),a;if(l)return l.historyState;t.getMeta(JL)&&(n=new _r(n.done,n.undone,null,0,-1));let o=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(o&&o.getMeta(Al))return o.getMeta(Al).redo?new _r(n.done.addTransform(t,void 0,i,Pc(e)),n.undone,Xx(t.mapping.maps),n.prevTime,n.prevComposition):new _r(n.done,n.undone.addTransform(t,void 0,i,Pc(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let c=t.getMeta("composition"),f=n.prevTime==0||!o&&n.prevComposition!=c&&(n.prevTime<(t.time||0)-i.newGroupDelay||!QL(t,n.prevRanges)),d=o?lm(n.prevRanges,t.mapping):Xx(t.mapping.maps);return new _r(n.done.addTransform(t,f?e.selection.getBookmark():void 0,i,Pc(e)),li.empty,d,t.time,c??n.prevComposition)}else return(a=t.getMeta("rebased"))?new _r(n.done.rebased(t,a),n.undone.rebased(t,a),lm(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new _r(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),lm(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function QL(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((i,l)=>{for(let a=0;a<e.length;a+=2)i<=e[a+1]&&l>=e[a]&&(t=!0)}),t}function Xx(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((i,l,a,o)=>e.push(a,o));return e}function lm(n,e){if(!n)return null;let t=[];for(let i=0;i<n.length;i+=2){let l=e.map(n[i],1),a=e.map(n[i+1],-1);l<=a&&t.push(l,a)}return t}function XL(n,e,t){let i=Pc(e),l=Al.get(e).spec.config,a=(t?n.undone:n.done).popEvent(e,i);if(!a)return null;let o=a.selection.resolve(a.transform.doc),c=(t?n.done:n.undone).addTransform(a.transform,e.selection.getBookmark(),l,i),f=new _r(t?c:a.remaining,t?a.remaining:c,null,0,-1);return a.transform.setSelection(o).setMeta(Al,{redo:t,historyState:f})}let sm=!1,Jx=null;function Pc(n){let e=n.plugins;if(Jx!=e){sm=!1,Jx=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){sm=!0;break}}return sm}const Al=new Vt("history"),JL=new Vt("closeHistory");function ZL(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new Qt({key:Al,state:{init(){return new _r(li.empty,li.empty,null,0,-1)},apply(e,t,i){return GL(t,i,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let i=t.inputType,l=i=="historyUndo"?XT:i=="historyRedo"?JT:null;return!l||!e.editable?!1:(t.preventDefault(),l(e.state,e.dispatch))}}}})}function QT(n,e){return(t,i)=>{let l=Al.getState(t);if(!l||(n?l.undone:l.done).eventCount==0)return!1;if(i){let a=XL(l,t,n);a&&i(e?a.scrollIntoView():a)}return!0}}const XT=QT(!1,!0),JT=QT(!0,!0);function na(n,e){return Object.assign(n,{meta:{package:"@milkdown/plugin-history",...e}}),n}const Fy=Se("Undo",()=>()=>XT);na(Fy,{displayName:"Command<undo>"});const Ky=Se("Redo",()=>()=>JT);na(Ky,{displayName:"Command<redo>"});const Yy=tr({},"historyProviderConfig");na(Yy,{displayName:"Ctx<historyProviderConfig>"});const ZT=oi(n=>ZL(n.get(Yy.key)));na(ZT,{displayName:"Ctx<historyProviderPlugin>"});const Gy=bn("historyKeymap",{Undo:{shortcuts:"Mod-z",command:n=>{const e=n.get(Ye);return()=>e.call(Fy.key)}},Redo:{shortcuts:["Mod-y","Shift-Mod-z"],command:n=>{const e=n.get(Ye);return()=>e.call(Ky.key)}}});na(Gy.ctx,{displayName:"KeymapCtx<history>"});na(Gy.shortcuts,{displayName:"Keymap<history>"});const $L=[Yy,ZT,Gy,Fy,Ky].flat();function $m(n){if(!n)return!1;if(Array.isArray(n))return n.length>1?!1:$m(n[0]);const e=n.content;return e?$m(e):n.type==="text"}function PL(n,e){return Object.assign(n,{meta:{package:"@milkdown/plugin-clipboard",...e}}),n}const $T=oi(n=>{const e=n.get(Wi);n.update(Ao,l=>({...l,editable:l.editable??(()=>!0)}));const t=new Vt("MILKDOWN_CLIPBOARD");return new Qt({key:t,props:{handlePaste:(l,a)=>{const o=n.get(To),c=l.props.editable?.(l.state),{clipboardData:f}=a;if(!c||!f||l.state.selection.$from.node().type.spec.code)return!1;const p=f.getData("text/plain"),g=f.getData("vscode-editor-data");if(g){const Q=JSON.parse(g)?.mode;if(p&&Q){const{tr:L}=l.state,P=n2("code_block",e);return L.replaceSelectionWith(P.create({language:Q})).setSelection(we.near(L.doc.resolve(Math.max(0,L.selection.from-2)))).insertText(p.replace(/\r\n?/g,`
`)),l.dispatch(L),!0}}const b=f.getData("text/html");if(b.length===0&&p.length===0)return!1;const S=Rl.fromSchema(e);let x;if(b.length===0){const T=o(p);if(!T||typeof T=="string")return!1;x=Il.fromSchema(e).serializeFragment(T.content)}else{const T=document.createElement("template");T.innerHTML=b,x=T.content.cloneNode(!0),T.remove()}const v=S.parseSlice(x),M=Wz(v);if(M)return l.dispatch(l.state.tr.replaceSelectionWith(M,!0)),!0;try{return l.dispatch(l.state.tr.replaceSelection(v)),!0}catch{return!1}},clipboardTextSerializer:l=>{const a=n.get(Eo);if($m(l.content.toJSON()))return l.content.textBetween(0,l.content.size,`

`);const c=e.topNodeType.createAndFill(void 0,l.content);return c?a(c):""}}})});PL($T,{displayName:"Prose<clipboard>"});var WL=typeof global=="object"&&global&&global.Object===Object&&global,eI=typeof self=="object"&&self&&self.Object===Object&&self,PT=WL||eI||Function("return this")(),gf=PT.Symbol,WT=Object.prototype,tI=WT.hasOwnProperty,nI=WT.toString,eo=gf?gf.toStringTag:void 0;function iI(n){var e=tI.call(n,eo),t=n[eo];try{n[eo]=void 0;var i=!0}catch{}var l=nI.call(n);return i&&(e?n[eo]=t:delete n[eo]),l}var rI=Object.prototype,lI=rI.toString;function sI(n){return lI.call(n)}var aI="[object Null]",oI="[object Undefined]",Zx=gf?gf.toStringTag:void 0;function uI(n){return n==null?n===void 0?oI:aI:Zx&&Zx in Object(n)?iI(n):sI(n)}function cI(n){return n!=null&&typeof n=="object"}var fI="[object Symbol]";function hI(n){return typeof n=="symbol"||cI(n)&&uI(n)==fI}var dI=/\s/;function pI(n){for(var e=n.length;e--&&dI.test(n.charAt(e)););return e}var mI=/^\s+/;function gI(n){return n&&n.slice(0,pI(n)+1).replace(mI,"")}function Pm(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var $x=NaN,yI=/^[-+]0x[0-9a-f]+$/i,bI=/^0b[01]+$/i,SI=/^0o[0-7]+$/i,kI=parseInt;function Px(n){if(typeof n=="number")return n;if(hI(n))return $x;if(Pm(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=Pm(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=gI(n);var t=bI.test(n);return t||SI.test(n)?kI(n.slice(2),t?2:8):yI.test(n)?$x:+n}var am=function(){return PT.Date.now()},xI="Expected a function",CI=Math.max,vI=Math.min;function wI(n,e,t){var i,l,a,o,c,f,d=0,p=!1,g=!1,b=!0;if(typeof n!="function")throw new TypeError(xI);e=Px(e)||0,Pm(t)&&(p=!!t.leading,g="maxWait"in t,a=g?CI(Px(t.maxWait)||0,e):a,b="trailing"in t?!!t.trailing:b);function S(z){var Y=i,ne=l;return i=l=void 0,d=z,o=n.apply(ne,Y),o}function x(z){return d=z,c=setTimeout(T,e),p?S(z):o}function v(z){var Y=z-f,ne=z-d,ue=e-Y;return g?vI(ue,a-ne):ue}function M(z){var Y=z-f,ne=z-d;return f===void 0||Y>=e||Y<0||g&&ne>=a}function T(){var z=am();if(M(z))return Q(z);c=setTimeout(T,v(z))}function Q(z){return c=void 0,b&&i?S(z):(i=l=void 0,o)}function L(){c!==void 0&&clearTimeout(c),d=0,i=f=l=c=void 0}function P(){return c===void 0?o:Q(am())}function ee(){var z=am(),Y=M(z);if(i=arguments,l=this,f=z,Y){if(c===void 0)return x(f);if(g)return clearTimeout(c),c=setTimeout(T,e),S(f)}return c===void 0&&(c=setTimeout(T,e)),o}return ee.cancel=L,ee.flush=P,ee}class eM{constructor(){this.beforeMountedListeners=[],this.mountedListeners=[],this.updatedListeners=[],this.selectionUpdatedListeners=[],this.markdownUpdatedListeners=[],this.blurListeners=[],this.focusListeners=[],this.destroyListeners=[],this.beforeMount=e=>(this.beforeMountedListeners.push(e),this),this.mounted=e=>(this.mountedListeners.push(e),this),this.updated=e=>(this.updatedListeners.push(e),this)}get listeners(){return{beforeMount:this.beforeMountedListeners,mounted:this.mountedListeners,updated:this.updatedListeners,markdownUpdated:this.markdownUpdatedListeners,blur:this.blurListeners,focus:this.focusListeners,destroy:this.destroyListeners,selectionUpdated:this.selectionUpdatedListeners}}markdownUpdated(e){return this.markdownUpdatedListeners.push(e),this}blur(e){return this.blurListeners.push(e),this}focus(e){return this.focusListeners.push(e),this}destroy(e){return this.destroyListeners.push(e),this}selectionUpdated(e){return this.selectionUpdatedListeners.push(e),this}}const Wm=Le(new eM,"listener"),TI=new Vt("MILKDOWN_LISTENER"),tM=n=>(n.inject(Wm,new eM),async()=>{await n.wait(El);const e=n.get(Wm),{listeners:t}=e;t.beforeMount.forEach(f=>f(n)),await n.wait(Mo);const i=n.get(Eo);let l=null,a=null,o=null;const c=new Qt({key:TI,view:()=>({destroy:()=>{t.destroy.forEach(f=>f(n))}}),props:{handleDOMEvents:{focus:()=>(t.focus.forEach(f=>f(n)),!1),blur:()=>(t.blur.forEach(f=>f(n)),!1)}},state:{init:(f,d)=>{l=d.doc,a=i(d.doc)},apply:f=>{const d=f.selection;return(!o&&d||o&&!d.eq(o))&&(t.selectionUpdated.forEach(g=>{g(n,d,o)}),o=d),!(f.docChanged||f.storedMarksSet)||f.getMeta("addToHistory")===!1?void 0:wI(()=>{const{doc:g}=f;if(t.updated.length>0&&l&&!l.eq(g)&&t.updated.forEach(b=>{b(n,g,l)}),t.markdownUpdated.length>0&&l&&!l.eq(g)){const b=i(g);t.markdownUpdated.forEach(S=>{S(n,b,a)}),a=b}l=g},200)()}}});n.update(Qr,f=>f.concat(c)),await n.wait(Xc),t.mounted.forEach(f=>f(n))});tM.meta={package:"@milkdown/plugin-listener",displayName:"Listener"};var om;function nM(n){return{lang:n?.lang??om?.lang,message:n?.message,abortEarly:n?.abortEarly??om?.abortEarly,abortPipeEarly:n?.abortPipeEarly??om?.abortPipeEarly}}var MI;function EI(n){return MI?.get(n)}var NI;function AI(n){return NI?.get(n)}var OI;function RI(n,e){return OI?.get(n)?.get(e)}function Qy(n){const e=typeof n;return e==="string"?`"${n}"`:e==="number"||e==="bigint"||e==="boolean"?`${n}`:e==="object"||e==="function"?(n&&Object.getPrototypeOf(n)?.constructor?.name)??"null":e}function ai(n,e,t,i,l){const a=l&&"input"in l?l.input:t.value,o=l?.expected??n.expects??null,c=l?.received??Qy(a),f={kind:n.kind,type:n.type,input:a,expected:o,received:c,message:`Invalid ${e}: ${o?`Expected ${o} but r`:"R"}eceived ${c}`,requirement:n.requirement,path:l?.path,issues:l?.issues,lang:i.lang,abortEarly:i.abortEarly,abortPipeEarly:i.abortPipeEarly},d=n.kind==="schema",p=l?.message??n.message??RI(n.reference,f.lang)??(d?AI(f.lang):null)??i.message??EI(f.lang);p!==void 0&&(f.message=typeof p=="function"?p(f):p),d&&(t.typed=!1),t.issues?t.issues.push(f):t.issues=[f]}function Wn(n){return{version:1,vendor:"valibot",validate(e){return n["~run"]({value:e},nM())}}}function DI(n,e){return Object.hasOwn(n,e)&&e!=="__proto__"&&e!=="prototype"&&e!=="constructor"}function iM(n,e){const t=[...new Set(n)];return t.length>1?`(${t.join(` ${e} `)})`:t[0]??"never"}function zI(n,e,t){return typeof n.fallback=="function"?n.fallback(e,t):n.fallback}function Xy(n,e,t){return typeof n.default=="function"?n.default(e,t):n.default}function jl(n,e){return{kind:"schema",type:"array",reference:jl,expects:"Array",async:!1,item:n,message:e,get"~standard"(){return Wn(this)},"~run"(t,i){const l=t.value;if(Array.isArray(l)){t.typed=!0,t.value=[];for(let a=0;a<l.length;a++){const o=l[a],c=this.item["~run"]({value:o},i);if(c.issues){const f={type:"array",origin:"value",input:l,key:a,value:o};for(const d of c.issues)d.path?d.path.unshift(f):d.path=[f],t.issues?.push(d);if(t.issues||(t.issues=c.issues),i.abortEarly){t.typed=!1;break}}c.typed||(t.typed=!1),t.value.push(c.value)}}else ai(this,"type",t,i);return t}}}function ct(n){return{kind:"schema",type:"boolean",reference:ct,expects:"boolean",async:!1,message:n,get"~standard"(){return Wn(this)},"~run"(e,t){return typeof e.value=="boolean"?e.typed=!0:ai(this,"type",e,t),e}}}function ce(n,e){return{kind:"schema",type:"literal",reference:ce,expects:Qy(n),async:!1,literal:n,message:e,get"~standard"(){return Wn(this)},"~run"(t,i){return t.value===this.literal?t.typed=!0:ai(this,"type",t,i),t}}}function Xr(n,e){return{kind:"schema",type:"nullable",reference:Xr,expects:`(${n.expects} | null)`,async:!1,wrapped:n,default:e,get"~standard"(){return Wn(this)},"~run"(t,i){return t.value===null&&(this.default!==void 0&&(t.value=Xy(this,t,i)),t.value===null)?(t.typed=!0,t):this.wrapped["~run"](t,i)}}}function Gf(n){return{kind:"schema",type:"number",reference:Gf,expects:"number",async:!1,message:n,get"~standard"(){return Wn(this)},"~run"(e,t){return typeof e.value=="number"&&!isNaN(e.value)?e.typed=!0:ai(this,"type",e,t),e}}}function Te(n,e){return{kind:"schema",type:"object",reference:Te,expects:"Object",async:!1,entries:n,message:e,get"~standard"(){return Wn(this)},"~run"(t,i){const l=t.value;if(l&&typeof l=="object"){t.typed=!0,t.value={};for(const a in this.entries){const o=this.entries[a];if(a in l||(o.type==="exact_optional"||o.type==="optional"||o.type==="nullish")&&o.default!==void 0){const c=a in l?l[a]:Xy(o),f=o["~run"]({value:c},i);if(f.issues){const d={type:"object",origin:"value",input:l,key:a,value:c};for(const p of f.issues)p.path?p.path.unshift(d):p.path=[d],t.issues?.push(p);if(t.issues||(t.issues=f.issues),i.abortEarly){t.typed=!1;break}}f.typed||(t.typed=!1),t.value[a]=f.value}else if(o.fallback!==void 0)t.value[a]=zI(o);else if(o.type!=="exact_optional"&&o.type!=="optional"&&o.type!=="nullish"&&(ai(this,"key",t,i,{input:void 0,expected:`"${a}"`,path:[{type:"object",origin:"key",input:l,key:a,value:l[a]}]}),i.abortEarly))break}}else ai(this,"type",t,i);return t}}}function dt(n,e){return{kind:"schema",type:"optional",reference:dt,expects:`(${n.expects} | undefined)`,async:!1,wrapped:n,default:e,get"~standard"(){return Wn(this)},"~run"(t,i){return t.value===void 0&&(this.default!==void 0&&(t.value=Xy(this,t,i)),t.value===void 0)?(t.typed=!0,t):this.wrapped["~run"](t,i)}}}function rM(n,e){return{kind:"schema",type:"picklist",reference:rM,expects:iM(n.map(Qy),"|"),async:!1,options:n,message:e,get"~standard"(){return Wn(this)},"~run"(t,i){return this.options.includes(t.value)?t.typed=!0:ai(this,"type",t,i),t}}}function lM(n,e,t){return{kind:"schema",type:"record",reference:lM,expects:"Object",async:!1,key:n,value:e,message:t,get"~standard"(){return Wn(this)},"~run"(i,l){const a=i.value;if(a&&typeof a=="object"){i.typed=!0,i.value={};for(const o in a)if(DI(a,o)){const c=a[o],f=this.key["~run"]({value:o},l);if(f.issues){const p={type:"object",origin:"key",input:a,key:o,value:c};for(const g of f.issues)g.path=[p],i.issues?.push(g);if(i.issues||(i.issues=f.issues),l.abortEarly){i.typed=!1;break}}const d=this.value["~run"]({value:c},l);if(d.issues){const p={type:"object",origin:"value",input:a,key:o,value:c};for(const g of d.issues)g.path?g.path.unshift(p):g.path=[p],i.issues?.push(g);if(i.issues||(i.issues=d.issues),l.abortEarly){i.typed=!1;break}}(!f.typed||!d.typed)&&(i.typed=!1),f.typed&&(i.value[f.value]=d.value)}}else ai(this,"type",i,l);return i}}}function Z(n){return{kind:"schema",type:"string",reference:Z,expects:"string",async:!1,message:n,get"~standard"(){return Wn(this)},"~run"(e,t){return typeof e.value=="string"?e.typed=!0:ai(this,"type",e,t),e}}}function Wx(n){let e;if(n)for(const t of n)e?e.push(...t.issues):e=t.issues;return e}function Tt(n,e){return{kind:"schema",type:"union",reference:Tt,expects:iM(n.map(t=>t.expects),"|"),async:!1,options:n,message:e,get"~standard"(){return Wn(this)},"~run"(t,i){let l,a,o;for(const c of this.options){const f=c["~run"]({value:t.value},i);if(f.typed)if(f.issues)a?a.push(f):a=[f];else{l=f;break}else o?o.push(f):o=[f]}if(l)return l;if(a){if(a.length===1)return a[0];ai(this,"type",t,i,{issues:Wx(a)}),t.typed=!0}else{if(o?.length===1)return o[0];ai(this,"type",t,i,{issues:Wx(o)})}return t}}}function tn(){return{kind:"schema",type:"unknown",reference:tn,expects:"unknown",async:!1,get"~standard"(){return Wn(this)},"~run"(n){return n.typed=!0,n}}}function Kn(n,e,t){const i=n["~run"]({value:e},nM(t));return{typed:i.typed,success:!i.issues,output:i.value,issues:i.issues}}const se=(n,e)=>Te({type:ce(n),payload:Te({requestId:Z(),...e})}),eC={Request:se("vfs.exists",{path:Z()}),Response:Tt([se("vfs.exists.response",{success:ce(!0),data:Te({exists:ct(),entryType:Xr(Z())})}),se("vfs.exists.response",{success:ce(!1),error:Z()})])},_I=Te({name:Z(),type:Tt([ce("file"),ce("directory")]),size:Gf()}),tC={Request:se("vfs.readDir",{path:Z()}),Response:Tt([se("vfs.readDir.response",{success:ce(!0),data:jl(_I)}),se("vfs.readDir.response",{success:ce(!1),error:Z()})])},nC={Request:se("vfs.readFile",{path:Z()}),Response:Tt([se("vfs.readFile.response",{success:ce(!0),data:Z()}),se("vfs.readFile.response",{success:ce(!1),error:Z()})])},iC={Request:se("vfs.writeFile",{path:Z(),content:Z()}),Response:Tt([se("vfs.writeFile.response",{success:ce(!0)}),se("vfs.writeFile.response",{success:ce(!1),error:Z()})])},rC={Request:se("editor.openFile",{path:Z()}),Response:Tt([se("editor.openFile.response",{success:ce(!0)}),se("editor.openFile.response",{success:ce(!1),error:Z()})])},BI={Request:se("document.content",{content:Z(),hash:Z(),isRevert:dt(ct())}),Response:Tt([se("document.content.response",{success:ce(!0)}),se("document.content.response",{success:ce(!1),error:Z()})])},lC={Request:se("document.edited",{description:Z()}),Response:Tt([se("document.edited.response",{success:ce(!0)}),se("document.edited.response",{success:ce(!1),error:Z()})])},sC={Request:se("document.save",{}),Response:Tt([se("document.save.response",{success:ce(!0),hash:Z()}),se("document.save.response",{success:ce(!1),error:Z()})])},LI={Request:se("document.saveRequested",{}),Response:Tt([se("document.saveRequested.response",{success:ce(!0),content:Z()}),se("document.saveRequested.response",{success:ce(!1),error:Z()})])},II={Request:se("document.saved",{hash:Z()}),Response:Tt([se("document.saved.response",{success:ce(!0)}),se("document.saved.response",{success:ce(!1),error:Z()})])},qI={Request:se("document.revert",{}),Response:Tt([se("document.revert.response",{success:ce(!0)}),se("document.revert.response",{success:ce(!1),error:Z()})])},HI=Te({isOpen:ct(),path:Xr(Z()),name:Xr(Z())}),aC={Request:se("workspace.getDetails",{}),Response:Tt([se("workspace.getDetails.response",{success:ce(!0),data:HI}),se("workspace.getDetails.response",{success:ce(!1),error:Z()})])},UI=Te({type:ce("workspace.changed"),isOpen:ct(),path:Xr(Z()),name:Xr(Z())}),oC={Request:se("workspace.open",{}),Response:Tt([se("workspace.open.response",{success:ce(!0),path:Xr(Z())}),se("workspace.open.response",{success:ce(!1),error:Z()})])},uC={Request:se("native.call",{pluginId:Z(),moduleId:Z(),command:Z(),args:tn()}),Response:Tt([se("native.call.response",{success:ce(!0),data:tn()}),se("native.call.response",{success:ce(!1),error:Z()})])},cC={Request:se("fs.subscribe",{}),Response:Tt([se("fs.subscribe.response",{success:ce(!0)}),se("fs.subscribe.response",{success:ce(!1),error:Z()})])},fC={Request:se("fs.unsubscribe",{}),Response:Tt([se("fs.unsubscribe.response",{success:ce(!0)}),se("fs.unsubscribe.response",{success:ce(!1),error:Z()})])},VI=Te({type:ce("fs.fileChanged"),payload:Te({path:Z(),kind:Tt([ce("created"),ce("modified"),ce("deleted")])})});var yf;(function(n){n.Request=se("plugin.sendMessage",{targetModuleId:Z(),message:tn()}),n.Response=Te({type:ce("plugin.sendMessage.response"),payload:Te({requestId:Z(),success:ct(),data:dt(tn()),error:dt(Z())})})})(yf||(yf={}));var eg;(function(n){n.Request=se("plugin.message",{fromModuleId:Z(),message:tn()}),n.Response=Te({type:ce("plugin.message.response"),payload:Te({requestId:Z(),success:ct(),data:dt(tn()),error:dt(Z())})})})(eg||(eg={}));var bf;(function(n){n.Request=se("plugin.sendBroadcast",{message:tn()}),n.Response=Te({type:ce("plugin.sendBroadcast.response"),payload:Te({requestId:Z(),success:ct(),error:dt(Z())})})})(bf||(bf={}));var tg;(function(n){n.Event=Te({type:ce("plugin.broadcast"),payload:Te({fromModuleId:Z(),message:tn()})})})(tg||(tg={}));var Sf;(function(n){n.Request=se("storage.getSecret",{key:Z()}),n.Response=Te({type:ce("storage.getSecret.response"),payload:Te({requestId:Z(),success:ct(),value:Xr(Z()),error:dt(Z())})})})(Sf||(Sf={}));var kf;(function(n){n.Request=se("storage.setSecret",{key:Z(),value:Z()}),n.Response=Te({type:ce("storage.setSecret.response"),payload:Te({requestId:Z(),success:ct(),error:dt(Z())})})})(kf||(kf={}));var xf;(function(n){n.Request=se("storage.deleteSecret",{key:Z()}),n.Response=Te({type:ce("storage.deleteSecret.response"),payload:Te({requestId:Z(),success:ct(),error:dt(Z())})})})(xf||(xf={}));const jI=rM(["debug","info","warn","error"]);var Cf;(function(n){n.Request=se("logs.write",{level:jI,channelName:Z(),args:jl(tn())}),n.Response=Te({type:ce("logs.write.response"),payload:Te({requestId:Z(),success:ct(),error:dt(Z())})})})(Cf||(Cf={}));const sM=Te({type:ce("object"),properties:lM(Z(),tn()),required:dt(jl(Z()))}),FI=Te({id:Z(),name:Z(),description:Z(),parameters:sM,provider:Te({pluginId:Z(),moduleId:Z()}),timeoutMs:dt(Gf())});var vf;(function(n){n.Request=se("llm.tool.list",{}),n.Response=Te({type:ce("llm.tool.list.response"),payload:Te({requestId:Z(),success:ct(),tools:jl(FI),error:dt(Z())})})})(vf||(vf={}));var wf;(function(n){n.Request=se("llm.tool.execute",{toolId:Z(),arguments:tn()}),n.Response=Te({type:ce("llm.tool.execute.response"),payload:Te({requestId:Z(),success:ct(),result:dt(tn()),error:dt(Z())})})})(wf||(wf={}));var Tf;(function(n){n.Request=se("llm.tool.register",{name:Z(),description:Z(),parameters:sM,timeoutMs:dt(Gf())}),n.Response=Te({type:ce("llm.tool.register.response"),payload:Te({requestId:Z(),success:ct(),toolId:dt(Z()),error:dt(Z())})})})(Tf||(Tf={}));var Mf;(function(n){n.Request=se("llm.tool.unregister",{name:Z()}),n.Response=Te({type:ce("llm.tool.unregister.response"),payload:Te({requestId:Z(),success:ct(),error:dt(Z())})})})(Mf||(Mf={}));var ng;(function(n){n.Request=se("llm.tool.call",{toolName:Z(),arguments:tn()}),n.Response=Te({type:ce("llm.tool.call.response"),payload:Te({requestId:Z(),success:ct(),result:dt(tn()),error:dt(Z())})})})(ng||(ng={}));const aM="ui.getState.request",KI="ui.getState.response",YI=Te({id:Z(),title:Z(),isDirty:ct(),isActive:ct()}),oM={Request:se(aM,{}),Response:se(KI,{openTabs:jl(YI)})},GI=oM.Request,QI=oM.Response,uM="ui.setVisibility.request",XI="ui.setVisibility.response",cM={Request:se(uM,{visible:ct()}),Response:se(XI,{success:ct()})},JI=cM.Request,ZI=cM.Response,fM="ui.tabsChanged.event",$I=Te({openTabs:jl(Te({id:Z(),title:Z(),isDirty:ct(),isActive:ct()})),hasOpenTabs:ct()}),PI=Te({type:ce(fM),payload:$I}),Lt=[];for(let n=0;n<256;++n)Lt.push((n+256).toString(16).slice(1));function WI(n,e=0){return(Lt[n[e+0]]+Lt[n[e+1]]+Lt[n[e+2]]+Lt[n[e+3]]+"-"+Lt[n[e+4]]+Lt[n[e+5]]+"-"+Lt[n[e+6]]+Lt[n[e+7]]+"-"+Lt[n[e+8]]+Lt[n[e+9]]+"-"+Lt[n[e+10]]+Lt[n[e+11]]+Lt[n[e+12]]+Lt[n[e+13]]+Lt[n[e+14]]+Lt[n[e+15]]).toLowerCase()}let um;const e6=new Uint8Array(16);function t6(){if(!um){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");um=crypto.getRandomValues.bind(crypto)}return um(e6)}const n6=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),hC={randomUUID:n6};function i6(n,e,t){n=n||{};const i=n.random??n.rng?.()??t6();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,WI(i)}function r6(n,e,t){return hC.randomUUID&&!n?hC.randomUUID():i6(n)}class l6{subscribers=new Set;handleMessage=e=>{this.subscribers.forEach(t=>t(e))};constructor(){}init(){window.addEventListener("message",this.handleMessage)}destroy(){window.removeEventListener("message",this.handleMessage),this.subscribers.clear()}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}send(e){window.parent.postMessage(e,"*")}}class s6{messageBus;pendingRequests=new Map;constructor(){this.messageBus=new l6}init(){this.messageBus.init(),this.messageBus.subscribe(this.handleMessage)}destroy(){this.messageBus.destroy(),this.pendingRequests.clear()}subscribe(e){return this.messageBus.subscribe(e)}send(e){this.messageBus.send(e)}handleMessage=e=>{console.log("Received message:",e.data);const{type:t,payload:i}=e.data||{};if(t&&t.endsWith(".response")&&i?.requestId){const l=this.pendingRequests.get(i.requestId);l&&(l({type:t,payload:i}),this.pendingRequests.delete(i.requestId))}};async sendRequest(e,t,i,l){const a=r6(),o={type:e,payload:{requestId:a,...t}};console.log(`[SDK] Sending request ${e}:`,o);const c=Kn(i,o);if(!c.success)throw console.error(`[SDK] Invalid request shape for ${e}:`,c.issues),new Error(`Invalid request shape for ${e}`);return new Promise((f,d)=>{this.pendingRequests.set(a,p=>{const g=Kn(l,p);if(!g.success){console.error(`[SDK] Invalid response shape for ${e}:`,g.issues),d(new Error(`Invalid response shape for ${e}`));return}f(g.output.payload)}),this.messageBus.send(o)})}}class a6{client;constructor(e){this.client=e}async getState(){return{openTabs:(await this.client.sendRequest(aM,{},GI,QI)).openTabs}}async setVisibility(e){if(!(await this.client.sendRequest(uM,{visible:e},JI,ZI)).success)throw new Error("Failed to set panel visibility")}onTabsChanged(e){return this.client.subscribe(t=>{const{type:i,payload:l}=t.data||{};if(i===fM){const a=Kn(PI,{type:i,payload:l});a.success?e({payload:a.output.payload}):console.error("[SDK] Invalid ui.tabsChanged.event payload:",a.issues)}})}}class dC{channelName;logChannelAdapters;constructor(e,t){this.channelName=e,this.logChannelAdapters=t}writeLog(e,t,i){for(const l of this.logChannelAdapters)try{l.writeLog(e,t,...i)}catch(a){console.error(`LogChannel failed to write log via adapter: ${a}`)}}debug(...e){this.writeLog(this.channelName,"debug",e)}info(...e){this.writeLog(this.channelName,"info",e)}warn(...e){this.writeLog(this.channelName,"warn",e)}error(...e){this.writeLog(this.channelName,"error",e)}}class o6{client;constructor(e){this.client=e}writeLog(e,t,...i){const l=i.map(a=>{if(typeof a=="string")return a;if(a instanceof Error)return`Error: ${a.message}
${a.stack}`;try{return JSON.stringify(a)}catch{return String(a)}}).join(" ");this.client.sendRequest("logs.write",{level:t,channelName:e,args:[l]},Cf.Request,Cf.Response).catch(a=>{console.error("Failed to write log:",a)})}}class u6{client;primaryLogChannel;logAdapters;toolHandlers=new Map;toolCallUnsubscribe=null;ui;constructor(){this.client=new s6;const e=new o6(this.client);this.logAdapters=[e],this.primaryLogChannel=new dC("default",this.logAdapters),this.ui=new a6(this.client)}init(){this.client.init()}destroy(){this.client.destroy()}onMessage(e){return this.client.subscribe(e)}vfs={exists:async e=>{const t=await this.client.sendRequest("vfs.exists",{path:e},eC.Request,eC.Response);if(t.success)return t.data;throw new Error(t.error)},readDir:async e=>{const t=await this.client.sendRequest("vfs.readDir",{path:e},tC.Request,tC.Response);if(t.success)return t.data;throw new Error(t.error)},readFile:async e=>{const t=await this.client.sendRequest("vfs.readFile",{path:e},nC.Request,nC.Response);if(t.success)return t.data;throw new Error(t.error)},writeFile:async(e,t)=>{const i=await this.client.sendRequest("vfs.writeFile",{path:e,content:t},iC.Request,iC.Response);if(!i.success)throw new Error(i.error)}};workspace={getDetails:async()=>{const e=await this.client.sendRequest("workspace.getDetails",{},aC.Request,aC.Response);if(e.success)return e.data;throw new Error(e.error)},onChanged:e=>this.client.subscribe(t=>{const{type:i,payload:l}=t.data||{};if(i==="workspace.changed"){const a=Kn(UI,{type:i,...l});a.success?e(a.output):console.error("[SDK] Invalid workspace.changed payload:",a.issues)}}),open:async()=>{const e=await this.client.sendRequest("workspace.open",{},oC.Request,oC.Response);if(e.success)return e.path;throw new Error(e.error)}};editor={openFile:async e=>{const t=await this.client.sendRequest("editor.openFile",{path:e},rC.Request,rC.Response);if(!t.success)throw new Error(t.error)}};native={call:async(e,t,i,l)=>{const a=await this.client.sendRequest("native.call",{pluginId:e,moduleId:t,command:i,args:l},uC.Request,uC.Response);if(a.success)return a.data;throw new Error(a.error)}};fs={subscribe:async()=>{const e=await this.client.sendRequest("fs.subscribe",{},cC.Request,cC.Response);if(!e.success)throw new Error(e.error)},unsubscribe:async()=>{const e=await this.client.sendRequest("fs.unsubscribe",{},fC.Request,fC.Response);if(!e.success)throw new Error(e.error)},onFileChanged:e=>this.client.subscribe(t=>{const{type:i}=t.data||{};if(i==="fs.fileChanged"){const l=Kn(VI,t.data);l.success?e(l.output):console.error("[SDK] Invalid fs.fileChanged payload:",l.issues)}})};document={edited:async(e="edit")=>{const t=await this.client.sendRequest("document.edited",{description:e},lC.Request,lC.Response);if(!t.success)throw new Error(t.error)},requestSave:async()=>{const e=await this.client.sendRequest("document.save",{},sC.Request,sC.Response);if(!e.success)throw new Error(e.error);return e.hash},onContent:e=>this.client.subscribe(t=>{const{type:i}=t.data||{};if(i==="document.content"){const l=Kn(BI.Request,t.data);l.success?e(l.output.payload):console.error("[SDK] Invalid document.content payload:",l.issues)}}),onSaveRequested:e=>this.client.subscribe(async t=>{const{type:i}=t.data||{};if(i==="document.saveRequested"){const l=Kn(LI.Request,t.data);if(l.success)try{const a=await e(l.output.payload);this.client.send({type:"document.saveRequested.response",payload:{requestId:l.output.payload.requestId,success:!0,content:a}})}catch(a){this.client.send({type:"document.saveRequested.response",payload:{requestId:l.output.payload.requestId,success:!1,error:a instanceof Error?a.message:String(a)}})}else console.error("[SDK] Invalid document.saveRequested payload:",l.issues)}}),onSaved:e=>this.client.subscribe(t=>{const{type:i}=t.data||{};if(i==="document.saved"){const l=Kn(II.Request,t.data);l.success?e(l.output.payload):console.error("[SDK] Invalid document.saved payload:",l.issues)}}),onRevert:e=>this.client.subscribe(t=>{const{type:i}=t.data||{};if(i==="document.revert"){const l=Kn(qI.Request,t.data);l.success?e(l.output.payload):console.error("[SDK] Invalid document.revert payload:",l.issues)}}),respondToContent:(e,t,i)=>{t?this.client.send({type:"document.content.response",payload:{requestId:e,success:!0}}):this.client.send({type:"document.content.response",payload:{requestId:e,success:!1,error:i||"Unknown error"}})},respondToRevert:(e,t,i)=>{t?this.client.send({type:"document.revert.response",payload:{requestId:e,success:!0}}):this.client.send({type:"document.revert.response",payload:{requestId:e,success:!1,error:i||"Unknown error"}})},respondToSaved:(e,t,i)=>{t?this.client.send({type:"document.saved.response",payload:{requestId:e,success:!0}}):this.client.send({type:"document.saved.response",payload:{requestId:e,success:!1,error:i||"Unknown error"}})}};plugin={sendMessage:async(e,t)=>{const i=await this.client.sendRequest("plugin.sendMessage",{targetModuleId:e,message:t},yf.Request,yf.Response);if(i.success)return i.data;throw new Error(i.error||"Failed to send message")},onMessage:e=>this.client.subscribe(t=>{const{type:i}=t.data||{};if(i==="plugin.message"){const l=Kn(eg.Request,t.data);if(l.success){const a=l.output.payload.requestId;Promise.resolve().then(()=>e(l.output.payload)).then(o=>{this.client.send({type:"plugin.message.response",payload:{requestId:a,success:!0,data:o}})}).catch(o=>{console.error("[SDK] Error in plugin.onMessage handler:",o),this.client.send({type:"plugin.message.response",payload:{requestId:a,success:!1,error:o instanceof Error?o.message:String(o)}})})}else console.error("[SDK] Invalid plugin.message payload:",l.issues)}}),sendBroadcast:async e=>{const t=await this.client.sendRequest("plugin.sendBroadcast",{message:e},bf.Request,bf.Response);if(!t.success)throw new Error(t.error||"Failed to send broadcast")},onBroadcast:e=>this.client.subscribe(t=>{const{type:i}=t.data||{};if(i==="plugin.broadcast"){const l=Kn(tg.Event,t.data);l.success?e(l.output.payload):console.error("[SDK] Invalid plugin.broadcast payload:",l.issues)}})};storage={getSecret:async e=>{const t=await this.client.sendRequest("storage.getSecret",{key:e},Sf.Request,Sf.Response);if(t.success)return t.value;throw new Error(t.error||"Failed to get secret")},setSecret:async(e,t)=>{const i=await this.client.sendRequest("storage.setSecret",{key:e,value:t},kf.Request,kf.Response);if(!i.success)throw new Error(i.error||"Failed to set secret")},deleteSecret:async e=>{const t=await this.client.sendRequest("storage.deleteSecret",{key:e},xf.Request,xf.Response);if(!t.success)throw new Error(t.error||"Failed to delete secret")}};logs={createChannel:e=>new dC(e,this.logAdapters),debug:e=>this.primaryLogChannel.debug(e),info:e=>this.primaryLogChannel.info(e),warn:e=>this.primaryLogChannel.warn(e),error:e=>this.primaryLogChannel.error(e)};llm={listTools:async()=>{const e=await this.client.sendRequest("llm.tool.list",{},vf.Request,vf.Response);if(e.success)return e.tools;throw new Error(e.error||"Failed to list tools")},executeTool:async(e,t)=>{const i=await this.client.sendRequest("llm.tool.execute",{toolId:e,arguments:t},wf.Request,wf.Response);if(i.success)return i.result;throw new Error(i.error||"Failed to execute tool")},registerTool:async e=>{this.toolHandlers.set(e.name,e.handler),this.ensureToolCallListener();const t=await this.client.sendRequest("llm.tool.register",{name:e.name,description:e.description,parameters:e.parameters,timeoutMs:e.timeoutMs},Tf.Request,Tf.Response);if(t.success&&t.toolId)return t.toolId;throw this.toolHandlers.delete(e.name),new Error(t.error||"Failed to register tool")},unregisterTool:async e=>{const t=await this.client.sendRequest("llm.tool.unregister",{name:e},Mf.Request,Mf.Response);if(t.success)this.toolHandlers.delete(e);else throw new Error(t.error||"Failed to unregister tool")}};ensureToolCallListener(){this.toolCallUnsubscribe||(this.toolCallUnsubscribe=this.client.subscribe(async e=>{const{type:t}=e.data||{};if(t==="llm.tool.call"){const i=Kn(ng.Request,e.data);if(i.success){const{toolName:l,arguments:a}=i.output.payload,o=i.output.payload.requestId,c=this.toolHandlers.get(l);if(c)try{const f=await Promise.resolve(c(a));this.client.send({type:"llm.tool.call.response",payload:{requestId:o,success:!0,result:f}})}catch(f){this.client.send({type:"llm.tool.call.response",payload:{requestId:o,success:!1,error:f instanceof Error?f.message:String(f)}})}else this.client.send({type:"llm.tool.call.response",payload:{requestId:o,success:!1,error:`No handler registered for tool: ${l}`}})}else console.error("[SDK] Invalid llm.tool.call payload:",i.issues)}}))}}const Qi=new u6;Qi.init();function c6(){const[n,e]=$t.useState(""),[t,i]=$t.useState(!0),[l,a]=$t.useState(null),[o,c]=$t.useState(null),f=$t.useRef(null),d=$t.useRef(null),p=$t.useRef(null),g=$t.useRef("");$t.useEffect(()=>{p.current=o},[o]),$t.useEffect(()=>{g.current=n},[n]);const b=$t.useCallback(async()=>{const x=p.current;if(x)try{const v=await Qi.vfs.readFile(x);e(v),g.current=v,f.current?.action(M=>{M.set(No,v)})}catch(v){console.error("Failed to reload file:",v)}},[]);$t.useEffect(()=>{const v=new URLSearchParams(window.location.search).get("file");let M,T;if(v){c(v),i(!0),Qi.vfs.readFile(v).then(L=>{e(L),g.current=L,i(!1)}).catch(L=>{a(L instanceof Error?L.message:"Failed to read file"),i(!1)}),Qi.fs.subscribe().catch(console.error),M=Qi.fs.onFileChanged(L=>{const P=L.payload.path,ee=p.current;ee&&P===ee&&(console.log("File changed externally, reloading:",P),b())}),T=Qi.document.onSaveRequested(async()=>g.current);const Q=L=>{(L.ctrlKey||L.metaKey)&&L.key==="s"&&(L.preventDefault(),Qi.document.requestSave().catch(P=>{console.error("Failed to save:",P)}))};return window.addEventListener("keydown",Q),()=>{M?.(),T?.(),window.removeEventListener("keydown",Q),Qi.fs.unsubscribe().catch(console.error)}}else{i(!1),e("# No file specified");return}},[b]);const S=$t.useCallback(x=>{const v=g.current;e(x),g.current=x,x!==v&&Qi.document.edited("content changed").catch(M=>{console.error("Failed to notify document edit:",M)})},[]);return $t.useEffect(()=>!d.current||t?void 0:(_g.make().config(v=>{v.set(Jc,d.current),v.set(No,n),v.update(Ao,M=>({...M,attributes:{class:"editor",spellcheck:"false"}})),v.get(Wm).markdownUpdated((M,T)=>{S(T)})}).use(H_).use(VL).use($L).use($T).use(tM).create().then(v=>{f.current=v}),()=>{f.current?.destroy(),f.current=null}),[t,n,S]),t?ri.jsx("div",{className:"loading-container",children:ri.jsxs("div",{className:"loading-content",children:[ri.jsx("span",{className:"loading"}),ri.jsx("span",{className:"loading-text",children:"Loading document..."})]})}):l?ri.jsx("div",{className:"error-container",children:ri.jsx("div",{className:"error-content",children:ri.jsxs("span",{children:["Error: ",l]})})}):ri.jsx("div",{className:"editor-wrapper",children:ri.jsx("div",{ref:d,className:"milkdown-editor","data-testid":"markdown-editor-container"})})}IN.createRoot(document.getElementById("root")).render(ri.jsx(AN.StrictMode,{children:ri.jsx(c6,{})}));
